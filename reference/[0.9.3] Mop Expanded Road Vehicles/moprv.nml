/* Test set of dual-mode trucks and buses in OGFX+RVs style.  The ultimate goal is to become part of OGFX+RVs should NRT become part of OpenTTD Trunk. This work is released under the terms of GPLv2 */


grf {
    grfid: "DE\06\02";
    name: string(STR_GRF_NAME);
    desc: string(STR_GRF_DESCRIPTION);
    version: 93;
    min_compatible_version: 60;




/* Parameters */

//Set capacities
param 0 {
    param_capacity {
        type: int;
        name: string(STR_PARAM_NAME_CAP);
        desc: string(STR_PARAM_DESC_CAP);
        min_value: 2;
        max_value: 4;
        def_value: 2;
        names: {
            2: string(STR_PARAM_VALUE_CAP_TTD);
            3: string(STR_PARAM_VALUE_CAP_MED);
            4: string(STR_PARAM_VALUE_CAP_HIGH);
        };
    }
}

//Adjust Running Costs
param 1 {
    param_runcost {
        type: int;
        name: string(STR_PARAM_NAME_RUNCOST);
        desc: string(STR_PARAM_DESC_RUNCOST);
        min_value: 1;
        max_value: 4;
        def_value: 2;
        names: {
            1: string(STR_PARAM_VALUE_RUNCOST_EASY);            
            2: string(STR_PARAM_VALUE_RUNCOST_TTDISH);
            3: string(STR_PARAM_VALUE_RUNCOST_HARD);
            4: string(STR_PARAM_VALUE_RUNCOST_HARDER);
        };
    }
}

//Adjust Purchase Costs
param 2 {
    param_buycost {
        type: int;
        name: string(STR_PARAM_NAME_BUYCOST);
        desc: string(STR_PARAM_DESC_BUYCOST);
        min_value: 3;
        max_value: 6;
        def_value: 4;
        names: {
            3: string(STR_PARAM_VALUE_RUNCOST_EASY);            
            4: string(STR_PARAM_VALUE_RUNCOST_TTDISH);
            5: string(STR_PARAM_VALUE_RUNCOST_HARD);
            6: string(STR_PARAM_VALUE_RUNCOST_HARDER);
        };
    }
}

//Electric RV selection
param 3 { 
    param_elrv { 
        name: string(STR_PARAM_NAME_ELRV);
        desc: string(STR_PARAM_DESC_ELRV);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}
//FUEL RV selection
param 4 { 
    param_ffrv { 
        name: string(STR_PARAM_NAME_FFRV);
        desc: string(STR_PARAM_DESC_FFRV);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}

//Road Train RV selection
param 5 { 
    param_hrv { 
        name: string(STR_PARAM_NAME_HRV);
        desc: string(STR_PARAM_DESC_HRV);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}


//Steam RV selection
param 6 { 
    param_srv { 
        name: string(STR_PARAM_NAME_SRV);
        desc: string(STR_PARAM_DESC_SRV);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}

//Electric tram selection
param 7 { 
    param_eltv { 
        name: string(STR_PARAM_NAME_ELTV);
        desc: string(STR_PARAM_DESC_ELTV);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}
//FUEL tram selection
param 8 { 
    param_fftv { 
        name: string(STR_PARAM_NAME_FFTV);
        desc: string(STR_PARAM_DESC_FFTV);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}

//Industrial Train selection
param 9 { 
    param_htv { 
        name: string(STR_PARAM_NAME_HTV);
        desc: string(STR_PARAM_DESC_HTV);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}


//Steam tram selection
param 10 { 
    param_stv { 
        name: string(STR_PARAM_NAME_STV);
        desc: string(STR_PARAM_DESC_STV);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}

//cargo aging
param 11 { 
    param_aging { 
        name: string(STR_PARAM_NAME_AGE);
        desc: string(STR_PARAM_DESC_AGE);
        min_value: 0;
        max_value: 3;
        def_value: 1;
        names: {
            0: string(STR_PARAM_VALUE_AGE_EASY);            
            1: string(STR_PARAM_VALUE_AGE_NORMAL);
            2: string(STR_PARAM_VALUE_AGE_HARD);
            3: string(STR_PARAM_VALUE_AGE_HARDER);
    };
}
}

//Cable Tram selection
param 12 { 
    param_func { 
        name: string(STR_PARAM_NAME_FUNC);
        desc: string(STR_PARAM_DESC_FUNC);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}


//Light vehicle selection
param 13 { 
    param_ltrv { 
        name: string(STR_PARAM_NAME_LTRV);
        desc: string(STR_PARAM_DESC_LTRV);
        type: bool;
        def_value: 1;
        bit:  1; // uses 1st bit
    }
}

// Used to change Steam Gen1 and Gen2 introduction years for earlier start.
param 14 { 
    param_fgei { 
        name: string(STR_PARAM_NAME_FGEI);
        desc: string(STR_PARAM_DESC_FGEI);
        min_value: 0;
        max_value: 2;
        def_value: 0;
        names: {
            0: string(STR_PARAM_FGEI_VALUE_ORIG);
            1: string(STR_PARAM_FGEI_VALUE_1830);
            2: string(STR_PARAM_FGEI_VALUE_1800);
        };
    }
}
}



roadtypetable { ROAD, ELRD, CBRE, PVRE, ISRE, EGRV, ELAS } //roadtype translation table 

tramtypetable { RAIL, ELRL, FUNC } //tramtype translation table 

disable_item(FEAT_ROADVEHS); // disable default road vehicles

/* ======= trucks ======= */


//template

/* Sprite template for a semi cab */
template tmpl_cab() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 0,      0,        8,    22,      -3,       -14]
    [ 16,     0,       20,    20,     -14,       -11]
    [ 48,     0,       28,    16,     -17,       -10]
    [ 96,     0,       20,    20,      -6,       -11]
    [ 128,    0,        8,    22,      -3,       -14]
    [ 144,    0,       20,    20,     -14,       -11]
    [ 176,    0,       28,    16,     -11,       -10]
    [ 224,    0,       20,    20,      -6,       -11]
}

/* Sprite template for a 7/8 length truck */
template tmpl_7() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 0,      0,        8,    22,      -3,       -14]
    [ 16,     0,       20,    20,     -14,       -11]
    [ 48,     0,       28,    16,     -14,       -10]
    [ 96,     0,       20,    20,      -6,       -11]
    [ 128,    0,        8,    22,      -3,       -14]
    [ 144,    0,       20,    20,     -14,       -11]
    [ 176,    0,       28,    16,     -14,       -10]
    [ 224,    0,       20,    20,      -6,       -11]
}

/* Sprite template for a short trailer */
template tmpl_short() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 0,      0,        8,    22,      -3,       -17]
    [ 16,     0,       20,    20,     -10,       -13]
    [ 48,     0,       28,    16,      -8,       -10]
    [ 96,     0,       20,    20,      -3,        -9]
    [ 128,    0,        8,    22,      -3,       -11]
    [ 144,    0,       20,    20,     -17,        -9]
    [ 176,    0,       28,    16,     -20,       -10]
    [ 224,    0,       20,    20,      -10,      -13]
}

/* Sprite template for a very short trailer */
template tmpl_wag() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 0,      0,        8,    22,      -3,      -12]
    [ 16,     0,       20,    20,      -6,      -14]
    [ 48,     0,       28,    16,      -2,       -8]
    [ 96,     0,       20,    20,       2,       -8]
    [ 128,    0,        8,    22,      -3,       -7]
    [ 144,    0,       20,    20,     -20,       -8]
    [ 176,    0,       28,    16,     -26,       -8]
    [ 224,    0,       20,    20,     -12,      -14]
}

/* Sprite template for a 8/8 vehicle */
template tmpl_8() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 0,      0,        8,    23,      -3,       -11]
    [ 14,     0,       22,    20,     -14,       -11]
    [ 48,     0,       32,    16,     -16,       -10]
    [ 94,     0,       22,    20,      -6,       -11]
    [ 128,    0,        8,    23,      -3,       -11]
    [ 144,    0,       22,    20,     -14,       -11]
    [ 176,    0,       32,    16,     -16,       -10]
    [ 224,    0,       22,    20,      -6,       -11]
}

/* Sprite template for a 3/8 vehicle */
template tmpl_3() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 0,      0,        8,    22,      -4,       -12]
    [ 26,     0,       10,    17,      -5,       -14]
    [ 64,     0,       12,    16,      -6,       -14]
    [ 106,    0,       10,    20,      -5,       -16]
    [ 128,    0,        8,    22,      -4,       -18]
    [ 144,    0,       10,    20,      -5,       -16]
    [ 176,    0,       12,    16,      -6,       -10]
    [ 224,    0,       10,    20,      -5,       -11]
}


/* Sprite template for purchase menu */
template tmpl_p() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 0,      0,       76,    16,     -16,      -10]
}
        



/* === common values === */

/* Visual Effect Switches */

    switch (FEAT_ROADVEHS, SELF, switch_truck_smoke, (position_in_consist)) { // spawn smoke for truck cabs only
        0:          return visual_effect( VISUAL_EFFECT_STEAM, 0);
        1..4:           return visual_effect( VISUAL_EFFECT_DISABLE, 0);
        default:    return visual_effect( VISUAL_EFFECT_DISABLE, 0);
    }

    switch (FEAT_ROADVEHS, SELF, switch_truck_exhaust, (position_in_consist)) { // spawn smoke for truck cabs only
        0:          return visual_effect( VISUAL_EFFECT_DIESEL, 0);
        1..4:           return visual_effect( VISUAL_EFFECT_DISABLE, 0);
        default:    return visual_effect( VISUAL_EFFECT_DISABLE, 0);
    }

    switch (FEAT_ROADVEHS, SELF, switch_truck_spark, (position_in_consist)) { // spawn sparks for truck cabs only
        0:          return visual_effect( VISUAL_EFFECT_ELECTRIC, -1);
        1..4:           return visual_effect( VISUAL_EFFECT_DISABLE, 0);
        default:    return visual_effect( VISUAL_EFFECT_DISABLE, 0);
    }

    switch (FEAT_ROADVEHS, SELF, switch_bus_exhaust, (position_in_consist_from_end)) { // spawn smoke for bus at rear only
        0:          return visual_effect( VISUAL_EFFECT_DIESEL, 6);
        1:          return visual_effect( VISUAL_EFFECT_DISABLE, 0);
        default:    return visual_effect( VISUAL_EFFECT_DISABLE, 0);
    }

    switch (FEAT_ROADVEHS, SELF, switch_bus_spark, (position_in_consist)) { // spawn sparks for at front center only
        0:          return visual_effect( VISUAL_EFFECT_ELECTRIC, 2);
        1:          return visual_effect( VISUAL_EFFECT_DISABLE, 0);
        default:    return visual_effect( VISUAL_EFFECT_DISABLE, 0);
    }

    switch (FEAT_ROADVEHS, SELF, switch_spark_dx, (tile_powers_roadtype("ELRD"))) { // SHOW SPARKS NOT SMOKE under wires
        1:   switch_truck_spark;
        default:    switch_truck_exhaust;
    }

    switch (FEAT_ROADVEHS, SELF, switch_spark_d_bus, (tile_powers_roadtype("ELRD"))) { // SHOW SPARKS NOT SMOKE under wires
        1:   switch_bus_spark;
        default:    switch_bus_exhaust;
    }

/* Cost & power Switches */

/* Body and Trailer cost switches */

//truck purchase costs

switch (FEAT_ROADVEHS, SELF, buycost_fd_truck, current_year ) {  // purchase cost for first steam truck, introduced 1860
        0..1874:        ((param_buycost*115)/4);
        1875..1889:     ((param_buycost*110)/4);             
        1890..1904:     ((param_buycost*105)/4);
        1905..1919:     ((param_buycost*110)/4);
        default:        ((param_buycost*120)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_fc_truck, current_year ) {  // purchase cost for second steam truck, introduced 1895
        0..1909:        ((param_buycost*125)/4);
        1910..1924:     ((param_buycost*120)/4);             
        1925..1939:     ((param_buycost*125)/4);
        1940..1959:     ((param_buycost*130)/4);
        default:        ((param_buycost*135)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_fb_truck, current_year ) {  // purchase cost for first gasoline truck, introduced 1910
        0..1924:           ((param_buycost*90)/4);
        1925..1934:     ((param_buycost*88)/4);             
        1935..1944:     ((param_buycost*86)/4);
        1945..1954:     ((param_buycost*84)/4);
        default:        ((param_buycost*82)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_fa_truck, current_year ) {  // purchase cost for second gasoline truck, introduced 1929
        0..1939:           ((param_buycost*100)/4);
        1940..1949:     ((param_buycost*97)/4);             
        1950..1959:     ((param_buycost*94)/4);
        1960..1964:     ((param_buycost*91)/4);
        default:        ((param_buycost*88)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_f1_truck, current_year ) {  // purchase cost for first diesel truck, introduced 1945
        0..1954:        ((param_buycost*120)/4);
        1955..1964:     ((param_buycost*115)/4);             
        1965..1974:     ((param_buycost*110)/4);
        1975..1984:     ((param_buycost*105)/4);
        default:        ((param_buycost*100)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_f2_truck, current_year ) {  // purchase cost for second diesel truck, introduced 1957
        0..1966:           ((param_buycost*140)/4);
        1967..1976:     ((param_buycost*135)/4);             
        1977..1986:     ((param_buycost*130)/4);
        default:        ((param_buycost*125)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_f3_truck, current_year ) {  // purchase cost for third diesel truck, introduced 1985
        0..1994:           ((param_buycost*160)/4);
        1995..2004:     ((param_buycost*155)/4);             
        2005..2014:     ((param_buycost*150)/4);
        default:        ((param_buycost*145)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_f4_truck, current_year ) {  // purchase cost for fourth diesel truck, introduced 2015
        0..2024:           ((param_buycost*180)/4);
        2025..2039:     ((param_buycost*175)/4);             
        2040..2054:     ((param_buycost*170)/4);
        default:        ((param_buycost*165)/4);
}
/*
switch (FEAT_ROADVEHS, SELF, buycost_cfd_truck, current_year ) {  // purchase cost for first steam semi-truck, introduced 1860
        0..1874:        ((param_buycost*125)/4);
        1875..1889:     ((param_buycost*120)/4);             
        1890..1904:     ((param_buycost*115)/4);
        1905..1919:     ((param_buycost*120)/4);
        default:        ((param_buycost*130)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_cfc_truck, current_year ) {  // purchase cost for second steam semi-truck, introduced 1895
        0..1909:        ((param_buycost*135)/4);
        1910..1924:     ((param_buycost*130)/4);             
        1925..1939:     ((param_buycost*135)/4);
        1940..1959:     ((param_buycost*140)/4);
        default:        ((param_buycost*145)/4);
}
*/
switch (FEAT_ROADVEHS, SELF, buycost_cfb_truck, current_year ) {  // purchase cost for first gasoline semi-truck, introduced 1910
        0..1924:           ((param_buycost*100)/4);
        1925..1934:     ((param_buycost*98)/4);             
        1935..1944:     ((param_buycost*96)/4);
        1945..1954:     ((param_buycost*94)/4);
        default:        ((param_buycost*92)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_cfa_truck, current_year ) {  // purchase cost for second gasoline semi-truck, introduced 1929
        0..1939:           ((param_buycost*110)/4);
        1940..1949:     ((param_buycost*107)/4);             
        1950..1959:     ((param_buycost*104)/4);
        1960..1964:     ((param_buycost*101)/4);
        default:        ((param_buycost*98)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_cf1_truck, current_year ) {  // purchase cost for first diesel semi-truck, introduced 1945
        0..1954:        ((param_buycost*130)/4);
        1955..1964:     ((param_buycost*125)/4);             
        1965..1974:     ((param_buycost*120)/4);
        1975..1984:     ((param_buycost*115)/4);
        default:        ((param_buycost*110)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_cf2_truck, current_year ) {  // purchase cost for second diesel semi-truck, introduced 1957
        0..1966:           ((param_buycost*150)/4);
        1967..1976:     ((param_buycost*145)/4);             
        1977..1986:     ((param_buycost*140)/4);
        default:        ((param_buycost*135)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_cf3_truck, current_year ) {  // purchase cost for third diesel semi-truck, introduced 1985
        0..1994:           ((param_buycost*170)/4);
        1995..2004:     ((param_buycost*165)/4);             
        2005..2014:     ((param_buycost*160)/4);
        default:        ((param_buycost*155)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_cf4_truck, current_year ) {  // purchase cost for fourth diesel semi-truck, introduced 2015
        0..2024:           ((param_buycost*190)/4);
        2025..2039:     ((param_buycost*185)/4);             
        2040..2054:     ((param_buycost*180)/4);
        default:        ((param_buycost*175)/4);
}
/*
switch (FEAT_ROADVEHS, SELF, buycost_hfd_truck, current_year ) {  // purchase cost for first steam road train, introduced 1860
        0..1874:        ((param_buycost*125)/2);
        1875..1889:     ((param_buycost*120)/2);             
        1890..1904:     ((param_buycost*115)/2);
        1905..1919:     ((param_buycost*120)/2);
        default:        ((param_buycost*130)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_hfc_truck, current_year ) {  // purchase cost for second steam road train, introduced 1895
        0..1909:        ((param_buycost*135)/2);
        1910..1924:     ((param_buycost*130)/2);             
        1925..1939:     ((param_buycost*135)/2);
        1940..1959:     ((param_buycost*140)/2);
        default:        ((param_buycost*145)/2);
}
*/
switch (FEAT_ROADVEHS, SELF, buycost_hfb_truck, current_year ) {  // purchase cost for first gasoline road train, introduced 1910
        0..1924:           ((param_buycost*100)/2);
        1925..1934:     ((param_buycost*98)/2);             
        1935..1944:     ((param_buycost*96)/2);
        1945..1954:     ((param_buycost*94)/2);
        default:        ((param_buycost*92)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_hfa_truck, current_year ) {  // purchase cost for second gasoline road train, introduced 1929
        0..1939:           ((param_buycost*110)/2);
        1940..1949:     ((param_buycost*107)/2);             
        1950..1959:     ((param_buycost*104)/2);
        1960..1964:     ((param_buycost*101)/2);
        default:        ((param_buycost*98)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_hf1_truck, current_year ) {  // purchase cost for first diesel road train, introduced 1945
        0..1954:        ((param_buycost*130)/2);
        1955..1964:     ((param_buycost*125)/2);             
        1965..1974:     ((param_buycost*120)/2);
        1975..1984:     ((param_buycost*115)/2);
        default:        ((param_buycost*110)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_hf2_truck, current_year ) {  // purchase cost for second diesel road train, introduced 1957
        0..1966:           ((param_buycost*150)/2);
        1967..1976:     ((param_buycost*145)/2);             
        1977..1986:     ((param_buycost*140)/2);
        default:        ((param_buycost*135)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_hf3_truck, current_year ) {  // purchase cost for third diesel road train, introduced 1985
        0..1994:           ((param_buycost*170)/2);
        1995..2004:     ((param_buycost*165)/2);             
        2005..2014:     ((param_buycost*160)/2);
        default:        ((param_buycost*155)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_hf4_truck, current_year ) {  // purchase cost for fourth diesel road train, introduced 2015
        0..2024:           ((param_buycost*190)/2);
        2025..2039:     ((param_buycost*185)/2);             
        2040..2054:     ((param_buycost*180)/2);
        default:        ((param_buycost*175)/2);
}

switch (FEAT_ROADVEHS, SELF, buycost_t1_truck, current_year ) {  // purchase cost for first trolley truck, introduced 1930
        0..1944:        ((param_buycost*108)/4);
        1945..1959:     ((param_buycost*103)/4);             
        1960..1974:     ((param_buycost*98)/4);
        1975..1989:     ((param_buycost*93)/4);
        default:        ((param_buycost*88)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_t2_truck, current_year ) {  // purchase cost for second trolley truck, introduced 1960
        0..1974:        ((param_buycost*128)/4);
        1975..1989:     ((param_buycost*123)/4);             
        1990..2004:     ((param_buycost*118)/4);
        2005..2014:     ((param_buycost*113)/4);
        default:        ((param_buycost*108)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_t3_truck, current_year ) {  // purchase cost for third trolley truck, introduced 1990
        0..2004:        ((param_buycost*138)/4);
        2005..2019:     ((param_buycost*133)/4);             
        2020..2034:     ((param_buycost*128)/4);
        2035..2049:     ((param_buycost*123)/4);
        default:        ((param_buycost*118)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_t4_truck, current_year ) {  // purchase cost for fourth trolley truck, introduced 2020
        0..2034:        ((param_buycost*158)/4);
        2035..2049:     ((param_buycost*153)/4);             
        2050..2064:     ((param_buycost*148)/4);
        2065..2079:     ((param_buycost*143)/4);
        default:        ((param_buycost*138)/4);
}

switch (FEAT_ROADVEHS, SELF, buycost_ct1_truck, current_year ) {  // purchase cost for first trolley semi-truck, introduced 1930
        0..1944:        ((param_buycost*118)/4);
        1945..1959:     ((param_buycost*113)/4);             
        1960..1974:     ((param_buycost*108)/4);
        1975..1989:     ((param_buycost*103)/4);
        default:        ((param_buycost*98)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_ct2_truck, current_year ) {  // purchase cost for second trolley semi-truck, introduced 1960
        0..1974:        ((param_buycost*138)/4);
        1975..1989:     ((param_buycost*133)/4);             
        1990..2004:     ((param_buycost*128)/4);
        2005..2014:     ((param_buycost*123)/4);
        default:        ((param_buycost*118)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_ct3_truck, current_year ) {  // purchase cost for third trolley semi-truck, introduced 1990
        0..2004:        ((param_buycost*148)/4);
        2005..2019:     ((param_buycost*143)/4);             
        2020..2034:     ((param_buycost*138)/4);
        2035..2049:     ((param_buycost*133)/4);
        default:        ((param_buycost*128)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_ct4_truck, current_year ) {  // purchase cost for fourth trolley semi-truck, introduced 2020
        0..2034:        ((param_buycost*168)/4);
        2035..2049:     ((param_buycost*163)/4);             
        2050..2064:     ((param_buycost*148)/4);
        2065..2079:     ((param_buycost*143)/4);
        default:        ((param_buycost*138)/4);
}

switch (FEAT_ROADVEHS, SELF, buycost_ht1_truck, current_year ) {  // purchase cost for first trolley road train, introduced 1930
        0..1944:        ((param_buycost*118)/2);
        1945..1959:     ((param_buycost*113)/2);             
        1960..1974:     ((param_buycost*108)/2);
        1975..1989:     ((param_buycost*103)/2);
        default:        ((param_buycost*98)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_ht2_truck, current_year ) {  // purchase cost for second trolley road train, introduced 1960
        0..1974:        ((param_buycost*138)/2);
        1975..1989:     ((param_buycost*133)/2);             
        1990..2004:     ((param_buycost*128)/2);
        2005..2014:     ((param_buycost*123)/2);
        default:        ((param_buycost*118)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_ht3_truck, current_year ) {  // purchase cost for third trolley road train, introduced 1990
        0..2004:        ((param_buycost*148)/2);
        2005..2019:     ((param_buycost*143)/2);             
        2020..2034:     ((param_buycost*138)/2);
        2035..2049:     ((param_buycost*133)/2);
        default:        ((param_buycost*128)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_ht4_truck, current_year ) {  // purchase cost for fourth trolley road train, introduced 2020
        0..2034:        ((param_buycost*168)/2);
        2035..2049:     ((param_buycost*163)/2);             
        2050..2064:     ((param_buycost*148)/2);
        2065..2079:     ((param_buycost*143)/2);
        default:        ((param_buycost*138)/2);
}


switch (FEAT_ROADVEHS, SELF, buycost_d3_truck, current_year ) {  // purchase cost for first bi-mode truck, introduced 1995
        0..2009:        ((param_buycost*165)/4);
        2010..2024:     ((param_buycost*160)/4);             
        2025..2039:     ((param_buycost*155)/4);
        2040..2054:     ((param_buycost*150)/4);
        default:        ((param_buycost*145)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_d4_truck, current_year ) {  // purchase cost for second bi-mode truck, introduced 2025
        0..2039:        ((param_buycost*185)/4);
        2040..2054:     ((param_buycost*180)/4);             
        2055..2069:     ((param_buycost*175)/4);
        2070..2084:     ((param_buycost*170)/4);
        default:        ((param_buycost*165)/4);
}


switch (FEAT_ROADVEHS, SELF, buycost_cd3_truck, current_year ) {  // purchase cost for first bi-mode semi-truck, introduced 1995
        0..2009:        ((param_buycost*175)/4);
        2010..2024:     ((param_buycost*170)/4);             
        2025..2039:     ((param_buycost*165)/4);
        2040..2054:     ((param_buycost*160)/4);
        default:        ((param_buycost*155)/4);
}
switch (FEAT_ROADVEHS, SELF, buycost_cd4_truck, current_year ) {  // purchase cost for second bi-mode semi-truck, introduced 2025
        0..2039:        ((param_buycost*195)/4);
        2040..2054:     ((param_buycost*190)/4);             
        2055..2069:     ((param_buycost*185)/4);
        2070..2084:     ((param_buycost*180)/4);
        default:        ((param_buycost*175)/4);
}


switch (FEAT_ROADVEHS, SELF, buycost_hd3_truck, current_year ) {  // purchase cost for first bi-mode road train, introduced 1995
        0..2009:        ((param_buycost*175)/2);
        2010..2024:     ((param_buycost*170)/2);             
        2025..2039:     ((param_buycost*165)/2);
        2040..2054:     ((param_buycost*160)/2);
        default:        ((param_buycost*155)/2);
}
switch (FEAT_ROADVEHS, SELF, buycost_hd4_truck, current_year ) {  // purchase cost for second bi-mode road train, introduced 2025
        0..2039:        ((param_buycost*195)/2);
        2040..2054:     ((param_buycost*190)/2);             
        2055..2069:     ((param_buycost*185)/2);
        2070..2084:     ((param_buycost*180)/2);
        default:        ((param_buycost*175)/2);
}

//truck running costs

switch (FEAT_ROADVEHS, SELF, switch_powercost_fd_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*72)/2);
        default:        ((param_runcost*62)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_fc_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*88)/2);
        default:        ((param_runcost*76)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_fb_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*55)/2);
        default:        ((param_runcost*43)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_fa_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*65)/2);
        default:        ((param_runcost*50)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_f1_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*81)/2);
        default:        ((param_runcost*63)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_f2_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*110)/2);
        default:        ((param_runcost*82)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_f3_truck, current_speed < current_max_speed) {
        1:              ((param_runcost*152)/2);       
        default:        ((param_runcost*119)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_f4_truck, current_speed < current_max_speed) {
        1:              ((param_runcost*168)/2);
        default:        ((param_runcost*125)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_cfd_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*78)/2);
        default:        ((param_runcost*67)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_cfc_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*93)/2);
        default:        ((param_runcost*80)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_cfb_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*58)/2);
        default:        ((param_runcost*45)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_cfa_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*68)/2);
        default:        ((param_runcost*51)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_cf1_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*83)/2);
        default:        ((param_runcost*63)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_cf2_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*116)/2);
        default:        ((param_runcost*86)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_cf3_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*159)/2);
        default:        ((param_runcost*124)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_cf4_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*176)/2);
        default:        ((param_runcost*131)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_hfd_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*115)/2);
        default:        ((param_runcost*103)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_hfc_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*139)/2);
        default:        ((param_runcost*124)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_hfb_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*89)/2);
        default:        ((param_runcost*74)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_hfa_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*102)/2);
        default:        ((param_runcost*84)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_hf1_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*131)/2);
        default:        ((param_runcost*109)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_hf2_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*171)/2);
        default:        ((param_runcost*139)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_hf3_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*220)/2);
        default:        ((param_runcost*183)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_hf4_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*247)/2);
        default:        ((param_runcost*200)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_t1_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*68)/2);
        default:        ((param_runcost*56)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_t2_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*97)/2);
        default:        ((param_runcost*78)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_t3_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*139)/2);
        default:        ((param_runcost*117)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_t4_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*115)/2);
        default:        ((param_runcost*91)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_ct1_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*70)/2);
        default:        ((param_runcost*57)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_ct2_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*103)/2);
        default:        ((param_runcost*83)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_ct3_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*146)/2);
        default:        ((param_runcost*123)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_ct4_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*122)/2);
        default:        ((param_runcost*97)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_ht1_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*112)/2);
        default:        ((param_runcost*97)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_ht2_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*149)/2);
        default:        ((param_runcost*128)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_ht3_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*197)/2);
        default:        ((param_runcost*172)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_ht4_truck, current_speed < current_max_speed ) {        
        1:              ((param_runcost*178)/2);
        default:        ((param_runcost*151)/2);
}

switch (FEAT_ROADVEHS, SELF, switch_runcost_fd_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_fd_truck;
        1:        ((param_runcost*57)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_fc_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_fc_truck;
        1:        ((param_runcost*69)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_fb_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_fb_truck;
        1:        ((param_runcost*32)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_fa_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_fa_truck;
        1:        ((param_runcost*35)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_f1_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_f1_truck;
        1:        ((param_runcost*44)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_f2_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_f2_truck;
        1:        ((param_runcost*53)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_f3_truck, vehicle_is_stopped) {
        0:              switch_powercost_f3_truck;       
        1:        ((param_runcost*86)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_f4_truck, vehicle_is_stopped) {
        0:              switch_powercost_f4_truck;
        1:        ((param_runcost*81)/2);
}
/*
switch (FEAT_ROADVEHS, SELF, switch_runcost_cfd_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_cfd_truck;
        1:        ((param_runcost*61)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_cfc_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_cfc_truck;
        1:        ((param_runcost*73)/2);
}
*/
switch (FEAT_ROADVEHS, SELF, switch_runcost_cfb_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_cfb_truck;
        1:        ((param_runcost*31)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_cfa_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_cfa_truck;
        1:        ((param_runcost*35)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_cf1_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_cf1_truck;
        1:        ((param_runcost*43)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_cf2_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_cf2_truck;
        1:        ((param_runcost*56)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_cf3_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_cf3_truck;
        1:        ((param_runcost*89)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_cf4_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_cf4_truck;
        1:        ((param_runcost*86)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_hfd_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_hfd_truck;
        1:        ((param_runcost*97)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_hfc_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_hfc_truck;
        1:        ((param_runcost*117)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_hfb_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_hfb_truck;
        1:        ((param_runcost*59)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_hfa_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_hfa_truck;
        1:        ((param_runcost*65)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_hf1_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_hf1_truck;
        1:        ((param_runcost*87)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_hf2_truck, vehicle_is_stopped ) {        
        0:              ((param_runcost*171)/2);
        1:        ((param_runcost*107)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_hf3_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_hf2_truck;
        1:        ((param_runcost*147)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_hf4_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_hf4_truck;
        1:        ((param_runcost*154)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_t1_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_t1_truck;
        1:        ((param_runcost*44)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_t2_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_t2_truck;
        1:        ((param_runcost*60)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_t3_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_t3_truck;
        1:        ((param_runcost*96)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_t4_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_t4_truck;
        1:        ((param_runcost*68)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_ct1_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_ct1_truck;
        1:        ((param_runcost*43)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_ct2_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_ct2_truck;
        1:        ((param_runcost*63)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_ct3_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_ct3_truck;
        1:        ((param_runcost*99)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_ct4_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_ct4_truck;
        1:        ((param_runcost*72)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_ht1_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_ht1_truck;
        1:        ((param_runcost*82)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_ht2_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_ht2_truck;
        1:        ((param_runcost*106)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_ht3_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_ht3_truck;
        1:        ((param_runcost*147)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_ht4_truck, vehicle_is_stopped ) {        
        0:              switch_powercost_ht4_truck;
        1:        ((param_runcost*124)/2);
}

/* Diesel Switches */

switch (FEAT_ROADVEHS, SELF, switch_power_fd, build_year ) {
        0..1875: 8;
        1876..1890: 9;
        1891..5000000: 10;
        default: 8;     
}

switch (FEAT_ROADVEHS, SELF, switch_power_fc, build_year ) {
        0..1905: 13;
        1906..1920: 14;
        1921..5000000: 16;
        default: 11;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_fb, build_year ) {
        0..1925: 8;
        1926..1940: 9;
        1941..5000000: 10;
        default: 8;     
}

switch (FEAT_ROADVEHS, SELF, switch_power_fa, build_year ) {
        0..1945: 11;
        1946..1960: 12;
        1961..5000000: 13;
        default: 11;        
}


switch (FEAT_ROADVEHS, SELF, switch_power_f1, build_year ) {
        0..1965: 18;
        1966..1985: 20;
        1986..5000000: 22;
        default: 18;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_f2, build_year ) {
        0..1975: 35;
        1976..1990: 37;
        1991..5000000: 39;
        default: 35;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_f3, build_year ) {
        0..2000: 50;
        2001..2015: 52;
        2016..5000000: 54;
        default: 50;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_f4, build_year ) {
        0..2030: 66;
        2031..2045: 68;
        2046..2060: 70;
        2061..5000000: 72;
        default: 66;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_cfb, build_year ) {
        0..1925: 10;
        1926..1940: 11;
        1941..5000000: 12;
        default: 10;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_cfa, build_year ) {
        0..1945: 14;
        1946..1960: 15;
        1961..5000000: 16;
        default: 14;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_cf1, build_year ) {
        0..1965: 21;
        1966..1985: 23;
        1986..5000000: 25;
        default: 21;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_cf2, build_year ) {
        0..1975: 38;
        1976..1990: 40;
        1991..5000000: 42;
        default: 38;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_cf3, build_year ) {
        0..2000: 56;
        2001..2015: 58;
        2016..5000000: 60;
        default: 56;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_cf4, build_year ) {
        0..2030: 72;
        2031..2045: 73;
        2046..2060: 75;
        2061..5000000: 77;
        default: 72;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_hfb, build_year ) {
        0..1925: 11;
        1926..1940: 12;
        1941..5000000: 13;
        default: 11;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_hfa, build_year ) {
        0..1945: 15;
        1946..1960: 16;
        1961..5000000: 17;
        default: 14;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_hf1, build_year ) {
        0..1965: 22;
        1966..1985: 24;
        1986..5000000: 26;
        default: 21;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_hf2, build_year ) {
        0..1975: 41;
        1976..1990: 43;
        1991..5000000: 45;
        default: 38;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_hf3, build_year ) {
        0..2000: 58;
        2001..2015: 60;
        2016..5000000: 62;
        default: 56;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_hf4, build_year ) {
        0..2030: 74;
        2031..2045: 75;
        2046..2060: 77;
        2061..5000000: 79;
        default: 74;        
}

/* Electric Switches */

switch (FEAT_ROADVEHS, SELF, switch_power_t1, build_year ) {
        0..1965: 32;
        1966..1985: 34;
        1986..5000000: 36;
        default: 32;           
}

switch (FEAT_ROADVEHS, SELF, switch_power_t2, build_year ) {
        0..1975: 65;
        1976..1990: 67;
        1991..5000000: 69;
        default: 65;           
}

switch (FEAT_ROADVEHS, SELF, switch_power_t3, build_year ) {
        0..2000: 110;
        2001..2015: 112;
        2016..5000000: 115;
        default: 110;          
}

switch (FEAT_ROADVEHS, SELF, switch_power_t4, build_year ) {
        0..2030: 200;
        2031..2045: 202;
        2046..2060: 205;
        2061..5000000: 207;
        default: 200;          
}

switch (FEAT_ROADVEHS, SELF, switch_power_ct1, build_year ) {
        0..1965: 37;
        1966..1985: 39;
        1986..5000000: 41;
        default: 37;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_ct2, build_year ) {
        0..1975: 70;
        1976..1990: 72;
        1991..5000000: 74;
        default: 70;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_ct3, build_year ) {
        0..2000: 120;
        2001..2015: 122;
        2016..5000000: 125;
        default: 120;       
}

switch (FEAT_ROADVEHS, SELF, switch_power_ct4, build_year ) {
        0..2030: 210;
        2031..2045: 212;
        2046..2060: 215;
        2061..5000000: 220;
        default: 210;       
}

switch (FEAT_ROADVEHS, SELF, switch_power_ht1, build_year ) {
        0..1965: 45;
        1966..1985: 47;
        1986..5000000: 49;
        default: 45;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_ht2, build_year ) {
        0..1975: 78;
        1976..1990: 80;
        1991..5000000: 82;
        default: 78;        
}

switch (FEAT_ROADVEHS, SELF, switch_power_ht3, build_year ) {
        0..2000: 130;
        2001..2015: 132;
        2016..5000000: 135;
        default: 130;       
}

switch (FEAT_ROADVEHS, SELF, switch_power_ht4, build_year ) {
        0..2030: 220;
        2031..2045: 225;
        2046..2060: 230;
        2061..5000000: 235;
        default: 220;       
}

/* Dual Mode Switches */

    switch (FEAT_ROADVEHS, SELF, switch_boost_d3, (tile_powers_roadtype("ELRD"))) { // boost hp under wires
        1: return 120;
        default: return 50;
    }
    switch (FEAT_ROADVEHS, SELF, switch_boost_cd3, (tile_powers_roadtype("ELRD"))) { // boost hp under wires
        1: return 130;
        default: return 56;
    }
        switch (FEAT_ROADVEHS, SELF, switch_boost_hd3, (tile_powers_roadtype("ELRD"))) { // boost hp under wires
        1: return 140;
        default: return 57;
    }
    switch (FEAT_ROADVEHS, SELF, switch_e_cost_d3, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_t3_truck;
        default: return switch_runcost_f3_truck;
    }

    switch (FEAT_ROADVEHS, SELF, switch_e_cost_cd3, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_ct3_truck;
        default: return switch_runcost_cf3_truck;
    }
    switch (FEAT_ROADVEHS, SELF, switch_e_cost_hd3, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_ht3_truck;
        default: return switch_runcost_hf3_truck;
    }
    switch (FEAT_ROADVEHS, SELF, switch_boost_d4, (tile_powers_roadtype("ELRD"))) { // boost hp under wires
        1: return 210;
        default: return 66;
    }
    switch (FEAT_ROADVEHS, SELF, switch_boost_cd4, (tile_powers_roadtype("ELRD"))) { // boost hp under wires
        1: return 220;
        default: return 72;
    }
    switch (FEAT_ROADVEHS, SELF, switch_boost_hd4, (tile_powers_roadtype("ELRD"))) { // boost hp under wires
        1: return 225;
        default: return 75;
    }
    switch (FEAT_ROADVEHS, SELF, switch_e_cost_d4, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_t4_truck;
        default: return switch_runcost_f4_truck;
    }

    switch (FEAT_ROADVEHS, SELF, switch_e_cost_cd4, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_ct4_truck;
        default: return switch_runcost_cf4_truck;
    }

    switch (FEAT_ROADVEHS, SELF, switch_e_cost_hd4, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_ht4_truck;
        default: return switch_runcost_hf4_truck;
    }

    spriteset(spriteset_d_panto_down, "gfx/X/d_panto_01.png") {
        tmpl_7()
    }

    spriteset(spriteset_d_panto_up, "gfx/X/d_panto_02.png") {
        tmpl_7()
    }
        switch (FEAT_ROADVEHS, SELF, switch_d_panto, (tile_powers_roadtype("ELRD"))) { // raise pantograph under wires
        1: return spriteset_d_panto_up;
        default: return spriteset_d_panto_down;
    }

// Trolley Truck pantograph

    spriteset(spriteset_t_pole_up, "gfx/X/t_panto_02.png") {
        tmpl_7()
    }

switch (FEAT_ROADVEHS, SELF, switch_t_panto, build_year ) {
        0..1984: spriteset_t_pole_up;
        1985..5000000: spriteset_d_panto_up;
        default: spriteset_t_pole_up;       
}

// Diesel Truck greeble

    spriteset(spriteset_f_pipe_01, "gfx/X/f_pipe_01.png") {
        tmpl_7()
    }

    spriteset(spriteset_f_pipe_02, "gfx/X/f_pipe_02.png") {
        tmpl_7()
    }

    spriteset(spriteset_f_pipe_03, "gfx/X/f_pipe_03.png") {
        tmpl_7()
    }

    spriteset(spriteset_f_pipe_04, "gfx/X/f_pipe_04.png") {
        tmpl_7()
    }


switch (FEAT_ROADVEHS, SELF, switch_f_pipe_1, random_bits ) {
        0..95: spriteset_f_pipe_01;
        96..210: spriteset_f_pipe_02;
        211..255: spriteset_f_pipe_03;
        default: spriteset_f_pipe_02;
        }


switch (FEAT_ROADVEHS, SELF, switch_f_pipe_2, random_bits ) {
        0..45: spriteset_f_pipe_01;
        46..145: spriteset_f_pipe_02;
        146..155: spriteset_f_pipe_03;
        156..255: spriteset_f_pipe_04;
        default: spriteset_f_pipe_04;
        }

switch (FEAT_ROADVEHS, SELF, switch_f_pipe, build_year ) {
        0..2004: switch_f_pipe_1;
        2005..2019: switch_f_pipe_2;
        2020..5000000: spriteset_f_pipe_04;
        default: switch_f_pipe_1;       
}
/* P Menu Sprites */

//Icons

spriteset(spriteset_steam_icon, "gfx/P/small_steam.png") {
    tmpl_p()
}
spriteset(spriteset_wire_icon, "gfx/P/small_wire.png") {
    tmpl_p()
}
spriteset(spriteset_fuel_icon, "gfx/P/red_can.png") {
    tmpl_p()
}
spriteset(spriteset_green_icon, "gfx/P/green_can.png") {
    tmpl_p()
}
spriteset(spriteset_hybrid_icon, "gfx/P/green_batt.png") {
    tmpl_p()
}
spriteset(spriteset_dual_icon, "gfx/P/dual_can.png") {
    tmpl_p()
}
spriteset(spriteset_dual_batt_icon, "gfx/P/dual_batt.png") {
    tmpl_p()
}
spriteset(spriteset_batt_icon, "gfx/P/batt.png") {
    tmpl_p()
}
spriteset(spriteset_cable_icon, "gfx/P/big_cable.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_steam_icon, build_year ) {
        default: spriteset_steam_icon;       
}
switch (FEAT_ROADVEHS, SELF, switch_wire_icon, build_year ) {
        default: spriteset_wire_icon;       
}
switch (FEAT_ROADVEHS, SELF, switch_fuel_icon, build_year ) {
        0..2030:    spriteset_fuel_icon;
        2031..2050: spriteset_hybrid_icon;
        default:    spriteset_batt_icon;       
}
switch (FEAT_ROADVEHS, SELF, switch_hybrid_icon, build_year ) {
        0..2010:    spriteset_fuel_icon;
        default:    spriteset_hybrid_icon;       
}
switch (FEAT_ROADVEHS, SELF, switch_dual_icon, build_year ) {
        0..2030:    spriteset_dual_icon;
        default:    spriteset_dual_batt_icon;       
}
switch (FEAT_ROADVEHS, SELF, switch_cable_icon, build_year ) {
        default: spriteset_cable_icon;       
}




//Trucks

/* Rigid Trucks */
// Cabs and Bodies

// Cabs
spriteset(spriteset_fd_cab, "gfx/C/o_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_fc_cab, "gfx/C/o_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_fb_cab, "gfx/C/o_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_fa_cab, "gfx/C/o_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_xd_cab, "gfx/C/xo_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_xc_cab, "gfx/C/xo_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_xb_cab, "gfx/C/xo_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_xa_cab, "gfx/C/xo_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_aa_01, "gfx/C/aa_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_aa_02, "gfx/C/aa_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_aa_03, "gfx/C/aa_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_aa_04, "gfx/C/aa_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_ab_01, "gfx/C/ab_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_ab_02, "gfx/C/ab_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_ab_03, "gfx/C/ab_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_ab_04, "gfx/C/ab_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_ac_01, "gfx/C/ac_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_ac_02, "gfx/C/ac_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_ac_03, "gfx/C/ac_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_ac_04, "gfx/C/ac_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_ba_01, "gfx/C/ba_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_ba_02, "gfx/C/ba_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_ba_03, "gfx/C/ba_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_ba_04, "gfx/C/ba_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_bb_01, "gfx/C/bb_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_bb_02, "gfx/C/bb_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_bb_03, "gfx/C/bb_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_bb_04, "gfx/C/bb_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_bc_01, "gfx/C/bc_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_bc_02, "gfx/C/bc_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_bc_03, "gfx/C/bc_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_bc_04, "gfx/C/bc_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_ca_01, "gfx/C/ca_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_ca_02, "gfx/C/ca_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_ca_03, "gfx/C/ca_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_ca_04, "gfx/C/ca_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_cb_01, "gfx/C/cb_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_cb_02, "gfx/C/cb_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_cb_03, "gfx/C/cb_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_cb_04, "gfx/C/cb_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_cc_01, "gfx/C/cc_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_cc_02, "gfx/C/cc_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_cc_03, "gfx/C/cc_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_cc_04, "gfx/C/cc_cab_04.png") {
    tmpl_7()
}

spriteset(spriteset_x1_cab, "gfx/C/x_cab_01.png") {
    tmpl_7()
}

spriteset(spriteset_x2_cab, "gfx/C/x_cab_02.png") {
    tmpl_7()
}

spriteset(spriteset_x3_cab, "gfx/C/x_cab_03.png") {
    tmpl_7()
}

spriteset(spriteset_x4_cab, "gfx/C/x_cab_04.png") {
    tmpl_7()
}
spriteset(spriteset_bus_d_cab, "gfx/C/o_bus_cab_a_01.png") {
    tmpl_7()
}

spriteset(spriteset_bus_c_cab, "gfx/C/o_bus_cab_a_02.png") {
    tmpl_7()
}

spriteset(spriteset_bus_b_cab, "gfx/C/o_bus_cab_a_03.png") {
    tmpl_7()
}

spriteset(spriteset_bus_a_cab, "gfx/C/o_bus_cab_a_04.png") {
    tmpl_7()
}

switch (FEAT_ROADVEHS, SELF, switch_fd_cab, built_during_preview  ) {
        1: spriteset_xd_cab;
        default: spriteset_fd_cab;      
}

switch (FEAT_ROADVEHS, SELF, switch_fc_cab, built_during_preview  ) {
        1: spriteset_xc_cab;
        default: spriteset_fc_cab;      
}

switch (FEAT_ROADVEHS, SELF, switch_fb_cab, built_during_preview  ) {
        1: spriteset_xb_cab;
        default: spriteset_fb_cab;      
}

switch (FEAT_ROADVEHS, SELF, switch_fa_cab, built_during_preview  ) {
        1: spriteset_xa_cab;
        default: spriteset_fa_cab;      
}

switch (FEAT_ROADVEHS, SELF, switch_od_bus_cab, built_during_preview  ) {
        1: spriteset_fd_cab;
        default: spriteset_bus_d_cab;       
}

switch (FEAT_ROADVEHS, SELF, switch_oc_bus_cab, built_during_preview  ) {
        1: spriteset_fc_cab;
        default: spriteset_bus_c_cab;       
}

switch (FEAT_ROADVEHS, SELF, switch_ob_bus_cab, built_during_preview  ) {
        1: spriteset_fb_cab;
        default: spriteset_bus_b_cab;       
}

switch (FEAT_ROADVEHS, SELF, switch_oa_bus_cab, built_during_preview  ) {
        1: spriteset_fa_cab;
        default: spriteset_bus_a_cab;       
}

switch (FEAT_ROADVEHS, SELF, switch_f1_cab, built_during_preview  ) {
        0:  spriteset_ab_01;
        1:  spriteset_cc_01;
        default: spriteset_ab_01;       
}

switch (FEAT_ROADVEHS, SELF, switch_f2_cab, built_during_preview  ) {
        0:  spriteset_ab_02;
        1:  spriteset_cc_02;
        default: spriteset_ab_02;       
}

switch (FEAT_ROADVEHS, SELF, switch_f3_cab, built_during_preview  ) {
        0:  spriteset_ab_03;
        1:  spriteset_cc_03;
        default: spriteset_ab_03;       
}

switch (FEAT_ROADVEHS, SELF, switch_f4_cab, built_during_preview  ) {
        0:  spriteset_ab_04;
        1:  spriteset_cc_04;
        default: spriteset_ab_04;       
}

switch (FEAT_ROADVEHS, SELF, switch_t1_cab, built_during_preview  ) {
        0:  spriteset_ba_01;
        1:  spriteset_cb_01;
        default: spriteset_ba_01;   
}

switch (FEAT_ROADVEHS, SELF, switch_t2_cab, built_during_preview  ) {
        0:  spriteset_ba_02;
        1:  spriteset_cb_02;
        default: spriteset_ba_02;       
}

switch (FEAT_ROADVEHS, SELF, switch_t3_cab, built_during_preview  ) {
        0:  spriteset_ba_03;
        1:  spriteset_cb_03;
        default: spriteset_ba_03;       
}

switch (FEAT_ROADVEHS, SELF, switch_t4_cab, built_during_preview  ) {
        0:  spriteset_ba_04;
        1:  spriteset_cb_04;
        default: spriteset_ba_04;       
}

switch (FEAT_ROADVEHS, SELF, switch_d3_cab, built_during_preview  ) {
        0:  spriteset_ca_03;
        1:  spriteset_bc_03;
        default: spriteset_ca_03;       
}

switch (FEAT_ROADVEHS, SELF, switch_d4_cab, built_during_preview  ) {
        0:  spriteset_ca_04;
        1:  spriteset_bc_04;
        default: spriteset_ca_04;   
}
// Cab purchase sprites

spriteset(spriteset_p_fd_cab, "gfx/P/p_o_cab_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_fc_cab, "gfx/P/p_o_cab_02.png") {
    tmpl_p()
}
spriteset(spriteset_p_fb_cab, "gfx/P/p_o_cab_03.png") {
    tmpl_p()
}
spriteset(spriteset_p_fa_cab, "gfx/P/P_o_cab_04.png") {
    tmpl_p()
}
spriteset(spriteset_p_f1_cab, "gfx/P/p_f_cab_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_f2_cab, "gfx/P/p_f_cab_02.png") {
    tmpl_p()
}
spriteset(spriteset_p_f3_cab, "gfx/P/p_f_cab_03.png") {
    tmpl_p()
}
spriteset(spriteset_p_f4_cab, "gfx/P/p_f_cab_04.png") {
    tmpl_p()
}
spriteset(spriteset_p_t1_cab, "gfx/P/p_t_cab_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_t2_cab, "gfx/P/p_t_cab_02.png") {
    tmpl_p()
}
spriteset(spriteset_p_t3_cab, "gfx/P/p_t_cab_03.png") {
    tmpl_p()
}
spriteset(spriteset_p_t4_cab, "gfx/P/p_t_cab_04.png") {
    tmpl_p()
}
spriteset(spriteset_p_d3_cab, "gfx/P/p_d_cab_03.png") {
    tmpl_p()
}
spriteset(spriteset_p_d4_cab, "gfx/P/p_d_cab_04.png") {
    tmpl_p()
}

// Bodies
spriteset(spriteset_rd_body, "gfx/R/o_body_01.png") {
    tmpl_7()
}

spriteset(spriteset_rc_body, "gfx/R/o_body_02.png") {
    tmpl_7()
}

spriteset(spriteset_rb_body, "gfx/R/o_body_03.png") {
    tmpl_7()
}

spriteset(spriteset_ra_body, "gfx/R/o_body_04.png") {
    tmpl_7()
}

spriteset(spriteset_r1_body, "gfx/R/r_body_01.png") {
    tmpl_7()
}

spriteset(spriteset_r2_body, "gfx/R/r_body_02.png") {
    tmpl_7()
}

spriteset(spriteset_r3_body, "gfx/R/r_body_03.png") {
    tmpl_7()
}

spriteset(spriteset_r4_body, "gfx/R/r_body_04.png") {
    tmpl_7()
}

switch (FEAT_ROADVEHS, SELF, switch_rd_body, random_bits ) {
        0..127: spriteset_rd_body;
        127..255: spriteset_rc_body;
        default: spriteset_rd_body;     
}

switch (FEAT_ROADVEHS, SELF, switch_rc_body, random_bits ) {
        0..195: spriteset_rc_body;
        196..255: spriteset_ra_body;
        default: spriteset_rc_body;     
}

switch (FEAT_ROADVEHS, SELF, switch_rb_body, random_bits ) {
        0..127: spriteset_rb_body;
        127..255: spriteset_ra_body;
        default: spriteset_rb_body;     
}

switch (FEAT_ROADVEHS, SELF, switch_ra_body, random_bits ) {
        0..127: spriteset_ra_body;
        127..255: spriteset_rb_body;
        default: spriteset_ra_body;     
}

switch (FEAT_ROADVEHS, SELF, switch_r1_body, random_bits ) {
        0..127: spriteset_r1_body;
        127..255: spriteset_r2_body;
        default: spriteset_r1_body;     
}

switch (FEAT_ROADVEHS, SELF, switch_r2_body, random_bits ) {
        0..31: spriteset_r1_body;
        32..63: spriteset_r2_body;
        64..159: spriteset_r3_body;
        160..255: spriteset_r4_body;
        default: spriteset_r4_body;     
}

switch (FEAT_ROADVEHS, SELF, switch_r3_body, random_bits ) {
        0..127: spriteset_r3_body;
        127..255: spriteset_r4_body;
        default: spriteset_r3_body;     
}

switch (FEAT_ROADVEHS, SELF, switch_r4_body, random_bits ) {
        0..127: spriteset_r3_body;
        127..255: spriteset_r4_body;
        default: spriteset_r4_body;     
}

spriteset(spriteset_p_o_body, "gfx/P/p_o_body_01.png") {
    tmpl_p()
}

spriteset(spriteset_p_r1_body, "gfx/P/p_r_body_01.png") {
    tmpl_p()
}

spriteset(spriteset_p_r2_body, "gfx/P/p_r_body_02.png") {
    tmpl_p()
}

spriteset(spriteset_p_r3_body, "gfx/P/p_r_body_03.png") {
    tmpl_p()
}

spriteset(spriteset_p_r4_body, "gfx/P/p_r_body_04.png") {
    tmpl_p()
}

//mail beds

spriteset(spriteset_o_mail_a, "gfx/R/o_mail_04.png") {
    tmpl_7()
}

spriteset(spriteset_o_mail_a_01, "gfx/R/o_mail_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_mail_a_02, "gfx/R/o_mail_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_mail_a_03, "gfx/R/o_mail_03.png") {
    tmpl_7()
}

spritegroup spritegroup_o_mail_a {
    loaded:  [spriteset_o_mail_a];
    loading: [spriteset_o_mail_a_01, spriteset_o_mail_a_02, spriteset_o_mail_a_03];
}

switch (FEAT_ROADVEHS, SELF, switch_o_mail, random_bits ) {
        0..191: spritegroup_o_mail_a;
        192..255: spritegroup_o_mail_a;
        default: spritegroup_o_mail_a;      
}

spriteset(spriteset_p_o_mail, "gfx/P/p_o_mail_01.png") {
    tmpl_p()
}

spriteset(spriteset_r_mail_a, "gfx/R/r_mail_04.png") {
    tmpl_7()
}

spriteset(spriteset_r_mail_a_01, "gfx/R/r_mail_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_mail_a_02, "gfx/R/r_mail_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_mail_a_03, "gfx/R/r_mail_03.png") {
    tmpl_7()
}

spritegroup spritegroup_r_mail_a {
    loaded:  [spriteset_r_mail_a];
    loading: [spriteset_r_mail_a_01, spriteset_r_mail_a_02, spriteset_r_mail_a_03];
}


spriteset(spriteset_r_mail_b, "gfx/R/r_mail_04.png") {
    tmpl_7()
}

spriteset(spriteset_r_mail_b_01, "gfx/R/r_mail_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_mail_b_02, "gfx/R/r_mail_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_mail_b_03, "gfx/R/r_mail_03.png") {
    tmpl_7()
}

spritegroup spritegroup_r_mail_b {
    loaded:  [spriteset_r_mail_b];
    loading: [spriteset_r_mail_b_01, spriteset_r_mail_b_02, spriteset_r_mail_b_03];
}


switch (FEAT_ROADVEHS, SELF, switch_r_mail_a, random_bits ) {
        0..191: spritegroup_r_mail_a;
        192..255: spritegroup_r_mail_b;
        default: spritegroup_r_mail_a;      
}
switch (FEAT_ROADVEHS, SELF, switch_r_mail_b, random_bits ) {
        0..127: spritegroup_r_mail_a;
        128..255: spritegroup_r_mail_b;
        default: spritegroup_r_mail_a;      
}
switch (FEAT_ROADVEHS, SELF, switch_r_mail_c, random_bits ) {
        0..63: spritegroup_r_mail_a;
        64..255: spritegroup_r_mail_b;
        default: spritegroup_r_mail_b;      
}
switch (FEAT_ROADVEHS, SELF, switch_r_mail, build_year ) {
        0..1975: spritegroup_r_mail_a;
        1976..1985: switch_r_mail_a;
        1986..1995: switch_r_mail_b;
        1996..5000000: switch_r_mail_c;
        default: spritegroup_r_mail_a;      
}

spriteset(spriteset_p_r_mail, "gfx/P/p_r_mail_01.png") {
    tmpl_p()
}


//box beds

spriteset(spriteset_o_box_a, "gfx/R/o_box_01.png") {
    tmpl_7()
}

spriteset(spriteset_o_box_a_loading, "gfx/R/o_box_load_01.png") {
    tmpl_7()
}

spritegroup spritegroup_o_box_a {
    loaded:  [spriteset_o_box_a];
    loading: [spriteset_o_box_a_loading];
}


spriteset(spriteset_o_box_b, "gfx/R/o_box_02.png") {
    tmpl_7()
}

spriteset(spriteset_o_box_b_loading, "gfx/R/o_box_load_02.png") {
    tmpl_7()
}

spritegroup spritegroup_o_box_b {
    loaded:  [spriteset_o_box_b];
    loading: [spriteset_o_box_b_loading];
}

spriteset(spriteset_o_box_c, "gfx/R/o_box_03.png") {
    tmpl_7()
}

spriteset(spriteset_o_box_c_loading, "gfx/R/o_box_load_03.png") {
    tmpl_7()
}

spritegroup spritegroup_o_box_c {
    loaded:  [spriteset_o_box_c];
    loading: [spriteset_o_box_c_loading];
}

spriteset(spriteset_o_box_d, "gfx/R/o_box_04.png") {
    tmpl_7()
}

spriteset(spriteset_o_box_d_loading, "gfx/R/o_box_load_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_box_d {
    loaded:  [spriteset_o_box_d];
    loading: [spriteset_o_box_d_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_o_box_a, random_bits ) {
        0..85: spritegroup_o_box_a;
        86..171: spritegroup_o_box_b;
        172..255: spritegroup_o_box_c;
        default: spritegroup_o_box_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_o_box_b, random_bits ) {
        0..69: spritegroup_o_box_a;
        70..139: spritegroup_o_box_b;
        140..209: spritegroup_o_box_c;
        210..255: spritegroup_o_box_d;
        default: spritegroup_o_box_b;       
}
switch (FEAT_ROADVEHS, SELF, switch_o_box_c, random_bits ) {
        0..31: spritegroup_o_box_a;
        32..63: spritegroup_o_box_b;
        64..95: spritegroup_o_box_c;
        96..255: spritegroup_o_box_d;
        default: spritegroup_o_box_d;       
}

switch (FEAT_ROADVEHS, SELF, switch_o_box, build_year ) {
        0..1899:        switch_o_box_a;
        1900..1939:     switch_o_box_b;
        1940..1964:     switch_o_box_c;
        1965..5000000:  spritegroup_o_box_d;
        default:        spritegroup_o_box_a;        
}

spriteset(spriteset_p_o_box_a, "gfx/P/p_o_box_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_box_b, "gfx/P/p_o_box_02.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_box_c, "gfx/P/p_o_box_03.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_box_d, "gfx/P/p_o_box_04.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_p_o_box, build_year ) {
        0..1899:        spriteset_p_o_box_a;
        1900..1924:     spriteset_p_o_box_c;
        1925..1944:     spriteset_p_o_box_b;
        1945..5000000:  spriteset_p_o_box_d;
        default:        spritegroup_o_box_a;        
}

spriteset(spriteset_r_box_a, "gfx/R/r_box_02.png") {
    tmpl_7()
}

spriteset(spriteset_r_box_a_loading, "gfx/R/r_box_01.png") {
    tmpl_7()
}

spritegroup spritegroup_r_box_a {
    loaded:  [spriteset_r_box_a];
    loading: [spriteset_r_box_a_loading];
}


spriteset(spriteset_r_box_b, "gfx/R/r_box_04.png") {
    tmpl_7()
}

spriteset(spriteset_r_box_b_loading, "gfx/R/r_box_03.png") {
    tmpl_7()
}

spritegroup spritegroup_r_box_b {
    loaded:  [spriteset_r_box_b];
    loading: [spriteset_r_box_b_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_r_box_a, random_bits ) {
        0..191: spritegroup_r_box_a;
        192..255: spritegroup_r_box_b;
        default: spritegroup_r_box_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_r_box_b, random_bits ) {
        0..127: spritegroup_r_box_a;
        128..255: spritegroup_r_box_b;
        default: spritegroup_r_box_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_r_box_c, random_bits ) {
        0..63: spritegroup_r_box_a;
        64..255: spritegroup_r_box_b;
        default: spritegroup_r_box_b;       
}
switch (FEAT_ROADVEHS, SELF, switch_r_box, build_year ) {
        0..1975: spritegroup_r_box_a;
        1976..1985: switch_r_box_a;
        1986..1995: switch_r_box_b;
        1996..2049: switch_r_box_c;
        2050..5000000: spritegroup_r_box_b;
        default: spritegroup_r_box_a;       
}

spriteset(spriteset_p_r_box_a, "gfx/P/p_r_box_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_box_b, "gfx/P/p_r_box_03.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_p_r_box, build_year ) {
        0..1990:        spriteset_p_r_box_a;
        1991..5000000:  spriteset_p_r_box_b;
        default:        spriteset_p_r_box_a;        
}

//ref beds

spriteset(spriteset_o_ref_a, "gfx/R/o_ref_01.png") {
    tmpl_7()
}

spriteset(spriteset_o_ref_a_loading, "gfx/R/o_ref_load_01.png") {
    tmpl_7()
}

spritegroup spritegroup_o_ref_a {
    loaded:  [spriteset_o_ref_a];
    loading: [spriteset_o_ref_a_loading];
}


spriteset(spriteset_o_ref_b, "gfx/R/o_ref_02.png") {
    tmpl_7()
}

spriteset(spriteset_o_ref_b_loading, "gfx/R/o_ref_load_02.png") {
    tmpl_7()
}

spritegroup spritegroup_o_ref_b {
    loaded:  [spriteset_o_ref_b];
    loading: [spriteset_o_ref_b_loading];
}

spriteset(spriteset_o_ref_c, "gfx/R/o_ref_03.png") {
    tmpl_7()
}

spriteset(spriteset_o_ref_c_loading, "gfx/R/o_ref_load_03.png") {
    tmpl_7()
}

spritegroup spritegroup_o_ref_c {
    loaded:  [spriteset_o_ref_c];
    loading: [spriteset_o_ref_c_loading];
}

spriteset(spriteset_o_ref_d, "gfx/R/o_ref_04.png") {
    tmpl_7()
}

spriteset(spriteset_o_ref_d_loading, "gfx/R/o_ref_load_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_ref_d {
    loaded:  [spriteset_o_ref_d];
    loading: [spriteset_o_ref_d_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_o_ref_a, random_bits ) {
        0..85: spritegroup_o_ref_a;
        86..171: spritegroup_o_ref_b;
        172..255: spritegroup_o_ref_c;
        default: spritegroup_o_ref_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_o_ref_b, random_bits ) {
        0..69: spritegroup_o_ref_a;
        70..139: spritegroup_o_ref_b;
        140..209: spritegroup_o_ref_c;
        210..255: spritegroup_o_ref_d;
        default: spritegroup_o_ref_b;       
}
switch (FEAT_ROADVEHS, SELF, switch_o_ref_c, random_bits ) {
        0..31: spritegroup_o_ref_a;
        32..63: spritegroup_o_ref_b;
        64..95: spritegroup_o_ref_c;
        96..255: spritegroup_o_ref_d;
        default: spritegroup_o_ref_d;       
}

switch (FEAT_ROADVEHS, SELF, switch_o_ref, build_year ) {
        0..1899:        switch_o_ref_a;
        1900..1939:     switch_o_ref_b;
        1940..1964:     switch_o_ref_c;
        1965..5000000:  spritegroup_o_ref_d;
        default:        spritegroup_o_ref_a;        
}

spriteset(spriteset_p_o_ref_a, "gfx/P/p_o_ref_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_ref_b, "gfx/P/p_o_ref_02.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_ref_c, "gfx/P/p_o_ref_03.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_ref_d, "gfx/P/p_o_ref_04.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_p_o_ref, build_year ) {
        0..1899:        spriteset_p_o_ref_a;
        1900..1924:     spriteset_p_o_ref_c;
        1925..1944:     spriteset_p_o_ref_b;
        1945..5000000:  spriteset_p_o_ref_d;
        default:        spritegroup_o_ref_a;          
}

spriteset(spriteset_r_ref_a, "gfx/R/r_ref_02.png") {
    tmpl_7()
}

spriteset(spriteset_r_ref_a_loading, "gfx/R/r_ref_01.png") {
    tmpl_7()
}

spritegroup spritegroup_r_ref_a {
    loaded:  [spriteset_r_ref_a];
    loading: [spriteset_r_ref_a_loading];
}


spriteset(spriteset_r_ref_b, "gfx/R/r_ref_04.png") {
    tmpl_7()
}

spriteset(spriteset_r_ref_b_loading, "gfx/R/r_ref_03.png") {
    tmpl_7()
}

spritegroup spritegroup_r_ref_b {
    loaded:  [spriteset_r_ref_b];
    loading: [spriteset_r_ref_b_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_r_ref_a, random_bits ) {
        0..191: spritegroup_r_ref_a;
        192..255: spritegroup_r_ref_b;
        default: spritegroup_r_ref_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_r_ref_b, random_bits ) {
        0..127: spritegroup_r_ref_a;
        128..255: spritegroup_r_ref_b;
        default: spritegroup_r_ref_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_r_ref_c, random_bits ) {
        0..63: spritegroup_r_ref_a;
        64..255: spritegroup_r_ref_b;
        default: spritegroup_r_ref_b;       
}
switch (FEAT_ROADVEHS, SELF, switch_r_ref, build_year ) {
        0..1975: spritegroup_r_ref_a;
        1976..1985: switch_r_ref_a;
        1986..1995: switch_r_ref_b;
        1996..2049: switch_r_ref_c;
        2050..5000000: spritegroup_r_ref_b;
        default: spritegroup_r_ref_a;       
}

spriteset(spriteset_p_r_ref_a, "gfx/P/p_r_ref_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_ref_b, "gfx/P/p_r_ref_03.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_p_r_ref, build_year ) {
        0..1990:        spriteset_p_r_ref_a;
        1991..5000000:  spriteset_p_r_ref_b;
        default:        spriteset_p_r_ref_a;        
}

//stock beds

spriteset(spriteset_o_stock_a, "gfx/R/o_stock_01.png") {
    tmpl_7()
}

spriteset(spriteset_o_stock_a_loading, "gfx/R/o_stock_load_01.png") {
    tmpl_7()
}

spritegroup spritegroup_o_stock_a {
    loaded:  [spriteset_o_stock_a];
    loading: [spriteset_o_stock_a_loading];
}


spriteset(spriteset_o_stock_b, "gfx/R/o_stock_02.png") {
    tmpl_7()
}

spriteset(spriteset_o_stock_b_loading, "gfx/R/o_stock_load_02.png") {
    tmpl_7()
}

spritegroup spritegroup_o_stock_b {
    loaded:  [spriteset_o_stock_b];
    loading: [spriteset_o_stock_b_loading];
}

spriteset(spriteset_o_stock_c, "gfx/R/o_stock_03.png") {
    tmpl_7()
}

spriteset(spriteset_o_stock_c_loading, "gfx/R/o_stock_load_03.png") {
    tmpl_7()
}

spritegroup spritegroup_o_stock_c {
    loaded:  [spriteset_o_stock_c];
    loading: [spriteset_o_stock_c_loading];
}

spriteset(spriteset_o_stock_d, "gfx/R/o_stock_04.png") {
    tmpl_7()
}

spriteset(spriteset_o_stock_d_loading, "gfx/R/o_stock_load_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_stock_d {
    loaded:  [spriteset_o_stock_d];
    loading: [spriteset_o_stock_d_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_o_stock_a, random_bits ) {
        0..85: spritegroup_o_stock_a;
        86..171: spritegroup_o_stock_b;
        172..255: spritegroup_o_stock_c;
        default: spritegroup_o_stock_a;     
}
switch (FEAT_ROADVEHS, SELF, switch_o_stock_b, random_bits ) {
        0..69: spritegroup_o_stock_a;
        70..139: spritegroup_o_stock_b;
        140..209: spritegroup_o_stock_c;
        210..255: spritegroup_o_stock_d;
        default: spritegroup_o_stock_b;     
}
switch (FEAT_ROADVEHS, SELF, switch_o_stock_c, random_bits ) {
        0..31: spritegroup_o_stock_a;
        32..63: spritegroup_o_stock_b;
        64..95: spritegroup_o_stock_c;
        96..255: spritegroup_o_stock_d;
        default: spritegroup_o_stock_d;     
}

switch (FEAT_ROADVEHS, SELF, switch_o_stock, build_year ) {
        0..1899:        switch_o_stock_a;
        1900..1939:     switch_o_stock_b;
        1940..1964:     switch_o_stock_c;
        1965..5000000:  spritegroup_o_stock_d;
        default:        spritegroup_o_stock_a;      
}

spriteset(spriteset_p_o_stock_a, "gfx/P/p_o_stock_01.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_p_o_stock, build_year ) {
        default:        spriteset_p_o_stock_a;        
}

spriteset(spriteset_r_stock_a, "gfx/R/r_stock_02.png") {
    tmpl_7()
}

spriteset(spriteset_r_stock_a_loading, "gfx/R/r_stock_01.png") {
    tmpl_7()
}

spritegroup spritegroup_r_stock_a {
    loaded:  [spriteset_r_stock_a];
    loading: [spriteset_r_stock_a_loading];
}


spriteset(spriteset_r_stock_b, "gfx/R/r_stock_04.png") {
    tmpl_7()
}

spriteset(spriteset_r_stock_b_loading, "gfx/R/r_stock_03.png") {
    tmpl_7()
}

spritegroup spritegroup_r_stock_b {
    loaded:  [spriteset_r_stock_b];
    loading: [spriteset_r_stock_b_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_r_stock_a, random_bits ) {
        0..191: spritegroup_r_stock_a;
        192..255: spritegroup_r_stock_b;
        default: spritegroup_r_stock_a;     
}
switch (FEAT_ROADVEHS, SELF, switch_r_stock_b, random_bits ) {
        0..127: spritegroup_r_stock_a;
        128..255: spritegroup_r_stock_b;
        default: spritegroup_r_stock_a;     
}
switch (FEAT_ROADVEHS, SELF, switch_r_stock_c, random_bits ) {
        0..63: spritegroup_r_stock_a;
        64..255: spritegroup_r_stock_b;
        default: spritegroup_r_stock_b;     
}
switch (FEAT_ROADVEHS, SELF, switch_r_stock, build_year ) {
        0..1975: spritegroup_r_stock_a;
        1976..1985: switch_r_stock_a;
        1986..1995: switch_r_stock_b;
        1996..2049: switch_r_stock_c;
        2050..5000000: spritegroup_r_stock_b;
        default: spritegroup_r_stock_a;     
}

spriteset(spriteset_p_r_stock_a, "gfx/P/p_r_stock_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_stock_b, "gfx/P/p_r_stock_03.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_p_r_stock, build_year ) {
        0..1990:        spriteset_p_r_stock_a;
        1991..5000000:  spriteset_p_r_stock_b;
        default:        spriteset_p_r_stock_a;        
}

//tank beds

spriteset(spriteset_o_tank_a, "gfx/R/o_tank_01.png") {
    tmpl_7()
}

spritegroup spritegroup_o_tank_a {
    loaded:  [spriteset_o_tank_a];
    loading: [spriteset_o_tank_a];
}


spriteset(spriteset_o_tank_b, "gfx/R/o_tank_02.png") {
    tmpl_7()
}

spritegroup spritegroup_o_tank_b {
    loaded:  [spriteset_o_tank_b];
    loading: [spriteset_o_tank_b];
}

spriteset(spriteset_o_tank_c, "gfx/R/o_tank_03.png") {
    tmpl_7()
}

spritegroup spritegroup_o_tank_c {
    loaded:  [spriteset_o_tank_c];
    loading: [spriteset_o_tank_c];
}


spriteset(spriteset_o_tank_d, "gfx/R/o_tank_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_tank_d {
    loaded:  [spriteset_o_tank_d];
    loading: [spriteset_o_tank_d];
}

switch (FEAT_ROADVEHS, SELF, switch_o_tank, random_bits ) {
        0..63: spritegroup_o_tank_a;
        64..127: spritegroup_o_tank_b;
        128..191: spritegroup_o_tank_c;
        192..255: spritegroup_o_tank_d;
        default: spritegroup_o_tank_b;          
}

spriteset(spriteset_p_o_tank_a, "gfx/P/p_o_tank_02.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_tank_b, "gfx/P/p_o_tank_03.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, switch_p_o_tank, build_year ) {
        0..1920:        spriteset_p_o_tank_a;
        1921..5000000:  spriteset_p_o_tank_b;
        default:        spriteset_p_o_tank_a;        
}

spriteset(spriteset_r_tank_a, "gfx/R/r_tank_01.png") {
    tmpl_7()
}

spritegroup spritegroup_r_tank_a {
    loaded:  [spriteset_r_tank_a];
    loading: [spriteset_r_tank_a];
}


spriteset(spriteset_r_tank_b, "gfx/R/r_tank_02.png") {
    tmpl_7()
}

spritegroup spritegroup_r_tank_b {
    loaded:  [spriteset_r_tank_b];
    loading: [spriteset_r_tank_b];
}

spriteset(spriteset_r_tank_c, "gfx/R/r_tank_03.png") {
    tmpl_7()
}

spritegroup spritegroup_r_tank_c {
    loaded:  [spriteset_r_tank_c];
    loading: [spriteset_r_tank_c];
}


spriteset(spriteset_r_tank_d, "gfx/R/r_tank_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_tank_d {
    loaded:  [spriteset_r_tank_d];
    loading: [spriteset_r_tank_d];
}

switch (FEAT_ROADVEHS, SELF, switch_r_tank, random_bits ) {
        0..63: spritegroup_r_tank_a;
        64..127: spritegroup_r_tank_b;
        128..191: spritegroup_r_tank_c;
        192..255: spritegroup_r_tank_d;
        default: spritegroup_r_tank_b;          
}

spriteset(spriteset_p_r_tank_a, "gfx/P/p_r_tank_02.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_tank_b, "gfx/P/p_r_tank_04.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, switch_p_r_tank, build_year ) {
        0..1990:        spriteset_p_r_tank_a;
        1991..5000000:  spriteset_p_r_tank_b;
        default:        spriteset_p_r_tank_a;        
}
// flatbed beds

spriteset(spriteset_o_flat_cupr_0, "gfx/R/o_flat_cupr_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_cupr_a, "gfx/R/o_flat_cupr_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_cupr_b, "gfx/R/o_flat_cupr_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_cupr_c, "gfx/R/o_flat_cupr_04.png") {
    tmpl_7()
}
spritegroup spritegroup_o_flat_cupr_a {
    loaded:  [spriteset_o_flat_cupr_0, spriteset_o_flat_cupr_a];
    loading: [spriteset_o_flat_cupr_0, spriteset_o_flat_cupr_a];
}
spritegroup spritegroup_o_flat_cupr_b {
    loaded:  [spriteset_o_flat_cupr_0, spriteset_o_flat_cupr_b, spriteset_o_flat_cupr_c];
    loading: [spriteset_o_flat_cupr_0, spriteset_o_flat_cupr_b, spriteset_o_flat_cupr_c];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_flat_cupr, random_bits ) {
        0..127: spritegroup_o_flat_cupr_a;
        128..255: spritegroup_o_flat_cupr_b;

        default: spritegroup_o_flat_cupr_a;          
}

spriteset(spriteset_o_flat_steel_0, "gfx/R/o_flat_steel_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_steel_a, "gfx/R/o_flat_steel_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_steel_b, "gfx/R/o_flat_steel_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_steel_c, "gfx/R/o_flat_steel_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_flat_steel_a {
    loaded:  [spriteset_o_flat_steel_0, spriteset_o_flat_steel_a];
    loading: [spriteset_o_flat_steel_0, spriteset_o_flat_steel_a];
}
spritegroup spritegroup_o_flat_steel_b {
    loaded:  [spriteset_o_flat_steel_0, spriteset_o_flat_steel_b, spriteset_o_flat_steel_c];
    loading: [spriteset_o_flat_steel_0, spriteset_o_flat_steel_b, spriteset_o_flat_steel_c];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_flat_steel, random_bits ) {
        0..127: spritegroup_o_flat_steel_a;
        128..255: spritegroup_o_flat_steel_b;

        default: spritegroup_o_flat_steel_a;          
}

spriteset(spriteset_o_flat_crate_0, "gfx/R/o_flat_crate_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_crate_a, "gfx/R/o_flat_crate_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_crate_b, "gfx/R/o_flat_crate_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_crate_c, "gfx/R/o_flat_crate_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_flat_crate_a {
    loaded:  [spriteset_o_flat_crate_0, spriteset_o_flat_crate_a];
    loading: [spriteset_o_flat_crate_0, spriteset_o_flat_crate_a];
}
spritegroup spritegroup_o_flat_crate_b {
    loaded:  [spriteset_o_flat_crate_0, spriteset_o_flat_crate_b];
    loading: [spriteset_o_flat_crate_0, spriteset_o_flat_crate_b];
}
spritegroup spritegroup_o_flat_crate_c {
    loaded:  [spriteset_o_flat_crate_0, spriteset_o_flat_crate_c];
    loading: [spriteset_o_flat_crate_0, spriteset_o_flat_crate_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_flat_crate, random_bits ) {
        0..85: spritegroup_o_flat_crate_a;
        86..171: spritegroup_o_flat_crate_b;
        172..255:spritegroup_o_flat_crate_c;
        default: spritegroup_o_flat_crate_a;          
}

spriteset(spriteset_o_flat_board_1, "gfx/R/o_flat_board_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_board_2, "gfx/R/o_flat_board_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_board_3, "gfx/R/o_flat_board_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_board_4, "gfx/R/o_flat_board_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_flat_board {
    loaded:  [spriteset_o_flat_board_1, spriteset_o_flat_board_2, spriteset_o_flat_board_3, spriteset_o_flat_board_4];
    loading: [spriteset_o_flat_board_1, spriteset_o_flat_board_2, spriteset_o_flat_board_3, spriteset_o_flat_board_4];
}

spriteset(spriteset_o_flat_log_1, "gfx/R/o_flat_log_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_log_2, "gfx/R/o_flat_log_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_log_3, "gfx/R/o_flat_log_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_log_4, "gfx/R/o_flat_log_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_flat_log {
    loaded:  [spriteset_o_flat_log_1, spriteset_o_flat_log_2, spriteset_o_flat_log_3, spriteset_o_flat_log_4];
    loading: [spriteset_o_flat_log_1, spriteset_o_flat_log_2, spriteset_o_flat_log_3, spriteset_o_flat_log_4];
}

spriteset(spriteset_o_flat_food_0, "gfx/R/o_flat_food_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_food_a, "gfx/R/o_flat_food_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_food_b, "gfx/R/o_flat_food_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_food_c, "gfx/R/o_flat_food_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_flat_food_a {
    loaded:  [spriteset_o_flat_food_0, spriteset_o_flat_food_a];
    loading: [spriteset_o_flat_food_0, spriteset_o_flat_food_a];
}
spritegroup spritegroup_o_flat_food_b {
    loaded:  [spriteset_o_flat_food_0, spriteset_o_flat_food_b];
    loading: [spriteset_o_flat_food_0, spriteset_o_flat_food_b];
}
spritegroup spritegroup_o_flat_food_c {
    loaded:  [spriteset_o_flat_food_0, spriteset_o_flat_food_c];
    loading: [spriteset_o_flat_food_0, spriteset_o_flat_food_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_flat_food, random_bits ) {
        0..85: spritegroup_o_flat_food_a;
        86..171: spritegroup_o_flat_food_b;
        172..255:spritegroup_o_flat_food_c;
        default: spritegroup_o_flat_food_a;          
}

spriteset(spriteset_o_flat_paper_0, "gfx/R/o_flat_paper_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_paper_a, "gfx/R/o_flat_paper_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_paper_b, "gfx/R/o_flat_paper_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_paper_c, "gfx/R/o_flat_paper_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_flat_paper_a {
    loaded:  [spriteset_o_flat_paper_0, spriteset_o_flat_paper_a];
    loading: [spriteset_o_flat_paper_0, spriteset_o_flat_paper_a];
}
spritegroup spritegroup_o_flat_paper_b {
    loaded:  [spriteset_o_flat_paper_0, spriteset_o_flat_paper_b];
    loading: [spriteset_o_flat_paper_0, spriteset_o_flat_paper_b];
}
spritegroup spritegroup_o_flat_paper_c {
    loaded:  [spriteset_o_flat_paper_0, spriteset_o_flat_paper_c];
    loading: [spriteset_o_flat_paper_0, spriteset_o_flat_paper_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_flat_paper, random_bits ) {
        0..85: spritegroup_o_flat_paper_a;
        86..171: spritegroup_o_flat_paper_b;
        172..255:spritegroup_o_flat_paper_c;
        default: spritegroup_o_flat_paper_a;          
}

spriteset(spriteset_o_flat_iron_0, "gfx/R/o_flat_iron_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_iron_a, "gfx/R/o_flat_iron_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_iron_b, "gfx/R/o_flat_iron_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_flat_iron_c, "gfx/R/o_flat_iron_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_flat_iron_a {
    loaded:  [spriteset_o_flat_iron_0, spriteset_o_flat_iron_a];
    loading: [spriteset_o_flat_iron_0, spriteset_o_flat_iron_a];
}
spritegroup spritegroup_o_flat_iron_b {
    loaded:  [spriteset_o_flat_iron_0, spriteset_o_flat_iron_b];
    loading: [spriteset_o_flat_iron_0, spriteset_o_flat_iron_b];
}
spritegroup spritegroup_o_flat_iron_c {
    loaded:  [spriteset_o_flat_iron_0, spriteset_o_flat_iron_c];
    loading: [spriteset_o_flat_iron_0, spriteset_o_flat_iron_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_flat_iron, random_bits ) {
        0..85: spritegroup_o_flat_iron_a;
        86..171: spritegroup_o_flat_iron_b;
        172..255:spritegroup_o_flat_iron_c;
        default: spritegroup_o_flat_iron_a;          
}

switch (FEAT_ROADVEHS, SELF, switch_o_flat, cargo_type_in_veh ) {
    PAPR: switch_spritegroup_o_flat_paper;
    STEL: switch_spritegroup_o_flat_steel;
    METL: switch_spritegroup_o_flat_steel;
    BDMT: spritegroup_o_flat_board;
    WOOD: spritegroup_o_flat_log;
    COPR: switch_spritegroup_o_flat_cupr;
    FOOD: switch_spritegroup_o_flat_food;
    FRUT: switch_spritegroup_o_flat_food;
    WDPR: spritegroup_o_flat_board;
    IRON: switch_spritegroup_o_flat_iron;
    default: switch_spritegroup_o_flat_crate;
        
}

spriteset(spriteset_r_flat_cupr_1, "gfx/R/r_flat_cupr_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_cupr_2, "gfx/R/r_flat_cupr_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_cupr_3, "gfx/R/r_flat_cupr_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_cupr_4, "gfx/R/r_flat_cupr_04.png") {
    tmpl_7()
}
spritegroup spritegroup_r_flat_cupr {
    loaded:  [spriteset_r_flat_cupr_1, spriteset_r_flat_cupr_2, spriteset_r_flat_cupr_3, spriteset_r_flat_cupr_4];
    loading: [spriteset_r_flat_cupr_1, spriteset_r_flat_cupr_2, spriteset_r_flat_cupr_3, spriteset_r_flat_cupr_4];
}

spriteset(spriteset_r_flat_steel_1, "gfx/R/r_flat_steel_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_steel_2, "gfx/R/r_flat_steel_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_steel_3, "gfx/R/r_flat_steel_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_steel_4, "gfx/R/r_flat_steel_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_flat_steel {
    loaded:  [spriteset_r_flat_steel_1, spriteset_r_flat_steel_2, spriteset_r_flat_steel_3, spriteset_r_flat_steel_4];
    loading: [spriteset_r_flat_steel_1, spriteset_r_flat_steel_2, spriteset_r_flat_steel_3, spriteset_r_flat_steel_4];
}

spriteset(spriteset_r_flat_crate_1, "gfx/R/r_flat_crate_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_crate_2, "gfx/R/r_flat_crate_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_crate_3, "gfx/R/r_flat_crate_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_crate_4, "gfx/R/r_flat_crate_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_flat_crate {
    loaded:  [spriteset_r_flat_crate_1, spriteset_r_flat_crate_2, spriteset_r_flat_crate_3, spriteset_r_flat_crate_4];
    loading: [spriteset_r_flat_crate_1, spriteset_r_flat_crate_2, spriteset_r_flat_crate_3, spriteset_r_flat_crate_4];
}

spriteset(spriteset_r_flat_board_1, "gfx/R/r_flat_board_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_board_2, "gfx/R/r_flat_board_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_board_3, "gfx/R/r_flat_board_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_board_4, "gfx/R/r_flat_board_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_flat_board {
    loaded:  [spriteset_r_flat_board_1, spriteset_r_flat_board_2, spriteset_r_flat_board_3, spriteset_r_flat_board_4];
    loading: [spriteset_r_flat_board_1, spriteset_r_flat_board_2, spriteset_r_flat_board_3, spriteset_r_flat_board_4];
}

spriteset(spriteset_r_flat_log_1, "gfx/R/r_flat_log_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_log_2, "gfx/R/r_flat_log_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_log_3, "gfx/R/r_flat_log_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_log_4, "gfx/R/r_flat_log_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_flat_log {
    loaded:  [spriteset_r_flat_log_1, spriteset_r_flat_log_2, spriteset_r_flat_log_3, spriteset_r_flat_log_4];
    loading: [spriteset_r_flat_log_1, spriteset_r_flat_log_2, spriteset_r_flat_log_3, spriteset_r_flat_log_4];
}

spriteset(spriteset_r_flat_food_1, "gfx/R/r_flat_food_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_food_2, "gfx/R/r_flat_food_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_food_3, "gfx/R/r_flat_food_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_food_4, "gfx/R/r_flat_food_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_flat_food {
    loaded:  [spriteset_r_flat_food_1, spriteset_r_flat_food_2, spriteset_r_flat_food_3, spriteset_r_flat_food_4];
    loading: [spriteset_r_flat_food_1, spriteset_r_flat_food_2, spriteset_r_flat_food_3, spriteset_r_flat_food_4];
}

spriteset(spriteset_r_flat_paper_1, "gfx/R/r_flat_paper_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_paper_2, "gfx/R/r_flat_paper_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_paper_3, "gfx/R/r_flat_paper_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_flat_paper_4, "gfx/R/r_flat_paper_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_flat_paper {
    loaded:  [spriteset_r_flat_paper_1, spriteset_r_flat_paper_2, spriteset_r_flat_paper_3, spriteset_r_flat_paper_4];
    loading: [spriteset_r_flat_paper_1, spriteset_r_flat_paper_2, spriteset_r_flat_paper_3, spriteset_r_flat_paper_4];
}

switch (FEAT_ROADVEHS, SELF, switch_r_flat, cargo_type_in_veh ) {
    PAPR: spritegroup_r_flat_paper;
    STEL: spritegroup_r_flat_steel;
    METL: spritegroup_r_flat_steel;
    BDMT: spritegroup_r_flat_board;
    WOOD: spritegroup_r_flat_log;
    COPR: spritegroup_r_flat_cupr;
    FOOD: spritegroup_r_flat_food;
    FRUT: spritegroup_r_flat_food;
    WDPR: spritegroup_r_flat_board;
    default: spritegroup_r_flat_crate;
        
}

spriteset(spriteset_p_o_flat, "gfx/P/p_o_flat_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_flat, "gfx/P/p_r_flat_01.png") {
    tmpl_p()
}

//Mineral Hopper Bed

spriteset(spriteset_o_mine_grey_1, "gfx/R/o_mine_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_grey_2, "gfx/R/o_mine_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_grey_3, "gfx/R/o_mine_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_grey_4, "gfx/R/o_mine_grey_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_mine_grey {
    loaded:  [spriteset_o_mine_grey_1, spriteset_o_mine_grey_2, spriteset_o_mine_grey_3, spriteset_o_mine_grey_4];
    loading: [spriteset_o_mine_grey_1, spriteset_o_mine_grey_2, spriteset_o_mine_grey_3, spriteset_o_mine_grey_4];
}

spriteset(spriteset_o_mine_coal_1, "gfx/R/o_mine_coal_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_coal_2, "gfx/R/o_mine_coal_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_coal_3, "gfx/R/o_mine_coal_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_coal_4, "gfx/R/o_mine_coal_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_mine_coal {
    loaded:  [spriteset_o_mine_coal_1, spriteset_o_mine_coal_2, spriteset_o_mine_coal_3, spriteset_o_mine_coal_4];
    loading: [spriteset_o_mine_coal_1, spriteset_o_mine_coal_2, spriteset_o_mine_coal_3, spriteset_o_mine_coal_4];
}

spriteset(spriteset_o_mine_ore_1, "gfx/R/o_mine_ore_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_ore_2, "gfx/R/o_mine_ore_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_ore_3, "gfx/R/o_mine_ore_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_ore_4, "gfx/R/o_mine_ore_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_mine_ore {
    loaded:  [spriteset_o_mine_ore_1, spriteset_o_mine_ore_2, spriteset_o_mine_ore_3, spriteset_o_mine_ore_4];
    loading: [spriteset_o_mine_ore_1, spriteset_o_mine_ore_2, spriteset_o_mine_ore_3, spriteset_o_mine_ore_4];
}

spriteset(spriteset_o_mine_scrap_1, "gfx/R/o_mine_scrap_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_scrap_2, "gfx/R/o_mine_scrap_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_scrap_3, "gfx/R/o_mine_scrap_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_scrap_4, "gfx/R/o_mine_scrap_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_mine_scrap {
    loaded:  [spriteset_o_mine_scrap_1, spriteset_o_mine_scrap_2, spriteset_o_mine_scrap_3, spriteset_o_mine_scrap_4];
    loading: [spriteset_o_mine_scrap_1, spriteset_o_mine_scrap_2, spriteset_o_mine_scrap_3, spriteset_o_mine_scrap_4];
}

spriteset(spriteset_o_mine_sand_1, "gfx/R/o_mine_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_sand_2, "gfx/R/o_mine_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_sand_3, "gfx/R/o_mine_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_sand_4, "gfx/R/o_mine_sand_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_mine_sand {
    loaded:  [spriteset_o_mine_sand_1, spriteset_o_mine_sand_2, spriteset_o_mine_sand_3, spriteset_o_mine_sand_4];
    loading: [spriteset_o_mine_sand_1, spriteset_o_mine_sand_2, spriteset_o_mine_sand_3, spriteset_o_mine_sand_4];
}

spriteset(spriteset_o_mine_brown_1, "gfx/R/o_mine_brown_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_brown_2, "gfx/R/o_mine_brown_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_brown_3, "gfx/R/o_mine_brown_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_mine_brown_4, "gfx/R/o_mine_brown_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_mine_brown {
    loaded:  [spriteset_o_mine_brown_1, spriteset_o_mine_brown_2, spriteset_o_mine_brown_3, spriteset_o_mine_brown_4];
    loading: [spriteset_o_mine_brown_1, spriteset_o_mine_brown_2, spriteset_o_mine_brown_3, spriteset_o_mine_brown_4];
}

switch (FEAT_ROADVEHS, SELF, switch_o_mine, cargo_type_in_veh ) {
        COAL: spritegroup_o_mine_coal;
        COKE: spritegroup_o_mine_coal;
        SCMT: spritegroup_o_mine_scrap;
        RCYC: spritegroup_o_mine_scrap;
        SAND: spritegroup_o_mine_sand;
        PHOS: spritegroup_o_mine_sand;
        GRVL: spritegroup_o_mine_grey;
        LIME: spritegroup_o_mine_grey;
        SASH: spritegroup_o_mine_grey;
        IORE: spritegroup_o_mine_ore;
        AORE: spritegroup_o_mine_ore;
        default: spritegroup_o_mine_brown; // Default to brown      
}

spriteset(spriteset_r_mine_grey_1, "gfx/R/r_mine_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_grey_2, "gfx/R/r_mine_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_grey_3, "gfx/R/r_mine_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_grey_4, "gfx/R/r_mine_grey_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_mine_grey {
    loaded:  [spriteset_r_mine_grey_1, spriteset_r_mine_grey_2, spriteset_r_mine_grey_3, spriteset_r_mine_grey_4];
    loading: [spriteset_r_mine_grey_1, spriteset_r_mine_grey_2, spriteset_r_mine_grey_3, spriteset_r_mine_grey_4];
}

spriteset(spriteset_r_mine_coal_1, "gfx/R/r_mine_coal_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_coal_2, "gfx/R/r_mine_coal_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_coal_3, "gfx/R/r_mine_coal_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_coal_4, "gfx/R/r_mine_coal_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_mine_coal {
    loaded:  [spriteset_r_mine_coal_1, spriteset_r_mine_coal_2, spriteset_r_mine_coal_3, spriteset_r_mine_coal_4];
    loading: [spriteset_r_mine_coal_1, spriteset_r_mine_coal_2, spriteset_r_mine_coal_3, spriteset_r_mine_coal_4];
}

spriteset(spriteset_r_mine_ore_1, "gfx/R/r_mine_ore_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_ore_2, "gfx/R/r_mine_ore_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_ore_3, "gfx/R/r_mine_ore_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_ore_4, "gfx/R/r_mine_ore_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_mine_ore {
    loaded:  [spriteset_r_mine_ore_1, spriteset_r_mine_ore_2, spriteset_r_mine_ore_3, spriteset_r_mine_ore_4];
    loading: [spriteset_r_mine_ore_1, spriteset_r_mine_ore_2, spriteset_r_mine_ore_3, spriteset_r_mine_ore_4];
}

spriteset(spriteset_r_mine_scrap_1, "gfx/R/r_mine_scrap_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_scrap_2, "gfx/R/r_mine_scrap_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_scrap_3, "gfx/R/r_mine_scrap_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_scrap_4, "gfx/R/r_mine_scrap_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_mine_scrap {
    loaded:  [spriteset_r_mine_scrap_1, spriteset_r_mine_scrap_2, spriteset_r_mine_scrap_3, spriteset_r_mine_scrap_4];
    loading: [spriteset_r_mine_scrap_1, spriteset_r_mine_scrap_2, spriteset_r_mine_scrap_3, spriteset_r_mine_scrap_4];
}

spriteset(spriteset_r_mine_sand_1, "gfx/R/r_mine_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_sand_2, "gfx/R/r_mine_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_sand_3, "gfx/R/r_mine_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_sand_4, "gfx/R/r_mine_sand_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_mine_sand {
    loaded:  [spriteset_r_mine_sand_1, spriteset_r_mine_sand_2, spriteset_r_mine_sand_3, spriteset_r_mine_sand_4];
    loading: [spriteset_r_mine_sand_1, spriteset_r_mine_sand_2, spriteset_r_mine_sand_3, spriteset_r_mine_sand_4];
}

spriteset(spriteset_r_mine_brown_1, "gfx/R/r_mine_brown_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_brown_2, "gfx/R/r_mine_brown_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_brown_3, "gfx/R/r_mine_brown_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_mine_brown_4, "gfx/R/r_mine_brown_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_mine_brown {
    loaded:  [spriteset_r_mine_brown_1, spriteset_r_mine_brown_2, spriteset_r_mine_brown_3, spriteset_r_mine_brown_4];
    loading: [spriteset_r_mine_brown_1, spriteset_r_mine_brown_2, spriteset_r_mine_brown_3, spriteset_r_mine_brown_4];
}

switch (FEAT_ROADVEHS, SELF, switch_r_mine, cargo_type_in_veh ) {
        COAL: spritegroup_r_mine_coal;
        COKE: spritegroup_r_mine_coal;
        SCMT: spritegroup_r_mine_scrap;
        RCYC: spritegroup_r_mine_scrap;
        SAND: spritegroup_r_mine_sand;
        PHOS: spritegroup_r_mine_sand;
        GRVL: spritegroup_r_mine_grey;
        LIME: spritegroup_r_mine_grey;
        SASH: spritegroup_r_mine_grey;
        IORE: spritegroup_r_mine_ore;
        AORE: spritegroup_r_mine_ore;
        default: spritegroup_r_mine_brown; // Default to brown      
}

spriteset(spriteset_p_o_mine, "gfx/P/p_o_mine_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_mine, "gfx/P/p_r_mine_01.png") {
    tmpl_p()
}

// Covered Hopper Bed

spriteset(spriteset_o_hopp_grey_1, "gfx/R/o_hopp_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_hopp_grey_2, "gfx/R/o_hopp_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_hopp_grey_3, "gfx/R/o_hopp_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_hopp_grey_4, "gfx/R/o_hopp_grey_04.png") {
    tmpl_7()
}
spriteset(spriteset_o_hopp_sand_1, "gfx/R/o_hopp_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_hopp_sand_2, "gfx/R/o_hopp_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_hopp_sand_3, "gfx/R/o_hopp_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_hopp_sand_4, "gfx/R/o_hopp_sand_04.png") {
    tmpl_7()
}
spriteset(spriteset_o_hopp_tarp_a, "gfx/R/o_hopp_tarp_01.png") {
    tmpl_7()
}


spritegroup spritegroup_o_hopp_grey_a {
    loaded:  [spriteset_o_hopp_tarp_a];
    loading: [spriteset_o_hopp_grey_1, spriteset_o_hopp_grey_2, spriteset_o_hopp_grey_3, spriteset_o_hopp_grey_4];
}


spritegroup spritegroup_o_hopp_sand_a {
    loaded:  [spriteset_o_hopp_tarp_a];
    loading: [spriteset_o_hopp_sand_1, spriteset_o_hopp_sand_2, spriteset_o_hopp_sand_3, spriteset_o_hopp_sand_4];
}


switch (FEAT_ROADVEHS, SELF, switch_o_hopp, cargo_type_in_veh ) {
        FERT: spritegroup_o_hopp_grey_a;
        CHEM: spritegroup_o_hopp_grey_a;
        SASH: spritegroup_o_hopp_grey_a;
        BDMT: spritegroup_o_hopp_grey_a;
        default: spritegroup_o_hopp_sand_a; // Default to brown     
}

spriteset(spriteset_r_hopp_grey_1, "gfx/R/r_hopp_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_grey_2, "gfx/R/r_hopp_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_grey_3, "gfx/R/r_hopp_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_grey_4, "gfx/R/r_hopp_grey_04.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_sand_1, "gfx/R/r_hopp_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_sand_2, "gfx/R/r_hopp_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_sand_3, "gfx/R/r_hopp_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_sand_4, "gfx/R/r_hopp_sand_04.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_tarp_a, "gfx/R/r_hopp_tarp_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_tarp_b, "gfx/R/r_hopp_tarp_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_tarp_c, "gfx/R/r_hopp_tarp_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_hopp_tarp_d, "gfx/R/r_hopp_tarp_04.png") {
    tmpl_7()
}


spritegroup spritegroup_r_hopp_grey_a {
    loaded:  [spriteset_r_hopp_tarp_a];
    loading: [spriteset_r_hopp_grey_1, spriteset_r_hopp_grey_2, spriteset_r_hopp_grey_3, spriteset_r_hopp_grey_4];
}
spritegroup spritegroup_r_hopp_grey_b {
    loaded:  [spriteset_r_hopp_tarp_b];
    loading: [spriteset_r_hopp_grey_1, spriteset_r_hopp_grey_2, spriteset_r_hopp_grey_3, spriteset_r_hopp_grey_4];
}
spritegroup spritegroup_r_hopp_grey_c {
    loaded:  [spriteset_r_hopp_tarp_c];
    loading: [spriteset_r_hopp_grey_1, spriteset_r_hopp_grey_2, spriteset_r_hopp_grey_3, spriteset_r_hopp_grey_4];
}
spritegroup spritegroup_r_hopp_grey_d {
    loaded:  [spriteset_r_hopp_tarp_d];
    loading: [spriteset_r_hopp_grey_1, spriteset_r_hopp_grey_2, spriteset_r_hopp_grey_3, spriteset_r_hopp_grey_4];
}

spritegroup spritegroup_r_hopp_sand_a {
    loaded:  [spriteset_r_hopp_tarp_a];
    loading: [spriteset_r_hopp_sand_1, spriteset_r_hopp_sand_2, spriteset_r_hopp_sand_3, spriteset_r_hopp_sand_4];
}
spritegroup spritegroup_r_hopp_sand_b {
    loaded:  [spriteset_r_hopp_tarp_b];
    loading: [spriteset_r_hopp_sand_1, spriteset_r_hopp_sand_2, spriteset_r_hopp_sand_3, spriteset_r_hopp_sand_4];
}
spritegroup spritegroup_r_hopp_sand_c {
    loaded:  [spriteset_r_hopp_tarp_c];
    loading: [spriteset_r_hopp_sand_1, spriteset_r_hopp_sand_2, spriteset_r_hopp_sand_3, spriteset_r_hopp_sand_4];
}
spritegroup spritegroup_r_hopp_sand_d {
    loaded:  [spriteset_r_hopp_tarp_d];
    loading: [spriteset_r_hopp_sand_1, spriteset_r_hopp_sand_2, spriteset_r_hopp_sand_3, spriteset_r_hopp_sand_4];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_r_hopp_a, cargo_type_in_veh ) {
        FERT: spritegroup_r_hopp_grey_a;
        CHEM: spritegroup_r_hopp_grey_a;
        SASH: spritegroup_r_hopp_grey_a;
        BDMT: spritegroup_r_hopp_grey_a;
        default: spritegroup_r_hopp_sand_a; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_r_hopp_b, cargo_type_in_veh ) {
        FERT: spritegroup_r_hopp_grey_b;
        CHEM: spritegroup_r_hopp_grey_b;
        SASH: spritegroup_r_hopp_grey_b;
        BDMT: spritegroup_r_hopp_grey_b;
        default: spritegroup_r_hopp_sand_b; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_r_hopp_c, cargo_type_in_veh ) {
        FERT: spritegroup_r_hopp_grey_c;
        CHEM: spritegroup_r_hopp_grey_c;
        SASH: spritegroup_r_hopp_grey_c;
        BDMT: spritegroup_r_hopp_grey_c;
        default: spritegroup_r_hopp_sand_c; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_r_hopp_d, cargo_type_in_veh ) {
        FERT: spritegroup_r_hopp_grey_d;
        CHEM: spritegroup_r_hopp_grey_d;
        SASH: spritegroup_r_hopp_grey_d;
        BDMT: spritegroup_r_hopp_grey_d;
        default: spritegroup_r_hopp_sand_d; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_r_hopp, build_year ) {
        0..1940: switch_spritegroup_r_hopp_a;
        1941..1970: switch_spritegroup_r_hopp_b;
        1971..2000: switch_spritegroup_r_hopp_c;
        2000..5000000: switch_spritegroup_r_hopp_d;
        default: switch_spritegroup_r_hopp_b;       
}

spriteset(spriteset_p_o_hopp, "gfx/P/p_o_hopp_tarp_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_hopp_a, "gfx/P/p_r_hopp_tarp_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_hopp_b, "gfx/P/p_r_hopp_tarp_02.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_hopp_c, "gfx/P/p_r_hopp_tarp_03.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_hopp_d, "gfx/P/p_r_hopp_tarp_04.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, switch_p_r_hopp, build_year ) {
        0..1940:        spriteset_p_r_hopp_a;
        1941..1970:     spriteset_p_r_hopp_b;
        1971..2000:     spriteset_p_r_hopp_c;
        2000..5000000:  spriteset_p_r_hopp_d;
        default:        spriteset_p_r_hopp_b;       
}

// open beds


spriteset(spriteset_o_open_cupr_0, "gfx/R/o_open_cupr_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_cupr_a, "gfx/R/o_open_cupr_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_cupr_b, "gfx/R/o_open_cupr_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_cupr_c, "gfx/R/o_open_cupr_04.png") {
    tmpl_7()
}
spritegroup spritegroup_o_open_cupr_a {
    loaded:  [spriteset_o_open_cupr_0, spriteset_o_open_cupr_a];
    loading: [spriteset_o_open_cupr_0, spriteset_o_open_cupr_a];
}
spritegroup spritegroup_o_open_cupr_b {
    loaded:  [spriteset_o_open_cupr_0, spriteset_o_open_cupr_b, spriteset_o_open_cupr_c];
    loading: [spriteset_o_open_cupr_0, spriteset_o_open_cupr_b, spriteset_o_open_cupr_c];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_open_cupr, random_bits ) {
        0..127: spritegroup_o_open_cupr_a;
        128..255: spritegroup_o_open_cupr_b;

        default: spritegroup_o_open_cupr_a;
}

spriteset(spriteset_o_open_steel_0, "gfx/R/o_open_steel_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_steel_a, "gfx/R/o_open_steel_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_steel_b, "gfx/R/o_open_steel_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_steel_c, "gfx/R/o_open_steel_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_steel_a {
    loaded:  [spriteset_o_open_steel_0, spriteset_o_open_steel_a];
    loading: [spriteset_o_open_steel_0, spriteset_o_open_steel_a];
}
spritegroup spritegroup_o_open_steel_b {
    loaded:  [spriteset_o_open_steel_0, spriteset_o_open_steel_b, spriteset_o_open_steel_c];
    loading: [spriteset_o_open_steel_0, spriteset_o_open_steel_b, spriteset_o_open_steel_c];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_open_steel, random_bits ) {
        0..127: spritegroup_o_open_steel_a;
        128..255: spritegroup_o_open_steel_b;

        default: spritegroup_o_open_steel_a;          
}

spriteset(spriteset_o_open_crate_0, "gfx/R/o_open_crate_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_crate_a, "gfx/R/o_open_crate_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_crate_b, "gfx/R/o_open_crate_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_crate_c, "gfx/R/o_open_crate_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_crate_a {
    loaded:  [spriteset_o_open_crate_0, spriteset_o_open_crate_a];
    loading: [spriteset_o_open_crate_0, spriteset_o_open_crate_a];
}
spritegroup spritegroup_o_open_crate_b {
    loaded:  [spriteset_o_open_crate_0, spriteset_o_open_crate_b];
    loading: [spriteset_o_open_crate_0, spriteset_o_open_crate_b];
}
spritegroup spritegroup_o_open_crate_c {
    loaded:  [spriteset_o_open_crate_0, spriteset_o_open_crate_c];
    loading: [spriteset_o_open_crate_0, spriteset_o_open_crate_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_open_crate, random_bits ) {
        0..85: spritegroup_o_open_crate_a;
        86..171: spritegroup_o_open_crate_b;
        172..255:spritegroup_o_open_crate_c;
        default: spritegroup_o_open_crate_a;          
}

spriteset(spriteset_o_open_food_0, "gfx/R/o_open_food_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_food_a, "gfx/R/o_open_food_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_food_b, "gfx/R/o_open_food_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_food_c, "gfx/R/o_open_food_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_food_a {
    loaded:  [spriteset_o_open_food_0, spriteset_o_open_food_a];
    loading: [spriteset_o_open_food_0, spriteset_o_open_food_a];
}
spritegroup spritegroup_o_open_food_b {
    loaded:  [spriteset_o_open_food_0, spriteset_o_open_food_b];
    loading: [spriteset_o_open_food_0, spriteset_o_open_food_b];
}
spritegroup spritegroup_o_open_food_c {
    loaded:  [spriteset_o_open_food_0, spriteset_o_open_food_c];
    loading: [spriteset_o_open_food_0, spriteset_o_open_food_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_open_food, random_bits ) {
        0..85: spritegroup_o_open_food_a;
        86..171: spritegroup_o_open_food_b;
        172..255:spritegroup_o_open_food_c;
        default: spritegroup_o_open_food_a;          
}

spriteset(spriteset_o_open_paper_0, "gfx/R/o_open_paper_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_paper_a, "gfx/R/o_open_paper_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_paper_b, "gfx/R/o_open_paper_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_paper_c, "gfx/R/o_open_paper_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_paper_a {
    loaded:  [spriteset_o_open_paper_0, spriteset_o_open_paper_a];
    loading: [spriteset_o_open_paper_0, spriteset_o_open_paper_a];
}
spritegroup spritegroup_o_open_paper_b {
    loaded:  [spriteset_o_open_paper_0, spriteset_o_open_paper_b];
    loading: [spriteset_o_open_paper_0, spriteset_o_open_paper_b];
}
spritegroup spritegroup_o_open_paper_c {
    loaded:  [spriteset_o_open_paper_0, spriteset_o_open_paper_c];
    loading: [spriteset_o_open_paper_0, spriteset_o_open_paper_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_open_paper, random_bits ) {
        0..85: spritegroup_o_open_paper_a;
        86..171: spritegroup_o_open_paper_b;
        172..255:spritegroup_o_open_paper_c;
        default: spritegroup_o_open_paper_a;          
}

spriteset(spriteset_o_open_iron_0, "gfx/R/o_open_iron_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_iron_a, "gfx/R/o_open_iron_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_iron_b, "gfx/R/o_open_iron_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_iron_c, "gfx/R/o_open_iron_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_iron_a {
    loaded:  [spriteset_o_open_iron_0, spriteset_o_open_iron_a];
    loading: [spriteset_o_open_iron_0, spriteset_o_open_iron_a];
}
spritegroup spritegroup_o_open_iron_b {
    loaded:  [spriteset_o_open_iron_0, spriteset_o_open_iron_b];
    loading: [spriteset_o_open_iron_0, spriteset_o_open_iron_b];
}
spritegroup spritegroup_o_open_iron_c {
    loaded:  [spriteset_o_open_iron_0, spriteset_o_open_iron_c];
    loading: [spriteset_o_open_iron_0, spriteset_o_open_iron_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_o_open_iron, random_bits ) {
        0..85: spritegroup_o_open_iron_a;
        86..171: spritegroup_o_open_iron_b;
        172..255:spritegroup_o_open_iron_c;
        default: spritegroup_o_open_iron_a;          
}

spriteset(spriteset_o_open_grey_1, "gfx/R/o_open_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_grey_2, "gfx/R/o_open_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_grey_3, "gfx/R/o_open_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_grey_4, "gfx/R/o_open_grey_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_grey {
    loaded:  [spriteset_o_open_grey_1, spriteset_o_open_grey_2, spriteset_o_open_grey_3, spriteset_o_open_grey_4];
    loading: [spriteset_o_open_grey_1, spriteset_o_open_grey_2, spriteset_o_open_grey_3, spriteset_o_open_grey_4];
}

spriteset(spriteset_o_open_coal_1, "gfx/R/o_open_coal_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_coal_2, "gfx/R/o_open_coal_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_coal_3, "gfx/R/o_open_coal_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_coal_4, "gfx/R/o_open_coal_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_coal {
    loaded:  [spriteset_o_open_coal_1, spriteset_o_open_coal_2, spriteset_o_open_coal_3, spriteset_o_open_coal_4];
    loading: [spriteset_o_open_coal_1, spriteset_o_open_coal_2, spriteset_o_open_coal_3, spriteset_o_open_coal_4];
}

spriteset(spriteset_o_open_ore_1, "gfx/R/o_open_ore_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_ore_2, "gfx/R/o_open_ore_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_ore_3, "gfx/R/o_open_ore_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_ore_4, "gfx/R/o_open_ore_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_ore {
    loaded:  [spriteset_o_open_ore_1, spriteset_o_open_ore_2, spriteset_o_open_ore_3, spriteset_o_open_ore_4];
    loading: [spriteset_o_open_ore_1, spriteset_o_open_ore_2, spriteset_o_open_ore_3, spriteset_o_open_ore_4];
}

spriteset(spriteset_o_open_scrap_1, "gfx/R/o_open_scrap_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_scrap_2, "gfx/R/o_open_scrap_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_scrap_3, "gfx/R/o_open_scrap_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_scrap_4, "gfx/R/o_open_scrap_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_scrap {
    loaded:  [spriteset_o_open_scrap_1, spriteset_o_open_scrap_2, spriteset_o_open_scrap_3, spriteset_o_open_scrap_4];
    loading: [spriteset_o_open_scrap_1, spriteset_o_open_scrap_2, spriteset_o_open_scrap_3, spriteset_o_open_scrap_4];
}

spriteset(spriteset_o_open_sand_1, "gfx/R/o_open_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_sand_2, "gfx/R/o_open_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_sand_3, "gfx/R/o_open_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_sand_4, "gfx/R/o_open_sand_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_sand {
    loaded:  [spriteset_o_open_sand_1, spriteset_o_open_sand_2, spriteset_o_open_sand_3, spriteset_o_open_sand_4];
    loading: [spriteset_o_open_sand_1, spriteset_o_open_sand_2, spriteset_o_open_sand_3, spriteset_o_open_sand_4];
}

spriteset(spriteset_o_open_brown_1, "gfx/R/o_open_brown_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_brown_2, "gfx/R/o_open_brown_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_brown_3, "gfx/R/o_open_brown_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_brown_4, "gfx/R/o_open_brown_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_brown {
    loaded:  [spriteset_o_open_brown_1, spriteset_o_open_brown_2, spriteset_o_open_brown_3, spriteset_o_open_brown_4];
    loading: [spriteset_o_open_brown_1, spriteset_o_open_brown_2, spriteset_o_open_brown_3, spriteset_o_open_brown_4];
}

spriteset(spriteset_o_open_fruit_1, "gfx/R/o_open_fruit_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_fruit_2, "gfx/R/o_open_fruit_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_fruit_3, "gfx/R/o_open_fruit_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_fruit_4, "gfx/R/o_open_fruit_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_fruit {
    loaded:  [spriteset_o_open_fruit_1, spriteset_o_open_fruit_2, spriteset_o_open_fruit_3, spriteset_o_open_fruit_4];
    loading: [spriteset_o_open_fruit_1, spriteset_o_open_fruit_2, spriteset_o_open_fruit_3, spriteset_o_open_fruit_4];
}

spriteset(spriteset_o_open_sheep_1, "gfx/R/o_open_sheep_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_sheep_2, "gfx/R/o_open_sheep_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_sheep_3, "gfx/R/o_open_sheep_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_sheep_4, "gfx/R/o_open_sheep_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_sheep {
    loaded:  [spriteset_o_open_sheep_1, spriteset_o_open_sheep_2, spriteset_o_open_sheep_3, spriteset_o_open_sheep_4];
    loading: [spriteset_o_open_sheep_1, spriteset_o_open_sheep_2, spriteset_o_open_sheep_3, spriteset_o_open_sheep_4];
}

spriteset(spriteset_o_open_drum_1, "gfx/R/o_open_drum_01.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_drum_2, "gfx/R/o_open_drum_02.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_drum_3, "gfx/R/o_open_drum_03.png") {
    tmpl_7()
}
spriteset(spriteset_o_open_drum_4, "gfx/R/o_open_drum_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_open_drum {
    loaded:  [spriteset_o_open_drum_1, spriteset_o_open_drum_2, spriteset_o_open_drum_3, spriteset_o_open_drum_4];
    loading: [spriteset_o_open_drum_1, spriteset_o_open_drum_2, spriteset_o_open_drum_3, spriteset_o_open_drum_4];
}

    switch (FEAT_ROADVEHS, SELF, switch_o_open_drum_bulk, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for changing default cargo sprite by class
        bitmask(CC_LIQUID): spritegroup_o_open_drum;
        bitmask(CC_BULK): spritegroup_o_open_brown;
        default: switch_spritegroup_o_open_crate;
    }

switch (FEAT_ROADVEHS, SELF, switch_o_open, cargo_type_in_veh ) {
        PAPR:       switch_spritegroup_o_open_paper;
        STEL:       switch_spritegroup_o_open_steel;
        METL:       switch_spritegroup_o_open_steel;
        SCMT:       spritegroup_o_open_scrap;
        RCYC:       spritegroup_o_open_scrap;
        COPR:       switch_spritegroup_o_open_cupr;
        FOOD:       switch_spritegroup_o_open_food;
        FISH:       switch_spritegroup_o_open_food;
        FRUT:       spritegroup_o_open_fruit;
        IORE:       spritegroup_o_open_ore;
        AORE:       spritegroup_o_open_ore;
        COAL:       spritegroup_o_open_coal;
        COKE:       spritegroup_o_open_coal;
        CORE:       spritegroup_o_open_ore;
        LVST:       spritegroup_o_open_sheep;
        PETR:       spritegroup_o_open_drum;
        OIL_:       spritegroup_o_open_drum;
        GRVL:       spritegroup_o_open_grey;
        SASH:       spritegroup_o_open_grey;
        LIME:       spritegroup_o_open_grey;
        PEAT:       spritegroup_o_open_brown;
        SAND:       spritegroup_o_open_sand;
        PHOS:       spritegroup_o_open_grey;
        IRON:       switch_spritegroup_o_open_iron;
        PLAS:       spritegroup_o_open_drum;
        CBLK:       spritegroup_o_open_drum;
        default:    switch_o_open_drum_bulk;
        
}

spriteset(spriteset_r_open_cupr_1, "gfx/R/r_open_cupr_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_cupr_2, "gfx/R/r_open_cupr_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_cupr_3, "gfx/R/r_open_cupr_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_cupr_4, "gfx/R/r_open_cupr_04.png") {
    tmpl_7()
}
spritegroup spritegroup_r_open_cupr {
    loaded:  [spriteset_r_open_cupr_1, spriteset_r_open_cupr_2, spriteset_r_open_cupr_3, spriteset_r_open_cupr_4];
    loading: [spriteset_r_open_cupr_1, spriteset_r_open_cupr_2, spriteset_r_open_cupr_3, spriteset_r_open_cupr_4];
}

spriteset(spriteset_r_open_steel_1, "gfx/R/r_open_steel_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_steel_2, "gfx/R/r_open_steel_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_steel_3, "gfx/R/r_open_steel_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_steel_4, "gfx/R/r_open_steel_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_steel {
    loaded:  [spriteset_r_open_steel_1, spriteset_r_open_steel_2, spriteset_r_open_steel_3, spriteset_r_open_steel_4];
    loading: [spriteset_r_open_steel_1, spriteset_r_open_steel_2, spriteset_r_open_steel_3, spriteset_r_open_steel_4];
}

spriteset(spriteset_r_open_crate_1, "gfx/R/r_open_crate_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_crate_2, "gfx/R/r_open_crate_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_crate_3, "gfx/R/r_open_crate_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_crate_4, "gfx/R/r_open_crate_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_crate {
    loaded:  [spriteset_r_open_crate_1, spriteset_r_open_crate_2, spriteset_r_open_crate_3, spriteset_r_open_crate_4];
    loading: [spriteset_r_open_crate_1, spriteset_r_open_crate_2, spriteset_r_open_crate_3, spriteset_r_open_crate_4];
}

spriteset(spriteset_r_open_board_1, "gfx/R/r_open_board_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_board_2, "gfx/R/r_open_board_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_board_3, "gfx/R/r_open_board_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_board_4, "gfx/R/r_open_board_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_board {
    loaded:  [spriteset_r_open_board_1, spriteset_r_open_board_2, spriteset_r_open_board_3, spriteset_r_open_board_4];
    loading: [spriteset_r_open_board_1, spriteset_r_open_board_2, spriteset_r_open_board_3, spriteset_r_open_board_4];
}

spriteset(spriteset_r_open_log_1, "gfx/R/r_open_log_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_log_2, "gfx/R/r_open_log_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_log_3, "gfx/R/r_open_log_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_log_4, "gfx/R/r_open_log_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_log {
    loaded:  [spriteset_r_open_log_1, spriteset_r_open_log_2, spriteset_r_open_log_3, spriteset_r_open_log_4];
    loading: [spriteset_r_open_log_1, spriteset_r_open_log_2, spriteset_r_open_log_3, spriteset_r_open_log_4];
}

spriteset(spriteset_r_open_food_1, "gfx/R/r_open_food_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_food_2, "gfx/R/r_open_food_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_food_3, "gfx/R/r_open_food_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_food_4, "gfx/R/r_open_food_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_food {
    loaded:  [spriteset_r_open_food_1, spriteset_r_open_food_2, spriteset_r_open_food_3, spriteset_r_open_food_4];
    loading: [spriteset_r_open_food_1, spriteset_r_open_food_2, spriteset_r_open_food_3, spriteset_r_open_food_4];
}

spriteset(spriteset_r_open_paper_1, "gfx/R/r_open_paper_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_paper_2, "gfx/R/r_open_paper_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_paper_3, "gfx/R/r_open_paper_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_paper_4, "gfx/R/r_open_paper_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_paper {
    loaded:  [spriteset_r_open_paper_1, spriteset_r_open_paper_2, spriteset_r_open_paper_3, spriteset_r_open_paper_4];
    loading: [spriteset_r_open_paper_1, spriteset_r_open_paper_2, spriteset_r_open_paper_3, spriteset_r_open_paper_4];
}

spriteset(spriteset_r_open_grey_1, "gfx/R/r_open_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_grey_2, "gfx/R/r_open_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_grey_3, "gfx/R/r_open_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_grey_4, "gfx/R/r_open_grey_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_grey {
    loaded:  [spriteset_r_open_grey_1, spriteset_r_open_grey_2, spriteset_r_open_grey_3, spriteset_r_open_grey_4];
    loading: [spriteset_r_open_grey_1, spriteset_r_open_grey_2, spriteset_r_open_grey_3, spriteset_r_open_grey_4];
}

spriteset(spriteset_r_open_coal_1, "gfx/R/r_open_coal_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_coal_2, "gfx/R/r_open_coal_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_coal_3, "gfx/R/r_open_coal_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_coal_4, "gfx/R/r_open_coal_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_coal {
    loaded:  [spriteset_r_open_coal_1, spriteset_r_open_coal_2, spriteset_r_open_coal_3, spriteset_r_open_coal_4];
    loading: [spriteset_r_open_coal_1, spriteset_r_open_coal_2, spriteset_r_open_coal_3, spriteset_r_open_coal_4];
}

spriteset(spriteset_r_open_ore_1, "gfx/R/r_open_ore_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_ore_2, "gfx/R/r_open_ore_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_ore_3, "gfx/R/r_open_ore_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_ore_4, "gfx/R/r_open_ore_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_ore {
    loaded:  [spriteset_r_open_ore_1, spriteset_r_open_ore_2, spriteset_r_open_ore_3, spriteset_r_open_ore_4];
    loading: [spriteset_r_open_ore_1, spriteset_r_open_ore_2, spriteset_r_open_ore_3, spriteset_r_open_ore_4];
}

spriteset(spriteset_r_open_scrap_1, "gfx/R/r_open_scrap_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_scrap_2, "gfx/R/r_open_scrap_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_scrap_3, "gfx/R/r_open_scrap_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_scrap_4, "gfx/R/r_open_scrap_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_scrap {
    loaded:  [spriteset_r_open_scrap_1, spriteset_r_open_scrap_2, spriteset_r_open_scrap_3, spriteset_r_open_scrap_4];
    loading: [spriteset_r_open_scrap_1, spriteset_r_open_scrap_2, spriteset_r_open_scrap_3, spriteset_r_open_scrap_4];
}

spriteset(spriteset_r_open_sand_1, "gfx/R/r_open_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_sand_2, "gfx/R/r_open_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_sand_3, "gfx/R/r_open_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_sand_4, "gfx/R/r_open_sand_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_sand {
    loaded:  [spriteset_r_open_sand_1, spriteset_r_open_sand_2, spriteset_r_open_sand_3, spriteset_r_open_sand_4];
    loading: [spriteset_r_open_sand_1, spriteset_r_open_sand_2, spriteset_r_open_sand_3, spriteset_r_open_sand_4];
}

spriteset(spriteset_r_open_brown_1, "gfx/R/r_open_brown_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_brown_2, "gfx/R/r_open_brown_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_brown_3, "gfx/R/r_open_brown_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_brown_4, "gfx/R/r_open_brown_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_brown {
    loaded:  [spriteset_r_open_brown_1, spriteset_r_open_brown_2, spriteset_r_open_brown_3, spriteset_r_open_brown_4];
    loading: [spriteset_r_open_brown_1, spriteset_r_open_brown_2, spriteset_r_open_brown_3, spriteset_r_open_brown_4];
}

spriteset(spriteset_r_open_fruit_1, "gfx/R/r_open_fruit_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_fruit_2, "gfx/R/r_open_fruit_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_fruit_3, "gfx/R/r_open_fruit_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_fruit_4, "gfx/R/r_open_fruit_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_fruit {
    loaded:  [spriteset_r_open_fruit_1, spriteset_r_open_fruit_2, spriteset_r_open_fruit_3, spriteset_r_open_fruit_4];
    loading: [spriteset_r_open_fruit_1, spriteset_r_open_fruit_2, spriteset_r_open_fruit_3, spriteset_r_open_fruit_4];
}

spriteset(spriteset_r_open_sheep_1, "gfx/R/r_open_sheep_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_sheep_2, "gfx/R/r_open_sheep_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_sheep_3, "gfx/R/r_open_sheep_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_sheep_4, "gfx/R/r_open_sheep_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_sheep {
    loaded:  [spriteset_r_open_sheep_1, spriteset_r_open_sheep_2, spriteset_r_open_sheep_3, spriteset_r_open_sheep_4];
    loading: [spriteset_r_open_sheep_1, spriteset_r_open_sheep_2, spriteset_r_open_sheep_3, spriteset_r_open_sheep_4];
}

spriteset(spriteset_r_open_drum_1, "gfx/R/r_open_drum_01.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_drum_2, "gfx/R/r_open_drum_02.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_drum_3, "gfx/R/r_open_drum_03.png") {
    tmpl_7()
}
spriteset(spriteset_r_open_drum_4, "gfx/R/r_open_drum_04.png") {
    tmpl_7()
}

spritegroup spritegroup_r_open_drum {
    loaded:  [spriteset_r_open_drum_1, spriteset_r_open_drum_2, spriteset_r_open_drum_3, spriteset_r_open_drum_4];
    loading: [spriteset_r_open_drum_1, spriteset_r_open_drum_2, spriteset_r_open_drum_3, spriteset_r_open_drum_4];
}

    switch (FEAT_ROADVEHS, SELF, switch_r_open_drum_bulk, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for changing default cargo sprite by class
        bitmask(CC_LIQUID): spritegroup_r_open_drum;
        bitmask(CC_BULK): spritegroup_r_open_brown;
        default: spritegroup_r_open_crate;
    }

switch (FEAT_ROADVEHS, SELF, switch_r_open, cargo_type_in_veh ) {
        PAPR:       spritegroup_r_open_paper;
        STEL:       spritegroup_r_open_steel;
        METL:       spritegroup_r_open_steel;
        SCMT:       spritegroup_r_open_scrap;
        RCYC:       spritegroup_r_open_scrap;
        COPR:       spritegroup_r_open_cupr;
        FOOD:       spritegroup_r_open_food;
        FISH:       spritegroup_r_open_food;
        FRUT:       spritegroup_r_open_fruit;
        IORE:       spritegroup_r_open_ore;
        AORE:       spritegroup_r_open_ore;
        COAL:       spritegroup_r_open_coal;
        COKE:       spritegroup_r_open_coal;
        CORE:       spritegroup_r_open_ore;
        LVST:       spritegroup_r_open_sheep;
        PETR:       spritegroup_r_open_drum;
        OIL_:       spritegroup_r_open_drum;
        GRVL:       spritegroup_r_open_grey;
        SASH:       spritegroup_r_open_grey;
        LIME:       spritegroup_r_open_grey;
        PEAT:       spritegroup_r_open_brown;
        SAND:       spritegroup_r_open_sand;
        PHOS:       spritegroup_r_open_grey;
        PLAS:       spritegroup_r_open_drum;
        CBLK:       spritegroup_r_open_drum;
        default:    switch_r_open_drum_bulk;
        
}

spriteset(spriteset_p_o_open, "gfx/P/p_o_open_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_r_open, "gfx/P/p_r_open_01.png") {
    tmpl_p()
}
    
    

//Common truck graphics and switches

//set capacity of truck for each part

//box, mail, ref, stock and hopper capacities

switch (FEAT_ROADVEHS, SELF, switch_capacity_rd_box, vehicle_is_available  ) {
        default: ((param_capacity*9)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_rc_box, vehicle_is_available  ) {
        default: ((param_capacity*11)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_rb_box, vehicle_is_available  ) {
        default: ((param_capacity*10)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ra_box, vehicle_is_available  ) {
        default: ((param_capacity*12)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r1_box, vehicle_is_available  ) {
        default: ((param_capacity*15)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r2_box, vehicle_is_available  ) {
        default: ((param_capacity*17)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r3_box, vehicle_is_available  ) {
        default: ((param_capacity*20)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r4_box, vehicle_is_available  ) {
        default: ((param_capacity*24)/2);
}

//flat and tank capacities

switch (FEAT_ROADVEHS, SELF, switch_capacity_rd_flat, vehicle_is_available  ) {
        
        default: ((param_capacity*10)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_rc_flat, vehicle_is_available  ) {
        default: ((param_capacity*13)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_rb_flat, vehicle_is_available  ) {
        
        default: ((param_capacity*12)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ra_flat, vehicle_is_available  ) {
        default: ((param_capacity*15)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r1_flat, vehicle_is_available  ) {
        default: ((param_capacity*17)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r2_flat, vehicle_is_available  ) {
        default: ((param_capacity*20)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r3_flat, vehicle_is_available  ) {
        default: ((param_capacity*24)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r4_flat, vehicle_is_available  ) {
        default: ((param_capacity*28)/2);
}

//mineral capacities

switch (FEAT_ROADVEHS, SELF, switch_capacity_rb_mine, vehicle_is_available  ) {
        default: ((param_capacity*15)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ra_mine, vehicle_is_available  ) {
        default: ((param_capacity*18)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r1_mine, vehicle_is_available  ) {
        default: ((param_capacity*24)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r2_mine, vehicle_is_available  ) {
        default: ((param_capacity*26)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r3_mine, vehicle_is_available  ) {
        default: ((param_capacity*28)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r4_mine, vehicle_is_available  ) {
        default: ((param_capacity*30)/2);
}

// open capacity

switch_capacity_d_open = ((param_capacity*7)/2);

switch_capacity_c_open = ((param_capacity*8)/2);

switch_capacity_b_open = ((param_capacity*8)/2);

switch_capacity_a_open = ((param_capacity*10)/2);

switch_capacity_1_open = ((param_capacity*13)/2);

switch_capacity_2_open = ((param_capacity*15)/2);

switch_capacity_3_open = ((param_capacity*18)/2);

switch_capacity_4_open = ((param_capacity*20)/2);

switch (FEAT_ROADVEHS, SELF, switch_rd_open_cargo, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for reducing capacity for some cargos
        bitmask(CC_LIQUID): (switch_capacity_b_open*9)/10; //barrels hold less than tanker
        bitmask(CC_BULK): (switch_capacity_b_open*7)/10; //bed holds less bulk than a hopper
        default: switch_capacity_b_open;
    }

    switch (FEAT_ROADVEHS, SELF, switch_rc_open_cargo, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for reducing capacity for some cargos
        bitmask(CC_LIQUID): (switch_capacity_b_open*9)/10; //barrels hold less than tanker
        bitmask(CC_BULK): (switch_capacity_b_open*7)/10; //bed holds less bulk than a hopper
        default: switch_capacity_b_open;
    }

    switch (FEAT_ROADVEHS, SELF, switch_rb_open_cargo, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for reducing capacity for some cargos
        bitmask(CC_LIQUID): (switch_capacity_b_open*9)/10; //barrels hold less than tanker
        bitmask(CC_BULK): (switch_capacity_b_open*7)/10; //bed holds less bulk than a hopper
        default: switch_capacity_b_open;
    }

    switch (FEAT_ROADVEHS, SELF, switch_ra_open_cargo, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for reducing capacity for some cargos
        bitmask(CC_LIQUID): (switch_capacity_a_open*9)/10; //barrels hold less than tanker
        bitmask(CC_BULK): (switch_capacity_a_open*7)/10; //bed holds less bulk than a hopper
        default: switch_capacity_a_open;
    }   
    switch (FEAT_ROADVEHS, SELF, switch_r1_open_cargo, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for reducing capacity for some cargos
        bitmask(CC_LIQUID): (switch_capacity_1_open*9)/10; //barrels hold less than tanker
        bitmask(CC_BULK): (switch_capacity_1_open*7)/10; //bed holds less bulk than a hopper
        default: switch_capacity_1_open;
    }

    switch (FEAT_ROADVEHS, SELF, switch_r2_open_cargo, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for reducing capacity for some cargos
        bitmask(CC_LIQUID): (switch_capacity_2_open*9)/10; //barrels hold less than tanker
        bitmask(CC_BULK): (switch_capacity_2_open*7)/10; //bed holds less bulk than a hopper
        default: switch_capacity_2_open;
    }

    switch (FEAT_ROADVEHS, SELF, switch_r3_open_cargo, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for reducing capacity for some cargos
        bitmask(CC_LIQUID): (switch_capacity_3_open*9)/10; //barrels hold less than tanker
        bitmask(CC_BULK): (switch_capacity_3_open*7)/10; //bed holds less bulk than a hopper
        default: switch_capacity_3_open;
    }

    switch (FEAT_ROADVEHS, SELF, switch_r4_open_cargo, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for reducing capacity for some cargos
        bitmask(CC_LIQUID): (switch_capacity_4_open*9)/10; //barrels hold less than tanker
        bitmask(CC_BULK): (switch_capacity_4_open*7)/10; //bed holds less bulk than a hopper
        default: switch_capacity_4_open;
    }



/* ======================= Fossil Fuel Trucks ======================= */

/* Mail Trucks */

//fB mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fb_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_fb_cab;
    2:  switch_o_mail;
    }

switch(FEAT_ROADVEHS, SELF, switch_fb_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_o_mail;
    2:  switch_fb_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fb_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_mail_n;
    DIRECTION_NORTHEAST:    switch_fb_mail_n;
    DIRECTION_EAST:         switch_fb_mail_n;
    DIRECTION_SOUTHEAST:    switch_fb_mail_s;
    DIRECTION_SOUTH:        switch_fb_mail_s;
    DIRECTION_SOUTHWEST:    switch_fb_mail_s;
    DIRECTION_WEST:         switch_fb_mail_n;
    DIRECTION_NORTHWEST:    switch_fb_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_mail;
    1:  spriteset_p_fb_cab;
    2:  switch_fuel_icon;
}

//fB mail properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_mail, 1103) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TMB), string(STR_MAIL), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period:               170;
    loading_speed:                  10;
    cost_factor:                    90;      
    running_cost_factor:            92;      
    speed:                          40 km/h; 
    power:                          80 hp;   
    cargo_capacity:                 10;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         6.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fb_truck;
    cargo_capacity:             switch_capacity_rb_box;
    purchase_cargo_capacity:    switch_capacity_rb_box; 
    default:                    switch_fb_mail;  
    cost_factor:                buycost_fb_truck;
    purchase:                   switch_purchase_fb_mail;
    }
}
}

//fa mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fa_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_fa_cab;
    2:  switch_o_mail;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_o_mail;
    2:  switch_fa_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_mail_n;
    DIRECTION_NORTHEAST:    switch_fa_mail_n;
    DIRECTION_EAST:         switch_fa_mail_n;
    DIRECTION_SOUTHEAST:    switch_fa_mail_s;
    DIRECTION_SOUTH:        switch_fa_mail_s;
    DIRECTION_SOUTHWEST:    switch_fa_mail_s;
    DIRECTION_WEST:         switch_fa_mail_n;
    DIRECTION_NORTHWEST:    switch_fa_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_mail;
    1:  spriteset_p_fa_cab;
    2:  switch_fuel_icon;
}

//fa mail properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_mail, 1104) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OGA), string(STR_MAIL), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period:               170;
    loading_speed:                  10;
    cost_factor:                    100;      
    running_cost_factor:            100;      
    speed:                          50 km/h; 
    power:                          110 hp;   
    cargo_capacity:                 12;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fa_truck;
    cargo_capacity:             switch_capacity_ra_box;
    purchase_cargo_capacity:    switch_capacity_ra_box; 
    default:                    switch_fa_mail; 
    cost_factor:                buycost_fa_truck; 
    purchase:                   switch_purchase_fa_mail;
    }
}
}

//f1 mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f1_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_f1_cab;
    2:  switch_r_mail;
    }

switch(FEAT_ROADVEHS, SELF, switch_f1_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_mail;
    2:  switch_f1_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f1_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f1_mail_n;
    DIRECTION_NORTHEAST:    switch_f1_mail_n;
    DIRECTION_EAST:         switch_f1_mail_n;
    DIRECTION_SOUTHEAST:    switch_f1_mail_s;
    DIRECTION_SOUTH:        switch_f1_mail_s;
    DIRECTION_SOUTHWEST:    switch_f1_mail_s;
    DIRECTION_WEST:         switch_f1_mail_n;
    DIRECTION_NORTHWEST:    switch_f1_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_f1_cab;
    2:  switch_fuel_icon;
}

//f1 mail properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_mail, 1105) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BW1), string(STR_MAIL), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period :              170;
    loading_speed:                  12;
    cost_factor:                    120;      
    running_cost_factor:            120;      
    speed:                          60 km/h; 
    power:                          180 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box; 
    default:                    switch_f1_mail; 
    cost_factor:                buycost_f1_truck; 
    purchase:                   switch_purchase_f1_mail;
    }
}
}

//f2 mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f2_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_f2_cab;
    2:  switch_r_mail;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_mail;
    2:  switch_f2_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f2_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f2_mail_n;
    DIRECTION_NORTHEAST:    switch_f2_mail_n;
    DIRECTION_EAST:         switch_f2_mail_n;
    DIRECTION_SOUTHEAST:    switch_f2_mail_s;
    DIRECTION_SOUTH:        switch_f2_mail_s;
    DIRECTION_SOUTHWEST:    switch_f2_mail_s;
    DIRECTION_WEST:         switch_f2_mail_n;
    DIRECTION_NORTHWEST:    switch_f2_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_f2_cab;
    2:  switch_fuel_icon;
}

//f2 mail properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_mail, 1106) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DN2), string(STR_MAIL), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period:               170;
    loading_speed:                  12;
    cost_factor:                    140;      
    running_cost_factor:            160;      
    speed:                          80 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box;
    default:                    switch_f2_mail;  
    cost_factor:                buycost_f2_truck;
    purchase:                   switch_purchase_f2_mail;
    }
}
}


//f3 mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f3_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_f3_cab;
    2:  switch_r_mail;
    }

switch(FEAT_ROADVEHS, SELF, switch_f3_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_mail;
    2:  switch_f3_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f3_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f3_mail_n;
    DIRECTION_NORTHEAST:    switch_f3_mail_n;
    DIRECTION_EAST:         switch_f3_mail_n;
    DIRECTION_SOUTHEAST:    switch_f3_mail_s;
    DIRECTION_SOUTH:        switch_f3_mail_s;
    DIRECTION_SOUTHWEST:    switch_f3_mail_s;
    DIRECTION_WEST:         switch_f3_mail_n;
    DIRECTION_NORTHWEST:    switch_f3_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_f3_cab;
    2:  switch_fuel_icon;
}

//f3 mail properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_mail, 1107) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TM3), string(STR_MAIL), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period:               170;
    loading_speed:                  12;
    cost_factor:                    160;      
    running_cost_factor:            220;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_f3_mail;  
    cost_factor:                buycost_f3_truck;
    purchase:                   switch_purchase_f3_mail;
    }
}
}

//f4 mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f4_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_f4_cab;
    2:  switch_r_mail;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_mail;
    2:  switch_f4_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f4_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f4_mail_n;
    DIRECTION_NORTHEAST:    switch_f4_mail_n;
    DIRECTION_EAST:         switch_f4_mail_n;
    DIRECTION_SOUTHEAST:    switch_f4_mail_s;
    DIRECTION_SOUTH:        switch_f4_mail_s;
    DIRECTION_SOUTHWEST:    switch_f4_mail_s;
    DIRECTION_WEST:         switch_f4_mail_n;
    DIRECTION_NORTHWEST:    switch_f4_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_f4_cab;
    2:  switch_fuel_icon;
}

//f4 mail properties


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_mail, 1108) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OG4), string(STR_MAIL), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period:               170;
    loading_speed:                  12;
    cost_factor:                    180;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_f4_mail; 
    cost_factor:                buycost_f4_truck;
    purchase:                   switch_purchase_f4_mail;
    }
}
}

/* Box Trucks */

//Fd box graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fd_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rd_body;  
    1:  switch_fd_cab;
    2:  switch_o_box;
    }

switch(FEAT_ROADVEHS, SELF, switch_fd_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rd_body;
    1:  switch_o_box;
    2:  switch_fd_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fd_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fd_box_n;
    DIRECTION_NORTHEAST:    switch_fd_box_n;
    DIRECTION_EAST:         switch_fd_box_n;
    DIRECTION_SOUTHEAST:    switch_fd_box_s;
    DIRECTION_SOUTH:        switch_fd_box_s;
    DIRECTION_SOUTHWEST:    switch_fd_box_s;
    DIRECTION_WEST:         switch_fd_box_n;
    DIRECTION_NORTHWEST:    switch_fd_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fd_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_box;
    2:  spriteset_p_fd_cab;
    3:  switch_steam_icon;
}

//Fd box properties

if (param_srv ==1){
item(FEAT_ROADVEHS, item_fd_box, 1201) {
property {

    name:                           string(STR_CONCAT, string(STR_SMOD_HPD), string(STR_BOX), string(STR_P_S));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  6;
    cost_factor:                    115;     
    running_cost_factor:            120;      
    speed:                          30 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1860,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 1) {
    property {
    introduction_date:              date(1830,01,01); 
    model_life:                     70;
    }
}
if (param_fgei == 2) {
    property {
    introduction_date:              date(1800,01,01); 
    model_life:                     50;
    }
}
graphics {
    running_cost_factor:        switch_runcost_fd_truck;
    power:                      switch_power_fd;
    visual_effect:              switch_truck_smoke;
    cargo_capacity:             switch_capacity_rd_box;
    purchase_cargo_capacity:    switch_capacity_rd_box;
    purchase:                   switch_purchase_fd_box;
    default:                    switch_fd_box; 
    cost_factor:                buycost_fd_truck;
    }
}
}

//Fc box graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fc_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rc_body;  
    1:  switch_fc_cab;
    2:  switch_o_box;
    }

switch(FEAT_ROADVEHS, SELF, switch_fc_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rc_body;
    1:  switch_o_box;
    2:  switch_fc_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fc_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fc_box_n;
    DIRECTION_NORTHEAST:    switch_fc_box_n;
    DIRECTION_EAST:         switch_fc_box_n;
    DIRECTION_SOUTHEAST:    switch_fc_box_s;
    DIRECTION_SOUTH:        switch_fc_box_s;
    DIRECTION_SOUTHWEST:    switch_fc_box_s;
    DIRECTION_WEST:         switch_fc_box_n;
    DIRECTION_NORTHWEST:    switch_fc_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fc_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_box;
    2:  spriteset_p_fc_cab;
    3:  switch_steam_icon;
}

//Fc box properties

if (param_srv ==1){
item(FEAT_ROADVEHS, item_fc_box, 1202) {
property {

    name:                           string(STR_CONCAT, string(STR_SMOD_PKC), string(STR_BOX), string(STR_P_S));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  6;
    cost_factor:                    125;     
    running_cost_factor:            120;      
    speed:                          50 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1895,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         15 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 2) {
    property {
    introduction_date:              date(1850,01,01); 
    model_life:                     90;
    }
}
graphics {
    running_cost_factor:        switch_runcost_fc_truck;
    power:                      switch_power_fc;
    visual_effect:              switch_truck_smoke;
    cargo_capacity:             switch_capacity_rc_box;
    purchase_cargo_capacity:    switch_capacity_rc_box;
    default:                    switch_fc_box; 
    purchase:                   switch_purchase_fc_box;
    cost_factor:                buycost_fc_truck;
    }
}
}

//fB piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fb_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_fb_cab;
    2:  switch_o_box;
    }

switch(FEAT_ROADVEHS, SELF, switch_fb_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_o_box;
    2:  switch_fb_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fb_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_box_n;
    DIRECTION_NORTHEAST:    switch_fb_box_n;
    DIRECTION_EAST:         switch_fb_box_n;
    DIRECTION_SOUTHEAST:    switch_fb_box_s;
    DIRECTION_SOUTH:        switch_fb_box_s;
    DIRECTION_SOUTHWEST:    switch_fb_box_s;
    DIRECTION_WEST:         switch_fb_box_n;
    DIRECTION_NORTHWEST:    switch_fb_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_box;
    2:  spriteset_p_fb_cab;
    3:  switch_fuel_icon;
}

//fB piece goods properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_box, 1203) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TMB), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  6;
    cost_factor:                    90;      
    running_cost_factor:            92;      
    speed:                          40 km/h; 
    power:                          80 hp;   
    cargo_capacity:                 10;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         6.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fb_truck;
    cargo_capacity:             switch_capacity_rb_box;
    purchase_cargo_capacity:    switch_capacity_rb_box; 
    default:                    switch_fb_box; 
    purchase:                   switch_purchase_fb_box;
    cost_factor:                buycost_fb_truck; 
    }
}
}

//fa piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fa_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_fa_cab;
    2:  switch_o_box;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_o_box;
    2:  switch_fa_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_box_n;
    DIRECTION_NORTHEAST:    switch_fa_box_n;
    DIRECTION_EAST:         switch_fa_box_n;
    DIRECTION_SOUTHEAST:    switch_fa_box_s;
    DIRECTION_SOUTH:        switch_fa_box_s;
    DIRECTION_SOUTHWEST:    switch_fa_box_s;
    DIRECTION_WEST:         switch_fa_box_n;
    DIRECTION_NORTHWEST:    switch_fa_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_box;
    2:  spriteset_p_fa_cab;
    3:  switch_fuel_icon;
}

//fa piece goods properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_box, 1204) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BWA), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  6;
    cost_factor:                    100;      
    running_cost_factor:            100;      
    speed:                          50 km/h; 
    power:                          110 hp;   
    cargo_capacity:                 12;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fa_truck;
    cargo_capacity:             switch_capacity_ra_box;
    purchase_cargo_capacity:    switch_capacity_ra_box; 
    default:                    switch_fa_box;  
    cost_factor:                buycost_fa_truck;
    purchase:                   switch_purchase_fa_box;
    }
}
}

//f1 piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f1_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_f1_cab;
    2:  switch_r_box;
    }

switch(FEAT_ROADVEHS, SELF, switch_f1_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_box;
    2:  switch_f1_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f1_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f1_box_n;
    DIRECTION_NORTHEAST:    switch_f1_box_n;
    DIRECTION_EAST:         switch_f1_box_n;
    DIRECTION_SOUTHEAST:    switch_f1_box_s;
    DIRECTION_SOUTH:        switch_f1_box_s;
    DIRECTION_SOUTHWEST:    switch_f1_box_s;
    DIRECTION_WEST:         switch_f1_box_n;
    DIRECTION_NORTHWEST:    switch_f1_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_box;
    2:  spriteset_p_f1_cab;
    3:  switch_fuel_icon;
}

//f1 piece goods properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_box, 1205) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OG1), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  6;
    cost_factor:                    120;      
    running_cost_factor:            120;      
    speed:                          60 km/h; 
    power:                          180 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box; 
    default:                    switch_f1_box;
    purchase:                   switch_purchase_f1_box; 
    cost_factor:                buycost_f1_truck; 
    }
}
}

//f2 piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f2_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_f2_cab;
    2:  switch_r_box;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_box;
    2:  switch_f2_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f2_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f2_box_n;
    DIRECTION_NORTHEAST:    switch_f2_box_n;
    DIRECTION_EAST:         switch_f2_box_n;
    DIRECTION_SOUTHEAST:    switch_f2_box_s;
    DIRECTION_SOUTH:        switch_f2_box_s;
    DIRECTION_SOUTHWEST:    switch_f2_box_s;
    DIRECTION_WEST:         switch_f2_box_n;
    DIRECTION_NORTHWEST:    switch_f2_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_box;
    2:  spriteset_p_f2_cab;
    3:  switch_fuel_icon;
}

//f2 piece goods properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_box, 1206) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DN2), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    140;      
    running_cost_factor:            160;      
    speed:                          80 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box;
    default:                    switch_f2_box; 
    cost_factor:                buycost_f2_truck; 
    purchase:                   switch_purchase_f2_box;
    }
}
}


//f3 piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f3_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_f3_cab;
    2:  switch_r_box;
    }

switch(FEAT_ROADVEHS, SELF, switch_f3_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_box;
    2:  switch_f3_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f3_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f3_box_n;
    DIRECTION_NORTHEAST:    switch_f3_box_n;
    DIRECTION_EAST:         switch_f3_box_n;
    DIRECTION_SOUTHEAST:    switch_f3_box_s;
    DIRECTION_SOUTH:        switch_f3_box_s;
    DIRECTION_SOUTHWEST:    switch_f3_box_s;
    DIRECTION_WEST:         switch_f3_box_n;
    DIRECTION_NORTHWEST:    switch_f3_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_box;
    2:  spriteset_p_f3_cab;
    3:  switch_fuel_icon;
}

//f3 piece goods properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_box, 1207) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BW3), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    160;      
    running_cost_factor:            220;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_f3_box;
    cost_factor:                buycost_f3_truck;  
    purchase:                   switch_purchase_f3_box;
    }
}
}

//f4 piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f4_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_f4_cab;
    2:  switch_r_box;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_box;
    2:  switch_f4_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f4_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f4_box_n;
    DIRECTION_NORTHEAST:    switch_f4_box_n;
    DIRECTION_EAST:         switch_f4_box_n;
    DIRECTION_SOUTHEAST:    switch_f4_box_s;
    DIRECTION_SOUTH:        switch_f4_box_s;
    DIRECTION_SOUTHWEST:    switch_f4_box_s;
    DIRECTION_WEST:         switch_f4_box_n;
    DIRECTION_NORTHWEST:    switch_f4_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_box;
    2:  spriteset_p_f4_cab;
    3:  switch_fuel_icon;
}


//f4 piece goods properties


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_box, 1208) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TM4), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    180;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_f4_box; 
    cost_factor:                buycost_f4_truck;
    purchase:                   switch_purchase_f4_box;
    }
}
}

//fB refridgerated properties

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_fb_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_fb_cab;
    2:  switch_o_ref;
    }

switch(FEAT_ROADVEHS, SELF, switch_fb_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_o_ref;
    2:  switch_fb_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fb_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_ref_n;
    DIRECTION_NORTHEAST:    switch_fb_ref_n;
    DIRECTION_EAST:         switch_fb_ref_n;
    DIRECTION_SOUTHEAST:    switch_fb_ref_s;
    DIRECTION_SOUTH:        switch_fb_ref_s;
    DIRECTION_SOUTHWEST:    switch_fb_ref_s;
    DIRECTION_WEST:         switch_fb_ref_n;
    DIRECTION_NORTHWEST:    switch_fb_ref_n;
    }
switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_ref;
    2:  spriteset_p_fb_cab;
    3:  switch_fuel_icon;
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_ref, 1303) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BWB), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  6;
    cost_factor:                    90;      
    running_cost_factor:            92;      
    speed:                          40 km/h; 
    power:                          80 hp;   
    cargo_capacity:                 10;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         6.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fb_truck;
    cargo_capacity:             switch_capacity_rb_box;
    purchase_cargo_capacity:    switch_capacity_rb_box; 
    default:                    switch_fb_ref; 
    cost_factor:                buycost_fb_truck;
    purchase:                   switch_purchase_fb_ref; 
    }
}
}

//fa refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_fa_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_fa_cab;
    2:  switch_o_ref;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_o_ref;
    2:  switch_fa_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_ref_n;
    DIRECTION_NORTHEAST:    switch_fa_ref_n;
    DIRECTION_EAST:         switch_fa_ref_n;
    DIRECTION_SOUTHEAST:    switch_fa_ref_s;
    DIRECTION_SOUTH:        switch_fa_ref_s;
    DIRECTION_SOUTHWEST:    switch_fa_ref_s;
    DIRECTION_WEST:         switch_fa_ref_n;
    DIRECTION_NORTHWEST:    switch_fa_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_ref;
    2:  spriteset_p_fa_cab;
    3:  switch_fuel_icon;
}

//fa refridgerated properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_ref, 1304) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TMA), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  6;
    cost_factor:                    100;      
    running_cost_factor:            100;      
    speed:                          50 km/h; 
    power:                          110 hp;   
    cargo_capacity:                 12;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fa_truck;
    cargo_capacity:             switch_capacity_ra_box;
    purchase_cargo_capacity:    switch_capacity_ra_box; 
    default:                    switch_fa_ref; 
    cost_factor:                buycost_fa_truck; 
    purchase:                   switch_purchase_fa_ref;
    }
}
}

//f1 refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_f1_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_f1_cab;
    2:  switch_r_ref;
    }

switch(FEAT_ROADVEHS, SELF, switch_f1_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_ref;
    2:  switch_f1_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f1_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f1_ref_n;
    DIRECTION_NORTHEAST:    switch_f1_ref_n;
    DIRECTION_EAST:         switch_f1_ref_n;
    DIRECTION_SOUTHEAST:    switch_f1_ref_s;
    DIRECTION_SOUTH:        switch_f1_ref_s;
    DIRECTION_SOUTHWEST:    switch_f1_ref_s;
    DIRECTION_WEST:         switch_f1_ref_n;
    DIRECTION_NORTHWEST:    switch_f1_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_f1_cab;
    3:  switch_fuel_icon;
}

//f1 refridgerated properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_ref, 1305) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BW1), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  6;
    cost_factor:                    120;      
    running_cost_factor:            120;      
    speed:                          60 km/h; 
    power:                          180 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box; 
    default:                    switch_f1_ref;
    cost_factor:                buycost_f1_truck; 
    purchase:                   switch_purchase_f1_ref; 
    }
}
}

//f2 refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_f2_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_f2_cab;
    2:  switch_r_ref;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_ref;
    2:  switch_f2_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f2_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f2_ref_n;
    DIRECTION_NORTHEAST:    switch_f2_ref_n;
    DIRECTION_EAST:         switch_f2_ref_n;
    DIRECTION_SOUTHEAST:    switch_f2_ref_s;
    DIRECTION_SOUTH:        switch_f2_ref_s;
    DIRECTION_SOUTHWEST:    switch_f2_ref_s;
    DIRECTION_WEST:         switch_f2_ref_n;
    DIRECTION_NORTHWEST:    switch_f2_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_f2_cab;
    3:  switch_fuel_icon;
}

//f2 refridgerated properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_ref, 1306) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TM2), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  8;
    cost_factor:                    140;      
    running_cost_factor:            160;      
    speed:                          80 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box; 
    default:                    switch_f2_ref; 
    cost_factor:                buycost_f2_truck;
    purchase:                   switch_purchase_f2_ref; 
    }
}
}


//f3 refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_f3_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_f3_cab;
    2:  switch_r_ref;
    }

switch(FEAT_ROADVEHS, SELF, switch_f3_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_ref;
    2:  switch_f3_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f3_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f3_ref_n;
    DIRECTION_NORTHEAST:    switch_f3_ref_n;
    DIRECTION_EAST:         switch_f3_ref_n;
    DIRECTION_SOUTHEAST:    switch_f3_ref_s;
    DIRECTION_SOUTH:        switch_f3_ref_s;
    DIRECTION_SOUTHWEST:    switch_f3_ref_s;
    DIRECTION_WEST:         switch_f3_ref_n;
    DIRECTION_NORTHWEST:    switch_f3_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_f3_cab;
    3:  switch_fuel_icon;
}

//f3 refridgerated properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_ref, 1307) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DN3), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    160;
    running_cost_factor:            220;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics 
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_f3_ref;
    cost_factor:                buycost_f3_truck;  
    purchase:                   switch_purchase_f3_ref;
    }
}
}

//f4 refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_f4_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_f4_cab;
    2:  switch_r_ref;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_ref;
    2:  switch_f4_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f4_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f4_ref_n;
    DIRECTION_NORTHEAST:    switch_f4_ref_n;
    DIRECTION_EAST:         switch_f4_ref_n;
    DIRECTION_SOUTHEAST:    switch_f4_ref_s;
    DIRECTION_SOUTH:        switch_f4_ref_s;
    DIRECTION_SOUTHWEST:    switch_f4_ref_s;
    DIRECTION_WEST:         switch_f4_ref_n;
    DIRECTION_NORTHWEST:    switch_f4_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_f4_cab;
    3:  switch_fuel_icon;
}

//f4 refridgerated properties


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_ref, 1308) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OG4), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    180;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13.5 ton;
    cost_factor:           ((param_buycost*185)/4);
    }

graphics {
    running_cost_factor:        switch_runcost_f4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_f4_ref; 
    cost_factor:                buycost_f4_truck;
    purchase:                   switch_purchase_f4_ref;
    }
}
}

// livestock trucks



// fb graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fb_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_fb_cab;
    2:  switch_o_stock;
    
}

switch(FEAT_ROADVEHS, SELF, switch_fb_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_o_stock;
    2:  switch_fb_cab;
    
}

switch (FEAT_ROADVEHS, SELF, switch_fb_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_stock_n;
    DIRECTION_NORTHEAST:    switch_fb_stock_n;
    DIRECTION_EAST:         switch_fb_stock_n;
    DIRECTION_SOUTHEAST:    switch_fb_stock_s;
    DIRECTION_SOUTH:        switch_fb_stock_s;
    DIRECTION_SOUTHWEST:    switch_fb_stock_s;
    DIRECTION_WEST:         switch_fb_stock_n;
    DIRECTION_NORTHWEST:    switch_fb_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_stock;
    2:  spriteset_p_fb_cab;
    3:  switch_fuel_icon;
}

//fB livestock properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_stock, 1403) {
property {
    
    name:                           string(STR_CONCAT, string(STR_FMOD_OGB), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  6;
    cost_factor:                    90;
    running_cost_factor:            92;
    speed:                          40 km/h;
    power:                          80 hp;
    cargo_capacity:                 10;
    introduction_date:              date(1910,01,01);
    model_life:                     35;
    vehicle_life:                   25;
    reliability_decay:              13;
    road_type:                      ROAD;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         6.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fb_truck;
    cargo_capacity:             switch_capacity_rb_box;
    purchase_cargo_capacity:    switch_capacity_rb_box; 
    default:                    switch_fb_stock;
    cost_factor:                buycost_fb_truck; 
    purchase:                   switch_purchase_fb_stock; 
    }
}
}

//fa livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fa_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_fa_cab;
    2:  switch_o_stock;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_o_stock;
    2:  switch_fa_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_stock_n;
    DIRECTION_NORTHEAST:    switch_fa_stock_n;
    DIRECTION_EAST:         switch_fa_stock_n;
    DIRECTION_SOUTHEAST:    switch_fa_stock_s;
    DIRECTION_SOUTH:        switch_fa_stock_s;
    DIRECTION_SOUTHWEST:    switch_fa_stock_s;
    DIRECTION_WEST:         switch_fa_stock_n;
    DIRECTION_NORTHWEST:    switch_fa_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_stock;
    2:  spriteset_p_fa_cab;
    3:  switch_fuel_icon;
}

//fa livestock properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_stock, 1404) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DNA), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  6;
    cost_factor:                    100;      
    running_cost_factor:            100;      
    speed:                          50 km/h; 
    power:                          110 hp;   
    cargo_capacity:                 12;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fa_truck;
    cargo_capacity:             switch_capacity_ra_box;
    purchase_cargo_capacity:    switch_capacity_ra_box; 
    default:                    switch_fa_stock; 
    cost_factor:                buycost_fa_truck;
    purchase:                   switch_purchase_fa_stock; 
    }
}
}

//f1 livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f1_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_f1_cab;
    2:  switch_r_stock;
    }

switch(FEAT_ROADVEHS, SELF, switch_f1_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_stock;
    2:  switch_f1_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f1_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f1_stock_n;
    DIRECTION_NORTHEAST:    switch_f1_stock_n;
    DIRECTION_EAST:         switch_f1_stock_n;
    DIRECTION_SOUTHEAST:    switch_f1_stock_s;
    DIRECTION_SOUTH:        switch_f1_stock_s;
    DIRECTION_SOUTHWEST:    switch_f1_stock_s;
    DIRECTION_WEST:         switch_f1_stock_n;
    DIRECTION_NORTHWEST:    switch_f1_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_f1_cab;
    3:  switch_fuel_icon;
}

//f1 livestock properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_stock, 1405) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DN1), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  6;
    cost_factor:                    120;      
    running_cost_factor:            120;      
    speed:                          60 km/h; 
    power:                          180 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box; 
    default:                    switch_f1_stock; 
    cost_factor:                buycost_f1_truck;
    purchase:                   switch_purchase_f1_stock; 
    }
}
}

//f2 livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f2_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_f2_cab;
    2:  switch_r_stock;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_stock;
    2:  switch_f2_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f2_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f2_stock_n;
    DIRECTION_NORTHEAST:    switch_f2_stock_n;
    DIRECTION_EAST:         switch_f2_stock_n;
    DIRECTION_SOUTHEAST:    switch_f2_stock_s;
    DIRECTION_SOUTH:        switch_f2_stock_s;
    DIRECTION_SOUTHWEST:    switch_f2_stock_s;
    DIRECTION_WEST:         switch_f2_stock_n;
    DIRECTION_NORTHWEST:    switch_f2_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_f2_cab;
    3:  switch_fuel_icon;
}

//f2 livestock properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_stock, 1406) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OG2), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  8;
    cost_factor:                    140;      
    running_cost_factor:            160;      
    speed:                          80 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box; 
    default:                    switch_f2_stock;
    cost_factor:                buycost_f2_truck;  
    purchase:                   switch_purchase_f2_stock;
    }
}
}


//f3 livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f3_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_f3_cab;
    2:  switch_r_stock;
    }

switch(FEAT_ROADVEHS, SELF, switch_f3_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_stock;
    2:  switch_f3_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f3_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f3_stock_n;
    DIRECTION_NORTHEAST:    switch_f3_stock_n;
    DIRECTION_EAST:         switch_f3_stock_n;
    DIRECTION_SOUTHEAST:    switch_f3_stock_s;
    DIRECTION_SOUTH:        switch_f3_stock_s;
    DIRECTION_SOUTHWEST:    switch_f3_stock_s;
    DIRECTION_WEST:         switch_f3_stock_n;
    DIRECTION_NORTHWEST:    switch_f3_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_f3_cab;
    3:  switch_fuel_icon;
}

//f3 livestock properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_stock, 1407) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TM3), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  8;
    cost_factor:                    160;      
    running_cost_factor:            220;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_f3_stock; 
    cost_factor:                buycost_f3_truck; 
    purchase:                   switch_purchase_f3_stock;
    }
}
}

//f4 livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f4_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_f4_cab;
    2:  switch_r_stock;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_stock;
    2:  switch_f4_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f4_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f4_stock_n;
    DIRECTION_NORTHEAST:    switch_f4_stock_n;
    DIRECTION_EAST:         switch_f4_stock_n;
    DIRECTION_SOUTHEAST:    switch_f4_stock_s;
    DIRECTION_SOUTH:        switch_f4_stock_s;
    DIRECTION_SOUTHWEST:    switch_f4_stock_s;
    DIRECTION_WEST:         switch_f4_stock_n;
    DIRECTION_NORTHWEST:    switch_f4_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_f4_cab;
    3:  switch_fuel_icon;
}

//f4 livestock properties


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_stock, 1408) {
property {

    name:                           string(STR_CONCAT, string(STR_FMOD_BW4), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  8;
    cost_factor:                    180;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_f4_stock; 
    cost_factor:                buycost_f4_truck;
    purchase:                   switch_purchase_f4_stock;
    }
}
}

// flatbed trucks
//Fd flat graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fd_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rd_body;  
    1:  switch_fd_cab;
    2:  switch_o_flat;
    }

switch(FEAT_ROADVEHS, SELF, switch_fd_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rd_body;
    1:  switch_o_flat;
    2:  switch_fd_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fd_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fd_flat_n;
    DIRECTION_NORTHEAST:    switch_fd_flat_n;
    DIRECTION_EAST:         switch_fd_flat_n;
    DIRECTION_SOUTHEAST:    switch_fd_flat_s;
    DIRECTION_SOUTH:        switch_fd_flat_s;
    DIRECTION_SOUTHWEST:    switch_fd_flat_s;
    DIRECTION_WEST:         switch_fd_flat_n;
    DIRECTION_NORTHWEST:    switch_fd_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fd_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_flat;
    2:  spriteset_p_fd_cab;
    3:  switch_steam_icon;
}

//Fd flat properties

if (param_srv ==1){
item(FEAT_ROADVEHS, item_fd_flat, 1601) {
property {

    name:                           string(STR_CONCAT, string(STR_SMOD_HPD), string(STR_FLAT), string(STR_P_S));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  6;
    cost_factor:                    115;     
    running_cost_factor:            120;      
    speed:                          30 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1860,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 1) {
    property {
    introduction_date:              date(1830,01,01); 
    model_life:                     70;
    }
}
if (param_fgei == 2) {
    property {
    introduction_date:              date(1800,01,01); 
    model_life:                     50;
    }
}
graphics {
    running_cost_factor:        switch_runcost_fd_truck;
    power:                      switch_power_fd;
    visual_effect:              switch_truck_smoke;
    cargo_capacity:             switch_capacity_rd_flat;
    purchase_cargo_capacity:    switch_capacity_rd_flat;
    default:                    switch_fd_flat; 
    cost_factor:                buycost_fd_truck;
    purchase:                   switch_purchase_fd_flat;
    }
}
}

//Fc flat graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fc_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rc_body;  
    1:  switch_fc_cab;
    2:  switch_o_flat;
    }

switch(FEAT_ROADVEHS, SELF, switch_fc_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rc_body;
    1:  switch_o_flat;
    2:  switch_fc_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fc_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fc_flat_n;
    DIRECTION_NORTHEAST:    switch_fc_flat_n;
    DIRECTION_EAST:         switch_fc_flat_n;
    DIRECTION_SOUTHEAST:    switch_fc_flat_s;
    DIRECTION_SOUTH:        switch_fc_flat_s;
    DIRECTION_SOUTHWEST:    switch_fc_flat_s;
    DIRECTION_WEST:         switch_fc_flat_n;
    DIRECTION_NORTHWEST:    switch_fc_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fc_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_flat;
    2:  spriteset_p_fc_cab;
    3:  switch_steam_icon;
}

//Fc flat properties

if (param_srv ==1){
item(FEAT_ROADVEHS, item_fc_flat, 1602) {
property {

    name:                           string(STR_CONCAT, string(STR_SMOD_PKC), string(STR_FLAT), string(STR_P_S));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  8;
    cost_factor:                    125;     
    running_cost_factor:            120;      
    speed:                          50 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1895,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         15 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 2) {
    property {
    introduction_date:              date(1850,01,01); 
    model_life:                     90;
    }
}
graphics {
    running_cost_factor:        switch_runcost_fc_truck;
    power:                      switch_power_fc;
    visual_effect:              switch_truck_smoke;
    cargo_capacity:             switch_capacity_rc_flat;
    purchase_cargo_capacity:    switch_capacity_rc_flat;
    default:                    switch_fc_flat; 
    cost_factor:                buycost_fc_truck;
    purchase:                   switch_purchase_fc_flat;
    }
}
}
// fb graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fb_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_fb_cab;
    2:  switch_o_flat;
    }

switch(FEAT_ROADVEHS, SELF, switch_fb_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_o_flat;
    2:  switch_fb_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fb_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_flat_n;
    DIRECTION_NORTHEAST:    switch_fb_flat_n;
    DIRECTION_EAST:         switch_fb_flat_n;
    DIRECTION_SOUTHEAST:    switch_fb_flat_s;
    DIRECTION_SOUTH:        switch_fb_flat_s;
    DIRECTION_SOUTHWEST:    switch_fb_flat_s;
    DIRECTION_WEST:         switch_fb_flat_n;
    DIRECTION_NORTHWEST:    switch_fb_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_flat;
    2:  spriteset_p_fb_cab;
    3:  switch_fuel_icon;
}

//fB flatbed properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_flat, 1603) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TMB), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  8;
    cost_factor:                    90;      
    running_cost_factor:            92;      
    speed:                          40 km/h; 
    power:                          80 hp;   
    cargo_capacity:                 12;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fb_truck;
    cargo_capacity:             switch_capacity_rb_flat;
    purchase_cargo_capacity:    switch_capacity_rb_flat;    
    default:                    switch_fb_flat; 
    cost_factor:                buycost_fb_truck; 
    purchase:                   switch_purchase_fb_flat;
    visual_effect:              switch_truck_exhaust;
    }
}
}

//fa flatbed graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fa_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_fa_cab;
    2:  switch_o_flat;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_o_flat;
    2:  switch_fa_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_flat_n;
    DIRECTION_NORTHEAST:    switch_fa_flat_n;
    DIRECTION_EAST:         switch_fa_flat_n;
    DIRECTION_SOUTHEAST:    switch_fa_flat_s;
    DIRECTION_SOUTH:        switch_fa_flat_s;
    DIRECTION_SOUTHWEST:    switch_fa_flat_s;
    DIRECTION_WEST:         switch_fa_flat_n;
    DIRECTION_NORTHWEST:    switch_fa_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_flat;
    2:  spriteset_p_fa_cab;
    3:  switch_fuel_icon;
}

//fa flatbed properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_flat, 1604) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OGA), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  10;
    cost_factor:                    100;      
    running_cost_factor:            100;      
    speed:                          50 km/h; 
    power:                          110 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fa_truck;
    cargo_capacity:             switch_capacity_ra_flat;
    purchase_cargo_capacity:    switch_capacity_ra_flat;    
    default:                    switch_fa_flat;
    cost_factor:                buycost_fa_truck; 
    purchase:                   switch_purchase_fa_flat;
    visual_effect:              switch_truck_exhaust;
    }
}
}

//f1 flatbed graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f1_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_f1_cab;
    2:  switch_r_flat;
    }

switch(FEAT_ROADVEHS, SELF, switch_f1_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_flat;
    2:  switch_f1_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f1_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f1_flat_n;
    DIRECTION_NORTHEAST:    switch_f1_flat_n;
    DIRECTION_EAST:         switch_f1_flat_n;
    DIRECTION_SOUTHEAST:    switch_f1_flat_s;
    DIRECTION_SOUTH:        switch_f1_flat_s;
    DIRECTION_SOUTHWEST:    switch_f1_flat_s;
    DIRECTION_WEST:         switch_f1_flat_n;
    DIRECTION_NORTHWEST:    switch_f1_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_f1_cab;
    3:  switch_fuel_icon;
}

//f1 flatbed properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_flat, 1605) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OG1), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    120;      
    running_cost_factor:            120;      
    speed:                          60 km/h; 
    power:                          180 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f1_truck;
    cargo_capacity:             switch_capacity_r1_flat;
    purchase_cargo_capacity:    switch_capacity_r1_flat;    
    default:                    switch_f1_flat;
    cost_factor:                buycost_f1_truck;  
    purchase:                   switch_purchase_f1_flat;
    visual_effect:              switch_truck_exhaust;
    }
}
}

//f2 flatbed graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f2_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_f2_cab;
    2:  switch_r_flat;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_flat;
    2:  switch_f2_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f2_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f2_flat_n;
    DIRECTION_NORTHEAST:    switch_f2_flat_n;
    DIRECTION_EAST:         switch_f2_flat_n;
    DIRECTION_SOUTHEAST:    switch_f2_flat_s;
    DIRECTION_SOUTH:        switch_f2_flat_s;
    DIRECTION_SOUTHWEST:    switch_f2_flat_s;
    DIRECTION_WEST:         switch_f2_flat_n;
    DIRECTION_NORTHWEST:    switch_f2_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_f2_cab;
    3:  switch_fuel_icon;
}

//f2 flatbed properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_flat, 1606) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DN2), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    140;      
    running_cost_factor:            160;      
    speed:                          80 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f2_truck;
    cargo_capacity:             switch_capacity_r2_flat;
    purchase_cargo_capacity:    switch_capacity_r2_flat;    
    default:                    switch_f2_flat;
    cost_factor:                buycost_f2_truck; 
    purchase:                   switch_purchase_f2_flat; 
    visual_effect:              switch_truck_exhaust;
    }
}
}


//f3 flatbed graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f3_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_f3_cab;
    2:  switch_r_flat;
    
}

switch(FEAT_ROADVEHS, SELF, switch_f3_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_flat;
    2:  switch_f3_cab;
    
}

switch (FEAT_ROADVEHS, SELF, switch_f3_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f3_flat_n;
    DIRECTION_NORTHEAST:    switch_f3_flat_n;
    DIRECTION_EAST:         switch_f3_flat_n;
    DIRECTION_SOUTHEAST:    switch_f3_flat_s;
    DIRECTION_SOUTH:        switch_f3_flat_s;
    DIRECTION_SOUTHWEST:    switch_f3_flat_s;
    DIRECTION_WEST:         switch_f3_flat_n;
    DIRECTION_NORTHWEST:    switch_f3_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_f3_cab;
    3:  switch_fuel_icon;
}

//f3 flatbed properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_flat, 1607) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TM3), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    160;      
    running_cost_factor:            220;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 24;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f3_truck;
    cargo_capacity:             switch_capacity_r3_flat;
    purchase_cargo_capacity:    switch_capacity_r3_flat;    
    default:                    switch_f3_flat;  
    cost_factor:                buycost_f3_truck;
    purchase:                   switch_purchase_f3_flat;
    visual_effect:              switch_truck_exhaust;
    }
}
}

//f4 flatbed graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f4_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_f4_cab;
    2:  switch_r_flat;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_flat;
    2:  switch_f4_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f4_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f4_flat_n;
    DIRECTION_NORTHEAST:    switch_f4_flat_n;
    DIRECTION_EAST:         switch_f4_flat_n;
    DIRECTION_SOUTHEAST:    switch_f4_flat_s;
    DIRECTION_SOUTH:        switch_f4_flat_s;
    DIRECTION_SOUTHWEST:    switch_f4_flat_s;
    DIRECTION_WEST:         switch_f4_flat_n;
    DIRECTION_NORTHWEST:    switch_f4_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_f4_cab;
    3:  switch_fuel_icon;
}

//f4 flatbed properties


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_flat, 1608) {
property {

    name:                           string(STR_CONCAT, string(STR_FMOD_BW4), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    180;      
    running_cost_factor:            240;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 26;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f4_truck;
    cargo_capacity:             switch_capacity_r4_flat;
    purchase_cargo_capacity:    switch_capacity_r4_flat;
    default:                    switch_f4_flat; 
    cost_factor:                buycost_f4_truck;
    purchase:                   switch_purchase_f4_flat;
    visual_effect:              switch_truck_exhaust;
    }
}
}

// Covered Hoppers

// covered hopper trucks

// fb graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fb_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_fb_cab;
    2:  switch_o_hopp;
    }

switch(FEAT_ROADVEHS, SELF, switch_fb_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_o_hopp;
    2:  switch_fb_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fb_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_hopp_n;
    DIRECTION_NORTHEAST:    switch_fb_hopp_n;
    DIRECTION_EAST:         switch_fb_hopp_n;
    DIRECTION_SOUTHEAST:    switch_fb_hopp_s;
    DIRECTION_SOUTH:        switch_fb_hopp_s;
    DIRECTION_SOUTHWEST:    switch_fb_hopp_s;
    DIRECTION_WEST:         switch_fb_hopp_n;
    DIRECTION_NORTHWEST:    switch_fb_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_hopp;
    2:  spriteset_p_fb_cab;
    3:  switch_fuel_icon;
}

//fB covered hopper properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_hopp, 1803) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BWB), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  8;
    cost_factor:                    90;      
    running_cost_factor:            92;      
    speed:                          40 km/h; 
    power:                          80 hp;   
    cargo_capacity:                 10;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         6.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fb_truck;
    cargo_capacity:             switch_capacity_rb_box;
    purchase_cargo_capacity:    switch_capacity_rb_box; 
    default:                    switch_fb_hopp;
    cost_factor:                buycost_fb_truck; 
    purchase:                   switch_purchase_fb_hopp;
    visual_effect:              switch_truck_exhaust; 
    }
}
}

//fa covered hopper graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fa_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_fa_cab;
    2:  switch_o_hopp;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_o_hopp;
    2:  switch_fa_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_hopp_n;
    DIRECTION_NORTHEAST:    switch_fa_hopp_n;
    DIRECTION_EAST:         switch_fa_hopp_n;
    DIRECTION_SOUTHEAST:    switch_fa_hopp_s;
    DIRECTION_SOUTH:        switch_fa_hopp_s;
    DIRECTION_SOUTHWEST:    switch_fa_hopp_s;
    DIRECTION_WEST:         switch_fa_hopp_n;
    DIRECTION_NORTHWEST:    switch_fa_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_hopp;
    2:  spriteset_p_fa_cab;
    3:  switch_fuel_icon;
}

//fa covered hopper properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_hopp, 1804) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OGA), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  10;
    cost_factor:                    100;      
    running_cost_factor:            100;      
    speed:                          50 km/h; 
    power:                          110 hp;   
    cargo_capacity:                 12;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fa_truck;
    cargo_capacity:             switch_capacity_ra_box;
    purchase_cargo_capacity:    switch_capacity_ra_box; 
    default:                    switch_fa_hopp; 
    cost_factor:                buycost_fa_truck; 
    purchase:                   switch_purchase_fa_hopp;
    visual_effect:              switch_truck_exhaust;
    }
}
}

//f1 covered hopper graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f1_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_f1_cab;
    2:  switch_r_hopp;
    }

switch(FEAT_ROADVEHS, SELF, switch_f1_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_hopp;
    2:  switch_f1_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f1_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f1_hopp_n;
    DIRECTION_NORTHEAST:    switch_f1_hopp_n;
    DIRECTION_EAST:         switch_f1_hopp_n;
    DIRECTION_SOUTHEAST:    switch_f1_hopp_s;
    DIRECTION_SOUTH:        switch_f1_hopp_s;
    DIRECTION_SOUTHWEST:    switch_f1_hopp_s;
    DIRECTION_WEST:         switch_f1_hopp_n;
    DIRECTION_NORTHWEST:    switch_f1_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_f1_cab;
    3:  switch_fuel_icon;
}

//f1 covered hopper properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_hopp, 1805) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TM1), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  12;
    cost_factor:                    120;      
    running_cost_factor:            120;      
    speed:                          60 km/h; 
    power:                          180 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box; 
    default:                    switch_f1_hopp; 
    cost_factor:                buycost_f1_truck; 
    purchase:                   switch_purchase_f1_hopp;
    }
}
}

//f2 covered hopper graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f2_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_f2_cab;
    2:  switch_r_hopp;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_hopp;
    2:  switch_f2_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f2_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f2_hopp_n;
    DIRECTION_NORTHEAST:    switch_f2_hopp_n;
    DIRECTION_EAST:         switch_f2_hopp_n;
    DIRECTION_SOUTHEAST:    switch_f2_hopp_s;
    DIRECTION_SOUTH:        switch_f2_hopp_s;
    DIRECTION_SOUTHWEST:    switch_f2_hopp_s;
    DIRECTION_WEST:         switch_f2_hopp_n;
    DIRECTION_NORTHWEST:    switch_f2_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_f2_cab;
    3:  switch_fuel_icon;
}

//f2 covered hopper properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_hopp, 1806) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BW2), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  12;
    cost_factor:                    140;      
    running_cost_factor:            160;      
    speed:                          80 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box; 
    cost_factor:                buycost_f2_truck;
    default:                    switch_f2_hopp;
    purchase:                   switch_purchase_f2_hopp;  
    }
}
}


//f3 covered hopper graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f3_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_f3_cab;
    2:  switch_r_hopp;
    }

switch(FEAT_ROADVEHS, SELF, switch_f3_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_hopp;
    2:  switch_f3_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f3_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f3_hopp_n;
    DIRECTION_NORTHEAST:    switch_f3_hopp_n;
    DIRECTION_EAST:         switch_f3_hopp_n;
    DIRECTION_SOUTHEAST:    switch_f3_hopp_s;
    DIRECTION_SOUTH:        switch_f3_hopp_s;
    DIRECTION_SOUTHWEST:    switch_f3_hopp_s;
    DIRECTION_WEST:         switch_f3_hopp_n;
    DIRECTION_NORTHWEST:    switch_f3_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_f3_cab;
    3:  switch_fuel_icon;
}

//f3 covered hopper properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_hopp, 1807) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DN3), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  12;
    cost_factor:                    160;      
    running_cost_factor:            220;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_f3_hopp; 
    cost_factor:                buycost_f3_truck;
    purchase:                   switch_purchase_f3_hopp; 
    }
}
}

//f4 covered hopper graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f4_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_f4_cab;
    2:  switch_r_hopp;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_hopp;
    2:  switch_f4_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f4_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f4_hopp_n;
    DIRECTION_NORTHEAST:    switch_f4_hopp_n;
    DIRECTION_EAST:         switch_f4_hopp_n;
    DIRECTION_SOUTHEAST:    switch_f4_hopp_s;
    DIRECTION_SOUTH:        switch_f4_hopp_s;
    DIRECTION_SOUTHWEST:    switch_f4_hopp_s;
    DIRECTION_WEST:         switch_f4_hopp_n;
    DIRECTION_NORTHWEST:    switch_f4_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_f4_cab;
    3:  switch_fuel_icon;
}

//f4 covered hopper properties


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_hopp, 1808) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OG4), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  14;
    cost_factor:                    180;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_f4_hopp; 
    cost_factor:                buycost_f4_truck;
    purchase:                   switch_purchase_f4_hopp;
    }
}
}

// MINERAL trucks

// fb graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fb_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_fb_cab;
    2:  switch_o_mine;
    }

switch(FEAT_ROADVEHS, SELF, switch_fb_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_o_mine;
    2:  switch_fb_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fb_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_mine_n;
    DIRECTION_NORTHEAST:    switch_fb_mine_n;
    DIRECTION_EAST:         switch_fb_mine_n;
    DIRECTION_SOUTHEAST:    switch_fb_mine_s;
    DIRECTION_SOUTH:        switch_fb_mine_s;
    DIRECTION_SOUTHWEST:    switch_fb_mine_s;
    DIRECTION_WEST:         switch_fb_mine_n;
    DIRECTION_NORTHWEST:    switch_fb_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_mine;
    2:  spriteset_p_fb_cab;
    3:  switch_fuel_icon;
}

//fB mineral properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_mine, 1903) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DNB), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  12;
    cost_factor:                    90;      
    running_cost_factor:            92;      
    speed:                          40 km/h; 
    power:                          80 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fb_truck;
    cargo_capacity:             switch_capacity_rb_mine;
    purchase_cargo_capacity:    switch_capacity_rb_mine;
    default:                    switch_fb_mine;  
    cost_factor:                buycost_fb_truck;
    purchase:                   switch_purchase_fb_mine;
    visual_effect:              switch_truck_exhaust;
    }
}
}

//fa mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fa_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_fa_cab;
    2:  switch_o_mine;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_o_mine;
    2:  switch_fa_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_mine_n;
    DIRECTION_NORTHEAST:    switch_fa_mine_n;
    DIRECTION_EAST:         switch_fa_mine_n;
    DIRECTION_SOUTHEAST:    switch_fa_mine_s;
    DIRECTION_SOUTH:        switch_fa_mine_s;
    DIRECTION_SOUTHWEST:    switch_fa_mine_s;
    DIRECTION_WEST:         switch_fa_mine_n;
    DIRECTION_NORTHWEST:    switch_fa_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_mine;
    2:  spriteset_p_fa_cab;
    3:  switch_fuel_icon;
}

//fa mineral properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_mine, 1904) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BWA), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  14;
    cost_factor:                    100;      
    running_cost_factor:            100;      
    speed:                          50 km/h; 
    power:                          110 hp;   
    cargo_capacity:                 18;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fa_truck;
    cargo_capacity:             switch_capacity_ra_mine;
    purchase_cargo_capacity:    switch_capacity_ra_mine;    
    default:                    switch_fa_mine;
    cost_factor:                buycost_fa_truck; 
    purchase:                   switch_purchase_fa_mine;
    visual_effect:              switch_truck_exhaust; 
    }
}
}

//f1 mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f1_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_f1_cab;
    2:  switch_r_mine;
    }

switch(FEAT_ROADVEHS, SELF, switch_f1_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_mine;
    2:  switch_f1_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f1_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f1_mine_n;
    DIRECTION_NORTHEAST:    switch_f1_mine_n;
    DIRECTION_EAST:         switch_f1_mine_n;
    DIRECTION_SOUTHEAST:    switch_f1_mine_s;
    DIRECTION_SOUTH:        switch_f1_mine_s;
    DIRECTION_SOUTHWEST:    switch_f1_mine_s;
    DIRECTION_WEST:         switch_f1_mine_n;
    DIRECTION_NORTHWEST:    switch_f1_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_f1_cab;
    3:  switch_fuel_icon;
}

//f1 mineral properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_mine, 1905) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TM1), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    120;      
    running_cost_factor:            120;      
    speed:                          60 km/h; 
    power:                          180 hp;   
    cargo_capacity:                 24;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f1_truck;
    cargo_capacity:             switch_capacity_r1_mine;
    purchase_cargo_capacity:    switch_capacity_r1_mine;    
    default:                    switch_f1_mine; 
    cost_factor:                buycost_f1_truck;
    purchase:                   switch_purchase_f1_mine; 
    visual_effect:              switch_truck_exhaust;
    }
}
}

//f2 mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f2_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_f2_cab;
    2:  switch_r_mine;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_mine;
    2:  switch_f2_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f2_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f2_mine_n;
    DIRECTION_NORTHEAST:    switch_f2_mine_n;
    DIRECTION_EAST:         switch_f2_mine_n;
    DIRECTION_SOUTHEAST:    switch_f2_mine_s;
    DIRECTION_SOUTH:        switch_f2_mine_s;
    DIRECTION_SOUTHWEST:    switch_f2_mine_s;
    DIRECTION_WEST:         switch_f2_mine_n;
    DIRECTION_NORTHWEST:    switch_f2_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_f2_cab;
    3:  switch_fuel_icon;
}

//f2 mineral properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_mine, 1906) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BW2), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    140;      
    running_cost_factor:            160;      
    speed:                          80 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f2_truck;
    cargo_capacity:             switch_capacity_r2_mine;
    purchase_cargo_capacity:    switch_capacity_r2_mine;    
    default:                    switch_f2_mine; 
    cost_factor:                buycost_f2_truck;
    purchase:                   switch_purchase_f2_mine; 
    }
}
}


//f3 mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f3_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_f3_cab;
    2:  switch_r_mine;
    }

switch(FEAT_ROADVEHS, SELF, switch_f3_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_mine;
    2:  switch_f3_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f3_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f3_mine_n;
    DIRECTION_NORTHEAST:    switch_f3_mine_n;
    DIRECTION_EAST:         switch_f3_mine_n;
    DIRECTION_SOUTHEAST:    switch_f3_mine_s;
    DIRECTION_SOUTH:        switch_f3_mine_s;
    DIRECTION_SOUTHWEST:    switch_f3_mine_s;
    DIRECTION_WEST:         switch_f3_mine_n;
    DIRECTION_NORTHWEST:    switch_f3_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_f3_cab;
    3:  switch_fuel_icon;
}

//f3 mineral properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_mine, 1907) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OG3), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    160;      
    running_cost_factor:            220;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 28;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         15.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f3_truck;
    cargo_capacity:             switch_capacity_r3_mine;
    purchase_cargo_capacity:    switch_capacity_r3_mine;    
    default:                    switch_f3_mine; 
    cost_factor:                buycost_f3_truck; 
    purchase:                   switch_purchase_f3_mine;
    }
}
}

//f4 mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f4_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_f4_cab;
    2:  switch_r_mine;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_mine;
    2:  switch_f4_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f4_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f4_mine_n;
    DIRECTION_NORTHEAST:    switch_f4_mine_n;
    DIRECTION_EAST:         switch_f4_mine_n;
    DIRECTION_SOUTHEAST:    switch_f4_mine_s;
    DIRECTION_SOUTH:        switch_f4_mine_s;
    DIRECTION_SOUTHWEST:    switch_f4_mine_s;
    DIRECTION_WEST:         switch_f4_mine_n;
    DIRECTION_NORTHWEST:    switch_f4_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_f4_cab;
    3:  switch_fuel_icon;
}

//f4 mineral properties


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_mine, 1908) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DN4), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  18;
    cost_factor:                    180;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 30;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f4_truck;
    cargo_capacity:             switch_capacity_r4_mine;
    purchase_cargo_capacity:    switch_capacity_r4_mine;
    default:                    switch_f4_mine; 
    cost_factor:                buycost_f4_truck;
    purchase:                   switch_purchase_f4_mine;
    }
}
}

// tanker trucks

// fb graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fb_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_fb_cab;
    2:  switch_o_tank;
    }

switch(FEAT_ROADVEHS, SELF, switch_fb_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_o_tank;
    2:  switch_fb_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fb_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_tank_n;
    DIRECTION_NORTHEAST:    switch_fb_tank_n;
    DIRECTION_EAST:         switch_fb_tank_n;
    DIRECTION_SOUTHEAST:    switch_fb_tank_s;
    DIRECTION_SOUTH:        switch_fb_tank_s;
    DIRECTION_SOUTHWEST:    switch_fb_tank_s;
    DIRECTION_WEST:         switch_fb_tank_n;
    DIRECTION_NORTHWEST:    switch_fb_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_tank;
    2:  spriteset_p_fb_cab;
    3:  switch_fuel_icon;
}

//fB tanker properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_tank, 1703) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BWB), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  6;
    cost_factor:                    90;      
    running_cost_factor:            92;      
    speed:                          40 km/h; 
    power:                          80 hp;   
    cargo_capacity:                 12;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fb_truck;
    cargo_capacity:             switch_capacity_rb_flat;
    purchase_cargo_capacity:    switch_capacity_rb_flat;    
    default:                    switch_fb_tank;
    cost_factor:                buycost_fb_truck;
    purchase:                   switch_purchase_fb_tank;  
    }
}
}

//fa tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fa_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_fa_cab;
    2:  switch_o_tank;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_o_tank;
    2:  switch_fa_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_tank_n;
    DIRECTION_NORTHEAST:    switch_fa_tank_n;
    DIRECTION_EAST:         switch_fa_tank_n;
    DIRECTION_SOUTHEAST:    switch_fa_tank_s;
    DIRECTION_SOUTH:        switch_fa_tank_s;
    DIRECTION_SOUTHWEST:    switch_fa_tank_s;
    DIRECTION_WEST:         switch_fa_tank_n;
    DIRECTION_NORTHWEST:    switch_fa_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  switch_p_o_tank;
    2:  spriteset_p_fa_cab;
    3:  switch_fuel_icon;
}

//fa tanker properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_tank, 1704) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DNA), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  8;
    cost_factor:                    100;      
    running_cost_factor:            100;      
    speed:                          50 km/h; 
    power:                          110 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fa_truck;
    cargo_capacity:             switch_capacity_rb_flat;
    purchase_cargo_capacity:    switch_capacity_rb_flat;    
    default:                    switch_fa_tank;  
    cost_factor:                buycost_fa_truck;
    purchase:                   switch_purchase_fa_tank;
    }
}
}

//f1 tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f1_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_f1_cab;
    2:  switch_r_tank;
    }

switch(FEAT_ROADVEHS, SELF, switch_f1_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_tank;
    2:  switch_f1_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f1_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f1_tank_n;
    DIRECTION_NORTHEAST:    switch_f1_tank_n;
    DIRECTION_EAST:         switch_f1_tank_n;
    DIRECTION_SOUTHEAST:    switch_f1_tank_s;
    DIRECTION_SOUTH:        switch_f1_tank_s;
    DIRECTION_SOUTHWEST:    switch_f1_tank_s;
    DIRECTION_WEST:         switch_f1_tank_n;
    DIRECTION_NORTHWEST:    switch_f1_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_f1_cab;
    3:  switch_fuel_icon;
}

//f1 tanker properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_tank, 1705) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DN1), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  8;
    cost_factor:                    120;      
    running_cost_factor:            120;      
    speed:                          60 km/h; 
    power:                          180 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:            switch_runcost_f1_truck;
    cargo_capacity:                 switch_capacity_r1_flat;
    purchase_cargo_capacity:        switch_capacity_r1_flat;    
    default:                        switch_f1_tank;  
    cost_factor:                    buycost_f1_truck;
    purchase:                       switch_purchase_f1_tank;
    }
}
}

//f2 tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f2_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_f2_cab;
    2:  switch_r_tank;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_tank;
    2:  switch_f2_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f2_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f2_tank_n;
    DIRECTION_NORTHEAST:    switch_f2_tank_n;
    DIRECTION_EAST:         switch_f2_tank_n;
    DIRECTION_SOUTHEAST:    switch_f2_tank_s;
    DIRECTION_SOUTH:        switch_f2_tank_s;
    DIRECTION_SOUTHWEST:    switch_f2_tank_s;
    DIRECTION_WEST:         switch_f2_tank_n;
    DIRECTION_NORTHWEST:    switch_f2_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_f2_cab;
    3:  switch_fuel_icon;
}

//f2 tanker properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_tank, 1706) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OG2), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  10;
    cost_factor:                    140;      
    running_cost_factor:            160;      
    speed:                          80 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f2_truck;
    cargo_capacity:             switch_capacity_r2_flat;
    purchase_cargo_capacity:    switch_capacity_r2_flat;    
    default:                    switch_f2_tank;  
    cost_factor:                buycost_f2_truck;
    purchase:                   switch_purchase_f2_tank;
    }
}
}


//f3 tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f3_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_f3_cab;
    2:  switch_r_tank;
    }

switch(FEAT_ROADVEHS, SELF, switch_f3_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_tank;
    2:  switch_f3_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f3_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f3_tank_n;
    DIRECTION_NORTHEAST:    switch_f3_tank_n;
    DIRECTION_EAST:         switch_f3_tank_n;
    DIRECTION_SOUTHEAST:    switch_f3_tank_s;
    DIRECTION_SOUTH:        switch_f3_tank_s;
    DIRECTION_SOUTHWEST:    switch_f3_tank_s;
    DIRECTION_WEST:         switch_f3_tank_n;
    DIRECTION_NORTHWEST:    switch_f3_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_f3_cab;
    3:  switch_fuel_icon;
}

//f3 tanker properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_tank, 1707) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_BW3), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  12;
    cost_factor:                    160;      
    running_cost_factor:            220;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 24;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f3_truck;
    cargo_capacity:             switch_capacity_r3_flat;
    purchase_cargo_capacity:    switch_capacity_r3_flat;    
    default:                    switch_f3_tank; 
    cost_factor:                buycost_f3_truck; 
    purchase:                   switch_purchase_f3_tank;
    }
}
}

//f4 tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f4_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_f4_cab;
    2:  switch_r_tank;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_tank;
    2:  switch_f4_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f4_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f4_tank_n;
    DIRECTION_NORTHEAST:    switch_f4_tank_n;
    DIRECTION_EAST:         switch_f4_tank_n;
    DIRECTION_SOUTHEAST:    switch_f4_tank_s;
    DIRECTION_SOUTH:        switch_f4_tank_s;
    DIRECTION_SOUTHWEST:    switch_f4_tank_s;
    DIRECTION_WEST:         switch_f4_tank_n;
    DIRECTION_NORTHWEST:    switch_f4_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_f4_cab;
    3:  switch_fuel_icon;
}

//f4 tanker properties


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_tank, 1708) {
property {

    name:                           string(STR_CONCAT, string(STR_FMOD_TM4), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  14;
    cost_factor:                    180;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 28;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         15.5 ton;
    }

graphics {
    running_cost_factor:            switch_runcost_f4_truck;
    cargo_capacity:                 switch_capacity_r4_flat;
    purchase_cargo_capacity:        switch_capacity_r4_flat;
    default:                        switch_f4_tank; 
    cost_factor:                    buycost_f4_truck;
    purchase:                       switch_purchase_f4_tank;
    }
}
}

// open trucks

//Fd open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fd_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rd_body;  
    1:  switch_fd_cab;
    2:  switch_o_open;
    }

switch(FEAT_ROADVEHS, SELF, switch_fd_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rd_body;
    1:  switch_o_open;
    2:  switch_fd_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fd_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fd_open_n;
    DIRECTION_NORTHEAST:    switch_fd_open_n;
    DIRECTION_EAST:         switch_fd_open_n;
    DIRECTION_SOUTHEAST:    switch_fd_open_s;
    DIRECTION_SOUTH:        switch_fd_open_s;
    DIRECTION_SOUTHWEST:    switch_fd_open_s;
    DIRECTION_WEST:         switch_fd_open_n;
    DIRECTION_NORTHWEST:    switch_fd_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fd_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_open;
    2:  spriteset_p_fd_cab;
    3:  switch_steam_icon;
}

//Fd open properties

if (param_srv ==1){
item(FEAT_ROADVEHS, item_fd_open, 1501) {
property {
    name:                           string(STR_CONCAT, string(STR_SMOD_HPD), string(STR_OPEN), string(STR_P_S));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  6;
    cost_factor:                    120;     
    running_cost_factor:            120;      
    speed:                          30 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1860,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 1) {
    property {
    introduction_date:              date(1830,01,01); 
    model_life:                     70;
    }
}
if (param_fgei == 2) {
    property {
    introduction_date:              date(1800,01,01); 
    model_life:                     50;
    }
}
graphics {
    running_cost_factor:        switch_runcost_fd_truck;
    power:                      switch_power_fd;
    visual_effect:              switch_truck_smoke;
    cargo_capacity:             switch_rd_open_cargo;
    purchase_cargo_capacity:    switch_rd_open_cargo;
    default:                    switch_fd_open; 
    cost_factor:                buycost_fd_truck;
    purchase:                   switch_purchase_fd_open;
    }
}
}

//Fc open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fc_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rc_body;  
    1:  switch_fc_cab;
    2:  switch_o_open;
    }

switch(FEAT_ROADVEHS, SELF, switch_fc_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rc_body;
    1:  switch_o_open;
    2:  switch_fc_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fc_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fc_open_n;
    DIRECTION_NORTHEAST:    switch_fc_open_n;
    DIRECTION_EAST:         switch_fc_open_n;
    DIRECTION_SOUTHEAST:    switch_fc_open_s;
    DIRECTION_SOUTH:        switch_fc_open_s;
    DIRECTION_SOUTHWEST:    switch_fc_open_s;
    DIRECTION_WEST:         switch_fc_open_n;
    DIRECTION_NORTHWEST:    switch_fc_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fc_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_open;
    2:  spriteset_p_fc_cab;
    3:  switch_steam_icon;
}

//Fc open properties

if (param_srv ==1){
item(FEAT_ROADVEHS, item_fc_open, 1502) {
property {
    name:                           string(STR_CONCAT, string(STR_SMOD_TMC), string(STR_OPEN), string(STR_P_S));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  6;
    cost_factor:                    120;     
    running_cost_factor:            120;      
    speed:                          50 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1895,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         15 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 2) {
    property {
    introduction_date:              date(1850,01,01); 
    model_life:                     90;
    }
}
graphics {
    running_cost_factor:        switch_runcost_fc_truck;
    power:                      switch_power_fc;
    visual_effect:              switch_truck_smoke;
    cargo_capacity:             switch_rc_open_cargo;
    purchase_cargo_capacity:    switch_rc_open_cargo;
    default:                    switch_fc_open; 
    cost_factor:                buycost_fc_truck;
    purchase:                   switch_purchase_fc_open;
    }
}
}

// fb graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fb_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_fb_cab;
    2:  switch_o_open;
    }

switch(FEAT_ROADVEHS, SELF, switch_fb_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_rb_body;
    1:  switch_o_open;
    2:  switch_fb_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fb_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_open_n;
    DIRECTION_NORTHEAST:    switch_fb_open_n;
    DIRECTION_EAST:         switch_fb_open_n;
    DIRECTION_SOUTHEAST:    switch_fb_open_s;
    DIRECTION_SOUTH:        switch_fb_open_s;
    DIRECTION_SOUTHWEST:    switch_fb_open_s;
    DIRECTION_WEST:         switch_fb_open_n;
    DIRECTION_NORTHWEST:    switch_fb_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_open;
    2:  spriteset_p_fb_cab;
    3:  switch_fuel_icon;
}

//fB open properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_open, 1503) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OGB), string(STR_OPEN), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  6;
    cost_factor:                    85;      
    running_cost_factor:            87;      
    speed:                          40 km/h; 
    power:                          80 hp;   
    cargo_capacity:                 8;
    introduction_date:              date(1908,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         5.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fb_truck;
    cargo_capacity:             switch_rb_open_cargo;
    purchase_cargo_capacity:    switch_rb_open_cargo;   
    default:                    switch_fb_open; 
    cost_factor:                buycost_fb_truck;
    purchase:                   switch_purchase_fb_open; 
    }
}
}

//fa open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fa_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_fa_cab;
    2:  switch_o_open;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ra_body;
    1:  switch_o_open;
    2:  switch_fa_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_open_n;
    DIRECTION_NORTHEAST:    switch_fa_open_n;
    DIRECTION_EAST:         switch_fa_open_n;
    DIRECTION_SOUTHEAST:    switch_fa_open_s;
    DIRECTION_SOUTH:        switch_fa_open_s;
    DIRECTION_SOUTHWEST:    switch_fa_open_s;
    DIRECTION_WEST:         switch_fa_open_n;
    DIRECTION_NORTHWEST:    switch_fa_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_o_body;
    1:  spriteset_p_o_open;
    2:  spriteset_p_fa_cab;
    3:  switch_fuel_icon;
}

//fa open properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_open, 1504) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TMA), string(STR_OPEN), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cost_factor:                    95;      
    running_cost_factor:            95;      
    speed:                          50 km/h; 
    power:                          110 hp;   
    cargo_capacity:                 10;
    introduction_date:              date(1927,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         6.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_fa_truck;
    cargo_capacity:             switch_ra_open_cargo;
    purchase_cargo_capacity:    switch_ra_open_cargo;   
    default:                    switch_fa_open;  
    cost_factor:                buycost_fa_truck;
    purchase:                   switch_purchase_fa_open;
    }
}
}

//f1 open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f1_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_f1_cab;
    2:  switch_r_open;
    
}

switch(FEAT_ROADVEHS, SELF, switch_f1_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_open;
    2:  switch_f1_cab;
    
}

switch (FEAT_ROADVEHS, SELF, switch_f1_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f1_open_n;
    DIRECTION_NORTHEAST:    switch_f1_open_n;
    DIRECTION_EAST:         switch_f1_open_n;
    DIRECTION_SOUTHEAST:    switch_f1_open_s;
    DIRECTION_SOUTH:        switch_f1_open_s;
    DIRECTION_SOUTHWEST:    switch_f1_open_s;
    DIRECTION_WEST:         switch_f1_open_n;
    DIRECTION_NORTHWEST:    switch_f1_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_f1_cab;
    3:  switch_fuel_icon;
}

//f1 open properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_open, 1505) {
property {
        /* Properties common to all vehicle types */
    name:                           string(STR_CONCAT, string(STR_FMOD_BW1), string(STR_OPEN), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cost_factor:                    115;      
    running_cost_factor:            115;      
    speed:                          60 km/h; 
    power:                          180 hp;   
    cargo_capacity:                 13;
    introduction_date:              date(1942,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f1_truck;
    cargo_capacity:             switch_r1_open_cargo;
    purchase_cargo_capacity:    switch_r1_open_cargo;   
    default:                    switch_f1_open; 
    cost_factor:                buycost_f1_truck;
    purchase:                   switch_purchase_f1_open; 
    }
}
}

//f2 open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f2_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_f2_cab;
    2:  switch_r_open;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_open;
    2:  switch_f2_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f2_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f2_open_n;
    DIRECTION_NORTHEAST:    switch_f2_open_n;
    DIRECTION_EAST:         switch_f2_open_n;
    DIRECTION_SOUTHEAST:    switch_f2_open_s;
    DIRECTION_SOUTH:        switch_f2_open_s;
    DIRECTION_SOUTHWEST:    switch_f2_open_s;
    DIRECTION_WEST:         switch_f2_open_n;
    DIRECTION_NORTHWEST:    switch_f2_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_f2_cab;
    3:  switch_fuel_icon;
}

//f2 open properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_open, 1506) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_TM2), string(STR_OPEN), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cost_factor:                    130;      
    running_cost_factor:            150;      
    speed:                          80 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1954,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f2_truck;
    cargo_capacity:             switch_r2_open_cargo;
    purchase_cargo_capacity:    switch_r2_open_cargo;   
    default:                    switch_f2_open;  
    cost_factor:                buycost_f2_truck;
    purchase:                   switch_purchase_f2_open;
    }
}
}


//f3 open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f3_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_f3_cab;
    2:  switch_r_open;
    }

switch(FEAT_ROADVEHS, SELF, switch_f3_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_open;
    2:  switch_f3_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f3_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f3_open_n;
    DIRECTION_NORTHEAST:    switch_f3_open_n;
    DIRECTION_EAST:         switch_f3_open_n;
    DIRECTION_SOUTHEAST:    switch_f3_open_s;
    DIRECTION_SOUTH:        switch_f3_open_s;
    DIRECTION_SOUTHWEST:    switch_f3_open_s;
    DIRECTION_WEST:         switch_f3_open_n;
    DIRECTION_NORTHWEST:    switch_f3_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_f3_cab;
    3:  switch_fuel_icon;
}

//f3 open properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_open, 1507) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_OG3), string(STR_OPEN), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cost_factor:                    150;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 18;
    introduction_date:              date(1982,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_f3_truck;
    cargo_capacity:             switch_r3_open_cargo;
    purchase_cargo_capacity:    switch_r3_open_cargo;   
    default:                    switch_f3_open; 
    cost_factor:                buycost_f3_truck; 
    purchase:                   switch_purchase_f3_open;
    visual_effect:              switch_truck_exhaust;
    }
}
}

//f4 open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_f4_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_f4_cab;
    2:  switch_r_open;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_open;
    2:  switch_f4_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_f4_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_f4_open_n;
    DIRECTION_NORTHEAST:    switch_f4_open_n;
    DIRECTION_EAST:         switch_f4_open_n;
    DIRECTION_SOUTHEAST:    switch_f4_open_s;
    DIRECTION_SOUTH:        switch_f4_open_s;
    DIRECTION_SOUTHWEST:    switch_f4_open_s;
    DIRECTION_WEST:         switch_f4_open_n;
    DIRECTION_NORTHWEST:    switch_f4_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_f4_cab;
    3:  switch_fuel_icon;
}

//f4 open properties


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_open, 1508) {
property {
    name:                           string(STR_CONCAT, string(STR_FMOD_DN4), string(STR_OPEN), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cost_factor:                    170;      
    running_cost_factor:            230;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 20;
    introduction_date:              date(2012,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11.5 ton;
    }   

graphics {
    running_cost_factor:        switch_runcost_f4_truck;
    cargo_capacity:             switch_r4_open_cargo;
    purchase_cargo_capacity:    switch_r4_open_cargo;
    default:                    switch_f4_open; 
    cost_factor:                buycost_f4_truck;
    purchase:                   switch_purchase_f4_open;
    visual_effect:              switch_truck_exhaust;
    }
}
}

/* ======================================= */
/* =======TROLLEY RIGID TRUCKS =========== */
/* ======================================= */

/* Mail Trucks */

//t1 mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t1_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_t1_cab;
    2:  switch_r_mail;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t1_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_mail;
    2:  switch_t1_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t1_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t1_mail_n;
    DIRECTION_NORTHEAST:    switch_t1_mail_n;
    DIRECTION_EAST:         switch_t1_mail_n;
    DIRECTION_SOUTHEAST:    switch_t1_mail_s;
    DIRECTION_SOUTH:        switch_t1_mail_s;
    DIRECTION_SOUTHWEST:    switch_t1_mail_s;
    DIRECTION_WEST:         switch_t1_mail_n;
    DIRECTION_NORTHWEST:    switch_t1_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_t1_cab;
    2:  switch_wire_icon;
}

//t1 mail properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_mail, 2105) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_BW1), string(STR_MAIL), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period:               170;
    loading_speed:                  12;
    cost_factor:                    108;      
    running_cost_factor:            100;      
    speed:                          60 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box; 
    default:                    switch_t1_mail;  
    cost_factor:                buycost_t1_truck;
    purchase:                   switch_purchase_t1_mail;
    }
}
}

//t2 mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t2_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_t2_cab;
    2:  switch_r_mail;
    3:  switch_t_panto; 
    }

switch(FEAT_ROADVEHS, SELF, switch_t2_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_mail;
    2:  switch_t2_cab;
    3:  switch_t_panto; 
    }

switch (FEAT_ROADVEHS, SELF, switch_t2_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t2_mail_n;
    DIRECTION_NORTHEAST:    switch_t2_mail_n;
    DIRECTION_EAST:         switch_t2_mail_n;
    DIRECTION_SOUTHEAST:    switch_t2_mail_s;
    DIRECTION_SOUTH:        switch_t2_mail_s;
    DIRECTION_SOUTHWEST:    switch_t2_mail_s;
    DIRECTION_WEST:         switch_t2_mail_n;
    DIRECTION_NORTHWEST:    switch_t2_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_t2_cab;
    2:  switch_wire_icon;
}

//t2 mail properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_mail, 2106) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_DN2), string(STR_MAIL), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period:               170;
    loading_speed:                  12;
    cost_factor:                    128;
    running_cost_factor:            140;
    speed:                          80 km/h; 
    power:                          690 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box; 
    default:                    switch_t2_mail;
    cost_factor:                buycost_t2_truck;  
    purchase:                   switch_purchase_t2_mail;
    }
}
}


//t3 mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t3_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_t3_cab;
    2:  switch_r_mail;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t3_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_mail;
    2:  switch_t3_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t3_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t3_mail_n;
    DIRECTION_NORTHEAST:    switch_t3_mail_n;
    DIRECTION_EAST:         switch_t3_mail_n;
    DIRECTION_SOUTHEAST:    switch_t3_mail_s;
    DIRECTION_SOUTH:        switch_t3_mail_s;
    DIRECTION_SOUTHWEST:    switch_t3_mail_s;
    DIRECTION_WEST:         switch_t3_mail_n;
    DIRECTION_NORTHWEST:    switch_t3_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_t3_cab;
    2:  switch_wire_icon;
}

//t3 mail properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_mail, 2107) {
property {

    name:                           string(STR_CONCAT, string(STR_TMOD_KD3), string(STR_MAIL), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period:               170;
    loading_speed:                  12;
    cost_factor:                    138;
    running_cost_factor:            200;
    speed:                          100 km/h;
    power:                          1200 hp;
    cargo_capacity:                 20;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_t3_mail;  
    cost_factor:                buycost_t3_truck;
    purchase:                   switch_purchase_t3_mail;
    }
}
}

//t4 mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t4_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_t4_cab;
    2:  switch_r_mail;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t4_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_mail;
    2:  switch_t4_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t4_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t4_mail_n;
    DIRECTION_NORTHEAST:    switch_t4_mail_n;
    DIRECTION_EAST:         switch_t4_mail_n;
    DIRECTION_SOUTHEAST:    switch_t4_mail_s;
    DIRECTION_SOUTH:        switch_t4_mail_s;
    DIRECTION_SOUTHWEST:    switch_t4_mail_s;
    DIRECTION_WEST:         switch_t4_mail_n;
    DIRECTION_NORTHWEST:    switch_t4_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_t4_cab;
    2:  switch_wire_icon;
}

//t4 mail properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_mail, 2108) {
property {

    name:                           string(STR_CONCAT, string(STR_TMOD_LC4), string(STR_MAIL), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period:               170;
    loading_speed:                  12;
    cost_factor:                    158;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_t4_mail; 
    cost_factor:                buycost_t4_truck;
    purchase:                   switch_purchase_t4_mail;
    }
}
}

/* Box Trucks */

//t1 piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t1_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_t1_cab;
    2:  switch_r_box;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t1_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_box;
    2:  switch_t1_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t1_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t1_box_n;
    DIRECTION_NORTHEAST:    switch_t1_box_n;
    DIRECTION_EAST:         switch_t1_box_n;
    DIRECTION_SOUTHEAST:    switch_t1_box_s;
    DIRECTION_SOUTH:        switch_t1_box_s;
    DIRECTION_SOUTHWEST:    switch_t1_box_s;
    DIRECTION_WEST:         switch_t1_box_n;
    DIRECTION_NORTHWEST:    switch_t1_box_n;
    }
switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_box;
    2:  spriteset_p_t1_cab;
    3:  switch_wire_icon;
}
//t1 piece goods properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_box, 2205) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_BW1), string(STR_BOX), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  6;
    cost_factor:                    108;      
    running_cost_factor:            100;      
    speed:                          60 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box; 
    default:                    switch_t1_box;  
    cost_factor:                buycost_t1_truck;
    purchase:                   switch_purchase_t1_box;
    }
}
}

//t2 piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t2_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_t2_cab;
    2:  switch_r_box;
    3:  switch_t_panto; 
    }

switch(FEAT_ROADVEHS, SELF, switch_t2_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_box;
    2:  switch_t2_cab;
    3:  switch_t_panto; 
    }

switch (FEAT_ROADVEHS, SELF, switch_t2_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t2_box_n;
    DIRECTION_NORTHEAST:    switch_t2_box_n;
    DIRECTION_EAST:         switch_t2_box_n;
    DIRECTION_SOUTHEAST:    switch_t2_box_s;
    DIRECTION_SOUTH:        switch_t2_box_s;
    DIRECTION_SOUTHWEST:    switch_t2_box_s;
    DIRECTION_WEST:         switch_t2_box_n;
    DIRECTION_NORTHWEST:    switch_t2_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_box;
    2:  spriteset_p_t2_cab;
    3:  switch_wire_icon;
}

//t2 piece goods properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_box, 2206) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_KD2), string(STR_BOX), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    128;
    running_cost_factor:            140;
    speed:                          80 km/h; 
    power:                          690 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box; 
    default:                    switch_t2_box;  
    cost_factor:                buycost_t2_truck;
    purchase:                   switch_purchase_t2_box;
    }
}
}


//t3 piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t3_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_t3_cab;
    2:  switch_r_box;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t3_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_box;
    2:  switch_t3_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t3_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t3_box_n;
    DIRECTION_NORTHEAST:    switch_t3_box_n;
    DIRECTION_EAST:         switch_t3_box_n;
    DIRECTION_SOUTHEAST:    switch_t3_box_s;
    DIRECTION_SOUTH:        switch_t3_box_s;
    DIRECTION_SOUTHWEST:    switch_t3_box_s;
    DIRECTION_WEST:         switch_t3_box_n;
    DIRECTION_NORTHWEST:    switch_t3_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_box;
    2:  spriteset_p_t3_cab;
    3:  switch_wire_icon;
}

//t3 piece goods properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_box, 2207) {
property {

    name:                           string(STR_CONCAT, string(STR_TMOD_DN3), string(STR_BOX), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    138;
    running_cost_factor:            200;
    speed:                          100 km/h;
    power:                          1200 hp;
    cargo_capacity:                 20;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_t3_box;  
    cost_factor:                buycost_t3_truck;
    purchase:                   switch_purchase_t3_box;
    }
}
}

//t4 piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t4_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_t4_cab;
    2:  switch_r_box;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t4_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_box;
    2:  switch_t4_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t4_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t4_box_n;
    DIRECTION_NORTHEAST:    switch_t4_box_n;
    DIRECTION_EAST:         switch_t4_box_n;
    DIRECTION_SOUTHEAST:    switch_t4_box_s;
    DIRECTION_SOUTH:        switch_t4_box_s;
    DIRECTION_SOUTHWEST:    switch_t4_box_s;
    DIRECTION_WEST:         switch_t4_box_n;
    DIRECTION_NORTHWEST:    switch_t4_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_box;
    2:  spriteset_p_t4_cab;
    3:  switch_wire_icon;
}

//t4 piece goods properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_box, 2208) {
property {

    name:                           string(STR_CONCAT, string(STR_TMOD_LC4), string(STR_BOX), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    158;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_t4_box; 
    cost_factor:                buycost_t4_truck;
    purchase:                   switch_purchase_t4_box;
    }
}
}



//t1 refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_t1_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_t1_cab;
    2:  switch_r_ref;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t1_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_ref;
    2:  switch_t1_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t1_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t1_ref_n;
    DIRECTION_NORTHEAST:    switch_t1_ref_n;
    DIRECTION_EAST:         switch_t1_ref_n;
    DIRECTION_SOUTHEAST:    switch_t1_ref_s;
    DIRECTION_SOUTH:        switch_t1_ref_s;
    DIRECTION_SOUTHWEST:    switch_t1_ref_s;
    DIRECTION_WEST:         switch_t1_ref_n;
    DIRECTION_NORTHWEST:    switch_t1_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_t1_cab;
    3:  switch_wire_icon;
}

//t1 refridgerated properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_ref, 2305) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_KD1), string(STR_REF), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  6;
    cost_factor:                    108;      
    running_cost_factor:            100;      
    speed:                          60 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box;
    default:                    switch_t1_ref; 
    cost_factor:                buycost_t1_truck;
    purchase:                   switch_purchase_t1_ref; 
    }
}
}

//t2 refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_t2_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_t2_cab;
    2:  switch_r_ref;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t2_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_ref;
    2:  switch_t2_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t2_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t2_ref_n;
    DIRECTION_NORTHEAST:    switch_t2_ref_n;
    DIRECTION_EAST:         switch_t2_ref_n;
    DIRECTION_SOUTHEAST:    switch_t2_ref_s;
    DIRECTION_SOUTH:        switch_t2_ref_s;
    DIRECTION_SOUTHWEST:    switch_t2_ref_s;
    DIRECTION_WEST:         switch_t2_ref_n;
    DIRECTION_NORTHWEST:    switch_t2_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_t2_cab;
    3:  switch_wire_icon;
}

//t2 refridgerated properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_ref, 2306) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_DN2), string(STR_REF), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  8;
    cost_factor:                    128;      
    running_cost_factor:            138;     
    speed:                          80 km/h; 
    power:                          690 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box;
    default:                    switch_t2_ref;  
    cost_factor:                buycost_t2_truck;
    purchase:                   switch_purchase_t2_ref;
    }
}
}


//t3 refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_t3_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_t3_cab;
    2:  switch_r_ref;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t3_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_ref;
    2:  switch_t3_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t3_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t3_ref_n;
    DIRECTION_NORTHEAST:    switch_t3_ref_n;
    DIRECTION_EAST:         switch_t3_ref_n;
    DIRECTION_SOUTHEAST:    switch_t3_ref_s;
    DIRECTION_SOUTH:        switch_t3_ref_s;
    DIRECTION_SOUTHWEST:    switch_t3_ref_s;
    DIRECTION_WEST:         switch_t3_ref_n;
    DIRECTION_NORTHWEST:    switch_t3_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_t3_cab;
    3:  switch_wire_icon;
}

//t3 refridgerated properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_ref, 2307) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_LC3), string(STR_REF), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  8;
    cost_factor:                    138;      
    running_cost_factor:            200;     
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics 
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_t3_ref;  
    cost_factor:                buycost_t3_truck;
    purchase:                   switch_purchase_t3_ref;
    }
}
}

//t4 refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_t4_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_t4_cab;
    2:  switch_r_ref;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t4_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_ref;
    2:  switch_t4_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t4_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t4_ref_n;
    DIRECTION_NORTHEAST:    switch_t4_ref_n;
    DIRECTION_EAST:         switch_t4_ref_n;
    DIRECTION_SOUTHEAST:    switch_t4_ref_s;
    DIRECTION_SOUTH:        switch_t4_ref_s;
    DIRECTION_SOUTHWEST:    switch_t4_ref_s;
    DIRECTION_WEST:         switch_t4_ref_n;
    DIRECTION_NORTHWEST:    switch_t4_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_t4_cab;
    3:  switch_wire_icon;
}

//t4 refridgerated properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_ref, 2308) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_BW4), string(STR_REF), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  8;
    cost_factor:                    158;     
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_t4_ref;
    cost_factor:                buycost_t4_truck;
    purchase:                   switch_purchase_t4_ref; 
    }
}
}

// livestock trucks



//t1 livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t1_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_t1_cab;
    2:  switch_r_stock;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t1_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_stock;
    2:  switch_t1_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t1_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t1_stock_n;
    DIRECTION_NORTHEAST:    switch_t1_stock_n;
    DIRECTION_EAST:         switch_t1_stock_n;
    DIRECTION_SOUTHEAST:    switch_t1_stock_s;
    DIRECTION_SOUTH:        switch_t1_stock_s;
    DIRECTION_SOUTHWEST:    switch_t1_stock_s;
    DIRECTION_WEST:         switch_t1_stock_n;
    DIRECTION_NORTHWEST:    switch_t1_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_t1_cab;
    3:  switch_wire_icon;
}

//t1 livestock properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_stock, 2405) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_LC1), string(STR_STOCK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST; 
    loading_speed:                  6;
    cost_factor:                    108;      
    running_cost_factor:            100;      
    speed:                          60 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box; 
    default:                    switch_t1_stock; 
    cost_factor:                buycost_t1_truck; 
    purchase:                   switch_purchase_t1_stock;
    }
}
}

//t2 livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t2_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_t2_cab;
    2:  switch_r_stock;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t2_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_stock;
    2:  switch_t2_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t2_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t2_stock_n;
    DIRECTION_NORTHEAST:    switch_t2_stock_n;
    DIRECTION_EAST:         switch_t2_stock_n;
    DIRECTION_SOUTHEAST:    switch_t2_stock_s;
    DIRECTION_SOUTH:        switch_t2_stock_s;
    DIRECTION_SOUTHWEST:    switch_t2_stock_s;
    DIRECTION_WEST:         switch_t2_stock_n;
    DIRECTION_NORTHWEST:    switch_t2_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_t2_cab;
    3:  switch_wire_icon;
}

//t2 livestock properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_stock, 2406) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_BW2), string(STR_STOCK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST; 
    loading_speed:                  8;
    cost_factor:                    128;     
    running_cost_factor:            138;     
    speed:                          80 km/h; 
    power:                          690 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box; 
    default:                    switch_t2_stock;  
    cost_factor:                buycost_t2_truck;
    purchase:                   switch_purchase_t2_stock;
    }
}
}


//t3 livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t3_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_t3_cab;
    2:  switch_r_stock;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t3_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_stock;
    2:  switch_t3_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t3_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t3_stock_n;
    DIRECTION_NORTHEAST:    switch_t3_stock_n;
    DIRECTION_EAST:         switch_t3_stock_n;
    DIRECTION_SOUTHEAST:    switch_t3_stock_s;
    DIRECTION_SOUTH:        switch_t3_stock_s;
    DIRECTION_SOUTHWEST:    switch_t3_stock_s;
    DIRECTION_WEST:         switch_t3_stock_n;
    DIRECTION_NORTHWEST:    switch_t3_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_t3_cab;
    3:  switch_wire_icon;
}


//t3 livestock properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_stock, 2407) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_KD3), string(STR_STOCK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST; 
    loading_speed:                  8;
    cost_factor:                    138;    
    running_cost_factor:            200;   
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_t3_stock;  
    cost_factor:                buycost_t3_truck;
    purchase:                   switch_purchase_t3_stock;
    }
}
}

//t4 livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t4_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_t4_cab;
    2:  switch_r_stock;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t4_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_stock;
    2:  switch_t4_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t4_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t4_stock_n;
    DIRECTION_NORTHEAST:    switch_t4_stock_n;
    DIRECTION_EAST:         switch_t4_stock_n;
    DIRECTION_SOUTHEAST:    switch_t4_stock_s;
    DIRECTION_SOUTH:        switch_t4_stock_s;
    DIRECTION_SOUTHWEST:    switch_t4_stock_s;
    DIRECTION_WEST:         switch_t4_stock_n;
    DIRECTION_NORTHWEST:    switch_t4_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_t4_cab;
    3:  switch_wire_icon;
}

//t4 livestock properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_stock, 2408) {
property {

    name:                           string(STR_CONCAT, string(STR_TMOD_DN4), string(STR_STOCK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST; 
    loading_speed:                  8;
    cost_factor:                    158;    
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_t4_stock; 
    cost_factor:                buycost_t4_truck;
    purchase:                   switch_purchase_t4_stock;
    }
}
}

// flatbed trucks



//t1 flatbed graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t1_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_t1_cab;
    2:  switch_r_flat;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t1_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_flat;
    2:  switch_t1_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t1_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t1_flat_n;
    DIRECTION_NORTHEAST:    switch_t1_flat_n;
    DIRECTION_EAST:         switch_t1_flat_n;
    DIRECTION_SOUTHEAST:    switch_t1_flat_s;
    DIRECTION_SOUTH:        switch_t1_flat_s;
    DIRECTION_SOUTHWEST:    switch_t1_flat_s;
    DIRECTION_WEST:         switch_t1_flat_n;
    DIRECTION_NORTHWEST:    switch_t1_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_t1_cab;
    3:  switch_wire_icon;
}

//t1 flatbed properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_flat, 2605) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_LC1), string(STR_FLAT), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    108;      
    running_cost_factor:            100;    
    speed:                          60 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t1_truck;
    cargo_capacity:             switch_capacity_r1_flat;
    purchase_cargo_capacity:    switch_capacity_r1_flat;
    default:                    switch_t1_flat;  
    cost_factor:                buycost_t1_truck;
    purchase:                   switch_purchase_t1_flat;
    }
}
}

//t2 flatbed graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t2_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_t2_cab;
    2:  switch_r_flat;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t2_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_flat;
    2:  switch_t2_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t2_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t2_flat_n;
    DIRECTION_NORTHEAST:    switch_t2_flat_n;
    DIRECTION_EAST:         switch_t2_flat_n;
    DIRECTION_SOUTHEAST:    switch_t2_flat_s;
    DIRECTION_SOUTH:        switch_t2_flat_s;
    DIRECTION_SOUTHWEST:    switch_t2_flat_s;
    DIRECTION_WEST:         switch_t2_flat_n;
    DIRECTION_NORTHWEST:    switch_t2_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_t2_cab;
    3:  switch_wire_icon;
}

//t2 flatbed properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_flat, 2606) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_BW2), string(STR_FLAT), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    128;
    running_cost_factor:            138;
    speed:                          80 km/h; 
    power:                          690 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t2_truck;
    cargo_capacity:             switch_capacity_r2_flat;
    purchase_cargo_capacity:    switch_capacity_r2_flat;    
    default:                    switch_t2_flat;  
    cost_factor:                buycost_t2_truck;
    purchase:                   switch_purchase_t2_flat;
    }
}
}


//t3 flatbed graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t3_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_t3_cab;
    2:  switch_r_flat;
    3:  switch_t_panto;
    }

switch(FEAT_ROADVEHS, SELF, switch_t3_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_flat;
    2:  switch_t3_cab;
    3:  switch_t_panto;
    }

switch (FEAT_ROADVEHS, SELF, switch_t3_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t3_flat_n;
    DIRECTION_NORTHEAST:    switch_t3_flat_n;
    DIRECTION_EAST:         switch_t3_flat_n;
    DIRECTION_SOUTHEAST:    switch_t3_flat_s;
    DIRECTION_SOUTH:        switch_t3_flat_s;
    DIRECTION_SOUTHWEST:    switch_t3_flat_s;
    DIRECTION_WEST:         switch_t3_flat_n;
    DIRECTION_NORTHWEST:    switch_t3_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_t3_cab;
    3:  switch_wire_icon;
}

//t3 flatbed properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_flat, 2607) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_KD3), string(STR_FLAT), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    138; 
    running_cost_factor:            200;
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 24;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t3_truck;
    cargo_capacity:             switch_capacity_r3_flat;
    purchase_cargo_capacity:    switch_capacity_r3_flat;    
    default:                    switch_t3_flat;  
    cost_factor:                buycost_t3_truck;
    purchase:                   switch_purchase_t3_flat;
    }
}
}

//t4 flatbed graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t4_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_t4_cab;
    2:  switch_r_flat;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t4_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_flat;
    2:  switch_t4_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t4_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t4_flat_n;
    DIRECTION_NORTHEAST:    switch_t4_flat_n;
    DIRECTION_EAST:         switch_t4_flat_n;
    DIRECTION_SOUTHEAST:    switch_t4_flat_s;
    DIRECTION_SOUTH:        switch_t4_flat_s;
    DIRECTION_SOUTHWEST:    switch_t4_flat_s;
    DIRECTION_WEST:         switch_t4_flat_n;
    DIRECTION_NORTHWEST:    switch_t4_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_t4_cab;
    3:  switch_wire_icon;
}

//t4 flatbed properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_flat, 2608) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_DN4), string(STR_FLAT), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    158;
    running_cost_factor:            160;
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 26;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t4_truck;
    cargo_capacity:             switch_capacity_r4_flat;
    purchase_cargo_capacity:    switch_capacity_r4_flat;
    default:                    switch_t4_flat; 
    cost_factor:                buycost_t4_truck;
    purchase:                   switch_purchase_t4_flat;
    }
}
}

// Covered Hoppers

// covered hopper trucks

switch(FEAT_ROADVEHS, SELF, switch_t1_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_t1_cab;
    2:  switch_r_hopp;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t1_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_hopp;
    2:  switch_t1_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t1_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t1_hopp_n;
    DIRECTION_NORTHEAST:    switch_t1_hopp_n;
    DIRECTION_EAST:         switch_t1_hopp_n;
    DIRECTION_SOUTHEAST:    switch_t1_hopp_s;
    DIRECTION_SOUTH:        switch_t1_hopp_s;
    DIRECTION_SOUTHWEST:    switch_t1_hopp_s;
    DIRECTION_WEST:         switch_t1_hopp_n;
    DIRECTION_NORTHWEST:    switch_t1_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_t1_cab;
    3:  switch_wire_icon;
}

//t1 covered hopper properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_hopp, 2805) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_DN1), string(STR_HOPP), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  12;
    cost_factor:                    108;      
    running_cost_factor:            100;
    speed:                          60 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t1_truck;
    cargo_capacity:             switch_capacity_r1_box;
    purchase_cargo_capacity:    switch_capacity_r1_box; 
    default:                    switch_t1_hopp;
    cost_factor:                buycost_t1_truck;
    purchase:                   switch_purchase_t1_hopp;  
    }
}
}

//t2 covered hopper graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t2_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_t2_cab;
    2:  switch_r_hopp;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t2_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_hopp;
    2:  switch_t2_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t2_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t2_hopp_n;
    DIRECTION_NORTHEAST:    switch_t2_hopp_n;
    DIRECTION_EAST:         switch_t2_hopp_n;
    DIRECTION_SOUTHEAST:    switch_t2_hopp_s;
    DIRECTION_SOUTH:        switch_t2_hopp_s;
    DIRECTION_SOUTHWEST:    switch_t2_hopp_s;
    DIRECTION_WEST:         switch_t2_hopp_n;
    DIRECTION_NORTHWEST:    switch_t2_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_t2_cab;
    3:  switch_wire_icon;
}

//t2 covered hopper properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_hopp, 2806) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_LC2), string(STR_HOPP), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  12;
    cost_factor:                    128;
    running_cost_factor:            138;
    speed:                          80 km/h; 
    power:                          690 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t2_truck;
    cargo_capacity:             switch_capacity_r2_box;
    purchase_cargo_capacity:    switch_capacity_r2_box; 
    default:                    switch_t2_hopp; 
    cost_factor:                buycost_t2_truck; 
    purchase:                   switch_purchase_t2_hopp;
    }
}
}


//t3 covered hopper graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t3_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_t3_cab;
    2:  switch_r_hopp;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t3_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_hopp;
    2:  switch_t3_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t3_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t3_hopp_n;
    DIRECTION_NORTHEAST:    switch_t3_hopp_n;
    DIRECTION_EAST:         switch_t3_hopp_n;
    DIRECTION_SOUTHEAST:    switch_t3_hopp_s;
    DIRECTION_SOUTH:        switch_t3_hopp_s;
    DIRECTION_SOUTHWEST:    switch_t3_hopp_s;
    DIRECTION_WEST:         switch_t3_hopp_n;
    DIRECTION_NORTHWEST:    switch_t3_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_t3_cab;
    3:  switch_wire_icon;
}

//t3 covered hopper properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_hopp, 2807) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_BW3), string(STR_HOPP), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  12;
    cost_factor:                    138;
    running_cost_factor:            200;
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t3_truck;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_t3_hopp;  
    cost_factor:                buycost_t3_truck;
    purchase:                   switch_purchase_t3_hopp;
    }
}
}

//t4 covered hopper graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t4_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_t4_cab;
    2:  switch_r_hopp;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t4_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_hopp;
    2:  switch_t4_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t4_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t4_hopp_n;
    DIRECTION_NORTHEAST:    switch_t4_hopp_n;
    DIRECTION_EAST:         switch_t4_hopp_n;
    DIRECTION_SOUTHEAST:    switch_t4_hopp_s;
    DIRECTION_SOUTH:        switch_t4_hopp_s;
    DIRECTION_SOUTHWEST:    switch_t4_hopp_s;
    DIRECTION_WEST:         switch_t4_hopp_n;
    DIRECTION_NORTHWEST:    switch_t4_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_t4_cab;
    3:  switch_wire_icon;
}

//t4 covered hopper properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_hopp, 2808) {
property {

    name:                           string(STR_CONCAT, string(STR_TMOD_KD4), string(STR_HOPP), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI;
    loading_speed:                  14;
    cost_factor:                    158;
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 24;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t4_truck;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_t4_hopp; 
    cost_factor:                buycost_t4_truck;
    purchase:                   switch_purchase_t4_hopp;
    }
}
}

// MINERAL trucks



//t1 mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t1_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_t1_cab;
    2:  switch_r_mine;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t1_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_mine;
    2:  switch_t1_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t1_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t1_mine_n;
    DIRECTION_NORTHEAST:    switch_t1_mine_n;
    DIRECTION_EAST:         switch_t1_mine_n;
    DIRECTION_SOUTHEAST:    switch_t1_mine_s;
    DIRECTION_SOUTH:        switch_t1_mine_s;
    DIRECTION_SOUTHWEST:    switch_t1_mine_s;
    DIRECTION_WEST:         switch_t1_mine_n;
    DIRECTION_NORTHWEST:    switch_t1_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_t1_cab;
    3:  switch_wire_icon;
}

//t1 mineral properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_mine, 2905) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_DN1), string(STR_MINE), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    108;      
    running_cost_factor:            100;
    speed:                          60 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 24;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t1_truck;
    cargo_capacity:             switch_capacity_r1_mine;
    purchase_cargo_capacity:    switch_capacity_r1_mine;
    default:                    switch_t1_mine;  
    cost_factor:                buycost_t1_truck;
    purchase:                   switch_purchase_t1_mine;
    }
}
}

//t2 mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t2_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_t2_cab;
    2:  switch_r_mine;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t2_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_mine;
    2:  switch_t2_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t2_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t2_mine_n;
    DIRECTION_NORTHEAST:    switch_t2_mine_n;
    DIRECTION_EAST:         switch_t2_mine_n;
    DIRECTION_SOUTHEAST:    switch_t2_mine_s;
    DIRECTION_SOUTH:        switch_t2_mine_s;
    DIRECTION_SOUTHWEST:    switch_t2_mine_s;
    DIRECTION_WEST:         switch_t2_mine_n;
    DIRECTION_NORTHWEST:    switch_t2_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_t2_cab;
    3:  switch_wire_icon;
}

//t2 mineral properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_mine, 2906) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_LC2), string(STR_MINE), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    128;
    running_cost_factor:            138;
    speed:                          80 km/h; 
    power:                          690 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         13 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t2_truck;
    cargo_capacity:             switch_capacity_r2_mine;
    purchase_cargo_capacity:    switch_capacity_r2_mine;
    default:                    switch_t2_mine;  
    cost_factor:                buycost_t2_truck;
    purchase:                   switch_purchase_t2_mine;
    }
}
}


//t3 mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t3_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_t3_cab;
    2:  switch_r_mine;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t3_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_mine;
    2:  switch_t3_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t3_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t3_mine_n;
    DIRECTION_NORTHEAST:    switch_t3_mine_n;
    DIRECTION_EAST:         switch_t3_mine_n;
    DIRECTION_SOUTHEAST:    switch_t3_mine_s;
    DIRECTION_SOUTH:        switch_t3_mine_s;
    DIRECTION_SOUTHWEST:    switch_t3_mine_s;
    DIRECTION_WEST:         switch_t3_mine_n;
    DIRECTION_NORTHWEST:    switch_t3_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_t3_cab;
    3:  switch_wire_icon;
}

//t3 mineral properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_mine, 2907) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_BW3), string(STR_MINE), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    138;
    running_cost_factor:            200;
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 28;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t3_truck;
    cargo_capacity:             switch_capacity_r3_mine;
    purchase_cargo_capacity:    switch_capacity_r3_mine;    
    default:                    switch_t3_mine;  
    cost_factor:                buycost_t3_truck;
    purchase:                   switch_purchase_t3_mine;
    }
}
}

//t4 mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t4_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_t4_cab;
    2:  switch_r_mine;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t4_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_mine;
    2:  switch_t4_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t4_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t4_mine_n;
    DIRECTION_NORTHEAST:    switch_t4_mine_n;
    DIRECTION_EAST:         switch_t4_mine_n;
    DIRECTION_SOUTHEAST:    switch_t4_mine_s;
    DIRECTION_SOUTH:        switch_t4_mine_s;
    DIRECTION_SOUTHWEST:    switch_t4_mine_s;
    DIRECTION_WEST:         switch_t4_mine_n;
    DIRECTION_NORTHWEST:    switch_t4_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_t4_cab;
    3:  switch_wire_icon;
}

//t4 mineral properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_mine, 2908) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_KD4), string(STR_MINE), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  18;
    cost_factor:                    158;
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 30;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         15 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t4_truck;
    cargo_capacity:             switch_capacity_r4_mine;
    purchase_cargo_capacity:    switch_capacity_r4_mine;
    default:                    switch_t4_mine; 
    cost_factor:                buycost_t4_truck;
    purchase:                   switch_purchase_t4_mine;
    }
}
}

// tanker trucks

//t1 tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t1_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_t1_cab;
    2:  switch_r_tank;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t1_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_tank;
    2:  switch_t1_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t1_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t1_tank_n;
    DIRECTION_NORTHEAST:    switch_t1_tank_n;
    DIRECTION_EAST:         switch_t1_tank_n;
    DIRECTION_SOUTHEAST:    switch_t1_tank_s;
    DIRECTION_SOUTH:        switch_t1_tank_s;
    DIRECTION_SOUTHWEST:    switch_t1_tank_s;
    DIRECTION_WEST:         switch_t1_tank_n;
    DIRECTION_NORTHWEST:    switch_t1_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_t1_cab;
    3:  switch_wire_icon;
}

//t1 tanker properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_tank, 2705) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_BW1), string(STR_TANK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;
    loading_speed:                  8;
    cost_factor:                    108;      
    running_cost_factor:            100;
    speed:                          60 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 17;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t1_truck;
    cargo_capacity:             switch_capacity_r1_flat;
    purchase_cargo_capacity:    switch_capacity_r1_flat;    
    default:                    switch_t1_tank;  
    cost_factor:                buycost_t1_truck;
    purchase:                   switch_purchase_t1_tank;
    }
}
}

//t2 tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t2_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_t2_cab;
    2:  switch_r_tank;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t2_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_tank;
    2:  switch_t2_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t2_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t2_tank_n;
    DIRECTION_NORTHEAST:    switch_t2_tank_n;
    DIRECTION_EAST:         switch_t2_tank_n;
    DIRECTION_SOUTHEAST:    switch_t2_tank_s;
    DIRECTION_SOUTH:        switch_t2_tank_s;
    DIRECTION_SOUTHWEST:    switch_t2_tank_s;
    DIRECTION_WEST:         switch_t2_tank_n;
    DIRECTION_NORTHWEST:    switch_t2_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_t2_cab;
    3:  switch_wire_icon;
}

//t2 tanker properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_tank, 2706) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_KD2), string(STR_TANK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;
    loading_speed:                  10;
    cost_factor:                    128;
    running_cost_factor:            138;
    speed:                          80 km/h; 
    power:                          690 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t2_truck;
    cargo_capacity:             switch_capacity_r2_flat;
    purchase_cargo_capacity:    switch_capacity_r2_flat;    
    default:                    switch_t2_tank;  
    cost_factor:                buycost_t2_truck;
    purchase:                   switch_purchase_t2_tank;
    }
}
}


//t3 tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t3_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_t3_cab;
    2:  switch_r_tank;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t3_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_tank;
    2:  switch_t3_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t3_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t3_tank_n;
    DIRECTION_NORTHEAST:    switch_t3_tank_n;
    DIRECTION_EAST:         switch_t3_tank_n;
    DIRECTION_SOUTHEAST:    switch_t3_tank_s;
    DIRECTION_SOUTH:        switch_t3_tank_s;
    DIRECTION_SOUTHWEST:    switch_t3_tank_s;
    DIRECTION_WEST:         switch_t3_tank_n;
    DIRECTION_NORTHWEST:    switch_t3_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_t3_cab;
    3:  switch_wire_icon;
}

//t3 tanker properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_tank, 2707) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_DN3), string(STR_TANK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;
    loading_speed:                  12;
    cost_factor:                    138;
    running_cost_factor:            200;
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 24;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t3_truck;
    cargo_capacity:             switch_capacity_r3_flat;
    purchase_cargo_capacity:    switch_capacity_r3_flat;    
    default:                    switch_t3_tank; 
    cost_factor:                buycost_t3_truck;
    purchase:                   switch_purchase_t3_tank; 
    }
}
}

//t4 tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t4_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_t4_cab;
    2:  switch_r_tank;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t4_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_tank;
    2:  switch_t4_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t4_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t4_tank_n;
    DIRECTION_NORTHEAST:    switch_t4_tank_n;
    DIRECTION_EAST:         switch_t4_tank_n;
    DIRECTION_SOUTHEAST:    switch_t4_tank_s;
    DIRECTION_SOUTH:        switch_t4_tank_s;
    DIRECTION_SOUTHWEST:    switch_t4_tank_s;
    DIRECTION_WEST:         switch_t4_tank_n;
    DIRECTION_NORTHWEST:    switch_t4_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_t4_cab;
    3:  switch_wire_icon;
}

//t4 tanker properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_tank, 2708) {
property {

    name:                           string(STR_CONCAT, string(STR_TMOD_LC4), string(STR_TANK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;
    loading_speed:                  14;
    cost_factor:                    158;
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 28;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t4_truck;
    cargo_capacity:             switch_capacity_r4_flat;
    purchase_cargo_capacity:    switch_capacity_r4_flat;    
    default:                    switch_t4_tank; 
    cost_factor:                buycost_t4_truck;
    purchase:                   switch_purchase_t4_tank;
    }
}
}

// open trucks

//t1 open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t1_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_t1_cab;
    2:  switch_r_open;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t1_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r1_body;
    1:  switch_r_open;
    2:  switch_t1_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t1_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t1_open_n;
    DIRECTION_NORTHEAST:    switch_t1_open_n;
    DIRECTION_EAST:         switch_t1_open_n;
    DIRECTION_SOUTHEAST:    switch_t1_open_s;
    DIRECTION_SOUTH:        switch_t1_open_s;
    DIRECTION_SOUTHWEST:    switch_t1_open_s;
    DIRECTION_WEST:         switch_t1_open_n;
    DIRECTION_NORTHWEST:    switch_t1_open_n;
    }


switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r1_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_t1_cab;
    3:  switch_wire_icon;
}
//t1 open properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_open, 2505) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_KD1), string(STR_OPEN), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cost_factor:                    103;      
    running_cost_factor:            95;      
    speed:                          60 km/h; 
    power:                          350 hp;   
    cargo_capacity:                 13;
    introduction_date:              date(1928,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics   
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         6.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t1_truck;
    cargo_capacity:             switch_r1_open_cargo;
    purchase_cargo_capacity:    switch_r1_open_cargo;       
    default:                    switch_t1_open;  
    cost_factor:                buycost_t1_truck;
    purchase:                   switch_purchase_t1_open;
    }
}
}

//t2 open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t2_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_t2_cab;
    2:  switch_r_open;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t2_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r2_body;
    1:  switch_r_open;
    2:  switch_t2_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t2_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t2_open_n;
    DIRECTION_NORTHEAST:    switch_t2_open_n;
    DIRECTION_EAST:         switch_t2_open_n;
    DIRECTION_SOUTHEAST:    switch_t2_open_s;
    DIRECTION_SOUTH:        switch_t2_open_s;
    DIRECTION_SOUTHWEST:    switch_t2_open_s;
    DIRECTION_WEST:         switch_t2_open_n;
    DIRECTION_NORTHWEST:    switch_t2_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r2_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_t2_cab;
    3:  switch_wire_icon;
}

//t2 open properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_open, 2506) {
property {
    name:                           string(STR_CONCAT, string(STR_TMOD_DN2), string(STR_OPEN), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cost_factor:                    123;      
    running_cost_factor:            135;      
    speed:                          80 km/h; 
    power:                          690 hp;   
    cargo_capacity:                 15;
    introduction_date:              date(1958,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t2_truck;
    cargo_capacity:             switch_r2_open_cargo;
    purchase_cargo_capacity:    switch_r2_open_cargo;       
    default:                    switch_t2_open;  
    cost_factor:                buycost_t2_truck;
    purchase:                   switch_purchase_t2_open;
    }
}
}


//t3 open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t3_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_t3_cab;
    2:  switch_r_open;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t3_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_open;
    2:  switch_t3_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t3_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t3_open_n;
    DIRECTION_NORTHEAST:    switch_t3_open_n;
    DIRECTION_EAST:         switch_t3_open_n;
    DIRECTION_SOUTHEAST:    switch_t3_open_s;
    DIRECTION_SOUTH:        switch_t3_open_s;
    DIRECTION_SOUTHWEST:    switch_t3_open_s;
    DIRECTION_WEST:         switch_t3_open_n;
    DIRECTION_NORTHWEST:    switch_t3_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_t3_cab;
    3:  switch_wire_icon;
}    

//t3 open properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_open, 2507) {
property {
    
    name:                           string(STR_CONCAT, string(STR_TMOD_LC3), string(STR_OPEN), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cost_factor:                    150;      
    running_cost_factor:            190;
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 18;
    introduction_date:              date(1982,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t3_truck;
    cargo_capacity:             switch_r3_open_cargo;
    purchase_cargo_capacity:    switch_r3_open_cargo;       
    default:                    switch_t3_open;  
    cost_factor:                buycost_t3_truck;
    purchase:                   switch_purchase_t3_open;
    }
}
}

//t4 open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_t4_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_t4_cab;
    2:  switch_r_open;
    3:  switch_t_panto;
    
}

switch(FEAT_ROADVEHS, SELF, switch_t4_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_open;
    2:  switch_t4_cab;
    3:  switch_t_panto;
    
}

switch (FEAT_ROADVEHS, SELF, switch_t4_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_t4_open_n;
    DIRECTION_NORTHEAST:    switch_t4_open_n;
    DIRECTION_EAST:         switch_t4_open_n;
    DIRECTION_SOUTHEAST:    switch_t4_open_s;
    DIRECTION_SOUTH:        switch_t4_open_s;
    DIRECTION_SOUTHWEST:    switch_t4_open_s;
    DIRECTION_WEST:         switch_t4_open_n;
    DIRECTION_NORTHWEST:    switch_t4_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_t4_cab;
    3:  switch_wire_icon;
}  

//t4 open properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_open, 2508) {
property {

    name:                           string(STR_CONCAT, string(STR_TMOD_BW4), string(STR_OPEN), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);

    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cost_factor:                    170;      
    running_cost_factor:            150;      
    speed:                          140 km/h; 
    power:                          660;   
    cargo_capacity:                 20;
    introduction_date:              date(2012,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_t4_truck;
    cargo_capacity:             switch_r4_open_cargo;
    purchase_cargo_capacity:    switch_r4_open_cargo;   
    default:                    switch_t4_open; 
    cost_factor:                buycost_t4_truck;
    purchase:                   switch_purchase_t4_open;
    }
}
}


/* Dual Mode Trucks */

/* Mail Trucks */

//d3 mail graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_d3_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_d3_cab;
    2:  switch_r_mail;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d3_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_mail;
    2:  switch_d3_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d3_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d3_mail_n;
    DIRECTION_NORTHEAST:    switch_d3_mail_n;
    DIRECTION_EAST:         switch_d3_mail_n;
    DIRECTION_SOUTHEAST:    switch_d3_mail_s;
    DIRECTION_SOUTH:        switch_d3_mail_s;
    DIRECTION_SOUTHWEST:    switch_d3_mail_s;
    DIRECTION_WEST:         switch_d3_mail_n;
    DIRECTION_NORTHWEST:    switch_d3_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_d3_cab;
    2:  switch_dual_icon;
}

//d3 mail properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_mail, 3107) {
property {
        
    name:                           string(STR_CONCAT, string(STR_DMOD_TM3), string(STR_MAIL), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period :              170;
    loading_speed:                  12;
    cargo_capacity:                 20;
    weight:                         15 ton;
    cost_factor:                    160;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_e_cost_d3;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_d3_mail;  
    cost_factor:                buycost_d3_truck;
    purchase:                   switch_purchase_d3_mail;
    }
}
}

//d4 mail graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_d4_mail_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_d4_cab;
    2:  switch_r_mail;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d4_mail_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_mail;
    2:  switch_d4_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d4_mail, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d4_mail_n;
    DIRECTION_NORTHEAST:    switch_d4_mail_n;
    DIRECTION_EAST:         switch_d4_mail_n;
    DIRECTION_SOUTHEAST:    switch_d4_mail_s;
    DIRECTION_SOUTH:        switch_d4_mail_s;
    DIRECTION_SOUTHWEST:    switch_d4_mail_s;
    DIRECTION_WEST:         switch_d4_mail_n;
    DIRECTION_NORTHWEST:    switch_d4_mail_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_mail, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r_mail;
    1:  spriteset_p_d4_cab;
    2:  switch_dual_icon;
}

//d4 mail properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_mail, 3108) {
property {

    name:                           string(STR_CONCAT, string(STR_DMOD_BW4), string(STR_MAIL), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL, CC_ARMOURED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    cargo_age_period :              200;
    loading_speed:                  8;
    cargo_capacity:                 24;
    weight:                         17 ton;
    cost_factor:                    180;
    running_cost_factor:            200;
    speed:                          140 km/h;
    power:                          600;
    introduction_date:              date(2025,01,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    road_type:                      ROAD;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }
    
graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_e_cost_d4;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_d4_mail; 
    cost_factor:                buycost_d4_truck;
    purchase:                   switch_purchase_d4_mail;
    }
}
}

/* Box Trucks */

//d3 piece goods graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_d3_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_d3_cab;
    2:  switch_r_box;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d3_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_box;
    2:  switch_d3_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d3_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d3_box_n;
    DIRECTION_NORTHEAST:    switch_d3_box_n;
    DIRECTION_EAST:         switch_d3_box_n;
    DIRECTION_SOUTHEAST:    switch_d3_box_s;
    DIRECTION_SOUTH:        switch_d3_box_s;
    DIRECTION_SOUTHWEST:    switch_d3_box_s;
    DIRECTION_WEST:         switch_d3_box_n;
    DIRECTION_NORTHWEST:    switch_d3_box_n;
    }
switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_box;
    2:  spriteset_p_d3_cab;
    3:  switch_dual_icon;
}

//d3 piece goods properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_box, 3207) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_DN3), string(STR_BOX), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cargo_capacity:                 20;
    weight:                         15 ton;
    cost_factor:                    160;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_e_cost_d3;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_d3_box;
    cost_factor:                buycost_d3_truck; 
    purchase:                   switch_purchase_d3_box; 
    }
}
}

//d4 piece goods graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_d4_box_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_d4_cab;
    2:  switch_r_box;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d4_box_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_box;
    2:  switch_d4_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d4_box, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d4_box_n;
    DIRECTION_NORTHEAST:    switch_d4_box_n;
    DIRECTION_EAST:         switch_d4_box_n;
    DIRECTION_SOUTHEAST:    switch_d4_box_s;
    DIRECTION_SOUTH:        switch_d4_box_s;
    DIRECTION_SOUTHWEST:    switch_d4_box_s;
    DIRECTION_WEST:         switch_d4_box_n;
    DIRECTION_NORTHWEST:    switch_d4_box_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_box;
    2:  spriteset_p_d4_cab;
    3:  switch_dual_icon;
}
//d4 piece goods properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_box, 3208) {
property {

    name:                           string(STR_CONCAT, string(STR_DMOD_BW4), string(STR_BOX), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cargo_capacity:                 24;
    weight:                         17 ton;
    cost_factor:                    180;
    running_cost_factor:            200;
    speed:                          140 km/h;
    power:                          600;
    introduction_date:              date(2025,01,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    road_type:                      ROAD;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_e_cost_d4;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_d4_box; 
    cost_factor:                buycost_d4_truck;
    purchase:                   switch_purchase_d4_box;
    }
}
}

/* Refridgerated Trucks */

//d3 refridgerated graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_d3_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_d3_cab;
    2:  switch_r_ref;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d3_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_ref;
    2:  switch_d3_cab;
    3:  switch_d_panto;
}

switch (FEAT_ROADVEHS, SELF, switch_d3_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d3_ref_n;
    DIRECTION_NORTHEAST:    switch_d3_ref_n;
    DIRECTION_EAST:         switch_d3_ref_n;
    DIRECTION_SOUTHEAST:    switch_d3_ref_s;
    DIRECTION_SOUTH:        switch_d3_ref_s;
    DIRECTION_SOUTHWEST:    switch_d3_ref_s;
    DIRECTION_WEST:         switch_d3_ref_n;
    DIRECTION_NORTHWEST:    switch_d3_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_d3_cab;
    3:  switch_dual_icon;
}

//d3 refridgerated properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_ref, 3307) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_TM3), string(STR_REF), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cargo_capacity:                 20;
    weight:                         15 ton;
    cost_factor:                    160;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         15 ton;
    }

graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_e_cost_d3;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_d3_ref;  
    cost_factor:                buycost_d3_truck;
    purchase:                   switch_purchase_d3_ref;
    }
}
}

//d4 refridgerated graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_d4_ref_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_d4_cab;
    2:  switch_r_ref;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d4_ref_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_ref;
    2:  switch_d4_cab;
    3:  switch_d_panto;
}

switch (FEAT_ROADVEHS, SELF, switch_d4_ref, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d4_ref_n;
    DIRECTION_NORTHEAST:    switch_d4_ref_n;
    DIRECTION_EAST:         switch_d4_ref_n;
    DIRECTION_SOUTHEAST:    switch_d4_ref_s;
    DIRECTION_SOUTH:        switch_d4_ref_s;
    DIRECTION_SOUTHWEST:    switch_d4_ref_s;
    DIRECTION_WEST:         switch_d4_ref_n;
    DIRECTION_NORTHWEST:    switch_d4_ref_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_ref;
    2:  spriteset_p_d4_cab;
    3:  switch_dual_icon;
}

//d4 refridgerated properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_ref, 3308) {
property {

    name:                           string(STR_CONCAT, string(STR_DMOD_BW4), string(STR_REF), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cargo_capacity:                 24;
    weight:                         17 ton;
    cost_factor:                    180;      
    running_cost_factor:            200;      
    speed:                          140 km/h; 
    power:                          600;   
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_e_cost_d4;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_d4_ref; 
    cost_factor:                buycost_d4_truck;
    purchase:                   switch_purchase_d4_ref;
    }
}
}

/* Livestock Trucks */

//d3 Livestock graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_d3_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_d3_cab;
    2:  switch_r_stock;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d3_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_stock;
    2:  switch_d3_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d3_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d3_stock_n;
    DIRECTION_NORTHEAST:    switch_d3_stock_n;
    DIRECTION_EAST:         switch_d3_stock_n;
    DIRECTION_SOUTHEAST:    switch_d3_stock_s;
    DIRECTION_SOUTH:        switch_d3_stock_s;
    DIRECTION_SOUTHWEST:    switch_d3_stock_s;
    DIRECTION_WEST:         switch_d3_stock_n;
    DIRECTION_NORTHWEST:    switch_d3_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_d3_cab;
    3:  switch_dual_icon;
}

//d3 Livestock properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_stock, 3407) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_DN3), string(STR_STOCK), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  8;
    cargo_capacity:                 20;
    weight:                         11.5 ton;
    cost_factor:                    160;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_e_cost_d3;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_d3_stock;  
    cost_factor:                buycost_d3_truck;
    purchase:                   switch_purchase_d3_stock;
    }
}
}

//d4 livestock graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_d4_stock_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_d4_cab;
    2:  switch_r_stock;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d4_stock_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_stock;
    2:  switch_d4_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d4_stock, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d4_stock_n;
    DIRECTION_NORTHEAST:    switch_d4_stock_n;
    DIRECTION_EAST:         switch_d4_stock_n;
    DIRECTION_SOUTHEAST:    switch_d4_stock_s;
    DIRECTION_SOUTH:        switch_d4_stock_s;
    DIRECTION_SOUTHWEST:    switch_d4_stock_s;
    DIRECTION_WEST:         switch_d4_stock_n;
    DIRECTION_NORTHWEST:    switch_d4_stock_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_stock;
    2:  spriteset_p_d4_cab;
    3:  switch_dual_icon;
}

//d4 Livestock properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_stock, 3408) {
property {

    name:                           string(STR_CONCAT, string(STR_DMOD_TM4), string(STR_STOCK), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  8;
    cargo_capacity:                 24;
    weight:                         13.5 ton;
    cost_factor:                    180;
    running_cost_factor:            200;
    speed:                          140 km/h;
    power:                          600;
    introduction_date:              date(2025,01,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    road_type:                      ROAD;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_e_cost_d4;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_d4_stock; 
    cost_factor:                buycost_d4_truck;
    purchase:                   switch_purchase_d4_stock;
    }
}
}

/* covered hopper Trucks */

//d3 covered hopper graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_d3_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_d3_cab;
    2:  switch_r_hopp;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d3_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_hopp;
    2:  switch_d3_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d3_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d3_hopp_n;
    DIRECTION_NORTHEAST:    switch_d3_hopp_n;
    DIRECTION_EAST:         switch_d3_hopp_n;
    DIRECTION_SOUTHEAST:    switch_d3_hopp_s;
    DIRECTION_SOUTH:        switch_d3_hopp_s;
    DIRECTION_SOUTHWEST:    switch_d3_hopp_s;
    DIRECTION_WEST:         switch_d3_hopp_n;
    DIRECTION_NORTHWEST:    switch_d3_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_d3_cab;
    3:  switch_dual_icon;
}

//d3 covered hopper properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_hopp, 3807) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_TM3), string(STR_HOPP), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cargo_capacity:                 20;
    weight:                         11.5 ton;
    cost_factor:                    160;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_e_cost_d3;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r3_box;
    purchase_cargo_capacity:    switch_capacity_r3_box; 
    default:                    switch_d3_hopp;  
    cost_factor:                buycost_d3_truck;
    purchase:                   switch_purchase_d3_hopp;
    }
}
}

//d4 covered hopper graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_d4_hopp_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_d4_cab;
    2:  switch_r_hopp;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d4_hopp_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_hopp;
    2:  switch_d4_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d4_hopp, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d4_hopp_n;
    DIRECTION_NORTHEAST:    switch_d4_hopp_n;
    DIRECTION_EAST:         switch_d4_hopp_n;
    DIRECTION_SOUTHEAST:    switch_d4_hopp_s;
    DIRECTION_SOUTH:        switch_d4_hopp_s;
    DIRECTION_SOUTHWEST:    switch_d4_hopp_s;
    DIRECTION_WEST:         switch_d4_hopp_n;
    DIRECTION_NORTHWEST:    switch_d4_hopp_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_hopp;
    2:  spriteset_p_d4_cab;
    3:  switch_dual_icon;
}

//d4 covered hopper properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_hopp, 3808) {
property {

    name:                           string(STR_CONCAT, string(STR_DMOD_BW4), string(STR_HOPP), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  14;
    cargo_capacity:                 24;
    weight:                         13.5 ton;
    cost_factor:                    180;
    running_cost_factor:            200;
    speed:                          140 km/h;
    power:                          600;
    introduction_date:              date(2025,01,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    road_type:                      ROAD;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_e_cost_d4;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r4_box;
    purchase_cargo_capacity:    switch_capacity_r4_box;
    default:                    switch_d4_hopp; 
    cost_factor:                buycost_d4_truck;
    purchase:                   switch_purchase_d4_hopp;
    }
}
}

/* mineral Trucks */

//d3 mineral graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_d3_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_d3_cab;
    2:  switch_r_mine;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d3_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_mine;
    2:  switch_d3_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d3_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d3_mine_n;
    DIRECTION_NORTHEAST:    switch_d3_mine_n;
    DIRECTION_EAST:         switch_d3_mine_n;
    DIRECTION_SOUTHEAST:    switch_d3_mine_s;
    DIRECTION_SOUTH:        switch_d3_mine_s;
    DIRECTION_SOUTHWEST:    switch_d3_mine_s;
    DIRECTION_WEST:         switch_d3_mine_n;
    DIRECTION_NORTHWEST:    switch_d3_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_d3_cab;
    3:  switch_dual_icon;
}

//d3 mineral properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_mine, 3907) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_TM3), string(STR_MINE), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cargo_capacity:                 28;
    weight:                         15.5 ton;
    cost_factor:                    160;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_e_cost_d3;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r3_mine;
    purchase_cargo_capacity:    switch_capacity_r3_mine;    
    default:                    switch_d3_mine;  
    cost_factor:                buycost_d3_truck;
    purchase:                   switch_purchase_d3_mine;
    }
}
}

//d4 mineral graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_d4_mine_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_d4_cab;
    2:  switch_r_mine;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d4_mine_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_mine;
    2:  switch_d4_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d4_mine, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d4_mine_n;
    DIRECTION_NORTHEAST:    switch_d4_mine_n;
    DIRECTION_EAST:         switch_d4_mine_n;
    DIRECTION_SOUTHEAST:    switch_d4_mine_s;
    DIRECTION_SOUTH:        switch_d4_mine_s;
    DIRECTION_SOUTHWEST:    switch_d4_mine_s;
    DIRECTION_WEST:         switch_d4_mine_n;
    DIRECTION_NORTHWEST:    switch_d4_mine_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  spriteset_p_r_mine;
    2:  spriteset_p_d4_cab;
    3:  switch_dual_icon;
}

//d4 mineral properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_mine, 3908) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_DN4), string(STR_MINE), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  18;
    cargo_capacity:                 30;
    weight:                         16.5 ton;
    cost_factor:                    180;
    running_cost_factor:            200;
    speed:                          140 km/h;
    power:                          600;
    introduction_date:              date(2025,01,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    road_type:                      ROAD;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_e_cost_d4;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r4_mine;
    purchase_cargo_capacity:    switch_capacity_r4_mine;
    default:                    switch_d4_mine; 
    cost_factor:                buycost_d4_truck;
    purchase:                   switch_purchase_d4_mine;
    }
}
}

/* flatbed Trucks */

//d3 flatbed graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_d3_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_d3_cab;
    2:  switch_r_flat;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d3_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_flat;
    2:  switch_d3_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d3_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d3_flat_n;
    DIRECTION_NORTHEAST:    switch_d3_flat_n;
    DIRECTION_EAST:         switch_d3_flat_n;
    DIRECTION_SOUTHEAST:    switch_d3_flat_s;
    DIRECTION_SOUTH:        switch_d3_flat_s;
    DIRECTION_SOUTHWEST:    switch_d3_flat_s;
    DIRECTION_WEST:         switch_d3_flat_n;
    DIRECTION_NORTHWEST:    switch_d3_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_t3_cab;
    3:  switch_dual_icon;
}

//d3 flatbed properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_flat, 3607) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_BW3), string(STR_FLAT), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cargo_capacity:                 24;
    weight:                         13.5 ton;
    cost_factor:                    160;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_e_cost_d3;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r3_flat;
    purchase_cargo_capacity:    switch_capacity_r3_flat;    
    default:                    switch_d3_flat;  
    cost_factor:                buycost_d3_truck;
    purchase:                   switch_purchase_d3_flat;
    }
}
}

//d4 flat graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_d4_flat_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_d4_cab;
    2:  switch_r_flat;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d4_flat_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_flat;
    2:  switch_d4_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d4_flat, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d4_flat_n;
    DIRECTION_NORTHEAST:    switch_d4_flat_n;
    DIRECTION_EAST:         switch_d4_flat_n;
    DIRECTION_SOUTHEAST:    switch_d4_flat_s;
    DIRECTION_SOUTH:        switch_d4_flat_s;
    DIRECTION_SOUTHWEST:    switch_d4_flat_s;
    DIRECTION_WEST:         switch_d4_flat_n;
    DIRECTION_NORTHWEST:    switch_d4_flat_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  spriteset_p_r_flat;
    2:  spriteset_p_t4_cab;
    3:  switch_dual_icon;
}

//d4 flatbed properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_flat, 3608) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_DN4), string(STR_FLAT), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cargo_capacity:                 26;
    weight:                         14.5 ton;
    cost_factor:                    180;
    running_cost_factor:            200;
    speed:                          140 km/h;
    power:                          600;
    introduction_date:              date(2025,01,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    road_type:                      ROAD;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_e_cost_d4;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r4_flat;
    purchase_cargo_capacity:    switch_capacity_r4_flat;
    default:                    switch_d4_flat; 
    cost_factor:                buycost_d4_truck;
    purchase:                   switch_purchase_d4_flat;
    }
}
}

/* tanker Trucks */

//d3 tanker graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_d3_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_d3_cab;
    2:  switch_r_tank;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d3_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_tank;
    2:  switch_d3_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d3_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d3_tank_n;
    DIRECTION_NORTHEAST:    switch_d3_tank_n;
    DIRECTION_EAST:         switch_d3_tank_n;
    DIRECTION_SOUTHEAST:    switch_d3_tank_s;
    DIRECTION_SOUTH:        switch_d3_tank_s;
    DIRECTION_SOUTHWEST:    switch_d3_tank_s;
    DIRECTION_WEST:         switch_d3_tank_n;
    DIRECTION_NORTHWEST:    switch_d3_tank_n;
    }


switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_d3_cab;
    3:  switch_dual_icon;
}

//d3 tanker properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_tank, 3707) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_DN3), string(STR_TANK), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  12;
    cargo_capacity:                 24;
    weight:                         13.5 ton;
    cost_factor:                    160;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_e_cost_d3;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r3_flat;
    purchase_cargo_capacity:    switch_capacity_r3_flat;    
    default:                    switch_d3_tank;  
    cost_factor:                buycost_d3_truck;
    purchase:                   switch_purchase_d3_tank;
    }
}
}

//d4 tanker graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_d4_tank_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_d4_cab;
    2:  switch_r_tank;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d4_tank_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_tank;
    2:  switch_d4_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d4_tank, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d4_tank_n;
    DIRECTION_NORTHEAST:    switch_d4_tank_n;
    DIRECTION_EAST:         switch_d4_tank_n;
    DIRECTION_SOUTHEAST:    switch_d4_tank_s;
    DIRECTION_SOUTH:        switch_d4_tank_s;
    DIRECTION_SOUTHWEST:    switch_d4_tank_s;
    DIRECTION_WEST:         switch_d4_tank_n;
    DIRECTION_NORTHWEST:    switch_d4_tank_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  switch_p_r_tank;
    2:  spriteset_p_d4_cab;
    3:  switch_dual_icon;
}

//d4 tanker properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_tank, 3708) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_BW4), string(STR_TANK), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  14;
    cargo_capacity:                 28;
    weight:                         15.5 ton;
    cost_factor:                    180;
    running_cost_factor:            200;
    speed:                          140 km/h;
    power:                          600;
    introduction_date:              date(2025,01,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    road_type:                      ROAD;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_e_cost_d4;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r4_flat;
    purchase_cargo_capacity:    switch_capacity_r4_flat;    
    default:                    switch_d4_tank; 
    cost_factor:                buycost_d4_truck;
    purchase:                   switch_purchase_d4_tank;
    }
}
}

/* open bed Trucks */

//d3 open bed graphics

//graphics definition


switch(FEAT_ROADVEHS, SELF, switch_d3_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_d3_cab;
    2:  switch_r_open;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d3_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r3_body;
    1:  switch_r_open;
    2:  switch_d3_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d3_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d3_open_n;
    DIRECTION_NORTHEAST:    switch_d3_open_n;
    DIRECTION_EAST:         switch_d3_open_n;
    DIRECTION_SOUTHEAST:    switch_d3_open_s;
    DIRECTION_SOUTH:        switch_d3_open_s;
    DIRECTION_SOUTHWEST:    switch_d3_open_s;
    DIRECTION_WEST:         switch_d3_open_n;
    DIRECTION_NORTHWEST:    switch_d3_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r3_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_d3_cab;
    3:  switch_dual_icon;
} 

//d3 open bed properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_open, 3507) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_BW3), string(STR_OPEN), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cargo_capacity:                 18;
    weight:                         10.5 ton;
    cost_factor:                    160;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_e_cost_d3;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_r3_open_cargo;
    purchase_cargo_capacity:    switch_r3_open_cargo;   
    default:                    switch_d3_open;  
    cost_factor:                buycost_d3_truck;
    purchase:                   switch_purchase_d3_open;
    }
}
}

//d4 open graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_d4_open_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_d4_cab;
    2:  switch_r_open;
    3:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_d4_open_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_r4_body;
    1:  switch_r_open;
    2:  switch_d4_cab;
    3:  switch_d_panto;
}
switch (FEAT_ROADVEHS, SELF, switch_d4_open, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_d4_open_n;
    DIRECTION_NORTHEAST:    switch_d4_open_n;
    DIRECTION_EAST:         switch_d4_open_n;
    DIRECTION_SOUTHEAST:    switch_d4_open_s;
    DIRECTION_SOUTH:        switch_d4_open_s;
    DIRECTION_SOUTHWEST:    switch_d4_open_s;
    DIRECTION_WEST:         switch_d4_open_n;
    DIRECTION_NORTHWEST:    switch_d4_open_n;
    }

switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_r4_body;
    1:  spriteset_p_r_open;
    2:  spriteset_p_d4_cab;
    3:  switch_dual_icon;
} 

//d4 open bed properties


if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_open, 3508) {
property {
    name:                           string(STR_CONCAT, string(STR_DMOD_DN4), string(STR_OPEN), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];
    loading_speed:                  8;
    cargo_capacity:                 20;
    weight:                         11.5 ton;
    cost_factor:                    180;
    running_cost_factor:            200;
    speed:                          140 km/h;
    power:                          600;
    introduction_date:              date(2025,01,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    road_type:                      ROAD;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    }

graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_e_cost_d4;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_r4_open_cargo;
    purchase_cargo_capacity:    switch_r4_open_cargo;
    default:                    switch_d4_open; 
    cost_factor:                buycost_d4_truck;
    purchase:                   switch_purchase_d4_open;
    }
}
}



/* ================================================= */
/* ======= Composite Wagons and Trailers =========== */
/* ================================================= */

//Composite wagon bodies

//frames

spriteset(spriteset_w_s_trail_a, "gfx/W/w_trail_4_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_s_trail_b, "gfx/W/w_trail_4_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_s_trail_c, "gfx/W/w_trail_4_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_s_trail_d, "gfx/W/w_trail_4_01.png") { 
    tmpl_7()
}

spriteset(spriteset_w_m_trail_a, "gfx/W/w_trail_6_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_m_trail_b, "gfx/W/w_trail_6_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_m_trail_c, "gfx/W/w_trail_6_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_m_trail_d, "gfx/W/w_trail_6_01.png") { 
    tmpl_7()
}

spriteset(spriteset_w_s_box_floor_a, "gfx/W/w_s_f_floor_01.png") { //short box floor
    tmpl_7()
}
spriteset(spriteset_w_m_box_floor_a, "gfx/W/w_m_f_floor_01.png") { //medium box floor
    tmpl_7()
}

spriteset(spriteset_w_l_box_floor_a, "gfx/W/w_l_f_floor_01.png") { //long box floor a
    tmpl_7()
}
spriteset(spriteset_w_l_box_floor_b, "gfx/W/w_l_f_floor_02.png") { //long box floor b 
    tmpl_7()
}

spriteset(spriteset_w_l_box_floor_c, "gfx/W/w_l_f_floor_03.png") { //long box floor c
    tmpl_7()
}
spriteset(spriteset_w_l_box_floor_d, "gfx/W/w_l_f_floor_04.png") { //long box floor d
    tmpl_7()
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_box_floor, random_bits ) {
    0..95:         spriteset_w_l_box_floor_a;
    96..191:       spriteset_w_l_box_floor_c;
    192..223:      spriteset_w_l_box_floor_b;
    223..255:      spriteset_w_l_box_floor_d;
}

//frames

switch (FEAT_ROADVEHS, SELF, switch_w_s_trail_a, random_bits ) {
    0..127:         spriteset_w_s_trail_a;
    128..255:       spriteset_w_s_trail_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_trail_c, random_bits ) {
    0..127:         spriteset_w_s_trail_c;
    128..255:       spriteset_w_s_trail_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_f_trail, build_year ) {
    0..1940:        switch_w_s_trail_a;
                    switch_w_s_trail_c;                    
}

switch (FEAT_ROADVEHS, SELF, switch_w_m_trail_a, random_bits ) {
    0..127:         spriteset_w_m_trail_a;
    128..255:       spriteset_w_m_trail_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_trail_c, random_bits ) {
    0..127:         spriteset_w_m_trail_c;
    128..255:       spriteset_w_m_trail_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_f_trail, build_year ) {
    0..1960:        switch_w_m_trail_a;
                    switch_w_m_trail_c;                    
}

//box cars




// box trailers - "vans"

// refridgerated trailers

// livestock trailers

// tanker trailers

// mineral trailers

// covered hopper trailers

// open



// Flatbeds



/* ==== Cargos ==== */

cargotable {
    PAPR, // Paper
    STEL, // Steel
    COPR, // Copper
    WOOD, // Wood
    SCMT, // SCRAP
    RCYC, // RECYCLABLES
    FOOD, // FOOD
    FISH, // FISH
    FRUT, // FRUIT
    GOOD, // GOODS
    CORE, // COPPER ORE
    BDMT, // BUILDING MATERIALS
    WDPR, // LUMBER
    METL, // METAL
    SAND, // SAND
    PHOS, // PHOSPHATE
    GRVL, // GRAVEL & STONE
    LIME, // LIME
    SASH, // SODA ASH
    IORE, // IRON ORE
    AORE, // BAUXITE
    LVST, // LIVESTOCK
    MILK, // MILK
    EOIL, // EDIBLE OILS
    FERT, // FERTILIZER
    PETR, // REFINED FUELS
    OIL_, // CRUDE OIL
    PEAT, // PEAT
    COAL, // coal
    COKE, // coke
    CHEM, // chemicals
    BEER, // beer
    IRON, // cast / pig iron
    ACID, // Acids
    BEAN, // beans
    CMNT, // cement
    RFPR, // refined chemicals
    CHLO, // chlorine
    SALT, // Salt 
    PIPE, // Iron and steel pipes
    POWR, // Transformers, electric motors, etc
    ZINC, // zinc
    GRAI, // grain
    MAIZ, // Maize / corn
    SLAG, // Slag
    PORE, // pyrite
    FMSP, // farm supplies
    ENSP, // engineering supplies
    MNSP, // packaging
    WOOL, // wool
    VEHI, // Vehicles
    VBOD, // Vehicle Bodies
    FICR, // Plant Fibers
    PLAS, // Plastic - pellets
    CBLK, // Carbon Black - powder

}

// Piece Cargo

// large piece cargo
// lumber
spriteset(spriteset_w_s_c_board_1, "gfx/W/w_s_c_board_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_board_2, "gfx/W/w_s_c_board_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_board_3, "gfx/W/w_s_c_board_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_board_4, "gfx/W/w_s_c_board_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_board { //short lumber flatbed cargo
    loaded:  [spriteset_w_s_c_board_1, spriteset_w_s_c_board_2, spriteset_w_s_c_board_3, spriteset_w_s_c_board_4];
    loading: [spriteset_w_s_c_board_1, spriteset_w_s_c_board_2, spriteset_w_s_c_board_3, spriteset_w_s_c_board_4];
}

spriteset(spriteset_w_m_c_board_1, "gfx/W/w_m_c_board_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_board_2, "gfx/W/w_m_c_board_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_board_3, "gfx/W/w_m_c_board_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_board_4, "gfx/W/w_m_c_board_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_board { //medium lumber flatbed cargo
    loaded:  [spriteset_w_m_c_board_1, spriteset_w_m_c_board_2, spriteset_w_m_c_board_3, spriteset_w_m_c_board_4];
    loading: [spriteset_w_m_c_board_1, spriteset_w_m_c_board_2, spriteset_w_m_c_board_3, spriteset_w_m_c_board_4];
}

spriteset(spriteset_w_l_c_board_1, "gfx/W/w_l_c_board_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_board_2, "gfx/W/w_l_c_board_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_board_3, "gfx/W/w_l_c_board_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_board_4, "gfx/W/w_l_c_board_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_c_board { //Long lumber flatbed cargo
    loaded:  [spriteset_x_null, spriteset_w_l_c_board_1, spriteset_w_l_c_board_2, spriteset_w_l_c_board_3, spriteset_w_l_c_board_4];
    loading: [spriteset_x_null, spriteset_w_l_c_board_1, spriteset_w_l_c_board_2, spriteset_w_l_c_board_3, spriteset_w_l_c_board_4];
}

// logs 

spriteset(spriteset_w_s_c_log_1, "gfx/W/w_s_c_log_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_log_2, "gfx/W/w_s_c_log_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_log_3, "gfx/W/w_s_c_log_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_log_4, "gfx/W/w_s_c_log_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_log { //short wood logs flatbed cargo
    loaded:  [spriteset_x_null, spriteset_w_s_c_log_1, spriteset_w_s_c_log_2, spriteset_w_s_c_log_3, spriteset_w_s_c_log_4];
    loading: [spriteset_x_null, spriteset_w_s_c_log_1, spriteset_w_s_c_log_2, spriteset_w_s_c_log_3, spriteset_w_s_c_log_4];
}

spriteset(spriteset_w_m_c_log_1, "gfx/W/w_m_c_log_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_log_2, "gfx/W/w_m_c_log_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_log_3, "gfx/W/w_m_c_log_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_log_4, "gfx/W/w_m_c_log_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_log { //medium wood logs flatbed cargo
    loaded:  [spriteset_x_null, spriteset_w_m_c_log_1, spriteset_w_m_c_log_2, spriteset_w_m_c_log_3, spriteset_w_m_c_log_4];
    loading: [spriteset_x_null, spriteset_w_m_c_log_1, spriteset_w_m_c_log_2, spriteset_w_m_c_log_3, spriteset_w_m_c_log_4];
}

spriteset(spriteset_w_l_c_log_1, "gfx/W/w_l_c_log_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_log_2, "gfx/W/w_l_c_log_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_log_3, "gfx/W/w_l_c_log_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_log_4, "gfx/W/w_l_c_log_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_c_log { //long wood logs flatbed cargo
    loaded:  [spriteset_x_null, spriteset_w_l_c_log_1, spriteset_w_l_c_log_2, spriteset_w_l_c_log_3, spriteset_w_l_c_log_4];
    loading: [spriteset_x_null, spriteset_w_l_c_log_1, spriteset_w_l_c_log_2, spriteset_w_l_c_log_3, spriteset_w_l_c_log_4];
}

// Pipe

spriteset(spriteset_w_s_c_pipe_1, "gfx/W/w_s_c_pipe_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_pipe_2, "gfx/W/w_s_c_pipe_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_pipe_3, "gfx/W/w_s_c_pipe_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_pipe_4, "gfx/W/w_s_c_pipe_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_pipe { //short pipes flatbed cargo
    loaded:  [spriteset_x_null, spriteset_w_s_c_pipe_1, spriteset_w_s_c_pipe_2, spriteset_w_s_c_pipe_3, spriteset_w_s_c_pipe_4];
    loading: [spriteset_x_null, spriteset_w_s_c_pipe_1, spriteset_w_s_c_pipe_2, spriteset_w_s_c_pipe_3, spriteset_w_s_c_pipe_4];
}

spriteset(spriteset_w_m_c_pipe_1, "gfx/W/w_m_c_pipe_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_pipe_2, "gfx/W/w_m_c_pipe_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_pipe_3, "gfx/W/w_m_c_pipe_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_pipe_4, "gfx/W/w_m_c_pipe_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_pipe { //medium pipes flatbed cargo
    loaded:  [spriteset_x_null, spriteset_w_m_c_pipe_1, spriteset_w_m_c_pipe_2, spriteset_w_m_c_pipe_3, spriteset_w_m_c_pipe_4];
    loading: [spriteset_x_null, spriteset_w_m_c_pipe_1, spriteset_w_m_c_pipe_2, spriteset_w_m_c_pipe_3, spriteset_w_m_c_pipe_4];
}

spriteset(spriteset_w_l_c_pipe_1, "gfx/W/w_l_c_pipe_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_pipe_2, "gfx/W/w_l_c_pipe_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_pipe_3, "gfx/W/w_l_c_pipe_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_pipe_4, "gfx/W/w_l_c_pipe_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_c_pipe { //long pipes flatbed cargo
    loaded:  [spriteset_x_null, spriteset_w_l_c_pipe_1, spriteset_w_l_c_pipe_2, spriteset_w_l_c_pipe_3, spriteset_w_l_c_pipe_4];
    loading: [spriteset_x_null, spriteset_w_l_c_pipe_1, spriteset_w_l_c_pipe_2, spriteset_w_l_c_pipe_3, spriteset_w_l_c_pipe_4];
}

// Small Piece cargo
// boxes

spriteset(spriteset_w_s_c_box_1, "gfx/W/w_s_c_box_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_box_2, "gfx/W/w_s_c_box_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_box_3, "gfx/W/w_s_c_box_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_box_4, "gfx/W/w_s_c_box_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_box { //short boxes cargo
    loaded:  [spriteset_x_null, spriteset_w_s_c_box_1, spriteset_w_s_c_box_2, spriteset_w_s_c_box_3, spriteset_w_s_c_box_4];
    loading: [spriteset_x_null, spriteset_w_s_c_box_1, spriteset_w_s_c_box_2, spriteset_w_s_c_box_3, spriteset_w_s_c_box_4];
}

spriteset(spriteset_w_m_c_box_1, "gfx/W/w_m_c_box_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_box_2, "gfx/W/w_m_c_box_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_box_3, "gfx/W/w_m_c_box_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_box_4, "gfx/W/w_m_c_box_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_box { //medium boxes cargo
    loaded:  [spriteset_x_null, spriteset_w_m_c_box_1, spriteset_w_m_c_box_2, spriteset_w_m_c_box_3, spriteset_w_m_c_box_4];
    loading: [spriteset_x_null, spriteset_w_m_c_box_1, spriteset_w_m_c_box_2, spriteset_w_m_c_box_3, spriteset_w_m_c_box_4];
}

spriteset(spriteset_w_l_c_box_1, "gfx/W/w_l_c_box_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_box_2, "gfx/W/w_l_c_box_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_box_3, "gfx/W/w_l_c_box_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_box_4, "gfx/W/w_l_c_box_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_c_box { //long boxes cargo
    loaded:  [spriteset_x_null, spriteset_w_l_c_box_1, spriteset_w_l_c_box_2, spriteset_w_l_c_box_3, spriteset_w_l_c_box_4];
    loading: [spriteset_x_null, spriteset_w_l_c_box_1, spriteset_w_l_c_box_2, spriteset_w_l_c_box_3, spriteset_w_l_c_box_4];
}

// food boxes

spriteset(spriteset_w_s_c_foodbox_1, "gfx/W/w_s_c_foodbox_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_foodbox_2, "gfx/W/w_s_c_foodbox_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_foodbox_3, "gfx/W/w_s_c_foodbox_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_foodbox_4, "gfx/W/w_s_c_foodbox_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_foodbox { //short foodboxes cargo
    loaded:  [spriteset_x_null, spriteset_w_s_c_foodbox_1, spriteset_w_s_c_foodbox_2, spriteset_w_s_c_foodbox_3, spriteset_w_s_c_foodbox_4];
    loading: [spriteset_x_null, spriteset_w_s_c_foodbox_1, spriteset_w_s_c_foodbox_2, spriteset_w_s_c_foodbox_3, spriteset_w_s_c_foodbox_4];
}

spriteset(spriteset_w_m_c_foodbox_1, "gfx/W/w_m_c_foodbox_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_foodbox_2, "gfx/W/w_m_c_foodbox_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_foodbox_3, "gfx/W/w_m_c_foodbox_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_foodbox_4, "gfx/W/w_m_c_foodbox_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_foodbox { //medium foodboxes cargo
    loaded:  [spriteset_x_null, spriteset_w_m_c_foodbox_1, spriteset_w_m_c_foodbox_2, spriteset_w_m_c_foodbox_3, spriteset_w_m_c_foodbox_4];
    loading: [spriteset_x_null, spriteset_w_m_c_foodbox_1, spriteset_w_m_c_foodbox_2, spriteset_w_m_c_foodbox_3, spriteset_w_m_c_foodbox_4];
}

spriteset(spriteset_w_l_c_foodbox_1, "gfx/W/w_l_c_foodbox_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_foodbox_2, "gfx/W/w_l_c_foodbox_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_foodbox_3, "gfx/W/w_l_c_foodbox_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_foodbox_4, "gfx/W/w_l_c_foodbox_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_c_foodbox { //long foodboxes cargo
    loaded:  [spriteset_x_null, spriteset_w_l_c_foodbox_1, spriteset_w_l_c_foodbox_2, spriteset_w_l_c_foodbox_3, spriteset_w_l_c_foodbox_4];
    loading: [spriteset_x_null, spriteset_w_l_c_foodbox_1, spriteset_w_l_c_foodbox_2, spriteset_w_l_c_foodbox_3, spriteset_w_l_c_foodbox_4];
}

// beer bottles

spriteset(spriteset_w_s_c_beer_1, "gfx/W/w_s_c_beer_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_beer_2, "gfx/W/w_s_c_beer_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_beer_3, "gfx/W/w_s_c_beer_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_beer_4, "gfx/W/w_s_c_beer_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_beer { //short beer bottles cargo
    loaded:  [spriteset_x_null, spriteset_w_s_c_beer_1, spriteset_w_s_c_beer_2, spriteset_w_s_c_beer_3, spriteset_w_s_c_beer_4];
    loading: [spriteset_x_null, spriteset_w_s_c_beer_1, spriteset_w_s_c_beer_2, spriteset_w_s_c_beer_3, spriteset_w_s_c_beer_4];
}

spriteset(spriteset_w_m_c_beer_1, "gfx/W/w_m_c_beer_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_beer_2, "gfx/W/w_m_c_beer_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_beer_3, "gfx/W/w_m_c_beer_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_beer_4, "gfx/W/w_m_c_beer_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_beer { //medium beer bottles cargo
    loaded:  [spriteset_x_null, spriteset_w_m_c_beer_1, spriteset_w_m_c_beer_2, spriteset_w_m_c_beer_3, spriteset_w_m_c_beer_4];
    loading: [spriteset_x_null, spriteset_w_m_c_beer_1, spriteset_w_m_c_beer_2, spriteset_w_m_c_beer_3, spriteset_w_m_c_beer_4];
}

spriteset(spriteset_w_l_c_beer_1, "gfx/W/w_l_c_beer_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_beer_2, "gfx/W/w_l_c_beer_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_beer_3, "gfx/W/w_l_c_beer_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_beer_4, "gfx/W/w_l_c_beer_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_c_beer { //long beer bottles cargo
    loaded:  [spriteset_x_null, spriteset_w_l_c_beer_1, spriteset_w_l_c_beer_2, spriteset_w_l_c_beer_3, spriteset_w_l_c_beer_4];
    loading: [spriteset_x_null, spriteset_w_l_c_beer_1, spriteset_w_l_c_beer_2, spriteset_w_l_c_beer_3, spriteset_w_l_c_beer_4];
}

// drums

spriteset(spriteset_w_s_c_drum_1, "gfx/W/w_s_c_drum_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_drum_2, "gfx/W/w_s_c_drum_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_drum_3, "gfx/W/w_s_c_drum_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_drum { //short drums cargo
    loaded:  [spriteset_x_null, spriteset_w_s_c_drum_1, spriteset_w_s_c_drum_2, spriteset_w_s_c_drum_3];
    loading: [spriteset_x_null, spriteset_w_s_c_drum_1, spriteset_w_s_c_drum_2, spriteset_w_s_c_drum_3];
}

spriteset(spriteset_w_m_c_drum_1, "gfx/W/w_m_c_drum_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_drum_2, "gfx/W/w_m_c_drum_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_drum_3, "gfx/W/w_m_c_drum_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_drum_4, "gfx/W/w_m_c_drum_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_drum { //medium drums cargo
    loaded:  [spriteset_x_null, spriteset_w_m_c_drum_1, spriteset_w_m_c_drum_2, spriteset_w_m_c_drum_3, spriteset_w_m_c_drum_4];
    loading: [spriteset_x_null, spriteset_w_m_c_drum_1, spriteset_w_m_c_drum_2, spriteset_w_m_c_drum_3, spriteset_w_m_c_drum_4];
}

spriteset(spriteset_w_l_c_drum_1, "gfx/W/w_l_c_drum_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_drum_2, "gfx/W/w_l_c_drum_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_drum_3, "gfx/W/w_l_c_drum_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_drum_4, "gfx/W/w_l_c_drum_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_c_drum { //long drums cargo
    loaded:  [spriteset_x_null, spriteset_w_l_c_drum_1, spriteset_w_l_c_drum_2, spriteset_w_l_c_drum_3, spriteset_w_l_c_drum_4];
    loading: [spriteset_x_null, spriteset_w_l_c_drum_1, spriteset_w_l_c_drum_2, spriteset_w_l_c_drum_3, spriteset_w_l_c_drum_4];
}

// livestock

spriteset(spriteset_w_s_c_sheep_1, "gfx/W/w_s_c_sheep_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_sheep_2, "gfx/W/w_s_c_sheep_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_sheep_3, "gfx/W/w_s_c_sheep_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_sheep_4, "gfx/W/w_s_c_sheep_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_sheep { //short livestock cargo
    loaded:  [spriteset_x_null, spriteset_w_s_c_sheep_1, spriteset_w_s_c_sheep_2, spriteset_w_s_c_sheep_3, spriteset_w_s_c_sheep_4];
    loading: [spriteset_x_null, spriteset_w_s_c_sheep_1, spriteset_w_s_c_sheep_2, spriteset_w_s_c_sheep_3, spriteset_w_s_c_sheep_4];
}

spriteset(spriteset_w_m_c_sheep_1, "gfx/W/w_m_c_sheep_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_sheep_2, "gfx/W/w_m_c_sheep_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_sheep_3, "gfx/W/w_m_c_sheep_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_sheep_4, "gfx/W/w_m_c_sheep_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_sheep { //medium livestock cargo
    loaded:  [spriteset_x_null, spriteset_w_m_c_sheep_1, spriteset_w_m_c_sheep_2, spriteset_w_m_c_sheep_3, spriteset_w_m_c_sheep_4];
    loading: [spriteset_x_null, spriteset_w_m_c_sheep_1, spriteset_w_m_c_sheep_2, spriteset_w_m_c_sheep_3, spriteset_w_m_c_sheep_4];
}

// palletized cargo
// crates
spriteset(spriteset_w_s_c_crate_1, "gfx/W/w_s_c_crate_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_o_crate_a { //short crate open cargo type a
    loaded:  [spriteset_x_null, spriteset_w_s_c_crate_1];
    loading: [spriteset_x_null, spriteset_w_s_c_crate_1];
}

spriteset(spriteset_w_s_c_crate_2, "gfx/W/w_s_c_crate_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_crate_4, "gfx/W/w_s_c_crate_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_crate_a { //short crate flatbed cargo type a
    loaded:  [spriteset_x_null, spriteset_w_s_c_crate_2, spriteset_w_s_c_crate_4];
    loading: [spriteset_x_null, spriteset_w_s_c_crate_2, spriteset_w_s_c_crate_4];
}

spriteset(spriteset_w_s_c_crate_3, "gfx/W/w_s_c_crate_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_crate_b { //short crate flatbed cargo type b
    loaded:  [spriteset_x_null, spriteset_w_s_c_crate_3, spriteset_w_s_c_crate_4];
    loading: [spriteset_x_null, spriteset_w_s_c_crate_3, spriteset_w_s_c_crate_4];
}

spriteset(spriteset_w_m_c_crate_1, "gfx/W/w_m_c_crate_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_crate_2, "gfx/W/w_m_c_crate_02.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_crate_a { //medium crate flatbed cargo type a
    loaded:  [spriteset_x_null, spriteset_w_m_c_crate_1, spriteset_w_m_c_crate_2];
    loading: [spriteset_x_null, spriteset_w_m_c_crate_1, spriteset_w_m_c_crate_2];
}

spriteset(spriteset_w_m_c_crate_3, "gfx/W/w_m_c_crate_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_crate_4, "gfx/W/w_m_c_crate_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_crate_b { //medium crate flatbed cargo type b
    loaded:  [spriteset_x_null, spriteset_w_m_c_crate_3, spriteset_w_m_c_crate_4];
    loading: [spriteset_x_null, spriteset_w_m_c_crate_3, spriteset_w_m_c_crate_4];
}

spriteset(spriteset_w_l_c_crate_1, "gfx/W/w_l_c_cratea_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_crate_2, "gfx/W/w_l_c_cratea_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_crate_3, "gfx/W/w_l_c_cratea_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_crate_a { //long crate flatbed cargo type a
    loaded:  [spriteset_x_null, spriteset_w_l_c_crate_1, spriteset_w_l_c_crate_2, spriteset_w_l_c_crate_3];
    loading: [spriteset_x_null, spriteset_w_l_c_crate_1, spriteset_w_l_c_crate_2, spriteset_w_l_c_crate_3];
}

// copper
spriteset(spriteset_w_s_c_cupr_1, "gfx/W/w_s_c_cupr_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_o_cupr_a { //short copper open cargo type a rolls
    loaded:  [spriteset_x_null, spriteset_w_s_c_cupr_1];
    loading: [spriteset_x_null, spriteset_w_s_c_cupr_1];
}

spriteset(spriteset_w_s_c_cupr_2, "gfx/W/w_s_c_cupr_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_cupr_4, "gfx/W/w_s_c_cupr_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_cupr_a { //short copper flatbed cargo type a rolls
    loaded:  [spriteset_x_null, spriteset_w_s_c_cupr_2, spriteset_w_s_c_cupr_4];
    loading: [spriteset_x_null, spriteset_w_s_c_cupr_2, spriteset_w_s_c_cupr_4];
}

spriteset(spriteset_w_s_c_cupr_3, "gfx/W/w_s_c_cupr_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_cupr_b { //short copper flatbed cargo type b rolls
    loaded:  [spriteset_x_null, spriteset_w_s_c_cupr_3, spriteset_w_s_c_cupr_4];
    loading: [spriteset_x_null, spriteset_w_s_c_cupr_3, spriteset_w_s_c_cupr_4];
}

spriteset(spriteset_w_m_c_cupr_1, "gfx/W/w_m_c_cupr_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_cupr_2, "gfx/W/w_m_c_cupr_02.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_cupr_a { //medium copper flatbed cargo type a rolls
    loaded:  [spriteset_x_null, spriteset_w_m_c_cupr_1, spriteset_w_m_c_cupr_2];
    loading: [spriteset_x_null, spriteset_w_m_c_cupr_1, spriteset_w_m_c_cupr_2];
}

spriteset(spriteset_w_m_c_cupr_3, "gfx/W/w_m_c_cupr_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_cupr_4, "gfx/W/w_m_c_cupr_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_cupr_b { //medium copper flatbed cargo type b ignots
    loaded:  [spriteset_x_null, spriteset_w_m_c_cupr_3, spriteset_w_m_c_cupr_4];
    loading: [spriteset_x_null, spriteset_w_m_c_cupr_3, spriteset_w_m_c_cupr_4];
}

spriteset(spriteset_w_l_c_cupr_a_1, "gfx/W/w_l_c_cupra_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_cupr_a_2, "gfx/W/w_l_c_cupra_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_cupr_a_3, "gfx/W/w_l_c_cupra_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_cupr_a { //long copper flatbed cargo type a
    loaded:  [spriteset_x_null, spriteset_w_l_c_cupr_a_1, spriteset_w_l_c_cupr_a_2, spriteset_w_l_c_cupr_a_3];
    loading: [spriteset_x_null, spriteset_w_l_c_cupr_a_1, spriteset_w_l_c_cupr_a_2, spriteset_w_l_c_cupr_a_3];
}

spriteset(spriteset_w_l_c_cupr_b_1, "gfx/W/w_l_c_cuprb_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_cupr_b_2, "gfx/W/w_l_c_cuprb_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_cupr_b_3, "gfx/W/w_l_c_cuprb_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_cupr_b { //long copper flatbed cargo type b
    loaded:  [spriteset_x_null, spriteset_w_l_c_cupr_b_1, spriteset_w_l_c_cupr_b_2, spriteset_w_l_c_cupr_b_3];
    loading: [spriteset_x_null, spriteset_w_l_c_cupr_b_1, spriteset_w_l_c_cupr_b_2, spriteset_w_l_c_cupr_b_3];
}

// food crates
spriteset(spriteset_w_s_c_food_1, "gfx/W/w_s_c_food_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_o_food_a { //short food crates open cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_s_c_food_1];
    loading: [spriteset_x_null, spriteset_w_s_c_food_1];
}

spriteset(spriteset_w_s_c_food_2, "gfx/W/w_s_c_food_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_food_4, "gfx/W/w_s_c_food_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_food_a { //short food crates flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_s_c_food_2, spriteset_w_s_c_food_4];
    loading: [spriteset_x_null, spriteset_w_s_c_food_2, spriteset_w_s_c_food_4];
}

spriteset(spriteset_w_s_c_food_3, "gfx/W/w_s_c_food_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_food_b { //short food crates flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_s_c_food_3, spriteset_w_s_c_food_4];
    loading: [spriteset_x_null, spriteset_w_s_c_food_3, spriteset_w_s_c_food_4];
}

spriteset(spriteset_w_m_c_food_1, "gfx/W/w_m_c_food_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_food_2, "gfx/W/w_m_c_food_02.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_food_a { //medium food crates flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_m_c_food_1, spriteset_w_m_c_food_2];
    loading: [spriteset_x_null, spriteset_w_m_c_food_1, spriteset_w_m_c_food_2];
}

spriteset(spriteset_w_m_c_food_3, "gfx/W/w_m_c_food_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_food_4, "gfx/W/w_m_c_food_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_food_b { //medium food crates flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_m_c_food_3, spriteset_w_m_c_food_4];
    loading: [spriteset_x_null, spriteset_w_m_c_food_3, spriteset_w_m_c_food_4];
}

spriteset(spriteset_w_l_c_food_1, "gfx/W/w_l_c_food_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_food_2, "gfx/W/w_l_c_food_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_food_3, "gfx/W/w_l_c_food_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_food_a { //long food flatbed cargo type a
    loaded:  [spriteset_x_null, spriteset_w_l_c_food_1, spriteset_w_l_c_food_2, spriteset_w_l_c_food_3];
    loading: [spriteset_x_null, spriteset_w_l_c_food_1, spriteset_w_l_c_food_2, spriteset_w_l_c_food_3];
}

// pig-iron
spriteset(spriteset_w_s_c_iron_1, "gfx/W/w_s_c_iron_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_o_iron_a { //short pig-iron open cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_s_c_iron_1];
    loading: [spriteset_x_null, spriteset_w_s_c_iron_1];
}

spriteset(spriteset_w_s_c_iron_2, "gfx/W/w_s_c_iron_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_iron_4, "gfx/W/w_s_c_iron_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_iron_a { //short pig-iron flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_s_c_iron_2, spriteset_w_s_c_iron_4];
    loading: [spriteset_x_null, spriteset_w_s_c_iron_2, spriteset_w_s_c_iron_4];
}

spriteset(spriteset_w_s_c_iron_3, "gfx/W/w_s_c_iron_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_iron_b { //short pig-iron flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_s_c_iron_3, spriteset_w_s_c_iron_4];
    loading: [spriteset_x_null, spriteset_w_s_c_iron_3, spriteset_w_s_c_iron_4];
}

spriteset(spriteset_w_m_c_iron_1, "gfx/W/w_m_c_iron_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_iron_2, "gfx/W/w_m_c_iron_02.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_iron_a { //medium pig-iron flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_m_c_iron_1, spriteset_w_m_c_iron_2];
    loading: [spriteset_x_null, spriteset_w_m_c_iron_1, spriteset_w_m_c_iron_2];
}

spriteset(spriteset_w_m_c_iron_3, "gfx/W/w_m_c_iron_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_iron_4, "gfx/W/w_m_c_iron_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_iron_b { //medium pig-iron flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_m_c_iron_3, spriteset_w_m_c_iron_4];
    loading: [spriteset_x_null, spriteset_w_m_c_iron_3, spriteset_w_m_c_iron_4];
}

spriteset(spriteset_w_l_c_iron_a_1, "gfx/W/w_l_c_irona_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_iron_a_2, "gfx/W/w_l_c_irona_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_iron_a_3, "gfx/W/w_l_c_irona_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_iron_a { //long pig iron flatbed cargo type a
    loaded:  [spriteset_x_null, spriteset_w_l_c_iron_a_1, spriteset_w_l_c_iron_a_2, spriteset_w_l_c_iron_a_3];
    loading: [spriteset_x_null, spriteset_w_l_c_iron_a_1, spriteset_w_l_c_iron_a_2, spriteset_w_l_c_iron_a_3];
}

spriteset(spriteset_w_l_c_iron_b_1, "gfx/W/w_l_c_ironb_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_iron_b_2, "gfx/W/w_l_c_ironb_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_iron_b_3, "gfx/W/w_l_c_ironb_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_iron_b { //long pig iron flatbed cargo type b
    loaded:  [spriteset_x_null, spriteset_w_l_c_iron_b_1, spriteset_w_l_c_iron_b_2, spriteset_w_l_c_iron_b_3];
    loading: [spriteset_x_null, spriteset_w_l_c_iron_b_1, spriteset_w_l_c_iron_b_2, spriteset_w_l_c_iron_b_3];
}

// paper rolls
spriteset(spriteset_w_s_c_paper_1, "gfx/W/w_s_c_paper_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_o_paper_a { //short paper rolls open cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_s_c_paper_1];
    loading: [spriteset_x_null, spriteset_w_s_c_paper_1];
}

spriteset(spriteset_w_s_c_paper_2, "gfx/W/w_s_c_paper_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_paper_4, "gfx/W/w_s_c_paper_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_paper_a { //short paper rolls flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_s_c_paper_2, spriteset_w_s_c_paper_4];
    loading: [spriteset_x_null, spriteset_w_s_c_paper_2, spriteset_w_s_c_paper_4];
}

spriteset(spriteset_w_s_c_paper_3, "gfx/W/w_s_c_paper_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_paper_b { //short paper rolls flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_s_c_paper_3, spriteset_w_s_c_paper_4];
    loading: [spriteset_x_null, spriteset_w_s_c_paper_3, spriteset_w_s_c_paper_4];
}

spriteset(spriteset_w_m_c_paper_1, "gfx/W/w_m_c_paper_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_paper_2, "gfx/W/w_m_c_paper_02.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_paper_a { //medium paper rolls flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_m_c_paper_1, spriteset_w_m_c_paper_2];
    loading: [spriteset_x_null, spriteset_w_m_c_paper_1, spriteset_w_m_c_paper_2];
}

spriteset(spriteset_w_m_c_paper_3, "gfx/W/w_m_c_paper_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_paper_4, "gfx/W/w_m_c_paper_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_paper_b { //medium paper rolls flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_m_c_paper_3, spriteset_w_m_c_paper_4];
    loading: [spriteset_x_null, spriteset_w_m_c_paper_3, spriteset_w_m_c_paper_4];
}

spriteset(spriteset_w_l_c_paper_a_1, "gfx/W/w_l_c_papera_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_paper_a_2, "gfx/W/w_l_c_papera_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_paper_a_3, "gfx/W/w_l_c_papera_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_paper_a { //long paper flatbed cargo type a
    loaded:  [spriteset_x_null, spriteset_w_l_c_paper_a_1, spriteset_w_l_c_paper_a_2, spriteset_w_l_c_paper_a_3];
    loading: [spriteset_x_null, spriteset_w_l_c_paper_a_1, spriteset_w_l_c_paper_a_2, spriteset_w_l_c_paper_a_3];
}

// steel
spriteset(spriteset_w_s_c_steel_1, "gfx/W/w_s_c_steel_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_o_steel_a { //short steel open cargo type a rolls
    loaded:  [spriteset_x_null, spriteset_w_s_c_steel_1];
    loading: [spriteset_x_null, spriteset_w_s_c_steel_1];
}

spriteset(spriteset_w_s_c_steel_2, "gfx/W/w_s_c_steel_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_steel_4, "gfx/W/w_s_c_steel_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_steel_a { //short steel flatbed cargo type a rolls
    loaded:  [spriteset_x_null, spriteset_w_s_c_steel_2, spriteset_w_s_c_steel_4];
    loading: [spriteset_x_null, spriteset_w_s_c_steel_2, spriteset_w_s_c_steel_4];
}

spriteset(spriteset_w_s_c_steel_3, "gfx/W/w_s_c_steel_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_steel_b { //short steel flatbed cargo type b rolls
    loaded:  [spriteset_x_null, spriteset_w_s_c_steel_3, spriteset_w_s_c_steel_4];
    loading: [spriteset_x_null, spriteset_w_s_c_steel_3, spriteset_w_s_c_steel_4];
}

spriteset(spriteset_w_m_c_steel_1, "gfx/W/w_m_c_steel_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_steel_2, "gfx/W/w_m_c_steel_02.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_steel_a { //medium steel flatbed cargo type a rolls
    loaded:  [spriteset_x_null, spriteset_w_m_c_steel_1, spriteset_w_m_c_steel_2];
    loading: [spriteset_x_null, spriteset_w_m_c_steel_1, spriteset_w_m_c_steel_2];
}

spriteset(spriteset_w_m_c_steel_3, "gfx/W/w_m_c_steel_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_steel_4, "gfx/W/w_m_c_steel_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_steel_b { //medium steel flatbed cargo type b ignots
    loaded:  [spriteset_x_null, spriteset_w_m_c_steel_3, spriteset_w_m_c_steel_4];
    loading: [spriteset_x_null, spriteset_w_m_c_steel_3, spriteset_w_m_c_steel_4];
}

spriteset(spriteset_w_l_c_steel_a_1, "gfx/W/w_l_c_steela_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_steel_a_2, "gfx/W/w_l_c_steela_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_steel_a_3, "gfx/W/w_l_c_steela_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_steel_a { //long steel flatbed cargo type a
    loaded:  [spriteset_x_null, spriteset_w_l_c_steel_a_1, spriteset_w_l_c_steel_a_2, spriteset_w_l_c_steel_a_3];
    loading: [spriteset_x_null, spriteset_w_l_c_steel_a_1, spriteset_w_l_c_steel_a_2, spriteset_w_l_c_steel_a_3];
}

spriteset(spriteset_w_l_c_steel_b_1, "gfx/W/w_l_c_steelb_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_steel_b_2, "gfx/W/w_l_c_steelb_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_steel_b_3, "gfx/W/w_l_c_steelb_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_steel_b { //long steel flatbed cargo type b
    loaded:  [spriteset_x_null, spriteset_w_l_c_steel_b_1, spriteset_w_l_c_steel_b_2, spriteset_w_l_c_steel_b_3];
    loading: [spriteset_x_null, spriteset_w_l_c_steel_b_1, spriteset_w_l_c_steel_b_2, spriteset_w_l_c_steel_b_3];
}

// transformers / electrical machines
spriteset(spriteset_w_s_c_tfmra_1, "gfx/W/w_s_c_tfmra_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_o_tfmr_a { //short transformer open cargo type a green
    loaded:  [spriteset_x_null, spriteset_w_s_c_tfmra_1];
    loading: [spriteset_x_null, spriteset_w_s_c_tfmra_1];
}

spriteset(spriteset_w_s_c_tfmra_2, "gfx/W/w_s_c_tfmra_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_tfmra_4, "gfx/W/w_s_c_tfmra_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_tfmr_a { //short transformer flatbed cargo type a green
    loaded:  [spriteset_x_null, spriteset_w_s_c_tfmra_2, spriteset_w_s_c_tfmra_4];
    loading: [spriteset_x_null, spriteset_w_s_c_tfmra_2, spriteset_w_s_c_tfmra_4];
}

spriteset(spriteset_w_s_c_tfmra_3, "gfx/W/w_s_c_tfmra_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_tfmr_b { //short transformer flatbed cargo type b green
    loaded:  [spriteset_x_null, spriteset_w_s_c_tfmra_3, spriteset_w_s_c_tfmra_4];
    loading: [spriteset_x_null, spriteset_w_s_c_tfmra_3, spriteset_w_s_c_tfmra_4];
}

spriteset(spriteset_w_s_c_tfmrb_1, "gfx/W/w_s_c_tfmrb_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_o_tfmr_b { //short transformer open cargo type b grey
    loaded:  [spriteset_x_null, spriteset_w_s_c_tfmrb_1];
    loading: [spriteset_x_null, spriteset_w_s_c_tfmrb_1];
}

spriteset(spriteset_w_s_c_tfmrb_2, "gfx/W/w_s_c_tfmrb_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_tfmrb_4, "gfx/W/w_s_c_tfmrb_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_tfmr_c { //short transformer flatbed cargo type c grey
    loaded:  [spriteset_x_null, spriteset_w_s_c_tfmrb_2, spriteset_w_s_c_tfmrb_4];
    loading: [spriteset_x_null, spriteset_w_s_c_tfmrb_2, spriteset_w_s_c_tfmrb_4];
}

spriteset(spriteset_w_s_c_tfmrb_3, "gfx/W/w_s_c_tfmrb_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_c_tfmr_d { //short transformer flatbed cargo type d grey
    loaded:  [spriteset_x_null, spriteset_w_s_c_tfmrb_3, spriteset_w_s_c_tfmrb_4];
    loading: [spriteset_x_null, spriteset_w_s_c_tfmrb_3, spriteset_w_s_c_tfmrb_4];
}

spriteset(spriteset_w_m_c_tfmr_1, "gfx/W/w_m_c_tfmr_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_tfmr_2, "gfx/W/w_m_c_tfmr_02.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_tfmr_a { //medium transformer flatbed cargo type a green
    loaded:  [spriteset_x_null, spriteset_w_m_c_tfmr_1, spriteset_w_m_c_tfmr_2];
    loading: [spriteset_x_null, spriteset_w_m_c_tfmr_1, spriteset_w_m_c_tfmr_2];
}

spriteset(spriteset_w_m_c_tfmr_3, "gfx/W/w_m_c_tfmr_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_tfmr_4, "gfx/W/w_m_c_tfmr_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_tfmr_b { //medium transformer flatbed cargo type b grey
    loaded:  [spriteset_x_null, spriteset_w_m_c_tfmr_3, spriteset_w_m_c_tfmr_4];
    loading: [spriteset_x_null, spriteset_w_m_c_tfmr_3, spriteset_w_m_c_tfmr_4];
}

spriteset(spriteset_w_l_c_tfmr_a_1, "gfx/W/w_l_c_tfmra_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_tfmr_a_2, "gfx/W/w_l_c_tfmra_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_tfmr_a_3, "gfx/W/w_l_c_tfmra_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_tfmr_a { //long transformers flatbed cargo green
    loaded:  [spriteset_x_null, spriteset_w_l_c_tfmr_a_1, spriteset_w_l_c_tfmr_a_2, spriteset_w_l_c_tfmr_a_3];
    loading: [spriteset_x_null, spriteset_w_l_c_tfmr_a_1, spriteset_w_l_c_tfmr_a_2, spriteset_w_l_c_tfmr_a_3];
}

spriteset(spriteset_w_l_c_tfmr_b_1, "gfx/W/w_l_c_tfmrb_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_tfmr_b_2, "gfx/W/w_l_c_tfmrb_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_tfmr_b_3, "gfx/W/w_l_c_tfmrb_03.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_c_tfmr_b { //long transformers flatbed cargo grey
    loaded:  [spriteset_x_null, spriteset_w_l_c_tfmr_b_1, spriteset_w_l_c_tfmr_b_2, spriteset_w_l_c_tfmr_b_3];
    loading: [spriteset_x_null, spriteset_w_l_c_tfmr_b_1, spriteset_w_l_c_tfmr_b_2, spriteset_w_l_c_tfmr_b_3];
}


// vehicles

spriteset(spriteset_w_s_c_vehs_a1, "gfx/W/w_s_c_vehs_a1.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_vehs_b1, "gfx/W/w_s_c_vehs_b1.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_vehs_c1, "gfx/W/w_s_c_vehs_c1.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_vehs_a { //short vehicles flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_s_c_vehs_a1];
    loading: [spriteset_x_null, spriteset_w_s_c_vehs_a1];
}

spritegroup spritegroup_w_s_c_vehs_b { //short vehicles flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_s_c_vehs_b1];
    loading: [spriteset_x_null, spriteset_w_s_c_vehs_b1];
}

spritegroup spritegroup_w_s_c_vehs_c { //short vehicles flatbed cargo type c 
    loaded:  [spriteset_x_null, spriteset_w_s_c_vehs_c1];
    loading: [spriteset_x_null, spriteset_w_s_c_vehs_c1];
}

spriteset(spriteset_w_m_c_vehs_a1, "gfx/W/w_m_c_vehs_a1.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_a2, "gfx/W/w_m_c_vehs_a2.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_b2, "gfx/W/w_m_c_vehs_b2.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_c2, "gfx/W/w_m_c_vehs_c2.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_d1, "gfx/W/w_m_c_vehs_d1.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_d2, "gfx/W/w_m_c_vehs_d2.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_e2, "gfx/W/w_m_c_vehs_e2.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_f2, "gfx/W/w_m_c_vehs_f2.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_g1, "gfx/W/w_m_c_vehs_g1.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_g2, "gfx/W/w_m_c_vehs_g2.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_h2, "gfx/W/w_m_c_vehs_h2.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vehs_i2, "gfx/W/w_m_c_vehs_i2.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_vehs_a { //medium vehicles flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vehs_a1, spriteset_w_m_c_vehs_a2];
    loading: [spriteset_x_null, spriteset_w_m_c_vehs_a1, spriteset_w_m_c_vehs_a2];
}

spritegroup spritegroup_w_m_c_vehs_b { //medium vehicles flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vehs_a1, spriteset_w_m_c_vehs_b2];
    loading: [spriteset_x_null, spriteset_w_m_c_vehs_a1, spriteset_w_m_c_vehs_b2];
}

spritegroup spritegroup_w_m_c_vehs_c { //medium vehicles flatbed cargo type c 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vehs_a1, spriteset_w_m_c_vehs_c2];
    loading: [spriteset_x_null, spriteset_w_m_c_vehs_a1, spriteset_w_m_c_vehs_c2];
}

spritegroup spritegroup_w_m_c_vehs_d { //medium vehicles flatbed cargo type d 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vehs_d1, spriteset_w_m_c_vehs_d2];
    loading: [spriteset_x_null, spriteset_w_m_c_vehs_d1, spriteset_w_m_c_vehs_d2];
}

spritegroup spritegroup_w_m_c_vehs_e { //medium vehicles flatbed cargo type e 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vehs_d1, spriteset_w_m_c_vehs_e2];
    loading: [spriteset_x_null, spriteset_w_m_c_vehs_d1, spriteset_w_m_c_vehs_e2];
}

spritegroup spritegroup_w_m_c_vehs_f { //medium vehicles flatbed cargo type f 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vehs_d1, spriteset_w_m_c_vehs_f2];
    loading: [spriteset_x_null, spriteset_w_m_c_vehs_d1, spriteset_w_m_c_vehs_f2];
}
spritegroup spritegroup_w_m_c_vehs_g { //medium vehicles flatbed cargo type g 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vehs_g1, spriteset_w_m_c_vehs_g2];
    loading: [spriteset_x_null, spriteset_w_m_c_vehs_g1, spriteset_w_m_c_vehs_g2];
}

spritegroup spritegroup_w_m_c_vehs_h { //medium vehicles flatbed cargo type h 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vehs_g1, spriteset_w_m_c_vehs_h2];
    loading: [spriteset_x_null, spriteset_w_m_c_vehs_g1, spriteset_w_m_c_vehs_h2];
}

spritegroup spritegroup_w_m_c_vehs_i { //medium vehicles flatbed cargo type i 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vehs_g1, spriteset_w_m_c_vehs_i2];
    loading: [spriteset_x_null, spriteset_w_m_c_vehs_g1, spriteset_w_m_c_vehs_i2];
}

spriteset(spriteset_w_l_c_vehs_a1, "gfx/W/w_l_c_vehs_a1.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_a2, "gfx/W/w_l_c_vehs_a2.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_b2, "gfx/W/w_l_c_vehs_b2.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_c2, "gfx/W/w_l_c_vehs_c2.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_d1, "gfx/W/w_l_c_vehs_d1.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_d2, "gfx/W/w_l_c_vehs_d2.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_e2, "gfx/W/w_l_c_vehs_e2.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_f2, "gfx/W/w_l_c_vehs_f2.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_g1, "gfx/W/w_l_c_vehs_g1.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_g2, "gfx/W/w_l_c_vehs_g2.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_h2, "gfx/W/w_l_c_vehs_h2.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vehs_i2, "gfx/W/w_l_c_vehs_i2.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_c_vehs_a { //medium vehicles flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vehs_a1, spriteset_w_l_c_vehs_a2];
    loading: [spriteset_x_null, spriteset_w_l_c_vehs_a1, spriteset_w_l_c_vehs_a2];
}

spritegroup spritegroup_w_l_c_vehs_b { //medium vehicles flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vehs_a1, spriteset_w_l_c_vehs_b2];
    loading: [spriteset_x_null, spriteset_w_l_c_vehs_a1, spriteset_w_l_c_vehs_b2];
}

spritegroup spritegroup_w_l_c_vehs_c { //medium vehicles flatbed cargo type c 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vehs_a1, spriteset_w_l_c_vehs_c2];
    loading: [spriteset_x_null, spriteset_w_l_c_vehs_a1, spriteset_w_l_c_vehs_c2];
}

spritegroup spritegroup_w_l_c_vehs_d { //medium vehicles flatbed cargo type d 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vehs_d1, spriteset_w_l_c_vehs_d2];
    loading: [spriteset_x_null, spriteset_w_l_c_vehs_d1, spriteset_w_l_c_vehs_d2];
}

spritegroup spritegroup_w_l_c_vehs_e { //medium vehicles flatbed cargo type e 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vehs_d1, spriteset_w_l_c_vehs_e2];
    loading: [spriteset_x_null, spriteset_w_l_c_vehs_d1, spriteset_w_l_c_vehs_e2];
}

spritegroup spritegroup_w_l_c_vehs_f { //medium vehicles flatbed cargo type f 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vehs_d1, spriteset_w_l_c_vehs_f2];
    loading: [spriteset_x_null, spriteset_w_l_c_vehs_d1, spriteset_w_l_c_vehs_f2];
}
spritegroup spritegroup_w_l_c_vehs_g { //medium vehicles flatbed cargo type g 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vehs_g1, spriteset_w_l_c_vehs_g2];
    loading: [spriteset_x_null, spriteset_w_l_c_vehs_g1, spriteset_w_l_c_vehs_g2];
}

spritegroup spritegroup_w_l_c_vehs_h { //medium vehicles flatbed cargo type h 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vehs_g1, spriteset_w_l_c_vehs_h2];
    loading: [spriteset_x_null, spriteset_w_l_c_vehs_g1, spriteset_w_l_c_vehs_h2];
}

spritegroup spritegroup_w_l_c_vehs_i { //medium vehicles flatbed cargo type i 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vehs_g1, spriteset_w_l_c_vehs_i2];
    loading: [spriteset_x_null, spriteset_w_l_c_vehs_g1, spriteset_w_l_c_vehs_i2];
}

// vehicles on flatbed
 random_switch (FEAT_ROADVEHS, SELF, switch_color_vehs_a, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize 2cc recoloring palette upon new load */
    4: palette_2cc(COLOUR_WHITE, COLOUR_WHITE);          
    3: palette_2cc(COLOUR_WHITE, COLOUR_DARK_BLUE);        
    3: palette_2cc(COLOUR_DARK_BLUE, COLOUR_WHITE); 
    3: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_BLUE);  
    3: palette_2cc(COLOUR_DARK_GREEN, COLOUR_WHITE); 
    3: palette_2cc(COLOUR_WHITE, COLOUR_DARK_GREEN);  
    3: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_GREEN); 
    3: palette_2cc(COLOUR_DARK_GREEN, COLOUR_DARK_BLUE);  
    3: palette_2cc(COLOUR_DARK_BLUE, COLOUR_DARK_GREEN);
    1: palette_2cc(COLOUR_RED, COLOUR_RED); 
    2: palette_2cc(COLOUR_RED, COLOUR_DARK_GREEN); 
    2: palette_2cc(COLOUR_DARK_GREEN, COLOUR_RED); 
    2: palette_2cc(COLOUR_DARK_BLUE, COLOUR_RED);
    2: palette_2cc(COLOUR_RED, COLOUR_DARK_BLUE);
    2: palette_2cc(COLOUR_RED, COLOUR_WHITE); 
    2: palette_2cc(COLOUR_WHITE, COLOUR_RED);           
 }

 random_switch (FEAT_ROADVEHS, SELF, switch_color_vehs_b, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize 1cc recoloring palette upon new load */
    4: palette_1cc(COLOUR_WHITE);          
    3: palette_1cc(COLOUR_DARK_BLUE);        
    3: palette_1cc(COLOUR_DARK_GREEN); 
    1: palette_1cc(COLOUR_RED); 
    3: palette_1cc(COLOUR_GREY);       
 }

 // short trailer

switch(FEAT_ROADVEHS, SELF, switch_w_s_c_vehs_a, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_b(), 0x100),
    ]) {
    default:  spritegroup_w_s_c_vehs_a;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_s_c_vehs_b, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_b(), 0x100),
    ]) {
    default:  spritegroup_w_s_c_vehs_b;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_s_c_vehs_ac, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_b(), 0x100),
    ]) {
    default:  spritegroup_w_s_c_vehs_c;
    } 
switch (FEAT_ROADVEHS, SELF, switch_w_s_c_vehs_c, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_s_c_vehs_a;                        // use truck sprite
        default:        switch_w_s_c_vehs_ac;                       // use truck / impreza sprite
}

 random_switch (FEAT_ROADVEHS, SELF, switch_w_s_c_vehs, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize vehicle cargo on new load */
    // independent: switch_color_vehs_b; // decision independent from color switch
    2: switch_w_s_c_vehs_a;          
    1: switch_w_s_c_vehs_b;        
    1: switch_w_s_c_vehs_c;
 }

 // medium trailer

switch(FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_a, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_m_c_vehs_a;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_b, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_m_c_vehs_b;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_d, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_m_c_vehs_d;
    }   
switch(FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_e, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_m_c_vehs_e;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_ac, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_m_c_vehs_c;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_af, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_m_c_vehs_f;
    }  
switch(FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_ag, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_m_c_vehs_g;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_ah, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_m_c_vehs_h;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_ai, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_m_c_vehs_i;
    }  

switch (FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_c, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_m_c_vehs_a;                        // use truck sprite
        default:        switch_w_m_c_vehs_ac;                       // use truck / impreza sprite
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_f, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_m_c_vehs_b;                        // use truck / hatch sprite
        default:        switch_w_m_c_vehs_af;                       // use hatch / impreza sprite
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_g, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_m_c_vehs_d;                        // use hatch / truck sprite
        default:        switch_w_m_c_vehs_ag;                       // use impreza / truck sprite
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_h, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_m_c_vehs_e;                        // use hatch sprite
        default:        switch_w_m_c_vehs_ah;                       // use impreza / hatch sprite
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_vehs_i, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_m_c_vehs_a;                        // use truck sprite
        default:        switch_w_m_c_vehs_ai;                       // use impreza / impreza sprite
}

 random_switch (FEAT_ROADVEHS, SELF, switch_w_m_c_vehs, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize vehicle cargo on new load */
    // independent: switch_color_vehs_a; // decision independent from color switch
    2: switch_w_m_c_vehs_a;          
    1: switch_w_m_c_vehs_b;        
    1: switch_w_m_c_vehs_c;
    1: switch_w_m_c_vehs_d; 
    1: switch_w_m_c_vehs_e; 
    1: switch_w_m_c_vehs_f; 
    1: switch_w_m_c_vehs_g;
    1: switch_w_m_c_vehs_h; 
    1: switch_w_m_c_vehs_i;        
 }

    // long trailer

 switch(FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_a, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_l_c_vehs_a;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_b, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_l_c_vehs_b;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_d, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_l_c_vehs_d;
    }   
switch(FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_e, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_l_c_vehs_e;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_ac, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_l_c_vehs_c;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_af, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_l_c_vehs_f;
    }  
switch(FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_ag, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_l_c_vehs_g;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_ah, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_l_c_vehs_h;
    }
switch(FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_ai, [  // recolor cargo based on value from random switch
    STORE_TEMP(switch_color_vehs_a(), 0x100),
    ]) {
    default:  spritegroup_w_l_c_vehs_i;
    }  

switch (FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_c, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_l_c_vehs_a;                        // use truck sprite
        default:        switch_w_l_c_vehs_ac;                       // use truck / impreza sprite
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_f, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_l_c_vehs_b;                        // use truck / hatch sprite
        default:        switch_w_l_c_vehs_af;                       // use hatch / impreza sprite
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_g, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_l_c_vehs_d;                        // use hatch / truck sprite
        default:        switch_w_l_c_vehs_ag;                       // use impreza / truck sprite
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_h, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_l_c_vehs_e;                        // use hatch sprite
        default:        switch_w_l_c_vehs_ah;                       // use impreza / hatch sprite
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_vehs_i, current_year ) {  // no impreza before 1992
        0..1991:        switch_w_l_c_vehs_a;                        // use truck sprite
        default:        switch_w_l_c_vehs_ai;                       // use impreza / impreza sprite
}

 random_switch (FEAT_ROADVEHS, SELF, switch_w_l_c_vehs, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize vehicle cargo on new load */
    // independent: switch_color_vehs_a; // decision independent from color switch
    2: switch_w_l_c_vehs_a;          
    1: switch_w_l_c_vehs_b;        
    1: switch_w_l_c_vehs_c;
    1: switch_w_l_c_vehs_d; 
    1: switch_w_l_c_vehs_e; 
    1: switch_w_l_c_vehs_f; 
    1: switch_w_l_c_vehs_g;
    1: switch_w_l_c_vehs_h; 
    1: switch_w_l_c_vehs_i;        
 }

 // vehicle bodies

spriteset(spriteset_w_s_c_vbod_a1, "gfx/W/w_s_c_vbod_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_vbod_b1, "gfx/W/w_s_c_vbod_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_vbod_c1, "gfx/W/w_s_c_vbod_03.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_vbod_a { //short vehicle bodies flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_s_c_vbod_a1];
    loading: [spriteset_x_null, spriteset_w_s_c_vbod_a1];
}

spritegroup spritegroup_w_s_c_vbod_b { //short vehicle bodies flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_s_c_vbod_b1];
    loading: [spriteset_x_null, spriteset_w_s_c_vbod_b1];
}

spritegroup spritegroup_w_s_c_vbod_c { //short vehicle bodies flatbed cargo type c 
    loaded:  [spriteset_x_null, spriteset_w_s_c_vbod_c1];
    loading: [spriteset_x_null, spriteset_w_s_c_vbod_c1];
}

spriteset(spriteset_w_m_c_vbod_a1, "gfx/W/w_m_c_vbod_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vbod_a2, "gfx/W/w_m_c_vbod_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vbod_b1, "gfx/W/w_m_c_vbod_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vbod_b2, "gfx/W/w_m_c_vbod_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vbod_c1, "gfx/W/w_m_c_vbod_05.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_vbod_c2, "gfx/W/w_m_c_vbod_06.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_vbod_a { //medium vehicle bodies flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vbod_a1, spriteset_w_m_c_vbod_a2];
    loading: [spriteset_x_null, spriteset_w_m_c_vbod_a1, spriteset_w_m_c_vbod_a2];
}

spritegroup spritegroup_w_m_c_vbod_b { //medium vehicle bodies flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vbod_a1, spriteset_w_m_c_vbod_b2];
    loading: [spriteset_x_null, spriteset_w_m_c_vbod_a1, spriteset_w_m_c_vbod_b2];
}

spritegroup spritegroup_w_m_c_vbod_c { //medium vehicle bodies flatbed cargo type c 
    loaded:  [spriteset_x_null, spriteset_w_m_c_vbod_a1, spriteset_w_m_c_vbod_c2];
    loading: [spriteset_x_null, spriteset_w_m_c_vbod_a1, spriteset_w_m_c_vbod_c2];
}

spriteset(spriteset_w_l_c_vbod_a1, "gfx/W/w_l_c_vbod_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vbod_a2, "gfx/W/w_l_c_vbod_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vbod_b1, "gfx/W/w_l_c_vbod_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vbod_b2, "gfx/W/w_l_c_vbod_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vbod_c1, "gfx/W/w_l_c_vbod_05.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_c_vbod_c2, "gfx/W/w_l_c_vbod_06.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_c_vbod_a { //medium vehicle bodies flatbed cargo type a 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vbod_a1, spriteset_w_l_c_vbod_a2];
    loading: [spriteset_x_null, spriteset_w_l_c_vbod_a1, spriteset_w_l_c_vbod_a2];
}

spritegroup spritegroup_w_l_c_vbod_b { //medium vehicle bodies flatbed cargo type b 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vbod_a1, spriteset_w_l_c_vbod_b2];
    loading: [spriteset_x_null, spriteset_w_l_c_vbod_a1, spriteset_w_l_c_vbod_b2];
}

spritegroup spritegroup_w_l_c_vbod_c { //medium vehicle bodies flatbed cargo type c 
    loaded:  [spriteset_x_null, spriteset_w_l_c_vbod_a1, spriteset_w_l_c_vbod_c2];
    loading: [spriteset_x_null, spriteset_w_l_c_vbod_a1, spriteset_w_l_c_vbod_c2];
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_c_vbod_c, current_year ) {  // no impreza before 1992
        0..1991:        spritegroup_w_s_c_vbod_c;                  // use truck sprite
        default:        spritegroup_w_s_c_vbod_a;                  // use truck / impreza sprite
}

 random_switch (FEAT_ROADVEHS, SELF, switch_w_s_c_vbod, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize vehicle cargo on new load */
    2: spritegroup_w_s_c_vbod_a;          
    1: spritegroup_w_s_c_vbod_b;        
    1: switch_w_s_c_vbod_c;
 }

 switch (FEAT_ROADVEHS, SELF, switch_w_m_c_vbod_c, current_year ) {  // no impreza before 1992
        0..1991:        spritegroup_w_m_c_vbod_c;                  // use truck sprite
        default:        spritegroup_w_m_c_vbod_a;                  // use truck / impreza sprite
}

 random_switch (FEAT_ROADVEHS, SELF, switch_w_m_c_vbod, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize vehicle cargo on new load */
    2: spritegroup_w_m_c_vbod_a;          
    1: spritegroup_w_m_c_vbod_b;        
    1: switch_w_m_c_vbod_c;
 }

 switch (FEAT_ROADVEHS, SELF, switch_w_l_c_vbod_c, current_year ) {  // no impreza before 1992
        0..1991:        spritegroup_w_l_c_vbod_c;                  // use truck sprite
        default:        spritegroup_w_l_c_vbod_a;                  // use truck / impreza sprite
}

 random_switch (FEAT_ROADVEHS, SELF, switch_w_l_c_vbod, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize vehicle cargo on new load */
    2: spritegroup_w_l_c_vbod_a;          
    1: spritegroup_w_l_c_vbod_b;        
    1: switch_w_l_c_vbod_c;
 }


//Box Cars

// Flatbeds



// Body switches

// Open trucks

//Box Cars

// vans

// Flatbeds

/* ======================================================== */
/* ===================== Semi Trucks ====================== */
/* ======================================================== */

/* Semi Switches */

//length

switch (FEAT_ROADVEHS, SELF, switch_length_w_trailer, position_in_consist) {
    0: return 4;
    return 4;
}

switch (FEAT_ROADVEHS, SELF, switch_length_o_trailer, position_in_consist) {
    0: return 4;
    return 6;
}

switch (FEAT_ROADVEHS, SELF, switch_length_s_trailer, position_in_consist) {
    0: return 2;
    return 6;
}

switch (FEAT_ROADVEHS, SELF, switch_length_m_trailer, position_in_consist) {
    0: return 2;
    return 8;
}

switch (FEAT_ROADVEHS, SELF, switch_length_l_trailer, position_in_consist) {
    0: return 3;
    1: return 3;
    return 3;
}


// open wagons

/*
spriteset(spriteset_w_open_cupr_0, "gfx/R/o_open_cupr_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_cupr_a, "gfx/R/o_open_cupr_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_cupr_b, "gfx/R/o_open_cupr_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_cupr_c, "gfx/R/o_open_cupr_04.png") {
    tmpl_wag()
}
spritegroup spritegroup_w_open_cupr_a {
    loaded:  [spriteset_w_open_cupr_0, spriteset_w_open_cupr_a];
    loading: [spriteset_w_open_cupr_0, spriteset_w_open_cupr_a];
}
spritegroup spritegroup_w_open_cupr_b {
    loaded:  [spriteset_w_open_cupr_0, spriteset_w_open_cupr_b, spriteset_w_open_cupr_c];
    loading: [spriteset_w_open_cupr_0, spriteset_w_open_cupr_b, spriteset_w_open_cupr_c];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_w_open_cupr, random_bits ) {
        0..127: spritegroup_w_open_cupr_a;
        128..255: spritegroup_w_open_cupr_b;

        default: spritegroup_w_open_cupr_a;
}

spriteset(spriteset_w_open_steel_0, "gfx/R/o_open_steel_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_steel_a, "gfx/R/o_open_steel_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_steel_b, "gfx/R/o_open_steel_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_steel_c, "gfx/R/o_open_steel_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_steel_a {
    loaded:  [spriteset_w_open_steel_0, spriteset_w_open_steel_a];
    loading: [spriteset_w_open_steel_0, spriteset_w_open_steel_a];
}
spritegroup spritegroup_w_open_steel_b {
    loaded:  [spriteset_w_open_steel_0, spriteset_w_open_steel_b, spriteset_w_open_steel_c];
    loading: [spriteset_w_open_steel_0, spriteset_w_open_steel_b, spriteset_w_open_steel_c];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_w_open_steel, random_bits ) {
        0..127: spritegroup_w_open_steel_a;
        128..255: spritegroup_w_open_steel_b;

        default: spritegroup_w_open_steel_a;          
}

spriteset(spriteset_w_open_crate_0, "gfx/R/o_open_crate_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_crate_a, "gfx/R/o_open_crate_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_crate_b, "gfx/R/o_open_crate_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_crate_c, "gfx/R/o_open_crate_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_crate_a {
    loaded:  [spriteset_w_open_crate_0, spriteset_w_open_crate_a];
    loading: [spriteset_w_open_crate_0, spriteset_w_open_crate_a];
}
spritegroup spritegroup_w_open_crate_b {
    loaded:  [spriteset_w_open_crate_0, spriteset_w_open_crate_b];
    loading: [spriteset_w_open_crate_0, spriteset_w_open_crate_b];
}
spritegroup spritegroup_w_open_crate_c {
    loaded:  [spriteset_w_open_crate_0, spriteset_w_open_crate_c];
    loading: [spriteset_w_open_crate_0, spriteset_w_open_crate_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_w_open_crate, random_bits ) {
        0..85: spritegroup_w_open_crate_a;
        86..171: spritegroup_w_open_crate_b;
        172..255:spritegroup_w_open_crate_c;
        default: spritegroup_w_open_crate_a;          
}

spriteset(spriteset_w_open_food_0, "gfx/R/o_open_food_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_food_a, "gfx/R/o_open_food_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_food_b, "gfx/R/o_open_food_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_food_c, "gfx/R/o_open_food_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_food_a {
    loaded:  [spriteset_w_open_food_0, spriteset_w_open_food_a];
    loading: [spriteset_w_open_food_0, spriteset_w_open_food_a];
}
spritegroup spritegroup_w_open_food_b {
    loaded:  [spriteset_w_open_food_0, spriteset_w_open_food_b];
    loading: [spriteset_w_open_food_0, spriteset_w_open_food_b];
}
spritegroup spritegroup_w_open_food_c {
    loaded:  [spriteset_w_open_food_0, spriteset_w_open_food_c];
    loading: [spriteset_w_open_food_0, spriteset_w_open_food_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_w_open_food, random_bits ) {
        0..85: spritegroup_w_open_food_a;
        86..171: spritegroup_w_open_food_b;
        172..255:spritegroup_w_open_food_c;
        default: spritegroup_w_open_food_a;          
}

spriteset(spriteset_w_open_paper_0, "gfx/R/o_open_paper_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_paper_a, "gfx/R/o_open_paper_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_paper_b, "gfx/R/o_open_paper_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_paper_c, "gfx/R/o_open_paper_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_paper_a {
    loaded:  [spriteset_w_open_paper_0, spriteset_w_open_paper_a];
    loading: [spriteset_w_open_paper_0, spriteset_w_open_paper_a];
}
spritegroup spritegroup_w_open_paper_b {
    loaded:  [spriteset_w_open_paper_0, spriteset_w_open_paper_b];
    loading: [spriteset_w_open_paper_0, spriteset_w_open_paper_b];
}
spritegroup spritegroup_w_open_paper_c {
    loaded:  [spriteset_w_open_paper_0, spriteset_w_open_paper_c];
    loading: [spriteset_w_open_paper_0, spriteset_w_open_paper_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_w_open_paper, random_bits ) {
        0..85: spritegroup_w_open_paper_a;
        86..171: spritegroup_w_open_paper_b;
        172..255:spritegroup_w_open_paper_c;
        default: spritegroup_w_open_paper_a;          
}

spriteset(spriteset_w_open_iron_0, "gfx/R/o_open_iron_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_iron_a, "gfx/R/o_open_iron_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_iron_b, "gfx/R/o_open_iron_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_iron_c, "gfx/R/o_open_iron_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_iron_a {
    loaded:  [spriteset_w_open_iron_0, spriteset_w_open_iron_a];
    loading: [spriteset_w_open_iron_0, spriteset_w_open_iron_a];
}
spritegroup spritegroup_w_open_iron_b {
    loaded:  [spriteset_w_open_iron_0, spriteset_w_open_iron_b];
    loading: [spriteset_w_open_iron_0, spriteset_w_open_iron_b];
}
spritegroup spritegroup_w_open_iron_c {
    loaded:  [spriteset_w_open_iron_0, spriteset_w_open_iron_c];
    loading: [spriteset_w_open_iron_0, spriteset_w_open_iron_c];
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_w_open_iron, random_bits ) {
        0..85: spritegroup_w_open_iron_a;
        86..171: spritegroup_w_open_iron_b;
        172..255:spritegroup_w_open_iron_c;
        default: spritegroup_w_open_iron_a;          
}

spriteset(spriteset_w_open_grey_1, "gfx/R/o_open_grey_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_grey_2, "gfx/R/o_open_grey_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_grey_3, "gfx/R/o_open_grey_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_grey_4, "gfx/R/o_open_grey_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_grey {
    loaded:  [spriteset_w_open_grey_1, spriteset_w_open_grey_2, spriteset_w_open_grey_3, spriteset_w_open_grey_4];
    loading: [spriteset_w_open_grey_1, spriteset_w_open_grey_2, spriteset_w_open_grey_3, spriteset_w_open_grey_4];
}

spriteset(spriteset_w_open_coal_1, "gfx/R/o_open_coal_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_coal_2, "gfx/R/o_open_coal_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_coal_3, "gfx/R/o_open_coal_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_coal_4, "gfx/R/o_open_coal_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_coal {
    loaded:  [spriteset_w_open_coal_1, spriteset_w_open_coal_2, spriteset_w_open_coal_3, spriteset_w_open_coal_4];
    loading: [spriteset_w_open_coal_1, spriteset_w_open_coal_2, spriteset_w_open_coal_3, spriteset_w_open_coal_4];
}

spriteset(spriteset_w_open_ore_1, "gfx/R/o_open_ore_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_ore_2, "gfx/R/o_open_ore_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_ore_3, "gfx/R/o_open_ore_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_ore_4, "gfx/R/o_open_ore_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_ore {
    loaded:  [spriteset_w_open_ore_1, spriteset_w_open_ore_2, spriteset_w_open_ore_3, spriteset_w_open_ore_4];
    loading: [spriteset_w_open_ore_1, spriteset_w_open_ore_2, spriteset_w_open_ore_3, spriteset_w_open_ore_4];
}

spriteset(spriteset_w_open_scrap_1, "gfx/R/o_open_scrap_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_scrap_2, "gfx/R/o_open_scrap_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_scrap_3, "gfx/R/o_open_scrap_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_scrap_4, "gfx/R/o_open_scrap_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_scrap {
    loaded:  [spriteset_w_open_scrap_1, spriteset_w_open_scrap_2, spriteset_w_open_scrap_3, spriteset_w_open_scrap_4];
    loading: [spriteset_w_open_scrap_1, spriteset_w_open_scrap_2, spriteset_w_open_scrap_3, spriteset_w_open_scrap_4];
}

spriteset(spriteset_w_open_sand_1, "gfx/R/o_open_sand_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_sand_2, "gfx/R/o_open_sand_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_sand_3, "gfx/R/o_open_sand_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_sand_4, "gfx/R/o_open_sand_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_sand {
    loaded:  [spriteset_w_open_sand_1, spriteset_w_open_sand_2, spriteset_w_open_sand_3, spriteset_w_open_sand_4];
    loading: [spriteset_w_open_sand_1, spriteset_w_open_sand_2, spriteset_w_open_sand_3, spriteset_w_open_sand_4];
}

spriteset(spriteset_w_open_brown_1, "gfx/R/o_open_brown_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_brown_2, "gfx/R/o_open_brown_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_brown_3, "gfx/R/o_open_brown_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_brown_4, "gfx/R/o_open_brown_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_brown {
    loaded:  [spriteset_w_open_brown_1, spriteset_w_open_brown_2, spriteset_w_open_brown_3, spriteset_w_open_brown_4];
    loading: [spriteset_w_open_brown_1, spriteset_w_open_brown_2, spriteset_w_open_brown_3, spriteset_w_open_brown_4];
}

spriteset(spriteset_w_open_fruit_1, "gfx/R/o_open_fruit_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_fruit_2, "gfx/R/o_open_fruit_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_fruit_3, "gfx/R/o_open_fruit_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_fruit_4, "gfx/R/o_open_fruit_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_fruit {
    loaded:  [spriteset_w_open_fruit_1, spriteset_w_open_fruit_2, spriteset_w_open_fruit_3, spriteset_w_open_fruit_4];
    loading: [spriteset_w_open_fruit_1, spriteset_w_open_fruit_2, spriteset_w_open_fruit_3, spriteset_w_open_fruit_4];
}

spriteset(spriteset_w_open_sheep_1, "gfx/R/o_open_sheep_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_sheep_2, "gfx/R/o_open_sheep_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_sheep_3, "gfx/R/o_open_sheep_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_sheep_4, "gfx/R/o_open_sheep_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_sheep {
    loaded:  [spriteset_w_open_sheep_1, spriteset_w_open_sheep_2, spriteset_w_open_sheep_3, spriteset_w_open_sheep_4];
    loading: [spriteset_w_open_sheep_1, spriteset_w_open_sheep_2, spriteset_w_open_sheep_3, spriteset_w_open_sheep_4];
}

spriteset(spriteset_w_open_drum_1, "gfx/R/o_open_drum_01.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_drum_2, "gfx/R/o_open_drum_02.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_drum_3, "gfx/R/o_open_drum_03.png") {
    tmpl_wag()
}
spriteset(spriteset_w_open_drum_4, "gfx/R/o_open_drum_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_open_drum {
    loaded:  [spriteset_w_open_drum_1, spriteset_w_open_drum_2, spriteset_w_open_drum_3, spriteset_w_open_drum_4];
    loading: [spriteset_w_open_drum_1, spriteset_w_open_drum_2, spriteset_w_open_drum_3, spriteset_w_open_drum_4];
}

    switch (FEAT_ROADVEHS, SELF, switch_w_open_drum_bulk, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for changing default cargo sprite by class
        bitmask(CC_LIQUID): spritegroup_w_open_drum;
        bitmask(CC_BULK): spritegroup_w_open_brown;
        default: switch_spritegroup_w_open_crate;
    }

switch (FEAT_ROADVEHS, SELF, switch_w_open, cargo_type_in_veh ) {
        PAPR:       switch_spritegroup_w_open_paper;
        STEL:       switch_spritegroup_w_open_steel;
        METL:       switch_spritegroup_w_open_steel;
        SCMT:       spritegroup_w_open_scrap;
        RCYC:       spritegroup_w_open_scrap;
        COPR:       switch_spritegroup_w_open_cupr;
        FOOD:       switch_spritegroup_w_open_food;
        FISH:       switch_spritegroup_w_open_food;
        FRUT:       spritegroup_w_open_fruit;
        IORE:       spritegroup_w_open_ore;
        AORE:       spritegroup_w_open_ore;
        COAL:       spritegroup_w_open_coal;
        COKE:       spritegroup_w_open_coal;
        CORE:       spritegroup_w_open_ore;
        LVST:       spritegroup_w_open_sheep;
        PETR:       spritegroup_w_open_drum;
        OIL_:       spritegroup_w_open_drum;
        GRVL:       spritegroup_w_open_grey;
        SASH:       spritegroup_w_open_grey;
        LIME:       spritegroup_w_open_grey;
        PEAT:       spritegroup_w_open_brown;
        SAND:       spritegroup_w_open_sand;
        PHOS:       spritegroup_w_open_grey;
        IRON:       switch_spritegroup_w_open_iron;
        default:    switch_w_open_drum_bulk;
        
}

spriteset(spriteset_s_open_cupr_1, "gfx/R/r_open_cupr_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_cupr_2, "gfx/R/r_open_cupr_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_cupr_3, "gfx/R/r_open_cupr_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_cupr_4, "gfx/R/r_open_cupr_04.png") {
    tmpl_wag()
}
spritegroup spritegroup_s_open_cupr {
    loaded:  [spriteset_s_open_cupr_1, spriteset_s_open_cupr_2, spriteset_s_open_cupr_3, spriteset_s_open_cupr_4];
    loading: [spriteset_s_open_cupr_1, spriteset_s_open_cupr_2, spriteset_s_open_cupr_3, spriteset_s_open_cupr_4];
}

spriteset(spriteset_s_open_steel_1, "gfx/R/r_open_steel_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_steel_2, "gfx/R/r_open_steel_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_steel_3, "gfx/R/r_open_steel_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_steel_4, "gfx/R/r_open_steel_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_steel {
    loaded:  [spriteset_s_open_steel_1, spriteset_s_open_steel_2, spriteset_s_open_steel_3, spriteset_s_open_steel_4];
    loading: [spriteset_s_open_steel_1, spriteset_s_open_steel_2, spriteset_s_open_steel_3, spriteset_s_open_steel_4];
}

spriteset(spriteset_s_open_crate_1, "gfx/R/r_open_crate_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_crate_2, "gfx/R/r_open_crate_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_crate_3, "gfx/R/r_open_crate_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_crate_4, "gfx/R/r_open_crate_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_crate {
    loaded:  [spriteset_s_open_crate_1, spriteset_s_open_crate_2, spriteset_s_open_crate_3, spriteset_s_open_crate_4];
    loading: [spriteset_s_open_crate_1, spriteset_s_open_crate_2, spriteset_s_open_crate_3, spriteset_s_open_crate_4];
}

spriteset(spriteset_s_open_board_1, "gfx/R/r_open_board_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_board_2, "gfx/R/r_open_board_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_board_3, "gfx/R/r_open_board_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_board_4, "gfx/R/r_open_board_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_board {
    loaded:  [spriteset_s_open_board_1, spriteset_s_open_board_2, spriteset_s_open_board_3, spriteset_s_open_board_4];
    loading: [spriteset_s_open_board_1, spriteset_s_open_board_2, spriteset_s_open_board_3, spriteset_s_open_board_4];
}

spriteset(spriteset_s_open_log_1, "gfx/R/r_open_log_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_log_2, "gfx/R/r_open_log_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_log_3, "gfx/R/r_open_log_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_log_4, "gfx/R/r_open_log_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_log {
    loaded:  [spriteset_s_open_log_1, spriteset_s_open_log_2, spriteset_s_open_log_3, spriteset_s_open_log_4];
    loading: [spriteset_s_open_log_1, spriteset_s_open_log_2, spriteset_s_open_log_3, spriteset_s_open_log_4];
}

spriteset(spriteset_s_open_food_1, "gfx/R/r_open_food_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_food_2, "gfx/R/r_open_food_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_food_3, "gfx/R/r_open_food_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_food_4, "gfx/R/r_open_food_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_food {
    loaded:  [spriteset_s_open_food_1, spriteset_s_open_food_2, spriteset_s_open_food_3, spriteset_s_open_food_4];
    loading: [spriteset_s_open_food_1, spriteset_s_open_food_2, spriteset_s_open_food_3, spriteset_s_open_food_4];
}

spriteset(spriteset_s_open_paper_1, "gfx/R/r_open_paper_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_paper_2, "gfx/R/r_open_paper_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_paper_3, "gfx/R/r_open_paper_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_paper_4, "gfx/R/r_open_paper_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_paper {
    loaded:  [spriteset_s_open_paper_1, spriteset_s_open_paper_2, spriteset_s_open_paper_3, spriteset_s_open_paper_4];
    loading: [spriteset_s_open_paper_1, spriteset_s_open_paper_2, spriteset_s_open_paper_3, spriteset_s_open_paper_4];
}

spriteset(spriteset_s_open_grey_1, "gfx/R/r_open_grey_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_grey_2, "gfx/R/r_open_grey_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_grey_3, "gfx/R/r_open_grey_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_grey_4, "gfx/R/r_open_grey_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_grey {
    loaded:  [spriteset_s_open_grey_1, spriteset_s_open_grey_2, spriteset_s_open_grey_3, spriteset_s_open_grey_4];
    loading: [spriteset_s_open_grey_1, spriteset_s_open_grey_2, spriteset_s_open_grey_3, spriteset_s_open_grey_4];
}

spriteset(spriteset_s_open_coal_1, "gfx/R/r_open_coal_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_coal_2, "gfx/R/r_open_coal_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_coal_3, "gfx/R/r_open_coal_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_coal_4, "gfx/R/r_open_coal_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_coal {
    loaded:  [spriteset_s_open_coal_1, spriteset_s_open_coal_2, spriteset_s_open_coal_3, spriteset_s_open_coal_4];
    loading: [spriteset_s_open_coal_1, spriteset_s_open_coal_2, spriteset_s_open_coal_3, spriteset_s_open_coal_4];
}

spriteset(spriteset_s_open_ore_1, "gfx/R/r_open_ore_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_ore_2, "gfx/R/r_open_ore_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_ore_3, "gfx/R/r_open_ore_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_ore_4, "gfx/R/r_open_ore_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_ore {
    loaded:  [spriteset_s_open_ore_1, spriteset_s_open_ore_2, spriteset_s_open_ore_3, spriteset_s_open_ore_4];
    loading: [spriteset_s_open_ore_1, spriteset_s_open_ore_2, spriteset_s_open_ore_3, spriteset_s_open_ore_4];
}

spriteset(spriteset_s_open_scrap_1, "gfx/R/r_open_scrap_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_scrap_2, "gfx/R/r_open_scrap_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_scrap_3, "gfx/R/r_open_scrap_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_scrap_4, "gfx/R/r_open_scrap_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_scrap {
    loaded:  [spriteset_s_open_scrap_1, spriteset_s_open_scrap_2, spriteset_s_open_scrap_3, spriteset_s_open_scrap_4];
    loading: [spriteset_s_open_scrap_1, spriteset_s_open_scrap_2, spriteset_s_open_scrap_3, spriteset_s_open_scrap_4];
}

spriteset(spriteset_s_open_sand_1, "gfx/R/r_open_sand_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_sand_2, "gfx/R/r_open_sand_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_sand_3, "gfx/R/r_open_sand_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_sand_4, "gfx/R/r_open_sand_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_sand {
    loaded:  [spriteset_s_open_sand_1, spriteset_s_open_sand_2, spriteset_s_open_sand_3, spriteset_s_open_sand_4];
    loading: [spriteset_s_open_sand_1, spriteset_s_open_sand_2, spriteset_s_open_sand_3, spriteset_s_open_sand_4];
}

spriteset(spriteset_s_open_brown_1, "gfx/R/r_open_brown_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_brown_2, "gfx/R/r_open_brown_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_brown_3, "gfx/R/r_open_brown_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_brown_4, "gfx/R/r_open_brown_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_brown {
    loaded:  [spriteset_s_open_brown_1, spriteset_s_open_brown_2, spriteset_s_open_brown_3, spriteset_s_open_brown_4];
    loading: [spriteset_s_open_brown_1, spriteset_s_open_brown_2, spriteset_s_open_brown_3, spriteset_s_open_brown_4];
}

spriteset(spriteset_s_open_fruit_1, "gfx/R/r_open_fruit_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_fruit_2, "gfx/R/r_open_fruit_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_fruit_3, "gfx/R/r_open_fruit_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_fruit_4, "gfx/R/r_open_fruit_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_fruit {
    loaded:  [spriteset_s_open_fruit_1, spriteset_s_open_fruit_2, spriteset_s_open_fruit_3, spriteset_s_open_fruit_4];
    loading: [spriteset_s_open_fruit_1, spriteset_s_open_fruit_2, spriteset_s_open_fruit_3, spriteset_s_open_fruit_4];
}

spriteset(spriteset_s_open_sheep_1, "gfx/R/r_open_sheep_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_sheep_2, "gfx/R/r_open_sheep_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_sheep_3, "gfx/R/r_open_sheep_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_sheep_4, "gfx/R/r_open_sheep_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_sheep {
    loaded:  [spriteset_s_open_sheep_1, spriteset_s_open_sheep_2, spriteset_s_open_sheep_3, spriteset_s_open_sheep_4];
    loading: [spriteset_s_open_sheep_1, spriteset_s_open_sheep_2, spriteset_s_open_sheep_3, spriteset_s_open_sheep_4];
}

spriteset(spriteset_s_open_drum_1, "gfx/R/r_open_drum_01.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_drum_2, "gfx/R/r_open_drum_02.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_drum_3, "gfx/R/r_open_drum_03.png") {
    tmpl_wag()
}
spriteset(spriteset_s_open_drum_4, "gfx/R/r_open_drum_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_s_open_drum {
    loaded:  [spriteset_s_open_drum_1, spriteset_s_open_drum_2, spriteset_s_open_drum_3, spriteset_s_open_drum_4];
    loading: [spriteset_s_open_drum_1, spriteset_s_open_drum_2, spriteset_s_open_drum_3, spriteset_s_open_drum_4];
}

    switch (FEAT_ROADVEHS, SELF, switch_s_open_drum_bulk, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for changing default cargo sprite by class
        bitmask(CC_LIQUID): spritegroup_s_open_drum;
        bitmask(CC_BULK): spritegroup_s_open_brown;
        default: spritegroup_s_open_crate;
    }

switch (FEAT_ROADVEHS, SELF, switch_s_open, cargo_type_in_veh ) {
        PAPR:       spritegroup_s_open_paper;
        STEL:       spritegroup_s_open_steel;
        METL:       spritegroup_s_open_steel;
        SCMT:       spritegroup_s_open_scrap;
        RCYC:       spritegroup_s_open_scrap;
        COPR:       spritegroup_s_open_cupr;
        FOOD:       spritegroup_s_open_food;
        FISH:       spritegroup_s_open_food;
        FRUT:       spritegroup_s_open_fruit;
        IORE:       spritegroup_s_open_ore;
        AORE:       spritegroup_s_open_ore;
        COAL:       spritegroup_s_open_coal;
        COKE:       spritegroup_s_open_coal;
        CORE:       spritegroup_s_open_ore;
        LVST:       spritegroup_s_open_sheep;
        PETR:       spritegroup_s_open_drum;
        OIL_:       spritegroup_s_open_drum;
        GRVL:       spritegroup_s_open_grey;
        SASH:       spritegroup_s_open_grey;
        LIME:       spritegroup_s_open_grey;
        PEAT:       spritegroup_s_open_brown;
        SAND:       spritegroup_s_open_sand;
        PHOS:       spritegroup_s_open_grey;
        default:    switch_s_open_drum_bulk;
        
}

*/

/* Cabs for Semi Trucks */

//Cab sprites

spriteset(spriteset_hitch_01, "gfx/C/hitch_01.png") {
    tmpl_7()
}

spriteset(spriteset_hitch_02, "gfx/C/hitch_02.png") {
    tmpl_7()
}

spriteset(spriteset_hitch_03, "gfx/C/hitch_03.png") {
    tmpl_7()
}

spriteset(spriteset_hitch_04, "gfx/C/hitch_04.png") {
    tmpl_7()
}

switch (FEAT_ROADVEHS, SELF, switch_hitch_1, random_bits ) {
        0..127: spriteset_hitch_01;
        127..255: spriteset_hitch_02;
        default: spriteset_hitch_01;        
}

switch (FEAT_ROADVEHS, SELF, switch_hitch_2, random_bits ) {
        0..127: spriteset_hitch_04;
        127..255: spriteset_hitch_03;
        default: spriteset_hitch_04;        
}

switch (FEAT_ROADVEHS, SELF, switch_hitch, build_year ) {
        0..1970:        switch_hitch_1;
        1971..5000000:  switch_hitch_2;
        default:        switch_hitch_2;     
}

// FF Cabs

switch(FEAT_ROADVEHS, SELF, switch_cf_0b, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_fb_cab;
    2:  switch_f_pipe;
}

switch(FEAT_ROADVEHS, SELF, switch_cf_0a, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_fa_cab;
    2:  switch_f_pipe;
}

switch(FEAT_ROADVEHS, SELF, switch_cf_01, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_f1_cab;
    2:  switch_f_pipe;
}

switch(FEAT_ROADVEHS, SELF, switch_cf_02, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_f2_cab;
    2:  switch_f_pipe;
}

switch(FEAT_ROADVEHS, SELF, switch_cf_03, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_f3_cab;
    2:  switch_f_pipe;
}

switch(FEAT_ROADVEHS, SELF, switch_cf_04, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_f4_cab;
    2:  switch_f_pipe;
}

// T Cabs

switch(FEAT_ROADVEHS, SELF, switch_ct_01, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_t1_cab;
    2:  switch_t_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_ct_02, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_t2_cab;
    2:  switch_t_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_ct_03, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_t3_cab;
    2:  switch_t_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_ct_04, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_t4_cab;
    2:  switch_t_panto;
}

// D Cabs

switch(FEAT_ROADVEHS, SELF, switch_cd_03, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_d3_cab;
    2:  switch_d_panto;
}

switch(FEAT_ROADVEHS, SELF, switch_cd_04, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_hitch;
    1:  switch_d4_cab;
    2:  switch_d_panto;
}


/* ===== Fossil Fuel Semi Trucks ===== */



// Box Trucks

// Box Trailer graphics

switch (FEAT_ROADVEHS, SELF, switch_w_s_c_box_drum, cargo_classes & bitmask(CC_LIQUID)) {
    bitmask(CC_LIQUID):             spritegroup_w_s_c_drum;
    default:                        spritegroup_w_s_c_box;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_box_drum, cargo_classes & bitmask(CC_LIQUID)) {
    bitmask(CC_LIQUID):             spritegroup_w_m_c_drum;
    default:                        spritegroup_w_m_c_box;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_box_drum, cargo_classes & bitmask(CC_LIQUID)) {
    bitmask(CC_LIQUID):             spritegroup_w_l_c_drum;
    default:                        spritegroup_w_l_c_box;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_c_beer, random_bits) {
    0..7:           spritegroup_w_s_c_drum;
    8..63:          spritegroup_w_s_c_beer;
    64..71:         spritegroup_w_s_c_drum;
    72..127:        spritegroup_w_s_c_beer;
    128..135:       spritegroup_w_s_c_drum;
    136..191:       spritegroup_w_s_c_beer;
    192..199:       spritegroup_w_s_c_drum;
    200..255:       spritegroup_w_s_c_beer;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_beer, random_bits) {
    0..7:           spritegroup_w_m_c_drum;
    8..63:          spritegroup_w_m_c_beer;
    64..71:         spritegroup_w_m_c_drum;
    72..127:        spritegroup_w_m_c_beer;
    128..135:       spritegroup_w_m_c_drum;
    136..191:       spritegroup_w_m_c_beer;
    192..199:       spritegroup_w_m_c_drum;
    200..255:       spritegroup_w_m_c_beer;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_beer, random_bits) {
    0..7:           spritegroup_w_l_c_drum;
    8..63:          spritegroup_w_l_c_beer;
    64..71:         spritegroup_w_l_c_drum;
    72..127:        spritegroup_w_l_c_beer;
    128..135:       spritegroup_w_l_c_drum;
    136..191:       spritegroup_w_l_c_beer;
    192..199:       spritegroup_w_l_c_drum;
    200..255:       spritegroup_w_l_c_beer;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_c_box, cargo_type_in_veh) {
    BEER:                           switch_w_s_c_beer;
    FOOD:                           spritegroup_w_s_c_foodbox;
    FISH:                           spritegroup_w_s_c_foodbox;
    default:                        switch_w_s_c_box_drum;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_box, cargo_type_in_veh) {
    BEER:                           switch_w_m_c_beer;
    FOOD:                           spritegroup_w_m_c_foodbox;
    FISH:                           spritegroup_w_m_c_foodbox;
    default:                        switch_w_m_c_box_drum;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_box, cargo_type_in_veh) {
    BEER:                           switch_w_l_c_beer;
    FOOD:                           spritegroup_w_l_c_foodbox;
    FISH:                           spritegroup_w_l_c_foodbox;
    default:                        switch_w_l_c_box_drum;
}


spriteset(spriteset_w_s_van_top_a, "gfx/W/w_s_t_van_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_s_van_load_a, "gfx/W/w_s_t_van_load_01.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_van_a { //short van top type a grey/1&2cc lettering
    loaded:  [spriteset_w_s_van_top_a];
    loading: [spriteset_w_s_van_load_a];
}
spriteset(spriteset_w_s_van_top_b, "gfx/W/w_s_t_van_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_van_load_b, "gfx/W/w_s_t_van_load_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_van_b { //short van top type b 1cc/2cc lettering
    loaded:  [spriteset_w_s_van_top_b];
    loading: [spriteset_w_s_van_load_b];
}
spriteset(spriteset_w_s_van_top_c, "gfx/W/w_s_t_van_03.png") { 
    tmpl_7()
}
spriteset(spriteset_w_s_van_load_c, "gfx/W/w_s_t_van_load_03.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_van_c { //short van top type c 1cc
    loaded:  [spriteset_w_s_van_top_c];
    loading: [spriteset_w_s_van_load_c];
}
spriteset(spriteset_w_s_van_top_d, "gfx/W/w_s_t_van_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_van_load_d, "gfx/W/w_s_t_van_load_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_van_d { //short van top type d 1cc/2cc stripe
    loaded:  [spriteset_w_s_van_top_d];
    loading: [spriteset_w_s_van_load_d];
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_van_a, random_bits ) {
        0..85: spritegroup_w_s_van_a;
        86..171: spritegroup_w_s_van_b;
        172..255: spritegroup_w_s_van_c;
        default: spritegroup_w_s_van_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_van_b, random_bits ) {
        0..69: spritegroup_w_s_van_a;
        70..139: spritegroup_w_s_van_b;
        140..209: spritegroup_w_s_van_c;
        210..255: spritegroup_w_s_van_d;
        default: spritegroup_w_s_van_b;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_van_c, random_bits ) {
        0..31: spritegroup_w_s_van_a;
        32..63: spritegroup_w_s_van_b;
        64..95: spritegroup_w_s_van_c;
        96..255: spritegroup_w_s_van_d;
        default: spritegroup_w_s_van_d;           
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_van, build_year ) {
        0..1899:        switch_w_s_van_a;
        1900..1939:     switch_w_s_van_b;
        1940..1964:     switch_w_s_van_c;
        1965..5000000:  spritegroup_w_s_van_d;
        default:        spritegroup_w_s_van_a;            
}


spriteset(spriteset_w_m_van_top_a, "gfx/W/w_m_t_van_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_van_load_a, "gfx/W/w_m_t_van_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_van_a { //medium van top type a 1cc/2cc
    loaded:  [spriteset_w_m_van_top_a];
    loading: [spriteset_w_m_van_load_a];
}
spriteset(spriteset_w_m_van_top_b, "gfx/W/w_m_t_van_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_van_load_b, "gfx/W/w_m_t_van_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_van_b { //medium van top type b 1cc/2cc
    loaded:  [spriteset_w_m_van_top_b];
    loading: [spriteset_w_m_van_load_b];
}

switch (FEAT_ROADVEHS, SELF, switch_w_m_van_a, random_bits ) {
        0..191: spritegroup_w_m_van_a;
        192..255: spritegroup_w_m_van_b;
        default: spritegroup_w_m_van_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_van_b, random_bits ) {
        0..127: spritegroup_w_m_van_a;
        128..255: spritegroup_w_m_van_b;
        default: spritegroup_w_m_van_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_van_c, random_bits ) {
        0..63: spritegroup_w_m_van_a;
        64..255: spritegroup_w_m_van_b;
        default: spritegroup_w_m_van_b;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_van, build_year ) {
        0..1975: spritegroup_w_m_van_a;
        1976..1985: switch_w_m_van_a;
        1986..1995: switch_w_m_van_b;
        1996..2049: switch_w_m_van_c;
        2050..5000000: spritegroup_w_m_van_b;
        default: spritegroup_w_m_van_a;           
}

spriteset(spriteset_w_l_van_top_a, "gfx/W/w_l_t_van_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_van_load_a, "gfx/W/w_l_t_van_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_van_a { //long van top type a 1cc/2cc
    loaded:  [spriteset_w_l_van_top_a];
    loading: [spriteset_w_l_van_load_a];
}
spriteset(spriteset_w_l_van_top_b, "gfx/W/w_l_t_van_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_van_load_b, "gfx/W/w_l_t_van_03.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_van_b { //long van top type b 1cc/2cc
    loaded:  [spriteset_w_l_van_top_b];
    loading: [spriteset_w_l_van_load_b];
}

switch (FEAT_ROADVEHS, SELF, switch_w_l_van_a, random_bits ) {
        0..191: spritegroup_w_l_van_a;
        192..255: spritegroup_w_l_van_b;
        default: spritegroup_w_l_van_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_van_b, random_bits ) {
        0..127: spritegroup_w_l_van_a;
        128..255: spritegroup_w_l_van_b;
        default: spritegroup_w_l_van_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_van_c, random_bits ) {
        0..63: spritegroup_w_l_van_a;
        64..255: spritegroup_w_l_van_b;
        default: spritegroup_w_l_van_b;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_van, build_year ) {
        0..1975: spritegroup_w_l_van_a;
        1976..1985: switch_w_l_van_a;
        1986..1995: switch_w_l_van_b;
        1996..2049: switch_w_l_van_c;
        2050..5000000: spritegroup_w_l_van_b;
        default: spritegroup_w_l_van_a;           
}

spriteset(spriteset_w_l_curtain_top_a, "gfx/W/w_l_t_curtain_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_curtain_load_a, "gfx/W/w_l_t_curtain_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_curtain_a { //long curtain side type a 1cc/2cc
    loaded:  [spriteset_w_l_curtain_top_a];
    loading: [spriteset_w_l_curtain_load_a];
}
spriteset(spriteset_w_l_curtain_top_b, "gfx/W/w_l_t_curtain_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_curtain_load_b, "gfx/W/w_l_t_curtain_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_curtain_b { //long curtain side type b 2cc/1cc
    loaded:  [spriteset_w_l_curtain_top_b];
    loading: [spriteset_w_l_curtain_load_b];
}


spriteset(spriteset_w_s_curtain_top_a, "gfx/W/w_s_t_curtain_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_curtain_load_a, "gfx/W/w_s_t_curtain_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_curtain_a { //short curtain side type a 1cc/2cc
    loaded:  [spriteset_w_s_curtain_top_a];
    loading: [spriteset_w_s_curtain_load_a];
}
spriteset(spriteset_w_s_curtain_top_b, "gfx/W/w_s_t_curtain_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_curtain_load_b, "gfx/W/w_s_t_curtain_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_curtain_b { //short curtain side type b 2cc/1cc
    loaded:  [spriteset_w_s_curtain_top_b];
    loading: [spriteset_w_s_curtain_load_b];
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_t_curtain_a, random_bits ) {
    0..127:         spritegroup_w_s_curtain_a;
    128..255:       spritegroup_w_s_curtain_b;
}

spriteset(spriteset_w_m_curtain_top_a, "gfx/W/w_m_t_curtain_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_curtain_load_a, "gfx/W/w_m_t_curtain_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_curtain_a { //medium curtain side type a 1cc/2cc
    loaded:  [spriteset_w_m_curtain_top_a];
    loading: [spriteset_w_m_curtain_load_a];
}
spriteset(spriteset_w_m_curtain_top_b, "gfx/W/w_m_t_curtain_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_curtain_load_b, "gfx/W/w_m_t_curtain_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_curtain_b { //medium curtain side type b 2cc/1cc
    loaded:  [spriteset_w_m_curtain_top_b];
    loading: [spriteset_w_m_curtain_load_b];
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_t_curtain_a, random_bits ) {
    0..127:         spritegroup_w_m_curtain_a;
    128..255:       spritegroup_w_m_curtain_b;
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_t_van_b, random_bits ) {
    0..200:         switch_w_s_van;
    201..255:       switch_w_s_t_curtain_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_t_van, build_year ) {
    0..1984:        switch_w_s_van;
    1985..1996:     switch_w_s_t_van_b;
                    switch_w_s_t_curtain_a;                    
}

switch (FEAT_ROADVEHS, SELF, switch_w_m_t_van_b, random_bits ) {
    0..127:         switch_w_m_van;
    128..255:       switch_w_m_t_curtain_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_t_van, build_year ) {
    0..1984:        switch_w_m_van;
    1985..1996:     switch_w_m_t_van_b;
                    switch_w_m_t_curtain_a;                    
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_t_curtain_a, random_bits ) {
    0..127:         spritegroup_w_l_curtain_a;
    128..255:       spritegroup_w_l_curtain_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_t_van_b, random_bits ) {
    0..200:         switch_w_l_van;
    201..255:       switch_w_l_t_curtain_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_t_van, build_year ) {
    0..1996:        switch_w_l_van;
                    switch_w_l_t_van_b;
                   
}

switch(FEAT_ROADVEHS, SELF, switch_trail_box_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_s_f_trail;
    1:  spriteset_w_s_box_floor_a;
    2:  switch_w_s_c_box;
    3:  switch_w_s_t_van;
}
switch(FEAT_ROADVEHS, SELF, switch_trail_box_6, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_m_f_trail;
    1:  spriteset_w_m_box_floor_a;
    2:  switch_w_m_c_box;
    3:  switch_w_m_t_van;
}

switch(FEAT_ROADVEHS, SELF, switch_trail_box_7, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_x_null;
    1:  spriteset_w_l_box_floor_a;
    2:  switch_w_l_c_box;
    3:  switch_w_l_t_van;
}

/* ======= curently unused ==== 
spriteset(spriteset_w_box_a, "gfx/R/o_box_01.png") {
    tmpl_wag()
}

spriteset(spriteset_w_box_a_loading, "gfx/R/o_box_load_01.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_box_a {
    loaded:  [spriteset_w_box_a];
    loading: [spriteset_w_box_a_loading];
}


spriteset(spriteset_w_box_b, "gfx/R/o_box_02.png") {
    tmpl_wag()
}

spriteset(spriteset_w_box_b_loading, "gfx/R/o_box_load_02.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_box_b {
    loaded:  [spriteset_w_box_b];
    loading: [spriteset_w_box_b_loading];
}

spriteset(spriteset_w_box_c, "gfx/R/o_box_03.png") {
    tmpl_wag()
}

spriteset(spriteset_w_box_c_loading, "gfx/R/o_box_load_03.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_box_c {
    loaded:  [spriteset_w_box_c];
    loading: [spriteset_w_box_c_loading];
}

spriteset(spriteset_w_box_d, "gfx/R/o_box_04.png") {
    tmpl_wag()
}

spriteset(spriteset_w_box_d_loading, "gfx/R/o_box_load_04.png") {
    tmpl_wag()
}

spritegroup spritegroup_w_box_d {
    loaded:  [spriteset_w_box_d];
    loading: [spriteset_w_box_d_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_w_box_a, random_bits ) {
        0..85: spritegroup_w_box_a;
        86..171: spritegroup_w_box_b;
        172..255: spritegroup_w_box_c;
        default: spritegroup_w_box_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_w_box_b, random_bits ) {
        0..69: spritegroup_w_box_a;
        70..139: spritegroup_w_box_b;
        140..209: spritegroup_w_box_c;
        210..255: spritegroup_w_box_d;
        default: spritegroup_w_box_b;       
}
switch (FEAT_ROADVEHS, SELF, switch_w_box_c, random_bits ) {
        0..31: spritegroup_w_box_a;
        32..63: spritegroup_w_box_b;
        64..95: spritegroup_w_box_c;
        96..255: spritegroup_w_box_d;
        default: spritegroup_w_box_d;       
}

switch (FEAT_ROADVEHS, SELF, switch_w_box, build_year ) {
        0..1899:        switch_w_box_a;
        1900..1939:     switch_w_box_b;
        1940..1964:     switch_w_box_c;
        1965..5000000:  spritegroup_w_box_d;
        default:        spritegroup_w_box_a;        
}
======== */

/*
spriteset(spriteset_sfc_box, "gfx/P/so_box_01.png") {
    tmpl_p()
}
spriteset(spriteset_sfd_box, "gfx/P/so_box_02.png") {
    tmpl_p()
}
*/

// Box Trailer capacity

switch (FEAT_ROADVEHS, SELF, switch_capacity_cb_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*12)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ca_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*16)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c1_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*20)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c2_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*26)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c3_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*30)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c4_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*36)/2);
}

switch (FEAT_ROADVEHS, SELF, switch_capacity_hb_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*12)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ha_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*16)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h1_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*20)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h2_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*22)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h3_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*26)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h4_box, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*31)/2);
}
purchase_capacity_hb_box = ((param_capacity*36)/8);

purchase_capacity_ha_box = ((param_capacity*48)/8);

purchase_capacity_h1_box = ((param_capacity*60)/8);

purchase_capacity_h2_box = ((param_capacity*66)/8);

purchase_capacity_h3_box = ((param_capacity*78)/8);

purchase_capacity_h4_box = ((param_capacity*93)/8);

purchase_capacity_cb_box = ((param_capacity*12)/4);

purchase_capacity_ca_box = ((param_capacity*16)/4);

purchase_capacity_c1_box = ((param_capacity*20)/4);

purchase_capacity_c2_box =  ((param_capacity*26)/4);

purchase_capacity_c3_box = ((param_capacity*30)/4);

purchase_capacity_c4_box = ((param_capacity*36)/4);

//sfb piece goods graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfb_box, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_box_6; //default
}

spriteset(spriteset_sfb_box, "gfx/P/so_box_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfb_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfb_box;
    1:  switch_fuel_icon;
}

//sfb piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfb_box, extra_callback_info1) {
    1:  return item_sfb_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfb_box, 1213) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TMB), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  6;
    cost_factor:                    100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13;  
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfb_truck;
    cost_factor:                buycost_cfb_truck;
    articulated_part:           switch_sfb_box;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_cb_box;
    purchase_cargo_capacity:    purchase_capacity_cb_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfb;
    default:                    switch_spriteset_sfb_box; 
    purchase:                   switch_purchase_sfb_box;
    }
}
}

//sfa piece goods graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfa_box, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_box_6; //default
}

spriteset(spriteset_sfa_box, "gfx/P/so_box_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfa_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfa_box;
    1:  switch_fuel_icon;
}

//sfa piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfa_box, extra_callback_info1) {
    1:  return item_sfa_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfa_box, 1214) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_OGA), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  6;
    cost_factor:                    110;      
    running_cost_factor:            105;      
    speed:                          45 km/h; 
    power:                          140 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfa_truck;
    cost_factor:                buycost_cfa_truck;
    articulated_part:           switch_sfa_box;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_ca_box;
    purchase_cargo_capacity:    purchase_capacity_ca_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfa;
    default:                    switch_spriteset_sfa_box; 
    purchase:                   switch_purchase_sfa_box;
    }
}
}

//sf1 piece goods graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sf1_box, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_box_6; //default
}

spriteset(spriteset_sf1_box, "gfx/P/sf_box_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sf1_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sf1_box;
    1:  switch_fuel_icon;
}

//sf1 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf1_box, extra_callback_info1) {
    1:  return item_sf1_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf1_box, 1215) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_OG1), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  6;
    cost_factor:                    130;      
    running_cost_factor:            135;      
    speed:                          60 km/h; 
    power:                          210 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf1_truck;
    cost_factor:                buycost_cf1_truck;
    articulated_part:           switch_sf1_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_box;
    purchase_cargo_capacity:    purchase_capacity_c1_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf1;
    default:                    switch_spriteset_sf1_box; 
    purchase:                   switch_purchase_sf1_box;
    }
}
}

//mf2 piece goods graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf2_box, position_in_consist ) {
    0:  switch_cf_02;
        switch_trail_box_7; //default
}

spriteset(spriteset_mf2_box, "gfx/P/sf_box_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf2_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf2_box;
    1:  switch_fuel_icon;
}

//mf2 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf2_box, extra_callback_info1) {
    1:  return item_mf2_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf2_box, 1216) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TM2), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cost_factor:                    150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          380 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf2_truck;
    cost_factor:                buycost_cf2_truck;
    articulated_part:           switch_mf2_box;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_box;
    purchase_cargo_capacity:    purchase_capacity_c2_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf2;
    default:                    switch_spriteset_mf2_box; 
    purchase:                   switch_purchase_mf2_box;
    }
}
}

//mf3 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf3_box, position_in_consist ) {
    0:  switch_cf_03;
        switch_trail_box_7; //default
}

spriteset(spriteset_mf3_box, "gfx/P/sf_box_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf3_box;
    1:  switch_fuel_icon;
}

//mf3 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf3_box, extra_callback_info1) {
    1:  return item_mf3_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf3_box, 1217) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_DN3), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cost_factor:                    170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf3_truck;
    cost_factor:                buycost_cf3_truck;
    articulated_part:           switch_mf3_box;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf3;
    default:                    switch_spriteset_mf3_box; 
    purchase:                   switch_purchase_mf3_box;
    }
}
}

//mf4 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf4_box, position_in_consist ) {
    0:  switch_cf_04;
        switch_trail_box_7; //default
}

spriteset(spriteset_mf4_box, "gfx/P/sf_box_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf4_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf4_box;
    1:  switch_fuel_icon;
}
//mf4 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf4_box, extra_callback_info1) {
    1:  return item_mf4_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf4_box, 1218) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BW4), string(STR_BOX), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          720;   
    cargo_capacity:                 36;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         19 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf4_truck;
    cost_factor:                buycost_cf4_truck;
    articulated_part:           switch_mf4_box;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf4;
    default:                    switch_spriteset_mf4_box;
    purchase:                   switch_purchase_mf4_box; 
    }
}
}

//st1 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_st1_box, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_box_6; //default
}
spriteset(spriteset_st1_box, "gfx/P/st_box_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_st1_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st1_box;
    1:  switch_wire_icon;
}
//st1 piece goods properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st1_box, extra_callback_info1) {
    1:  return item_st1_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st1_box, 2215) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_DN2), string(STR_BOX), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          400;   
    cargo_capacity:                 20;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct1_truck;
    cost_factor:                buycost_ct1_truck;
    articulated_part:           switch_st1_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_box;
    purchase_cargo_capacity:    purchase_capacity_c1_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct1;
    default:                    switch_spriteset_st1_box; 
    purchase:                   switch_purchase_st1_box;
    }
}
}

//mt2 piece goods graphics

//graphics definition


//mt2 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt2_box, position_in_consist ) {
    0:  switch_ct_02;
        switch_trail_box_7; //default
}
spriteset(spriteset_mt2_box, "gfx/P/st_box_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt2_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt2_box;
    1:  switch_wire_icon;
}
//mt2 piece goods properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt2_box, extra_callback_info1) {
    1:  return item_mt2_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt2_box, 2216) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_DN2), string(STR_BOX), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          740;   
    cargo_capacity:                 26;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct1_truck;
    cost_factor:                buycost_ct1_truck;
    articulated_part:           switch_mt2_box;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_box;
    purchase_cargo_capacity:    purchase_capacity_c2_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct2;
    default:                    switch_spriteset_mt2_box;
    purchase:                   switch_purchase_mt2_box; 
    }
}
}

//mt3 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt3_box, position_in_consist ) {
    0:  switch_ct_03;
        switch_trail_box_7; //default
}
spriteset(spriteset_mt3_box, "gfx/P/st_box_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt3_box;
    1:  switch_wire_icon;
}
//mt3 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt3_box, extra_callback_info1) {
    1:  return item_mt3_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt3_box, 2217) {
property {
    name:                           string(STR_CONCAT, string(STR_CTMOD_KD3), string(STR_BOX), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct3_truck;
    cost_factor:                buycost_ct3_truck;
    articulated_part:           switch_mt3_box;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct3;
    default:                    switch_spriteset_mt3_box;
    purchase:                   switch_purchase_mt3_box; 
    }
}
}

//mt4 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt4_box, position_in_consist ) {
    0:  switch_ct_04;
        switch_trail_box_7; //default
}
spriteset(spriteset_mt4_box, "gfx/P/st_box_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt4_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt4_box;
    1:  switch_wire_icon;
}
//mt4 piece goods properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt4_box, extra_callback_info1) {
    1:  return item_mt4_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt4_box, 2218) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_LC4), string(STR_BOX), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cost_factor:                    168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          2200;   
    cargo_capacity:                 36;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct4_truck;
    cost_factor:                buycost_ct4_truck;
    articulated_part:           switch_mt4_box;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct4;
    default:                    switch_spriteset_mt4_box; 
    purchase:                   switch_purchase_mt4_box;
    }
}
}

//md3 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_md3_box, position_in_consist ) {
    0:  switch_cd_03;
        switch_trail_box_7; //default
}

spriteset(spriteset_md3_box, "gfx/P/sd_box_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md3_box;
    1:  switch_dual_icon;
}

//md3 piece goods properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md3_box, extra_callback_info1) {
    1:  return item_md3_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md3_box, 3217) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_DN3), string(STR_BOX), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cost_factor:                    180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }

graphics {
    power:                      switch_boost_cd3;
    running_cost_factor:        switch_e_cost_cd3;
    cost_factor:                buycost_cd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md3_box;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    default:                    switch_spriteset_md3_box; 
    purchase:                   switch_purchase_md3_box;

    }
}
}

//md4 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_md4_box, position_in_consist ) {
    0:  switch_cd_04;
        switch_trail_box_7; //default
}

spriteset(spriteset_md4_box, "gfx/P/sd_box_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md4_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md4_box;
    1:  switch_dual_icon;
}

//md4 piece goods properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md4_box, extra_callback_info1) {
    1:  return item_md4_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md4_box, 3218) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_BW4), string(STR_BOX), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cost_factor:                    200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          2100;   
    cargo_capacity:                 36;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
  
    }
graphics {
    power:                      switch_boost_cd4;
    running_cost_factor:        switch_e_cost_cd4;
    cost_factor:                buycost_cd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md4_box;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    default:                    switch_spriteset_md4_box;
    purchase:                   switch_purchase_md4_box;
    }
}
}

//hfb piece goods graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfb_box, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_box_4; //default
}

spriteset(spriteset_hfb_box, "gfx/P/ho_box_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfb_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfb_box;
    1:  switch_fuel_icon;
}

//hfb piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfb_box, extra_callback_info1) {
    1..3:  return item_hfb_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfb_box, 1223) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG1), string(STR_BOX), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  6;
    cost_factor:                    (7/4) *             100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          (11/10)*  100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13;  
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (11 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfb_truck;
    cost_factor:                buycost_hfb_truck;
    articulated_part:           switch_hfb_box;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_hb_box;
    purchase_cargo_capacity:    purchase_capacity_hb_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfb;
    default:                    switch_spriteset_hfb_box; 
    purchase:                   switch_purchase_hfb_box;
    }
}
}

//hfa piece goods graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfa_box, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_box_4; //default
}

spriteset(spriteset_hfa_box, "gfx/P/ho_box_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfa_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfa_box;
    1:  switch_fuel_icon;
}

//hfa piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfa_box, extra_callback_info1) {
    1..3:  return item_hfa_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfa_box, 1224) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN1), string(STR_BOX), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  6;
    cost_factor:                    (7/4) *     110;      
    running_cost_factor:            105;      
    speed:                          45 km/h; 
    power:                          (11/10)*    140 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfa_truck;
    cost_factor:                buycost_hfa_truck;
    articulated_part:           switch_hfa_box;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_ha_box;
    purchase_cargo_capacity:    purchase_capacity_ha_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfa;
    default:                    switch_spriteset_hfa_box; 
    purchase:                   switch_purchase_hfa_box;
    }
}
}

//hf1 piece goods graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf1_box, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_box_6; //default
}

spriteset(spriteset_hf1_box, "gfx/P/hf_box_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf1_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf1_box;
    1:  switch_fuel_icon;
}

//hf1 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf1_box, extra_callback_info1) {
    1..3:  return item_hf1_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf1_box, 1225) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_TM1), string(STR_BOX), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  6;
    cost_factor:                    (7/4) *             130;      
    running_cost_factor:               135;      
    speed:                          60 km/h; 
    power:                          (11/10)*  210 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (11 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf1_truck;
    cost_factor:                buycost_hf1_truck;
    articulated_part:           switch_hf1_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_box;
    purchase_cargo_capacity:    purchase_capacity_h1_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf1;
    default:                    switch_spriteset_hf1_box; 
    purchase:                   switch_purchase_hf1_box;
    }
}
}

//hf2 piece goods graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf2_box, position_in_consist ) {
    0:  switch_cf_02;
        switch_trail_box_6; //default
}

spriteset(spriteset_hf2_box, "gfx/P/hf_box_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf2_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf2_box;
    1:  switch_fuel_icon;
}

//hf2 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf2_box, extra_callback_info1) {
    1..3:  return item_hf2_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle partsme
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf2_box, 1226) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_BOX), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cost_factor:                    (7/4) *             150;      
    running_cost_factor:               165;      
    speed:                          80 km/h; 
    power:                          (11/10)*  380 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf2_truck;
    cost_factor:                buycost_hf2_truck;
    articulated_part:           switch_hf2_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_box;
    purchase_cargo_capacity:    purchase_capacity_h2_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf2;
    default:                    switch_spriteset_hf2_box; 
    purchase:                   switch_purchase_hf2_box;
    }
}
}

//hf3 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf3_box, position_in_consist ) {
    0:  switch_cf_03;
        switch_trail_box_6; //default
}

spriteset(spriteset_hf3_box, "gfx/P/hf_box_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf3_box;
    1:  switch_fuel_icon;
}

//hf3 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf3_box, extra_callback_info1) {
    1..3:  return item_hf3_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf3_box, 1227) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_BOX), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          (11/10)*    560 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (16 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf3_truck;
    cost_factor:                buycost_hf3_truck;
    articulated_part:           switch_hf3_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf3;
    default:                    switch_spriteset_hf3_box; 
    purchase:                   switch_purchase_hf3_box;
    }
}
}

//hf4 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf4_box, position_in_consist ) {
    0:  switch_cf_04;
        switch_trail_box_6; //default
}

spriteset(spriteset_hf4_box, "gfx/P/hf_box_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf4_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf4_box;
    1:  switch_fuel_icon;
}

//hf4 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf4_box, extra_callback_info1) {
    1..3:  return item_hf4_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf4_box, 1228) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG2), string(STR_BOX), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    (7/4) * 190;      
    running_cost_factor:               245;      
    speed:                          140 km/h; 
    power:                          (11/10)*  720;   
    cargo_capacity:                 36;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (19 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf4_truck;
    cost_factor:                buycost_hf4_truck;
    articulated_part:           switch_hf4_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf4;
    default:                    switch_spriteset_hf4_box; 
    purchase:                   switch_purchase_hf4_box;
    }
}
}

//ht1 piece goods graphics

//graphics definition

spriteset(spriteset_ht1_box, "gfx/P/ht_box_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht1_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht1_box;
    1:  switch_wire_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht1_box, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_box_6; //default
}

//ht1 piece goods properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht1_box, extra_callback_info1) {
    1..3:  return item_ht1_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht1_box, 2225) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW1), string(STR_BOX), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          (11/10)*    400;   
    cargo_capacity:                 20;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht1_truck;
    cost_factor:                buycost_ht1_truck;
    articulated_part:           switch_ht1_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_box;
    purchase_cargo_capacity:    purchase_capacity_h1_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht1;
    default:                    switch_spriteset_ht1_box; 
    purchase:                   switch_purchase_ht1_box;
    }
}
}

//ht2 piece goods graphics

//graphics definition


//ht2 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht2_box, position_in_consist ) {
    0:  switch_ct_02;
        switch_trail_box_6; //default
}

spriteset(spriteset_ht2_box, "gfx/P/ht_box_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht2_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht2_box;
    1:  switch_wire_icon;
}

//ht2 piece goods properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht2_box, extra_callback_info1) {
    1..3:  return item_ht2_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht2_box, 2226) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_BOX), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          (11/10)*    740;   
    cargo_capacity:                 26;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (12 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht2_truck;
    cost_factor:                buycost_ht2_truck;
    articulated_part:           switch_ht2_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_box;
    purchase_cargo_capacity:    purchase_capacity_h2_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht2;
    default:                    switch_spriteset_ht2_box; 
    purchase:                   switch_purchase_ht2_box;
    }
}
}

//ht3 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht3_box, position_in_consist ) {
    0:  switch_ct_03;
        switch_trail_box_6; //default
}

spriteset(spriteset_ht3_box, "gfx/P/ht_box_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht3_box;
    1:  switch_wire_icon;
}

//ht3 piece goods properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht3_box, extra_callback_info1) {
    1..3:  return item_ht3_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht3_box, 2227) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_LC2), string(STR_BOX), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht3_truck;
    cost_factor:                buycost_ht3_truck;
    articulated_part:           switch_ht3_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht3;
    default:                    switch_spriteset_ht3_box; 
    purchase:                   switch_purchase_ht3_box;
    }
}
}

//ht4 piece goods graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht4_box, position_in_consist ) {
    0:  switch_ct_04;
        switch_trail_box_6; //default
}

spriteset(spriteset_ht4_box, "gfx/P/ht_box_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht4_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht4_box;
    1:  switch_wire_icon;
}

//ht4 piece goods properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht4_box, extra_callback_info1) {
    1..3:  return item_ht4_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht4_box, 2228) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_KD2), string(STR_BOX), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2200;   
    cargo_capacity:                 36;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht4_truck;
    cost_factor:                buycost_ht4_truck;
    articulated_part:           switch_ht4_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht4;
    default:                    switch_spriteset_ht4_box; 
    purchase:                   switch_purchase_ht4_box;
    }
}
}

//hd3 piece goods graphics

//graphics definition

spriteset(spriteset_hd3_box, "gfx/P/hd_box_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd3_box;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd3_box, position_in_consist ) {
    0:  switch_cd_03;
        switch_trail_box_6; //default
}

//hd3 piece goods properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd3_box, extra_callback_info1) {
    1..3:  return item_hd3_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd3_box, 3227) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_BOX), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period :              200;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1200 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd3;
    running_cost_factor:        switch_e_cost_hd3;
    cost_factor:                buycost_hd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd3_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    default:                    switch_spriteset_hd3_box; 
    purchase:                   switch_purchase_hd3_box;
    }
}
}

//hd4 piece goods graphics

//graphics definition

spriteset(spriteset_hd4_box, "gfx/P/hd_box_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd4_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd4_box;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd4_box, position_in_consist ) {
    0:  switch_cd_04;
        switch_trail_box_6; //default
}

//hd4 piece goods properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd4_box, extra_callback_info1) {
    1..3:  return item_hd4_box; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd4_box, 3228) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_BOX), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER, RFPR, BEAN];
    cargo_disallow_refit:           [LVST, STEL, COPR, SCMT, WOOD, WDPR, METL, IRON, PIPE, ZINC];
    default_cargo_type:             GOOD;
    cargo_age_period:               200;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2100;   
    cargo_capacity:                 36;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (20 * 5 / 2) ton;
  
    }
graphics {
    power:                      switch_boost_hd4;
    running_cost_factor:        switch_e_cost_hd4;
    cost_factor:                buycost_hd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd4_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    default:                    switch_spriteset_hd4_box; 
    purchase:                   switch_purchase_hd4_box;
    }
}
}

//REF

// REF Trailer graphics

spriteset(spriteset_w_s_ref_top_a, "gfx/W/w_s_t_ref_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_s_ref_load_a, "gfx/W/w_s_t_ref_load_01.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_ref_a { //short ref top type a grey/1&2cc lettering
    loaded:  [spriteset_w_s_ref_top_a];
    loading: [spriteset_w_s_ref_load_a];
}
spriteset(spriteset_w_s_ref_top_b, "gfx/W/w_s_t_ref_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_ref_load_b, "gfx/W/w_s_t_ref_load_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_ref_b { //short ref top type b 1cc/2cc lettering
    loaded:  [spriteset_w_s_ref_top_b];
    loading: [spriteset_w_s_ref_load_b];
}
spriteset(spriteset_w_s_ref_top_c, "gfx/W/w_s_t_ref_03.png") { 
    tmpl_7()
}
spriteset(spriteset_w_s_ref_load_c, "gfx/W/w_s_t_ref_load_03.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_ref_c { //short ref top type c 1cc
    loaded:  [spriteset_w_s_ref_top_c];
    loading: [spriteset_w_s_ref_load_c];
}
spriteset(spriteset_w_s_ref_top_d, "gfx/W/w_s_t_ref_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_ref_load_d, "gfx/W/w_s_t_ref_load_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_s_ref_d { //short ref top type d 1cc/2cc stripe
    loaded:  [spriteset_w_s_ref_top_d];
    loading: [spriteset_w_s_ref_load_d];
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_ref_a, random_bits ) {
        0..85: spritegroup_w_s_ref_a;
        86..171: spritegroup_w_s_ref_b;
        172..255: spritegroup_w_s_ref_c;
        default: spritegroup_w_s_ref_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_ref_b, random_bits ) {
        0..69: spritegroup_w_s_ref_a;
        70..139: spritegroup_w_s_ref_b;
        140..209: spritegroup_w_s_ref_c;
        210..255: spritegroup_w_s_ref_d;
        default: spritegroup_w_s_ref_b;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_ref_c, random_bits ) {
        0..31: spritegroup_w_s_ref_a;
        32..63: spritegroup_w_s_ref_b;
        64..95: spritegroup_w_s_ref_c;
        96..255: spritegroup_w_s_ref_d;
        default: spritegroup_w_s_ref_d;           
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_t_ref, build_year ) {
        0..1899:        switch_w_s_ref_a;
        1900..1939:     switch_w_s_ref_b;
        1940..1964:     switch_w_s_ref_c;
        1965..5000000:  spritegroup_w_s_ref_d;
        default:        spritegroup_w_s_ref_a;            
}


spriteset(spriteset_w_m_ref_top_a, "gfx/W/w_m_t_ref_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_ref_load_a, "gfx/W/w_m_t_ref_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_ref_a { //medium ref top type a 1cc/2cc
    loaded:  [spriteset_w_m_ref_top_a];
    loading: [spriteset_w_m_ref_load_a];
}
spriteset(spriteset_w_m_ref_top_b, "gfx/W/w_m_t_ref_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_ref_load_b, "gfx/W/w_m_t_ref_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_ref_b { //medium ref top type b 1cc/2cc
    loaded:  [spriteset_w_m_ref_top_b];
    loading: [spriteset_w_m_ref_load_b];
}

switch (FEAT_ROADVEHS, SELF, switch_w_m_ref_a, random_bits ) {
        0..191: spritegroup_w_m_ref_a;
        192..255: spritegroup_w_m_ref_b;
        default: spritegroup_w_m_ref_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_ref_b, random_bits ) {
        0..127: spritegroup_w_m_ref_a;
        128..255: spritegroup_w_m_ref_b;
        default: spritegroup_w_m_ref_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_ref_c, random_bits ) {
        0..63: spritegroup_w_m_ref_a;
        64..255: spritegroup_w_m_ref_b;
        default: spritegroup_w_m_ref_b;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_t_ref, build_year ) {
        0..1975: spritegroup_w_m_ref_a;
        1976..1985: switch_w_m_ref_a;
        1986..1995: switch_w_m_ref_b;
        1996..2049: switch_w_m_ref_c;
        2050..5000000: spritegroup_w_m_ref_b;
        default: spritegroup_w_m_ref_a;           
}

spriteset(spriteset_w_l_ref_top_a, "gfx/W/w_l_t_ref_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_ref_load_a, "gfx/W/w_l_t_ref_01.png") {
    tmpl_7()
}

spritegroup spritegroup_w_l_ref_a { //long ref top type a 1cc/2cc
    loaded:  [spriteset_w_l_ref_top_a];
    loading: [spriteset_w_l_ref_load_a];
}
spriteset(spriteset_w_l_ref_top_b, "gfx/W/w_l_t_ref_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_l_ref_load_b, "gfx/W/w_l_t_ref_03.png") {
    tmpl_7()
}
spritegroup spritegroup_w_l_ref_b { //long ref top type b 1cc/2cc
    loaded:  [spriteset_w_l_ref_top_b];
    loading: [spriteset_w_l_ref_load_b];
}

switch (FEAT_ROADVEHS, SELF, switch_w_l_ref_a, random_bits ) {
        0..191: spritegroup_w_l_ref_a;
        192..255: spritegroup_w_l_ref_b;
        default: spritegroup_w_l_ref_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_ref_b, random_bits ) {
        0..127: spritegroup_w_l_ref_a;
        128..255: spritegroup_w_l_ref_b;
        default: spritegroup_w_l_ref_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_ref_c, random_bits ) {
        0..63: spritegroup_w_l_ref_a;
        64..255: spritegroup_w_l_ref_b;
        default: spritegroup_w_l_ref_b;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_t_ref, build_year ) {
        0..1975: spritegroup_w_l_ref_a;
        1976..1985: switch_w_l_ref_a;
        1986..1995: switch_w_l_ref_b;
        1996..2049: switch_w_l_ref_c;
        2050..5000000: spritegroup_w_l_ref_b;
        default: spritegroup_w_l_ref_a;           
}

switch(FEAT_ROADVEHS, SELF, switch_trail_ref_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_s_f_trail;
    1:  spriteset_w_s_box_floor_a;
    2:  switch_w_s_c_box;
    3:  switch_w_s_t_ref;
}
switch(FEAT_ROADVEHS, SELF, switch_trail_ref_6, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_m_f_trail;
    1:  spriteset_w_m_box_floor_a;
    2:  switch_w_m_c_box;
    3:  switch_w_m_t_ref;
}

switch(FEAT_ROADVEHS, SELF, switch_trail_ref_7, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_x_null;
    1:  spriteset_w_l_box_floor_a;
    2:  switch_w_l_c_box;
    3:  switch_w_l_t_ref;
}

/* ==== these are unused currently:
spriteset(spriteset_s_ref_a, "gfx/S/s_ref_02.png") {
    tmpl_short()
}

spriteset(spriteset_s_ref_a_loading, "gfx/S/s_ref_01.png") {
    tmpl_short()
}

spritegroup spritegroup_s_ref_a {
    loaded:  [spriteset_s_ref_a];
    loading: [spriteset_s_ref_a_loading];
}


spriteset(spriteset_s_ref_b, "gfx/S/s_ref_04.png") {
    tmpl_7()
}

spriteset(spriteset_s_ref_b_loading, "gfx/S/s_ref_03.png") {
    tmpl_7()
}

spritegroup spritegroup_s_ref_b {
    loaded:  [spriteset_s_ref_b];
    loading: [spriteset_s_ref_b_loading];
}

spriteset(spriteset_m_ref_a, "gfx/M/m_ref_02.png") {
    tmpl_7()
}

spriteset(spriteset_m_ref_a_loading, "gfx/M/m_ref_01.png") {
    tmpl_7()
}

spritegroup spritegroup_m_ref_a {
    loaded:  [spriteset_m_ref_a];
    loading: [spriteset_m_ref_a_loading];
}

spriteset(spriteset_m_ref_b, "gfx/M/m_ref_04.png") {
    tmpl_7()
}

spriteset(spriteset_m_ref_b_loading, "gfx/M/m_ref_03.png") {
    tmpl_7()
}

spritegroup spritegroup_m_ref_b {
    loaded:  [spriteset_m_ref_b];
    loading: [spriteset_m_ref_b_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_s_ref_a, random_bits ) {
        0..191: spritegroup_s_ref_a;
        192..255: spritegroup_s_ref_b;
        default: spritegroup_s_ref_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_s_ref_b, random_bits ) {
        0..127: spritegroup_s_ref_a;
        128..255: spritegroup_s_ref_b;
        default: spritegroup_s_ref_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_s_ref_c, random_bits ) {
        0..63: spritegroup_s_ref_a;
        64..255: spritegroup_s_ref_b;
        default: spritegroup_s_ref_b;       
}
switch (FEAT_ROADVEHS, SELF, switch_s_ref, build_year ) {
        0..1975: spritegroup_s_ref_a;
        1976..1985: switch_s_ref_a;
        1986..1995: switch_s_ref_b;
        1996..2049: switch_s_ref_c;
        2050..5000000: spritegroup_s_ref_b;
        default: spritegroup_s_ref_a;       
}

switch (FEAT_ROADVEHS, SELF, switch_m_ref_a, random_bits ) {
        0..191: spritegroup_m_ref_a;
        192..255: spritegroup_m_ref_b;
        default: spritegroup_m_ref_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_m_ref_b, random_bits ) {
        0..127: spritegroup_m_ref_a;
        128..255: spritegroup_m_ref_b;
        default: spritegroup_m_ref_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_m_ref_c, random_bits ) {
        0..63: spritegroup_m_ref_a;
        64..255: spritegroup_m_ref_b;
        default: spritegroup_m_ref_b;       
}
switch (FEAT_ROADVEHS, SELF, switch_m_ref, build_year ) {
        0..1975: spritegroup_m_ref_a;
        1976..1985: switch_m_ref_a;
        1986..1995: switch_m_ref_b;
        1996..2049: switch_m_ref_c;
        2050..5000000: spritegroup_m_ref_b;
        default: spritegroup_m_ref_a;       
}

=================*/

/*
spriteset(spriteset_sfc_ref, "gfx/P/so_ref_01.png") {
    tmpl_p()
}
spriteset(spriteset_sfd_ref, "gfx/P/so_ref_02.png") {
    tmpl_p()
}
*/

//sfb refridgerated graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfb_ref, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_ref_6; //default
}

spriteset(spriteset_sfb_ref, "gfx/P/so_ref_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfb_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfb_ref;
    1:  switch_fuel_icon;
}

//sfb refridgerated properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfb_ref, extra_callback_info1) {
    1:  return item_sfb_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfb_ref, 1313) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BWB), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  6;
    cost_factor:                    100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13;  
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfb_truck;
    cost_factor:                buycost_cfb_truck;
    articulated_part:           switch_sfb_ref;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_cb_box;
    purchase_cargo_capacity:    purchase_capacity_cb_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfb;
    default:                    switch_spriteset_sfb_ref; 
    purchase:                   switch_purchase_sfb_ref;
    }
}
}

//sfa refridgerated graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfa_ref, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_ref_6; //default
}

spriteset(spriteset_sfa_ref, "gfx/P/so_ref_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfa_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfa_ref;
    1:  switch_fuel_icon;
}

//sfa refridgerated properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfa_ref, extra_callback_info1) {
    1:  return item_sfa_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfa_ref, 1314) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TMA), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  6;
    cost_factor:                    110;      
    running_cost_factor:            105;      
    speed:                          45 km/h; 
    power:                          140 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfa_truck;
    cost_factor:                buycost_cfa_truck;
    articulated_part:           switch_sfa_ref;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_ca_box;
    purchase_cargo_capacity:    purchase_capacity_ca_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfa;
    default:                    switch_spriteset_sfa_ref;
    purchase:                   switch_purchase_sfa_ref; 
    }
}
}

//sf1 refridgerated graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sf1_ref, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_ref_6; //default
}

spriteset(spriteset_sf1_ref, "gfx/P/sf_ref_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sf1_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sf1_ref;
    1:  switch_fuel_icon;
}

//sf1 refridgerated properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf1_ref, extra_callback_info1) {
    1:  return item_sf1_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf1_ref, 1315) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BW1), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  6;
    cost_factor:                    130;      
    running_cost_factor:            135;      
    speed:                          60 km/h; 
    power:                          210 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf1_truck;
    cost_factor:                buycost_cf1_truck;
    articulated_part:           switch_sf1_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_box;
    purchase_cargo_capacity:    purchase_capacity_c1_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf1;
    default:                    switch_spriteset_sf1_ref; 
    purchase:                   switch_purchase_sf1_ref;
    }
}
}

//mf2 ref graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf2_ref, position_in_consist ) {
    0:  switch_cf_02;
        switch_trail_ref_7; //default
}

spriteset(spriteset_mf2_ref, "gfx/P/sf_ref_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf2_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf2_ref;
    1:  switch_fuel_icon;
}

//mf2 ref properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf2_ref, extra_callback_info1) {
    1:  return item_mf2_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf2_ref, 1316) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_DN2), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    155;      
    running_cost_factor:            170;      
    speed:                          80 km/h; 
    power:                          380 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cf2_truck;
    cost_factor:                buycost_cf2_truck;
    articulated_part:           switch_mf2_ref;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_box;
    purchase_cargo_capacity:    purchase_capacity_c2_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf2;
    default:                    switch_spriteset_mf2_ref;
    purchase:                   switch_purchase_mf2_ref; 
    }
}
}

//mf3 ref graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf3_ref, position_in_consist ) {
    0:  switch_cf_03;
        switch_trail_ref_7; //default
}

spriteset(spriteset_mf3_ref, "gfx/P/sf_ref_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf3_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf3_ref;
    1:  switch_fuel_icon;
}

//mf3 ref properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf3_ref, extra_callback_info1) {
    1:  return item_mf3_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf3_ref, 1317) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TM3), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    175;      
    running_cost_factor:            230;      
    speed:                          100 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cf3_truck;
    cost_factor:                buycost_cf3_truck;
    articulated_part:           switch_mf3_ref;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf3;
    default:                    switch_spriteset_mf3_ref; 
    purchase:                   switch_purchase_mf3_ref;
    }
}
}

//mf4 ref graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf4_ref, position_in_consist ) {
    0:  switch_cf_04;
        switch_trail_ref_7; //default
}

spriteset(spriteset_mf4_ref, "gfx/P/sf_ref_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf4_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf4_ref;
    1:  switch_fuel_icon;
}

//mf4 ref properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf4_ref, extra_callback_info1) {
    1:  return item_mf4_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf4_ref, 1318) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_OG4), string(STR_REF), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    195;      
    running_cost_factor:            250;      
    speed:                          140 km/h; 
    power:                          720;   
    cargo_capacity:                 36;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         19 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cf4_truck;
    cost_factor:                buycost_cf4_truck;
    articulated_part:           switch_mf4_ref;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf4;
    default:                    switch_spriteset_mf4_ref;
    purchase:                   switch_purchase_mf4_ref; 
    }
}
}

//st1 refridgerated graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_st1_ref, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_ref_6; //default
}
spriteset(spriteset_st1_ref, "gfx/P/st_ref_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_st1_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st1_ref;
    1:  switch_wire_icon;
}
//st1 refridgerated properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st1_ref, extra_callback_info1) {
    1:  return item_st1_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st1_ref, 2315) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_KD1), string(STR_REF), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          400;   
    cargo_capacity:                 20;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct1_truck;
    cost_factor:                buycost_ct1_truck;
    articulated_part:           switch_st1_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_box;
    purchase_cargo_capacity:    purchase_capacity_c1_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct1;
    default:                    switch_spriteset_st1_ref; 
    purchase:                   switch_purchase_st1_ref;
    }
}
}

//mt2 refridgerated graphics

//graphics definition


//mt2 refridgerated graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt2_ref, position_in_consist ) {
    0:  switch_ct_02;
        switch_trail_ref_7; //default
}
spriteset(spriteset_mt2_ref, "gfx/P/st_ref_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt2_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt2_ref;
    1:  switch_wire_icon;
}
//mt2 refridgerated properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt2_ref, extra_callback_info1) {
    1:  return item_mt2_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt2_ref, 2316) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_LC2), string(STR_REF), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          740;   
    cargo_capacity:                 26;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct2_truck;
    cost_factor:                buycost_ct2_truck;
    articulated_part:           switch_mt2_ref;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_box;
    purchase_cargo_capacity:    purchase_capacity_c2_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct2;
    default:                    switch_spriteset_mt2_ref; 
    purchase:                   switch_purchase_mt2_ref;
    }
}
}

//mt3 refridgerated graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt3_ref, position_in_consist ) {
    0:  switch_ct_03;
        switch_trail_ref_7; //default
}
spriteset(spriteset_mt3_ref, "gfx/P/st_ref_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt3_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt3_ref;
    1:  switch_wire_icon;
}
//mt3 refridgerated properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt3_ref, extra_callback_info1) {
    1:  return item_mt3_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt3_ref, 2317) {
property {
    name:                           string(STR_CONCAT, string(STR_CTMOD_BW3), string(STR_REF), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct3_truck;
    cost_factor:                buycost_ct3_truck;
    articulated_part:           switch_mt3_ref;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct3;
    default:                    switch_spriteset_mt3_ref;
    purchase:                   switch_purchase_mt3_ref; 
    }
}
}

//mt4 refridgerated graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt4_ref, position_in_consist ) {
    0:  switch_ct_04;
        switch_trail_ref_7; //default
}
spriteset(spriteset_mt4_ref, "gfx/P/st_ref_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt4_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt4_ref;
    1:  switch_wire_icon;
}
//mt4 refridgerated properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt4_ref, extra_callback_info1) {
    1:  return item_mt4_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt4_ref, 2318) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_DN4), string(STR_REF), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          2200;   
    cargo_capacity:                 36;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct4_truck;
    cost_factor:                buycost_ct4_truck;
    articulated_part:           switch_mt4_ref;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct4;
    default:                    switch_spriteset_mt4_ref;
    purchase:                   switch_purchase_mt4_ref; 
    }
}
}

//md3 ref graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_md3_ref, position_in_consist ) {
    0:  switch_cd_03;
        switch_trail_ref_7; //default
}

spriteset(spriteset_md3_ref, "gfx/P/sd_ref_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md3_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md3_ref;
    1:  switch_dual_icon;
}

//md3 ref properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md3_ref, extra_callback_info1) {
    1:  return item_md3_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md3_ref, 3317) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_BW3), string(STR_REF), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }

graphics {
    power:                      switch_boost_cd3;
    running_cost_factor:        switch_e_cost_cd3;
    cost_factor:                buycost_cd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md3_ref;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    default:                    switch_spriteset_md3_ref; 
    purchase:                   switch_purchase_md3_ref;
    }
}
}

//md4 ref graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_md4_ref, position_in_consist ) {
    0:  switch_cd_04;
        switch_trail_ref_7; //default
}

spriteset(spriteset_md4_ref, "gfx/P/sd_ref_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md4_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md4_ref;
    1:  switch_dual_icon;
}

//md4 ref properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md4_ref, extra_callback_info1) {
    1:  return item_md4_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md4_ref, 3318) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_DN4), string(STR_REF), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          2100;   
    cargo_capacity:                 36;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }
graphics {
    power:                      switch_boost_cd4;
    running_cost_factor:        switch_e_cost_cd4;
    cost_factor:                buycost_cd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md4_ref;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    default:                    switch_spriteset_md4_ref; 
    purchase:                   switch_purchase_md4_ref;
    }
}
}

//hfb refridgerated graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfb_ref, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_ref_4; //default
}

spriteset(spriteset_hfb_ref, "gfx/P/ho_ref_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfb_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfb_ref;
    1:  switch_fuel_icon;
}

//hfb refridgerated properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfb_ref, extra_callback_info1) {
    1..3:  return item_hfb_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfb_ref, 1323) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG1), string(STR_REF), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  6;
    cost_factor:                    (7/4) *             100;      
    running_cost_factor:               97;      
    speed:                          40 km/h; 
    power:                          (11/10)*  100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13;  
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (11 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfb_truck;
    cost_factor:                buycost_hfb_truck;
    articulated_part:           switch_hfb_ref;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_hb_box;
    purchase_cargo_capacity:    purchase_capacity_hb_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfb;
    default:                    switch_spriteset_hfb_ref; 
    purchase:                   switch_purchase_hfb_ref;
    }
}
}

//hfa refridgerated graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfa_ref, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_ref_4; //default
}

spriteset(spriteset_hfa_ref, "gfx/P/ho_ref_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfa_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfa_ref;
    1:  switch_fuel_icon;
}

//hfa refridgerated properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfa_ref, extra_callback_info1) {
    1..3:  return item_hfa_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfa_ref, 1324) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN1), string(STR_REF), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  6;
    cost_factor:        (7/4) *             110;      
    running_cost_factor:               105;      
    speed:                          45 km/h; 
    power:                      (11/10)*  140 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfa_truck;
    cost_factor:                buycost_hfa_truck;
    articulated_part:           switch_hfa_ref;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_ha_box;
    purchase_cargo_capacity:    purchase_capacity_ha_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfa;
    default:                    switch_spriteset_hfa_ref; 
    purchase:                   switch_purchase_hfa_ref;
    }
}
}

//hf1 refridgerated graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf1_ref, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_ref_6; //default
}

spriteset(spriteset_hf1_ref, "gfx/P/hf_ref_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf1_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf1_ref;
    1:  switch_fuel_icon;
}

//hf1 refridgerated properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf1_ref, extra_callback_info1) {
    1..3:  return item_hf1_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf1_ref, 1325) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_TM1), string(STR_REF), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  6;
    cost_factor:                    (7/4) *             130;      
    running_cost_factor:               135;      
    speed:                          60 km/h; 
    power:                          (11/10)*  210 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (11 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf1_truck;
    cost_factor:                buycost_hf1_truck;
    articulated_part:           switch_hf1_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_box;
    purchase_cargo_capacity:    purchase_capacity_h1_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf1;
    default:                    switch_spriteset_hf1_ref; 
    purchase:                   switch_purchase_hf1_ref;
    }
}
}

//hf2 ref graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf2_ref, position_in_consist ) {
    0:  switch_cf_02;
        switch_trail_ref_6; //default
}

spriteset(spriteset_hf2_ref, "gfx/P/hf_ref_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf2_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf2_ref;
    1:  switch_fuel_icon;
}
//hf2 ref properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf2_ref, extra_callback_info1) {
    1..3:  return item_hf2_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf2_ref, 1326) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_REF), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    (7/4) * 155;      
    running_cost_factor:            170;      
    speed:                          80 km/h; 
    power:                          (11/10)*  380 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hf2_truck;
    cost_factor:                buycost_hf2_truck;
    articulated_part:           switch_hf2_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_box;
    purchase_cargo_capacity:    purchase_capacity_h2_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf2;
    default:                    switch_spriteset_hf2_ref; 
    purchase:                   switch_purchase_hf2_ref;
    }
}
}

//hf3 ref graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf3_ref, position_in_consist ) {
    0:  switch_cf_03;
        switch_trail_ref_6; //default
}

spriteset(spriteset_hf3_ref, "gfx/P/hf_ref_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf3_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf3_ref;
    1:  switch_fuel_icon;
}

//hf3 ref properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf3_ref, extra_callback_info1) {
    1..3:  return item_hf3_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf3_ref, 1327) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_REF), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     175;      
    running_cost_factor:            230;      
    speed:                          100 km/h; 
    power:                          (11/10)*    560 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (16 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hf3_truck;
    cost_factor:                buycost_hf3_truck;
    articulated_part:           switch_hf3_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    visual_effect:              switch_truck_exhaust;
    default:                    switch_spriteset_hf3_ref; 
    purchase:                   switch_purchase_hf3_ref;
    }
}
}

//hf4 ref graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf4_ref, position_in_consist ) {
    0:  switch_cf_04;
        switch_trail_ref_6; //default
}

spriteset(spriteset_hf4_ref, "gfx/P/hf_ref_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf4_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf4_ref;
    1:  switch_fuel_icon;
}

//hf4 ref properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf4_ref, extra_callback_info1) {
    1..3:  return item_hf4_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf4_ref, 1328) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG2), string(STR_REF), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    (7/4) *             195;      
    running_cost_factor:            250;      
    speed:                          140 km/h; 
    power:                          (11/10)*  720;   
    cargo_capacity:                 36;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (19 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hf4_truck;
    cost_factor:                buycost_hf4_truck;
    articulated_part:           switch_hf4_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf4;
    default:                    switch_spriteset_hf4_ref; 
    purchase:                   switch_purchase_hf4_ref;
    }
}
}

//ht1 refridgerated graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht1_ref, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_ref_6; //default
}

spriteset(spriteset_ht1_ref, "gfx/P/ht_ref_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht1_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht1_ref;
    1:  switch_wire_icon;
}

//ht1 refridgerated properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht1_ref, extra_callback_info1) {
    1..3:  return item_ht1_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht1_ref, 2325) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW1), string(STR_REF), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          (11/10)*    400;   
    cargo_capacity:                 20;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht1_truck;
    cost_factor:                buycost_ht1_truck;
    articulated_part:           switch_ht1_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_box;
    purchase_cargo_capacity:    purchase_capacity_h1_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht1;
    default:                    switch_spriteset_ht1_ref; 
    purchase:                   switch_purchase_ht1_ref; 
    }
}
}

//ht2 refridgerated graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht2_ref, position_in_consist ) {
    0:  switch_ct_02;
        switch_trail_ref_6; //default
}

spriteset(spriteset_ht2_ref, "gfx/P/ht_ref_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht2_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht2_ref;
    1:  switch_wire_icon;
}

//ht2 refridgerated properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht2_ref, extra_callback_info1) {
    1..3:  return item_ht2_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht2_ref, 2326) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_REF), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          (11/10)*    740;   
    cargo_capacity:                 26;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (12 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht2_truck;
    cost_factor:                buycost_ht2_truck;
    articulated_part:           switch_ht2_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_box;
    purchase_cargo_capacity:    purchase_capacity_h2_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht2;
    default:                    switch_spriteset_ht2_ref; 
    purchase:                   switch_purchase_ht2_ref;
    }
}
}

//ht3 refridgerated graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht3_ref, position_in_consist ) {
    0:  switch_ct_03;
        switch_trail_ref_6; //default
}

spriteset(spriteset_ht3_ref, "gfx/P/ht_ref_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht3_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht3_ref;
    1:  switch_wire_icon;
}

//ht3 refridgerated properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht3_ref, extra_callback_info1) {
    1..3:  return item_ht3_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht3_ref, 2327) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_LC2), string(STR_REF), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht3_truck;
    cost_factor:                buycost_ht3_truck;
    articulated_part:           switch_ht3_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht3;
    default:                    switch_spriteset_ht3_ref; 
    purchase:                   switch_purchase_ht3_ref;
    }
}
}

//ht4 refridgerated graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht4_ref, position_in_consist ) {
    0:  switch_ct_04;
        switch_trail_ref_6; //default
}

spriteset(spriteset_ht4_ref, "gfx/P/ht_ref_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht4_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht4_ref;
    1:  switch_wire_icon;
}

//ht4 refridgerated properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht4_ref, extra_callback_info1) {
    1..3:  return item_ht4_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht4_ref, 2328) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_KD2), string(STR_REF), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period :              370;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2200;   
    cargo_capacity:                 36;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht4_truck;
    cost_factor:                buycost_ht4_truck;
    articulated_part:           switch_ht4_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht4;
    default:                    switch_spriteset_ht4_ref; 
    purchase:                   switch_purchase_ht4_ref; 
    }
}
}

//hd3 ref graphics

//graphics definition

spriteset(spriteset_hd3_ref, "gfx/P/hd_ref_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd3_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd3_ref;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd3_ref, position_in_consist ) {
    0:  switch_cd_03;
        switch_trail_ref_6; //default
}

//hd3 ref properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd3_ref, extra_callback_info1) {
    1..3:  return item_hd3_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd3_ref, 3327) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_REF), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1200 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd3;
    running_cost_factor:        switch_e_cost_hd3;
    cost_factor:                buycost_hd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd3_box;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    default:                    switch_spriteset_hd3_box; 
    purchase:                   switch_purchase_hd3_ref;
    }
}
}

//hd4 ref graphics

//graphics definition

spriteset(spriteset_hd4_ref, "gfx/P/hd_ref_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd4_ref, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd4_ref;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd4_ref, position_in_consist ) {
    0:  switch_cd_04;
        switch_trail_ref_6; //default
}

//hd4 ref properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd4_ref, extra_callback_info1) {
    1..3:  return item_hd4_ref; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd4_ref, 3328) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_REF), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_REFRIGERATED);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [FOOD, FISH, MILK, FRUT, EOIL, BEAN];
    default_cargo_type:             FOOD;
    cargo_age_period:               370;
    loading_speed:                  8;
    cost_factor:                    (7/4) *     200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2100;   
    cargo_capacity:                 36;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (20 * 5 / 2) ton;
    }
graphics {
    power:                      switch_boost_hd4;
    running_cost_factor:        switch_e_cost_hd4;
    cost_factor:                buycost_hd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd4_ref;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    default:                    switch_spriteset_hd4_ref; 
    purchase:                   switch_purchase_hd4_ref;
    }
}
}

//Stock

// livestock Trailer graphics

spriteset(spriteset_w_s_stock_top_a, "gfx/W/w_s_t_stock_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_s_stock_load_a, "gfx/W/w_s_t_stock_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_stock_a { //short stock top type a brown
    loaded:  [spriteset_w_s_stock_top_a];
    loading: [spriteset_w_s_stock_load_a];
}
spriteset(spriteset_w_s_stock_top_b, "gfx/W/w_s_t_stock_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_stock_load_b, "gfx/W/w_s_t_stock_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_stock_b { //short stock top type b 1cc
    loaded:  [spriteset_w_s_stock_top_b];
    loading: [spriteset_w_s_stock_load_b];
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_stock_a, random_bits ) {
        0..171: spritegroup_w_s_stock_a;
        172..255: spritegroup_w_s_stock_b;
        default: spritegroup_w_s_stock_a;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_stock_b, random_bits ) {
        0..31: spritegroup_w_s_stock_a;
        32..63: spritegroup_w_s_stock_b;
        64..95: spritegroup_w_s_stock_a;
        96..255: spritegroup_w_s_stock_b;
        default: spritegroup_w_s_stock_b;           
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_t_stock, build_year ) {
        0..1899:        spritegroup_w_s_stock_a;
        1900..1939:     switch_w_s_stock_a;
        1940..1964:     switch_w_s_stock_b;
        1965..5000000:  spritegroup_w_s_stock_b;
        default:        spritegroup_w_s_stock_b;            
}
//

switch(FEAT_ROADVEHS, SELF, switch_trail_stock_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_s_f_trail;
    1:  spriteset_w_s_box_floor_a;
    2:  spritegroup_w_s_c_sheep;
    3:  switch_w_s_t_stock;
}

spriteset(spriteset_s_stock_a, "gfx/S/s_stock_02.png") {
    tmpl_short()
}

spriteset(spriteset_s_stock_a_loading, "gfx/S/s_stock_01.png") {
    tmpl_short()
}

spritegroup spritegroup_s_stock_a {
    loaded:  [spriteset_s_stock_a];
    loading: [spriteset_s_stock_a_loading];
}


spriteset(spriteset_s_stock_b, "gfx/S/s_stock_04.png") {
    tmpl_short()
}

spriteset(spriteset_s_stock_b_loading, "gfx/S/s_stock_03.png") {
    tmpl_short()
}

spritegroup spritegroup_s_stock_b {
    loaded:  [spriteset_s_stock_b];
    loading: [spriteset_s_stock_b_loading];
}

spriteset(spriteset_m_stock_a, "gfx/M/m_stock_02.png") {
    tmpl_7()
}

spriteset(spriteset_m_stock_a_loading, "gfx/M/m_stock_01.png") {
    tmpl_7()
}

spritegroup spritegroup_m_stock_a {
    loaded:  [spriteset_m_stock_a];
    loading: [spriteset_m_stock_a_loading];
}

spriteset(spriteset_m_stock_b, "gfx/M/m_stock_04.png") {
    tmpl_7()
}

spriteset(spriteset_m_stock_b_loading, "gfx/M/m_stock_03.png") {
    tmpl_7()
}

spritegroup spritegroup_m_stock_b {
    loaded:  [spriteset_m_stock_b];
    loading: [spriteset_m_stock_b_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_s_stock_a, random_bits ) {
        0..191: spritegroup_s_stock_a;
        192..255: spritegroup_s_stock_b;
        default: spritegroup_s_stock_a;     
}
switch (FEAT_ROADVEHS, SELF, switch_s_stock_b, random_bits ) {
        0..127: spritegroup_s_stock_a;
        128..255: spritegroup_s_stock_b;
        default: spritegroup_s_stock_a;     
}
switch (FEAT_ROADVEHS, SELF, switch_s_stock_c, random_bits ) {
        0..63: spritegroup_s_stock_a;
        64..255: spritegroup_s_stock_b;
        default: spritegroup_s_stock_b;     
}
switch (FEAT_ROADVEHS, SELF, switch_s_stock, build_year ) {
        0..1975: spritegroup_s_stock_a;
        1976..1985: switch_s_stock_a;
        1986..1995: switch_s_stock_b;
        1996..2049: switch_s_stock_c;
        2050..5000000: spritegroup_s_stock_b;
        default: spritegroup_s_stock_a;     
}

switch (FEAT_ROADVEHS, SELF, switch_m_stock_a, random_bits ) {
        0..191: spritegroup_m_stock_a;
        192..255: spritegroup_m_stock_b;
        default: spritegroup_m_stock_a;     
}
switch (FEAT_ROADVEHS, SELF, switch_m_stock_b, random_bits ) {
        0..127: spritegroup_m_stock_a;
        128..255: spritegroup_m_stock_b;
        default: spritegroup_m_stock_a;     
}
switch (FEAT_ROADVEHS, SELF, switch_m_stock_c, random_bits ) {
        0..63: spritegroup_m_stock_a;
        64..255: spritegroup_m_stock_b;
        default: spritegroup_m_stock_b;     
}
switch (FEAT_ROADVEHS, SELF, switch_m_stock, build_year ) {
        0..1975: spritegroup_m_stock_a;
        1976..1985: switch_m_stock_a;
        1986..1995: switch_m_stock_b;
        1996..2049: switch_m_stock_c;
        2050..5000000: spritegroup_m_stock_b;
        default: spritegroup_m_stock_a;     
}

/*
spriteset(spriteset_sfc_stock, "gfx/P/so_stock_01.png") {
    tmpl_p()
}
spriteset(spriteset_sfd_stock, "gfx/P/so_stock_02.png") {
    tmpl_p()
}
*/

//sfb graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfb_stock, position_in_consist ) {
    0:  switch_cf_0b;
        switch_s_stock; //default
}

spriteset(spriteset_sfb_stock, "gfx/P/so_stock_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfb_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfb_stock;
    1:  switch_fuel_icon;
}

//sfb livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfb_stock, extra_callback_info1) {
    1:  return item_sfb_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfb_stock, 1413) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TMB), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;      
    loading_speed:                  6;
    cost_factor:                    100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfb_truck;
    cost_factor:                buycost_cfb_truck;
    articulated_part:           switch_sfb_stock;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_cb_box;
    purchase_cargo_capacity:    purchase_capacity_cb_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfb;
    default:                    switch_spriteset_sfb_stock; 
    purchase:                   switch_purchase_sfb_stock;
    }
}
}

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfa_stock, position_in_consist ) {
    0:  switch_cf_0a;
        switch_s_stock; //default
}

spriteset(spriteset_sfa_stock, "gfx/P/so_stock_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfa_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfa_stock;
    1:  switch_fuel_icon;
}

//sfa livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfa_stock, extra_callback_info1) {
    1:  return item_sfa_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfa_stock, 1414) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BWA), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  6;
    cost_factor:                    110;      
    running_cost_factor:            105;      
    speed:                          45 km/h; 
    power:                          140 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cfa_truck;
    cost_factor:                buycost_cfa_truck;
    articulated_part:           switch_sfa_stock;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_ca_box;
    purchase_cargo_capacity:    purchase_capacity_ca_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfa;
    default:                    switch_spriteset_sfa_stock; 
    purchase:                   switch_purchase_sfa_stock;
    }
}
}

//sf1 livestock graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sf1_stock, position_in_consist ) {
    0:  switch_cf_01;
        switch_s_stock; //default
}

spriteset(spriteset_sf1_stock, "gfx/P/sf_stock_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sf1_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sf1_stock;
    1:  switch_fuel_icon;
}

//sf1 livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf1_stock, extra_callback_info1) {
    1:  return item_sf1_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf1_stock, 1415) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_OG1), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  6;
    cost_factor:                    130;      
    running_cost_factor:            135;      
    speed:                          60 km/h; 
    power:                          210 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cf1_truck;
    cost_factor:                buycost_cf1_truck;
    articulated_part:           switch_sf1_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_box;
    purchase_cargo_capacity:    purchase_capacity_c1_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf1;
    default:                    switch_spriteset_sf1_stock; 
    purchase:                   switch_purchase_sf1_stock;
    }
}
}

//mf2 livestock graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf2_stock, position_in_consist ) {
    0:  switch_cf_02;
        switch_m_stock; //default
}

spriteset(spriteset_mf2_stock, "gfx/P/sf_stock_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf2_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf2_stock;
    1:  switch_fuel_icon;
}

//mf2 livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf2_stock, extra_callback_info1) {
    1:  return item_mf2_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf2_stock, 1416) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_DN2), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  8;
    cost_factor:                    150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          380 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cf2_truck;
    cost_factor:                buycost_cf2_truck;
    articulated_part:           switch_mf2_stock;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_box;
    purchase_cargo_capacity:    purchase_capacity_c2_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf2;
    default:                    switch_spriteset_mf2_stock; 
    purchase:                   switch_purchase_mf2_stock;
    }
}
}

//mf3 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf3_stock, position_in_consist ) {
    0:  switch_cf_03;
        switch_m_stock; //default
}

spriteset(spriteset_mf3_stock, "gfx/P/sf_stock_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf3_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf3_stock;
    1:  switch_fuel_icon;
}

//mf3 livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf3_stock, extra_callback_info1) {
    1:  return item_mf3_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf3_stock, 1417) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BW3), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  8;
    cost_factor:                    170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cf3_truck;
    cost_factor:                buycost_cf3_truck;
    articulated_part:           switch_mf3_stock;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf3;
    default:                    switch_spriteset_mf3_stock; 
    purchase:                   switch_purchase_mf3_stock;
    }
}
}

//mf4 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf4_stock, position_in_consist ) {
    0:  switch_cf_04;
        switch_m_stock; //default
}

spriteset(spriteset_mf4_stock, "gfx/P/sf_stock_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf4_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf4_stock;
    1:  switch_fuel_icon;
}

//mf4 livestock properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf4_stock, extra_callback_info1) {
    1:  return item_mf4_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf4_stock, 1418) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TM4), string(STR_STOCK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;   
    loading_speed:                  8;
    cost_factor:                    190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          720;   
    cargo_capacity:                 36;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         19 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cf4_truck;
    cost_factor:                buycost_cf4_truck;
    articulated_part:           switch_mf4_stock;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf4;
    default:                    switch_spriteset_mf4_stock; 
    purchase:                   switch_purchase_mf4_stock;
    }
}
}

//st1 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_st1_stock, position_in_consist ) {
    0:  switch_ct_01;
        switch_s_stock; //default
}
spriteset(spriteset_st1_stock, "gfx/P/st_stock_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_st1_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st1_stock;
    1:  switch_wire_icon;
}

//st1 livestock properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st1_stock, extra_callback_info1) {
    1:  return item_st1_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st1_stock, 2415) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_BW1), string(STR_STOCK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;    
    loading_speed:                  8;
    cost_factor:                    118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          400;   
    cargo_capacity:                 20;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct1_truck;
    cost_factor:                buycost_ct1_truck;
    articulated_part:           switch_st1_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_box;
    purchase_cargo_capacity:    purchase_capacity_c1_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct1;
    default:                    switch_spriteset_st1_stock; 
    purchase:                   switch_purchase_st1_stock;
    }
}
}

//mt2 livestock graphics

//graphics definition


//mt2 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt2_stock, position_in_consist ) {
    0:  switch_ct_02;
        switch_m_stock; //default
}
spriteset(spriteset_mt2_stock, "gfx/P/st_stock_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt2_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt2_stock;
    1:  switch_wire_icon;
}
//mt2 livestock properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt2_stock, extra_callback_info1) {
    1:  return item_mt2_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt2_stock, 2416) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_KD2), string(STR_STOCK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;    
    loading_speed:                  8;
    cost_factor:                    130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          740;   
    cargo_capacity:                 26;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct2_truck;
    cost_factor:                buycost_ct2_truck;
    articulated_part:           switch_mt2_stock;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_box;
    purchase_cargo_capacity:    purchase_capacity_c2_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct2;
    default:                    switch_spriteset_mt2_stock;
    purchase:                   switch_purchase_mt2_stock;
    }
}
}

//mt3 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt3_stock, position_in_consist ) {
    0:  switch_ct_03;
        switch_m_stock; //default
}
spriteset(spriteset_mt3_stock, "gfx/P/st_stock_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt3_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt3_stock;
    1:  switch_wire_icon;
}

//mt3 livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt3_stock, extra_callback_info1) {
    1:  return item_mt3_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt3_stock, 2417) {
property {
    name:                           string(STR_CONCAT, string(STR_CTMOD_DN3), string(STR_STOCK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;    
    loading_speed:                  8;
    cost_factor:                    148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct3_truck;
    cost_factor:                buycost_ct3_truck;
    articulated_part:           switch_mt3_stock;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct3;
    default:                    switch_spriteset_mt3_stock;
    purchase:                   switch_purchase_mt3_stock;
    }
}
}

//mt4 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt4_stock, position_in_consist ) {
    0:  switch_ct_04;
        switch_m_stock; //default
}

spriteset(spriteset_mt4_stock, "gfx/P/st_stock_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt4_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt4_stock;
    1:  switch_wire_icon;
}

//mt4 livestock properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt4_stock, extra_callback_info1) {
    1:  return item_mt4_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt4_stock, 2418) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_LC4), string(STR_STOCK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;    
    loading_speed:                  8;
    cost_factor:                    168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          2200;   
    cargo_capacity:                 36;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct4_truck;
    cost_factor:                buycost_ct4_truck;
    articulated_part:           switch_mt4_stock;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct4;
    default:                    switch_spriteset_mt4_stock;
    purchase:                   switch_purchase_mt4_stock; 
    }
}
}

//md3 stock graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_md3_stock, position_in_consist ) {
    0:  switch_cd_03;
        switch_m_stock; //default
}

spriteset(spriteset_md3_stock, "gfx/P/sd_stock_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md3_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md3_stock;
    1:  switch_dual_icon;
}

//md3 stock properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md3_stock, extra_callback_info1) {
    1:  return item_md3_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md3_stock, 3417) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_OG3), string(STR_STOCK), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;    
    loading_speed:                  8;
    cost_factor:                    180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }

graphics {
    power:                      switch_boost_cd3;
    running_cost_factor:        switch_e_cost_cd3;
    cost_factor:                buycost_cd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md3_stock;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    default:                    switch_spriteset_md3_stock; 
    purchase:                   switch_purchase_md3_stock;
    }
}
}

//md4 stock graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_md4_stock, position_in_consist ) {
    0:  switch_cd_04;
        switch_m_stock; //default
}

spriteset(spriteset_md4_stock, "gfx/P/sd_stock_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md4_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md4_stock;
    1:  switch_dual_icon;
}

//md4 stock properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md4_stock, extra_callback_info1) {
    1:  return item_md4_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md4_stock, 3418) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_DN4), string(STR_STOCK), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;    
    loading_speed:                  8;
    cost_factor:                    200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          2100;   
    cargo_capacity:                 36;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }

graphics {
    power:                      switch_boost_cd4;
    running_cost_factor:        switch_e_cost_cd4;
    cost_factor:                buycost_cd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md4_stock;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
     default:                   switch_spriteset_md4_stock; 
     purchase:                  switch_purchase_md4_stock;
    }
}
}

//hfb graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfb_stock, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_stock_4; //default
}

spriteset(spriteset_hfb_stock, "gfx/P/ho_stock_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfb_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfb_stock;
    1:  switch_fuel_icon;
}

//hfb livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfb_stock, extra_callback_info1) {
    1..3:  return item_hfb_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfb_stock, 1423) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG1), string(STR_STOCK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  6;
    cost_factor:                    (7/4) *             100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          (11/10)*  100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfb_truck;
    cost_factor:                buycost_hfb_truck;
    articulated_part:           switch_hfb_stock;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_hb_box;
    purchase_cargo_capacity:    purchase_capacity_hb_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfb;
    default:                    switch_spriteset_hfb_stock; 
    purchase:                   switch_purchase_hfb_stock;
    }
}
}

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfa_stock, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_stock_4; //default
}

spriteset(spriteset_hfa_stock, "gfx/P/ho_stock_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfa_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfa_stock;
    1:  switch_fuel_icon;
}

//hfa livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfa_stock, extra_callback_info1) {
    1..3:  return item_hfa_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfa_stock, 1424) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN1), string(STR_STOCK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  6;
    cost_factor:                    (7/4) * 110;      
    running_cost_factor:            105;      
    speed:                          45 km/h; 
    power:                          (11/10)*    140 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hfa_truck;
    cost_factor:                buycost_hfa_truck;
    articulated_part:           switch_hfa_stock;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_ha_box;
    purchase_cargo_capacity:    purchase_capacity_ha_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfa;
    default:                    switch_spriteset_hfa_stock; 
    purchase:                   switch_purchase_hfa_stock;
    }
}
}

//hf1 livestock graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf1_stock, position_in_consist ) {
    0:  switch_cf_01;
        switch_s_stock; //default
}

spriteset(spriteset_hf1_stock, "gfx/P/hf_stock_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf1_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf1_stock;
    1:  switch_fuel_icon;
}

//hf1 livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf1_stock, extra_callback_info1) {
    1..3:  return item_hf1_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf1_stock, 1425) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_TM1), string(STR_STOCK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  6;
    cost_factor:        (7/4) *             130;      
    running_cost_factor:               135;      
    speed:                          60 km/h; 
    power:                      (11/10)*  210 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (11 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hf1_truck;
    cost_factor:                buycost_hf1_truck;
    articulated_part:           switch_hf1_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_box;
    purchase_cargo_capacity:    purchase_capacity_h1_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf1;
    default:                    switch_spriteset_hf1_stock; 
    purchase:                   switch_purchase_hf1_stock;
    }
}
}

//hf2 livestock graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf2_stock, position_in_consist ) {
    0:  switch_cf_02;
        switch_s_stock; //default
}

spriteset(spriteset_hf2_stock, "gfx/P/hf_stock_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf2_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf2_stock;
    1:  switch_fuel_icon;
}

//hf2 livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf2_stock, extra_callback_info1) {
    1..3:  return item_hf2_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf2_stock, 1426) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_STOCK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *             150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          (11/10)*  380 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hf2_truck;
    cost_factor:                buycost_hf2_truck;
    articulated_part:           switch_hf2_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_box;
    purchase_cargo_capacity:    purchase_capacity_h2_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf2;
    default:                    switch_spriteset_hf2_stock; 
    purchase:                   switch_purchase_hf2_stock;
    }
}
}

//hf3 livestock graphics

//graphics definition

spriteset(spriteset_hf3_stock, "gfx/P/hf_stock_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf3_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf3_stock;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf3_stock, position_in_consist ) {
    0:  switch_cf_03;
        switch_s_stock; //default
}


//hf3 livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf3_stock, extra_callback_info1) {
    1..3:  return item_hf3_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf3_stock, 1427) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_STOCK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *     170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          (11/10)*    560 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (16 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hf3_truck;
    cost_factor:                buycost_hf3_truck;
    articulated_part:           switch_hf3_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf3;
    default:                    switch_spriteset_hf3_stock; 
    purchase:                   switch_purchase_hf3_stock;
    }
}
}

//hf4 livestock graphics

//graphics definition

spriteset(spriteset_hf4_stock, "gfx/P/hf_stock_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf4_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf4_stock;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf4_stock, position_in_consist ) {
    0:  switch_cf_04;
        switch_s_stock; //default
}


//hf4 livestock properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf4_stock, extra_callback_info1) {
    1..3:  return item_hf4_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf4_stock, 1428) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG2), string(STR_STOCK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *     190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          (11/10)*    720;   
    cargo_capacity:                 36;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (19 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hf4_truck;
    cost_factor:                buycost_hf4_truck;
    articulated_part:           switch_hf4_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf4;
    default:                    switch_spriteset_hf4_stock; 
    purchase:                   switch_purchase_hf4_stock;
    }
}
}

//ht1 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht1_stock, position_in_consist ) {
    0:  switch_ct_01;
        switch_s_stock; //default
}

spriteset(spriteset_ht1_stock, "gfx/P/ht_stock_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht1_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht1_stock;
    1:  switch_wire_icon;
}

//ht1 livestock properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht1_stock, extra_callback_info1) {
    1..3:  return item_ht1_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht1_stock, 2425) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW1), string(STR_STOCK), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *     118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          (11/10)*    400;   
    cargo_capacity:                 20;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht1_truck;
    cost_factor:                buycost_ht1_truck;
    articulated_part:           switch_ht1_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_box;
    purchase_cargo_capacity:    purchase_capacity_h1_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht1;
    default:                    switch_spriteset_ht1_stock; 
    purchase:                   switch_purchase_ht1_stock;
    }
}
}

//ht2 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht2_stock, position_in_consist ) {
    0:  switch_ct_02;
        switch_s_stock; //default
}

spriteset(spriteset_ht2_stock, "gfx/P/ht_stock_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht2_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht2_stock;
    1:  switch_wire_icon;
}

//ht2 livestock properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht2_stock, extra_callback_info1) {
    1..3:  return item_ht2_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht2_stock, 2426) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_STOCK), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          (11/10)*    740;   
    cargo_capacity:                 26;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (12 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht2_truck;
    cost_factor:                buycost_ht2_truck;
    articulated_part:           switch_ht2_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_box;
    purchase_cargo_capacity:    purchase_capacity_h2_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht2;
    default:                    switch_spriteset_ht2_stock; 
    purchase:                   switch_purchase_ht2_stock; 
    }
}
}

//ht3 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht3_stock, position_in_consist ) {
    0:  switch_ct_03;
        switch_s_stock; //default
}

spriteset(spriteset_ht3_stock, "gfx/P/ht_stock_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht3_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht3_stock;
    1:  switch_wire_icon;
}

//ht3 livestock properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht3_stock, extra_callback_info1) {
    1..3:  return item_ht3_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht3_stock, 2427) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_LC2), string(STR_STOCK), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *     148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht3_truck;
    cost_factor:                buycost_ht3_truck;
    articulated_part:           switch_ht3_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht3;
    default:                    switch_spriteset_ht3_stock; 
    purchase:                   switch_purchase_ht3_stock;
    }
}
}

//ht4 livestock graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht4_stock, position_in_consist ) {
    0:  switch_ct_04;
        switch_s_stock; //default
}

spriteset(spriteset_ht4_stock, "gfx/P/ht_stock_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht4_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht4_stock;
    1:  switch_wire_icon;
}
//ht4 livestock properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht4_stock, extra_callback_info1) {
    1..3:  return item_ht4_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht4_stock, 2428) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_KD2), string(STR_STOCK), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *     168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2200;   
    cargo_capacity:                 36;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht4_truck;
    cost_factor:                buycost_ht4_truck;
    articulated_part:           switch_ht4_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht4;
    default:                    switch_spriteset_ht4_stock; 
    purchase:                   switch_purchase_ht4_stock;
    }
}
}

//hd3 stock graphics

//graphics definition

spriteset(spriteset_hd3_stock, "gfx/P/hd_stock_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd3_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd3_stock;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd3_stock, position_in_consist ) {
    0:  switch_cd_03;
        switch_s_stock; //default
}

//hd3 stock properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd3_stock, extra_callback_info1) {
    1..3:  return item_hd3_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd3_stock, 3427) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_STOCK), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST; 
    loading_speed:                  8;
    cost_factor:                    (7/4) *     180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1200 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd3;
    running_cost_factor:        switch_e_cost_hd3;
    cost_factor:                buycost_hd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd3_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    default:                    switch_spriteset_hd3_stock; 
    purchase:                   switch_purchase_hd3_stock;
    }
}
}

//hd4 stock graphics

//graphics definition

spriteset(spriteset_hd4_stock, "gfx/P/hd_stock_04.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_hd4_stock, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd4_stock;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd4_stock, position_in_consist ) {
    0:  switch_cd_04;
        switch_s_stock; //default
}

//hd4 stock properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd4_stock, extra_callback_info1) {
    1..3:  return item_hd4_stock; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd4_stock, 3428) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_STOCK), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [LVST];
    default_cargo_type:             LVST; 
    loading_speed:                  8;
    cost_factor:                    (7/4) *     200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2100;   
    cargo_capacity:                 36;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (20 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd4;
    running_cost_factor:        switch_e_cost_hd4;
    cost_factor:                buycost_hd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd4_stock;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    default:                    switch_spriteset_hd4_stock; 
    purchase:                   switch_purchase_hd4_stock;
    }
}
}



//Flatbeds

// Flatbed Trailer graphics

switch (FEAT_ROADVEHS, SELF, switch_w_s_c_crate, random_bits ) {
    0..63:         spritegroup_w_s_c_crate_a;
    64..127:       spritegroup_w_s_c_crate_a;
    128..191:      spritegroup_w_s_c_crate_b;
    192..255:      spritegroup_w_s_c_crate_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_c_cupr, random_bits ) {
    0..63:         spritegroup_w_s_c_cupr_b;
    64..127:       spritegroup_w_s_c_cupr_a;
    128..191:      spritegroup_w_s_c_cupr_b;
    192..255:      spritegroup_w_s_c_cupr_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_c_food, random_bits ) {
    0..63:         spritegroup_w_s_c_food_a;
    64..127:       spritegroup_w_s_c_food_b;
    128..191:      spritegroup_w_s_c_food_a;
    192..255:      spritegroup_w_s_c_food_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_c_iron, random_bits ) {
    0..63:         spritegroup_w_s_c_iron_b;
    64..127:       spritegroup_w_s_c_iron_a;
    128..191:      spritegroup_w_s_c_iron_a;
    192..255:      spritegroup_w_s_c_iron_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_c_paper, random_bits ) {
    0..63:         spritegroup_w_s_c_paper_a;
    64..127:       spritegroup_w_s_c_paper_b;
    128..191:      spritegroup_w_s_c_paper_b;
    192..255:      spritegroup_w_s_c_paper_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_c_steel, random_bits ) {
    0..63:         spritegroup_w_s_c_steel_b;
    64..127:       spritegroup_w_s_c_steel_b;
    128..191:      spritegroup_w_s_c_steel_a;
    192..255:      spritegroup_w_s_c_steel_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_c_tfmr, random_bits ) {
    0..63:         spritegroup_w_s_c_tfmr_a;
    64..127:       spritegroup_w_s_c_tfmr_b;
    128..191:      spritegroup_w_s_c_tfmr_c;
    192..255:      spritegroup_w_s_c_tfmr_d;
}

switch (FEAT_ROADVEHS, SELF, switch_w_m_c_crate, random_bits ) {
    0..63:         spritegroup_w_m_c_crate_a;
    64..127:       spritegroup_w_m_c_crate_a;
    128..191:      spritegroup_w_m_c_crate_b;
    192..255:      spritegroup_w_m_c_crate_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_cupr, random_bits ) {
    0..63:         spritegroup_w_m_c_cupr_b;
    64..127:       spritegroup_w_m_c_cupr_a;
    128..191:      spritegroup_w_m_c_cupr_b;
    192..255:      spritegroup_w_m_c_cupr_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_food, random_bits ) {
    0..63:         spritegroup_w_m_c_food_a;
    64..127:       spritegroup_w_m_c_food_b;
    128..191:      spritegroup_w_m_c_food_a;
    192..255:      spritegroup_w_m_c_food_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_iron, random_bits ) {
    0..63:         spritegroup_w_m_c_iron_b;
    64..127:       spritegroup_w_m_c_iron_a;
    128..191:      spritegroup_w_m_c_iron_a;
    192..255:      spritegroup_w_m_c_iron_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_paper, random_bits ) {
    0..63:         spritegroup_w_m_c_paper_a;
    64..127:       spritegroup_w_m_c_paper_b;
    128..191:      spritegroup_w_m_c_paper_b;
    192..255:      spritegroup_w_m_c_paper_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_steel, random_bits ) {
    0..63:         spritegroup_w_m_c_steel_b;
    64..127:       spritegroup_w_m_c_steel_b;
    128..191:      spritegroup_w_m_c_steel_a;
    192..255:      spritegroup_w_m_c_steel_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_c_tfmr, random_bits ) {
    0..63:         spritegroup_w_m_c_tfmr_a;
    64..127:       spritegroup_w_m_c_tfmr_a;
    128..191:      spritegroup_w_m_c_tfmr_b;
    192..255:      spritegroup_w_m_c_tfmr_b;
}

switch (FEAT_ROADVEHS, SELF, switch_w_l_c_crate, random_bits ) {
    0..63:         spritegroup_w_l_c_crate_a;
    64..127:       spritegroup_w_l_c_crate_a;
    128..191:      spritegroup_w_l_c_crate_a;
    192..255:      spritegroup_w_l_c_crate_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_cupr, random_bits ) {
    0..63:         spritegroup_w_l_c_cupr_b;
    64..127:       spritegroup_w_l_c_cupr_a;
    128..191:      spritegroup_w_l_c_cupr_b;
    192..255:      spritegroup_w_l_c_cupr_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_food, random_bits ) {
    0..63:         spritegroup_w_l_c_food_a;
    64..127:       spritegroup_w_l_c_food_a;
    128..191:      spritegroup_w_l_c_food_a;
    192..255:      spritegroup_w_l_c_food_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_iron, random_bits ) {
    0..63:         spritegroup_w_l_c_iron_b;
    64..127:       spritegroup_w_l_c_iron_a;
    128..191:      spritegroup_w_l_c_iron_a;
    192..255:      spritegroup_w_l_c_iron_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_paper, random_bits ) {
    0..63:         spritegroup_w_l_c_paper_a;
    64..127:       spritegroup_w_l_c_paper_a;
    128..191:      spritegroup_w_l_c_paper_a;
    192..255:      spritegroup_w_l_c_paper_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_steel, random_bits ) {
    0..63:         spritegroup_w_l_c_steel_b;
    64..127:       spritegroup_w_l_c_steel_b;
    128..191:      spritegroup_w_l_c_steel_a;
    192..255:      spritegroup_w_l_c_steel_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_c_tfmr, random_bits ) {
    0..63:         spritegroup_w_l_c_tfmr_a;
    64..127:       spritegroup_w_l_c_tfmr_b;
    128..191:      spritegroup_w_l_c_tfmr_a;
    192..255:      spritegroup_w_l_c_tfmr_b;
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_c_flat, cargo_type_in_veh ) {
    PAPR: switch_w_s_c_paper;
    STEL: switch_w_s_c_steel;
    METL: switch_w_s_c_steel;
    IRON: switch_w_s_c_iron;
    BDMT: spritegroup_w_s_c_board;
    WOOD: spritegroup_w_s_c_log;
    COPR: switch_w_s_c_cupr;
    FOOD: switch_w_s_c_food;
    FRUT: switch_w_s_c_food;
    WDPR: spritegroup_w_s_c_board;
    POWR: switch_w_s_c_tfmr;
    PIPE: spritegroup_w_s_c_pipe;
    ZINC: spritegroup_w_s_c_steel_b;
    VEHI: switch_w_s_c_vehs;
    VBOD: switch_w_s_c_vbod;
    default: switch_w_s_c_crate;        
}

switch (FEAT_ROADVEHS, SELF, switch_w_m_c_flat, cargo_type_in_veh ) {
    PAPR: switch_w_m_c_paper;
    STEL: switch_w_m_c_steel;
    METL: switch_w_m_c_steel;
    IRON: switch_w_m_c_iron;
    BDMT: spritegroup_w_m_c_board;
    WOOD: spritegroup_w_m_c_log;
    COPR: switch_w_m_c_cupr;
    FOOD: switch_w_m_c_food;
    FRUT: switch_w_m_c_food;
    WDPR: spritegroup_w_m_c_board;
    POWR: switch_w_m_c_tfmr;
    PIPE: spritegroup_w_m_c_pipe;
    ZINC: spritegroup_w_m_c_steel_b;
    VEHI: switch_w_m_c_vehs;
    VBOD: switch_w_m_c_vbod;
    default: switch_w_m_c_crate;        
    }

switch (FEAT_ROADVEHS, SELF, switch_w_l_c_flat, cargo_type_in_veh ) {
    PAPR: switch_w_l_c_paper;
    STEL: switch_w_l_c_steel;
    METL: switch_w_l_c_steel;
    IRON: switch_w_l_c_iron;
    BDMT: spritegroup_w_l_c_board;
    WOOD: spritegroup_w_l_c_log;
    COPR: switch_w_l_c_cupr;
    FOOD: switch_w_l_c_food;
    FRUT: switch_w_l_c_food;
    WDPR: spritegroup_w_l_c_board;
    POWR: switch_w_l_c_tfmr;
    PIPE: spritegroup_w_l_c_pipe;
    ZINC: spritegroup_w_l_c_steel_b;
    VEHI: switch_w_l_c_vehs;
    VBOD: switch_w_l_c_vbod;
    default: switch_w_l_c_crate;        
}

spriteset(spriteset_w_s_f_flat_a, "gfx/W/w_s_f_flat_01.png") { //short flatbed floor stake 1cc
    tmpl_7()
}
spriteset(spriteset_w_s_f_flat_b, "gfx/W/w_s_f_flat_02.png") { //short flatbed floor no stake 1cc
    tmpl_7()
}
spriteset(spriteset_w_s_f_flat_c, "gfx/W/w_s_f_flat_03.png") { //short flatbed floor stake 2cc
    tmpl_7()
}
spriteset(spriteset_w_s_f_flat_d, "gfx/W/w_s_f_flat_04.png") { //short flatbed floor no stake 2cc
    tmpl_7()
}

spriteset(spriteset_w_m_f_flat_a, "gfx/W/w_m_f_flat_01.png") { //medium flatbed floor stake 1cc
    tmpl_7()
}
spriteset(spriteset_w_m_f_flat_b, "gfx/W/w_m_f_flat_02.png") { //medium flatbed floor no stake 1cc
    tmpl_7()
}
spriteset(spriteset_w_m_f_flat_c, "gfx/W/w_m_f_flat_03.png") { //medium flatbed floor stake 2cc
    tmpl_7()
}
spriteset(spriteset_w_m_f_flat_d, "gfx/W/w_m_f_flat_04.png") { //medium flatbed floor no stake 2cc
    tmpl_7()
}

spriteset(spriteset_w_l_f_flat_a, "gfx/W/w_l_f_flat_trail_a_01.png") { //Long flatbed floor no stake 1cc/1cc
    tmpl_7()
}
spriteset(spriteset_w_l_f_flat_b, "gfx/W/w_l_f_flat_trail_a_02.png") { //Long flatbed floor no stake 2cc/1cc
    tmpl_7()
}
spriteset(spriteset_w_l_f_flat_c, "gfx/W/w_l_f_flat_trail_a_03.png") { //Long flatbed floor no stake 1cc/2cc
    tmpl_7()
}
spriteset(spriteset_w_l_f_flat_d, "gfx/W/w_l_f_flat_trail_a_04.png") { //Long flatbed floor no stake 2cc/2cc
    tmpl_7()
}

spriteset(spriteset_w_l_f_flat_e, "gfx/W/w_l_f_flat_trail_b_01.png") { //Long flatbed floor stake 1cc/1cc
    tmpl_7()
}
spriteset(spriteset_w_l_f_flat_f, "gfx/W/w_l_f_flat_trail_b_02.png") { //Long flatbed floor stake 2cc/1cc
    tmpl_7()
}
spriteset(spriteset_w_l_f_flat_g, "gfx/W/w_l_f_flat_trail_b_03.png") { //Long flatbed floor stake 1cc/2cc
    tmpl_7()
}
spriteset(spriteset_w_l_f_flat_h, "gfx/W/w_l_f_flat_trail_b_04.png") { //Long flatbed floor stake 2cc/2cc
    tmpl_7()
}

spriteset(spriteset_w_s_flat_side_a, "gfx/W/w_s_t_stake_01.png") { //short flatbed side stake 
    tmpl_7()
}

spriteset(spriteset_w_m_flat_side_a, "gfx/W/w_m_t_stake_01.png") { //medium flatbed side stake 
    tmpl_7()
}

spriteset(spriteset_w_l_flat_side_a, "gfx/W/w_l_t_stake_01.png") { //Long flatbed side stake 
    tmpl_7()
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_f_flat_a, random_bits ) {
    0..127:         spriteset_w_s_f_flat_a;
    128..255:       spriteset_w_s_f_flat_c;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_f_flat_b, random_bits ) {
    0..127:         spriteset_w_s_f_flat_b;
    128..255:       spriteset_w_s_f_flat_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_f_flat_stake, cargo_type_in_veh ) {
    WOOD:           switch_w_s_f_flat_a;
    FICR:           switch_w_s_f_flat_a;
    default:        switch_w_s_f_flat_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_t_flat_stake, cargo_type_in_veh ) {
    WOOD:           spriteset_w_s_flat_side_a;
    FICR:           spriteset_w_s_flat_side_a;
    default:        spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_f_flat_a, random_bits ) {
    0..127:         spriteset_w_m_f_flat_a;
    128..255:       spriteset_w_m_f_flat_c;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_f_flat_b, random_bits ) {
    0..127:         spriteset_w_m_f_flat_b;
    128..255:       spriteset_w_m_f_flat_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_f_flat_stake, cargo_type_in_veh ) {
    WOOD:           switch_w_m_f_flat_a;
    FICR:           switch_w_m_f_flat_a;
    default:        switch_w_m_f_flat_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_t_flat_stake, cargo_type_in_veh ) {
    WOOD:           spriteset_w_m_flat_side_a;
    FICR:           spriteset_w_m_flat_side_a;
    default:        spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_f_flat_a, random_bits ) {
    0..63:         spriteset_w_l_f_flat_a;
    64..127:       spriteset_w_l_f_flat_b;
    128..191:       spriteset_w_l_f_flat_c;
    192..255:       spriteset_w_l_f_flat_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_f_flat_e, random_bits ) {
    0..63:         spriteset_w_l_f_flat_e;
    64..127:       spriteset_w_l_f_flat_f;
    128..191:       spriteset_w_l_f_flat_g;
    192..255:       spriteset_w_l_f_flat_h;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_f_flat_stake, cargo_type_in_veh ) {
    WOOD:           switch_w_l_f_flat_e;
    FICR:           switch_w_l_f_flat_e;
    default:        switch_w_l_f_flat_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_l_t_flat_stake, cargo_type_in_veh ) {
    WOOD:           spriteset_w_l_flat_side_a;
    FICR:           spriteset_w_l_flat_side_a;
    default:        spriteset_x_null;
}
//
switch(FEAT_ROADVEHS, SELF, switch_trail_flat_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_s_f_trail;
    1:  switch_w_s_f_flat_stake;
    2:  switch_w_s_c_flat;
    3:  switch_w_s_t_flat_stake;
}
switch(FEAT_ROADVEHS, SELF, switch_trail_flat_6, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_m_f_trail;
    1:  switch_w_m_f_flat_stake;
    2:  switch_w_m_c_flat;
    3:  switch_w_m_t_flat_stake;
}

switch(FEAT_ROADVEHS, SELF, switch_trail_flat_7, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_x_null;
    1:  switch_w_l_f_flat_stake;
    2:  switch_w_l_c_flat;
    3:  switch_w_l_t_flat_stake;
}

/* ==== these cargo switches currently unused
spriteset(spriteset_s_flat_cupr_1, "gfx/S/s_flat_cupr_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_cupr_2, "gfx/S/s_flat_cupr_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_cupr_3, "gfx/S/s_flat_cupr_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_cupr_4, "gfx/S/s_flat_cupr_04.png") {
    tmpl_short()
}
spritegroup spritegroup_s_flat_cupr {
    loaded:  [spriteset_s_flat_cupr_1, spriteset_s_flat_cupr_2, spriteset_s_flat_cupr_3, spriteset_s_flat_cupr_4];
    loading: [spriteset_s_flat_cupr_1, spriteset_s_flat_cupr_2, spriteset_s_flat_cupr_3, spriteset_s_flat_cupr_4];
}

spriteset(spriteset_s_flat_steel_1, "gfx/S/s_flat_steel_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_steel_2, "gfx/S/s_flat_steel_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_steel_3, "gfx/S/s_flat_steel_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_steel_4, "gfx/S/s_flat_steel_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_flat_steel {
    loaded:  [spriteset_s_flat_steel_1, spriteset_s_flat_steel_2, spriteset_s_flat_steel_3, spriteset_s_flat_steel_4];
    loading: [spriteset_s_flat_steel_1, spriteset_s_flat_steel_2, spriteset_s_flat_steel_3, spriteset_s_flat_steel_4];
}

spriteset(spriteset_s_flat_crate_1, "gfx/S/s_flat_crate_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_crate_2, "gfx/S/s_flat_crate_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_crate_3, "gfx/S/s_flat_crate_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_crate_4, "gfx/S/s_flat_crate_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_flat_crate {
    loaded:  [spriteset_s_flat_crate_1, spriteset_s_flat_crate_2, spriteset_s_flat_crate_3, spriteset_s_flat_crate_4];
    loading: [spriteset_s_flat_crate_1, spriteset_s_flat_crate_2, spriteset_s_flat_crate_3, spriteset_s_flat_crate_4];
}

spriteset(spriteset_s_flat_board_1, "gfx/S/s_flat_board_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_board_2, "gfx/S/s_flat_board_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_board_3, "gfx/S/s_flat_board_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_board_4, "gfx/S/s_flat_board_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_flat_board {
    loaded:  [spriteset_s_flat_board_1, spriteset_s_flat_board_2, spriteset_s_flat_board_3, spriteset_s_flat_board_4];
    loading: [spriteset_s_flat_board_1, spriteset_s_flat_board_2, spriteset_s_flat_board_3, spriteset_s_flat_board_4];
}

spriteset(spriteset_s_flat_log_1, "gfx/S/s_flat_log_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_log_2, "gfx/S/s_flat_log_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_log_3, "gfx/S/s_flat_log_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_log_4, "gfx/S/s_flat_log_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_flat_log {
    loaded:  [spriteset_s_flat_log_1, spriteset_s_flat_log_2, spriteset_s_flat_log_3, spriteset_s_flat_log_4];
    loading: [spriteset_s_flat_log_1, spriteset_s_flat_log_2, spriteset_s_flat_log_3, spriteset_s_flat_log_4];
}

spriteset(spriteset_s_flat_food_1, "gfx/S/s_flat_food_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_food_2, "gfx/S/s_flat_food_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_food_3, "gfx/S/s_flat_food_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_food_4, "gfx/S/s_flat_food_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_flat_food {
    loaded:  [spriteset_s_flat_food_1, spriteset_s_flat_food_2, spriteset_s_flat_food_3, spriteset_s_flat_food_4];
    loading: [spriteset_s_flat_food_1, spriteset_s_flat_food_2, spriteset_s_flat_food_3, spriteset_s_flat_food_4];
}

spriteset(spriteset_s_flat_paper_1, "gfx/S/s_flat_paper_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_paper_2, "gfx/S/s_flat_paper_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_paper_3, "gfx/S/s_flat_paper_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_flat_paper_4, "gfx/S/s_flat_paper_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_flat_paper {
    loaded:  [spriteset_s_flat_paper_1, spriteset_s_flat_paper_2, spriteset_s_flat_paper_3, spriteset_s_flat_paper_4];
    loading: [spriteset_s_flat_paper_1, spriteset_s_flat_paper_2, spriteset_s_flat_paper_3, spriteset_s_flat_paper_4];
}

spriteset(spriteset_m_flat_cupr_1, "gfx/M/m_flat_cupr_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_cupr_2, "gfx/M/m_flat_cupr_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_cupr_3, "gfx/M/m_flat_cupr_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_cupr_4, "gfx/M/m_flat_cupr_04.png") {
    tmpl_7()
}
spritegroup spritegroup_m_flat_cupr {
    loaded:  [spriteset_m_flat_cupr_1, spriteset_m_flat_cupr_2, spriteset_m_flat_cupr_3, spriteset_m_flat_cupr_4];
    loading: [spriteset_m_flat_cupr_1, spriteset_m_flat_cupr_2, spriteset_m_flat_cupr_3, spriteset_m_flat_cupr_4];
}

spriteset(spriteset_m_flat_steel_1, "gfx/M/m_flat_steel_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_steel_2, "gfx/M/m_flat_steel_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_steel_3, "gfx/M/m_flat_steel_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_steel_4, "gfx/M/m_flat_steel_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_flat_steel {
    loaded:  [spriteset_m_flat_steel_1, spriteset_m_flat_steel_2, spriteset_m_flat_steel_3, spriteset_m_flat_steel_4];
    loading: [spriteset_m_flat_steel_1, spriteset_m_flat_steel_2, spriteset_m_flat_steel_3, spriteset_m_flat_steel_4];
}

spriteset(spriteset_m_flat_crate_1, "gfx/M/m_flat_crate_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_crate_2, "gfx/M/m_flat_crate_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_crate_3, "gfx/M/m_flat_crate_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_crate_4, "gfx/M/m_flat_crate_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_flat_crate {
    loaded:  [spriteset_m_flat_crate_1, spriteset_m_flat_crate_2, spriteset_m_flat_crate_3, spriteset_m_flat_crate_4];
    loading: [spriteset_m_flat_crate_1, spriteset_m_flat_crate_2, spriteset_m_flat_crate_3, spriteset_m_flat_crate_4];
}

spriteset(spriteset_m_flat_board_1, "gfx/M/m_flat_board_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_board_2, "gfx/M/m_flat_board_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_board_3, "gfx/M/m_flat_board_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_board_4, "gfx/M/m_flat_board_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_flat_board {
    loaded:  [spriteset_m_flat_board_1, spriteset_m_flat_board_2, spriteset_m_flat_board_3, spriteset_m_flat_board_4];
    loading: [spriteset_m_flat_board_1, spriteset_m_flat_board_2, spriteset_m_flat_board_3, spriteset_m_flat_board_4];
}

spriteset(spriteset_m_flat_log_1, "gfx/M/m_flat_log_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_log_2, "gfx/M/m_flat_log_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_log_3, "gfx/M/m_flat_log_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_log_4, "gfx/M/m_flat_log_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_flat_log {
    loaded:  [spriteset_m_flat_log_1, spriteset_m_flat_log_2, spriteset_m_flat_log_3, spriteset_m_flat_log_4];
    loading: [spriteset_m_flat_log_1, spriteset_m_flat_log_2, spriteset_m_flat_log_3, spriteset_m_flat_log_4];
}

spriteset(spriteset_m_flat_food_1, "gfx/M/m_flat_food_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_food_2, "gfx/M/m_flat_food_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_food_3, "gfx/M/m_flat_food_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_food_4, "gfx/M/m_flat_food_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_flat_food {
    loaded:  [spriteset_m_flat_food_1, spriteset_m_flat_food_2, spriteset_m_flat_food_3, spriteset_m_flat_food_4];
    loading: [spriteset_m_flat_food_1, spriteset_m_flat_food_2, spriteset_m_flat_food_3, spriteset_m_flat_food_4];
}

spriteset(spriteset_m_flat_paper_1, "gfx/M/m_flat_paper_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_paper_2, "gfx/M/m_flat_paper_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_paper_3, "gfx/M/m_flat_paper_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_flat_paper_4, "gfx/M/m_flat_paper_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_flat_paper {
    loaded:  [spriteset_m_flat_paper_1, spriteset_m_flat_paper_2, spriteset_m_flat_paper_3, spriteset_m_flat_paper_4];
    loading: [spriteset_m_flat_paper_1, spriteset_m_flat_paper_2, spriteset_m_flat_paper_3, spriteset_m_flat_paper_4];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_s_flat, cargo_type_in_veh ) {
    PAPR: spritegroup_s_flat_paper;
    STEL: spritegroup_s_flat_steel;
    METL: spritegroup_s_flat_steel;
    BDMT: spritegroup_s_flat_board;
    WOOD: spritegroup_s_flat_log;
    COPR: spritegroup_s_flat_cupr;
    FOOD: spritegroup_s_flat_food;
    FRUT: spritegroup_s_flat_food;
    WDPR: spritegroup_s_flat_board;
        default: spritegroup_s_flat_crate;
        
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_m_flat, cargo_type_in_veh ) {
    PAPR: spritegroup_m_flat_paper;
    STEL: spritegroup_m_flat_steel;
    METL: spritegroup_m_flat_steel;
    BDMT: spritegroup_m_flat_board;
    WOOD: spritegroup_m_flat_log;
    COPR: spritegroup_m_flat_cupr;
    FOOD: spritegroup_m_flat_food;
    FRUT: spritegroup_m_flat_food;
    WDPR: spritegroup_m_flat_board;
        default: spritegroup_m_flat_crate;
        
}
*/

/*
spriteset(spriteset_sfc_flat, "gfx/P/so_flat_01.png") {
    tmpl_p()
}
spriteset(spriteset_sfd_flat, "gfx/P/so_flat_02.png") {
    tmpl_p()
}
*/

// Flatbed Trailer capacity

switch (FEAT_ROADVEHS, SELF, switch_capacity_cb_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*16)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ca_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*20)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c1_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*22)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c2_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*30)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c3_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*36)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c4_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*42)/2);
}

purchase_capacity_cb_flat = ((param_capacity*16)/4);

purchase_capacity_ca_flat = ((param_capacity*20)/4);

purchase_capacity_c1_flat = ((param_capacity*22)/4);

purchase_capacity_c2_flat = ((param_capacity*30)/4);

purchase_capacity_c3_flat = ((param_capacity*36)/4);

purchase_capacity_c4_flat = ((param_capacity*42)/4);


switch (FEAT_ROADVEHS, SELF, switch_capacity_hb_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*16)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ha_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*20)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h1_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*22)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h2_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*26)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h3_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*31)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h4_flat, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*34)/2);
}

purchase_capacity_hb_flat = ((param_capacity*48)/8);

purchase_capacity_ha_flat = ((param_capacity*60)/8);

purchase_capacity_h1_flat = ((param_capacity*66)/8);

purchase_capacity_h2_flat = ((param_capacity*78)/8);

purchase_capacity_h3_flat = ((param_capacity*93)/8);

purchase_capacity_h4_flat = ((param_capacity*102)/8);

//sfb flatbed graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfb_flat, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_flat_6; //default
}

spriteset(spriteset_sfb_flat, "gfx/P/so_flat_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfb_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfb_flat;
    1:  switch_fuel_icon;
}

//sfb flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfb_flat, extra_callback_info1) {
    1:  return item_sfb_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfb_flat, 1613) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TMB), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  8;
    cost_factor:                    100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfb_truck;
    cost_factor:                buycost_cfb_truck;
    articulated_part:           switch_sfb_flat;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_cb_flat;
    purchase_cargo_capacity:    purchase_capacity_cb_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfb;
    default:                    switch_spriteset_sfb_flat;
    purchase:                   switch_purchase_sfb_flat;
    }
}
}

//sfa flatbed graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfa_flat, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_flat_6; //default
}

spriteset(spriteset_sfa_flat, "gfx/P/so_flat_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfa_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfa_flat;
    1:  switch_fuel_icon;
}

//sfa flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfa_flat, extra_callback_info1) {
    1:  return item_sfa_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfa_flat, 1614) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_DNA), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  10;
    cost_factor:                    110;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          140 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfa_truck;
    cost_factor:                buycost_cfa_truck;
    articulated_part:           switch_sfa_flat;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_ca_flat;
    purchase_cargo_capacity:    purchase_capacity_ca_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfa;
    default:                    switch_spriteset_sfa_flat;
    purchase:                   switch_purchase_sfa_flat; 
    }
}
}

//sf1 flatbed graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_sf1_flat, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_flat_6; //default
}

spriteset(spriteset_sf1_flat, "gfx/P/sf_flat_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sf1_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sf1_flat;
    1:  switch_fuel_icon;
}

//sf1 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf1_flat, extra_callback_info1) {
    1:  return item_sf1_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf1_flat, 1615) {
property {
    name:                           string(STR_CONCAT, string(STR_CFMOD_OG1), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    130;      
    running_cost_factor:            125;      
    speed:                          65 km/h; 
    power:                          210 hp;   
    cargo_capacity:                 22;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf1_truck;
    cost_factor:                buycost_cf1_truck;
    articulated_part:           switch_sf1_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_flat;
    purchase_cargo_capacity:    purchase_capacity_c1_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf1;
    default:                    switch_spriteset_sf1_flat;
    purchase:                   switch_purchase_sf1_flat; 
    }
}
}

//mf2 flatbed graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf2_flat, position_in_consist ) {
    0:  switch_cf_02;
        switch_trail_flat_7; //default
}

spriteset(spriteset_mf2_flat, "gfx/P/sf_flat_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf2_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf2_flat;
    1:  switch_fuel_icon;
}

//mf2 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf2_flat, extra_callback_info1) {
    1:  return item_mf2_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf2_flat, 1616) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_OG2), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          380 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf2_truck;
    cost_factor:                buycost_cf2_truck;
    articulated_part:           switch_mf2_flat;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_flat;
    purchase_cargo_capacity:    purchase_capacity_c2_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf2;
    default:                    switch_spriteset_mf2_flat;
    purchase:                   switch_purchase_mf2_flat; 
    }
}
}

//mf3 flatbed graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf3_flat, position_in_consist ) {
    0:  switch_cf_03;
        switch_trail_flat_7; //default
}

spriteset(spriteset_mf3_flat, "gfx/P/sf_flat_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf3_flat;
    1:  switch_fuel_icon;
}

//mf3 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf3_flat, extra_callback_info1) {
    1:  return item_mf3_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf3_flat, 1617) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TM3), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         19 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf3_truck;
    cost_factor:                buycost_cf3_truck;
    articulated_part:           switch_mf3_flat;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_flat;
    purchase_cargo_capacity:    purchase_capacity_c3_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf3;
    default:                    switch_spriteset_mf3_flat; 
    purchase:                   switch_purchase_mf3_flat;
    }
}
}

//mf4 flatbed graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf4_flat, position_in_consist ) {
    0:  switch_cf_04;
        switch_trail_flat_7; //default
}

spriteset(spriteset_mf4_flat, "gfx/P/sf_flat_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf4_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf4_flat;
    1:  switch_fuel_icon;
}

//mf4 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf4_flat, extra_callback_info1) {
    1:  return item_mf4_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf4_flat, 1618) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BW4), string(STR_FLAT), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 39;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf4_truck;
    cost_factor:                buycost_cf4_truck;
    articulated_part:           switch_mf4_flat;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_flat;
    purchase_cargo_capacity:    purchase_capacity_c4_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf4;
    default:                    switch_spriteset_mf4_flat; 
    purchase:                   switch_purchase_mf4_flat;
    }
}
}

//st1 flatbed graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_st1_flat, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_flat_6; //default
}
spriteset(spriteset_st1_flat, "gfx/P/st_flat_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_st1_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st1_flat;
    1:  switch_wire_icon;
}

//st1 flatbed properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st1_flat, extra_callback_info1) {
    1:  return item_st1_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st1_flat, 2615) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_DN1), string(STR_FLAT), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          400;   
    cargo_capacity:                 22;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct1_truck;
    cost_factor:                buycost_ct1_truck;
    articulated_part:           switch_st1_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_flat;
    purchase_cargo_capacity:    purchase_capacity_c1_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct1;
    default:                    switch_spriteset_st1_flat; 
    purchase:                   switch_purchase_st1_flat;
    }
}
}

//mt2 flatbed graphics

//graphics definition


//mt2 flatbed graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt2_flat, position_in_consist ) {
    0:  switch_ct_02;
        switch_trail_flat_7; //default
}
spriteset(spriteset_mt2_flat, "gfx/P/st_flat_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt2_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt2_flat;
    1:  switch_wire_icon;
}

//mt2 flatbed properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt2_flat, extra_callback_info1) {
    1:  return item_mt2_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt2_flat, 2616) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_LC2), string(STR_FLAT), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          740;   
    cargo_capacity:                 30;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct2_truck;
    cost_factor:                buycost_ct2_truck;
    articulated_part:           switch_mt2_flat;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_flat;
    purchase_cargo_capacity:    purchase_capacity_c2_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct2;
    default:                    switch_spriteset_mt2_flat;
    purchase:                   switch_purchase_mt2_flat;
    }
}
}

//mt3 flatbed graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt3_flat, position_in_consist ) {
    0:  switch_ct_03;
        switch_trail_flat_7; //default
}
spriteset(spriteset_mt3_flat, "gfx/P/st_flat_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt3_flat;
    1:  switch_wire_icon;
}

//mt3 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt3_flat, extra_callback_info1) {
    1:  return item_mt3_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt3_flat, 2617) {
property {
    name:                           string(STR_CONCAT, string(STR_CTMOD_BW3), string(STR_FLAT), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct3_truck;
    cost_factor:                buycost_ct3_truck;
    articulated_part:           switch_mt3_flat;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_flat;
    purchase_cargo_capacity:    purchase_capacity_c3_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct3;
    default:                    switch_spriteset_mt3_flat;
    purchase:                   switch_purchase_mt3_flat; 
    }
}
}

//mt4 flatbed graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt4_flat, position_in_consist ) {
    0:  switch_ct_04;
        switch_trail_flat_7; //default
}
spriteset(spriteset_mt4_flat, "gfx/P/st_flat_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt4_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt4_flat;
    1:  switch_wire_icon;
}

//mt4 flatbed properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt4_flat, extra_callback_info1) {
    1:  return item_mt4_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt4_flat, 2618) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_KD4), string(STR_FLAT), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          2200;   
    cargo_capacity:                 39;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct4_truck;
    cost_factor:                buycost_ct4_truck;
    articulated_part:           switch_mt4_flat;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_flat;
    purchase_cargo_capacity:    purchase_capacity_c4_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct4;
    default:                    switch_spriteset_mt4_flat; 
    purchase:                   switch_purchase_mt4_flat;
    }
}
}

//md3 flat graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_md3_flat, position_in_consist ) {
    0:  switch_cd_03;
        switch_trail_flat_7; //default
}

spriteset(spriteset_md3_flat, "gfx/P/sd_flat_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md3_flat;
    1:  switch_dual_icon;
}

//md3 flat properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md3_flat, extra_callback_info1) {
    1:  return item_md3_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md3_flat, 3617) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_OG3), string(STR_FLAT), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }

graphics {
    power:                      switch_boost_cd3;
    running_cost_factor:        switch_e_cost_cd3;
    cost_factor:                buycost_cd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md3_flat;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_flat;
    purchase_cargo_capacity:    purchase_capacity_c3_flat;
    default:                    switch_spriteset_md3_flat; 
    purchase:                   switch_purchase_md3_flat;
    }
}
}

//md4 flat graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_md4_flat, position_in_consist ) {
    0:  switch_cd_04;
        switch_trail_flat_7; //default
}

spriteset(spriteset_md4_flat, "gfx/P/sd_flat_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md4_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md4_flat;
    1:  switch_dual_icon;
}

//md4 flat properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md4_flat, extra_callback_info1) {
    1:  return item_md4_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md4_flat, 3618) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_BW4), string(STR_FLAT), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          2100;   
    cargo_capacity:                 39;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         21.5 ton;
    }

graphics {
    power:                      switch_boost_cd4;
    running_cost_factor:        switch_e_cost_cd4;
    cost_factor:                buycost_cd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md4_flat;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_flat;
    purchase_cargo_capacity:    purchase_capacity_c4_flat;
    default:                    switch_spriteset_md4_flat; 
    purchase:                   switch_purchase_md4_flat;
    }
}
}

//hfb flatbed graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfb_flat, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_flat_4; //default
}

spriteset(spriteset_hfb_flat, "gfx/P/ho_flat_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfb_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfb_flat;
    1:  switch_fuel_icon;
}

//hfb flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfb_flat, extra_callback_info1) {
    1..3:  return item_hfb_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfb_flat, 1623) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG1), string(STR_FLAT), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  8;
    cost_factor:        (7/4) *             100;      
    running_cost_factor:               97;      
    speed:                          40 km/h; 
    power:                      (11/10)*  100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfb_truck;
    cost_factor:                buycost_hfb_truck;
    articulated_part:           switch_hfb_flat;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_hb_flat;
    purchase_cargo_capacity:    purchase_capacity_hb_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfb;
    default:                    switch_spriteset_hfb_flat; 
    purchase:                   switch_purchase_hfb_flat;
    }
}
}

//hfa flatbed graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfa_flat, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_flat_4; //default
}

spriteset(spriteset_hfa_flat, "gfx/P/ho_flat_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfa_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfa_flat;
    1:  switch_fuel_icon;
}

//hfa flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfa_flat, extra_callback_info1) {
    1..3:  return item_hfa_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfa_flat, 1624) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN1), string(STR_FLAT), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  10;
    cost_factor:        (7/4) *             110;      
    running_cost_factor:               105;      
    speed:                          50 km/h; 
    power:                      (11/10)*  140 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (11 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfa_truck;
    cost_factor:                buycost_hfa_truck;
    articulated_part:           switch_hfa_flat;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_ha_flat;
    purchase_cargo_capacity:    purchase_capacity_ha_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfa;
    default:                    switch_spriteset_hfa_flat; 
    purchase:                   switch_purchase_hfa_flat;
    }
}
}

//hf1 flatbed graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf1_flat, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_flat_6; //default
}

spriteset(spriteset_hf1_flat, "gfx/P/hf_flat_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf1_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf1_flat;
    1:  switch_fuel_icon;
}

//hf1 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf1_flat, extra_callback_info1) {
    1..3:  return item_hf1_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf1_flat, 1625) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_TM1), string(STR_FLAT), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:        (7/4) *             130;      
    running_cost_factor:               125;      
    speed:                          65 km/h; 
    power:                      (11/10)*  210 hp;   
    cargo_capacity:                 22;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (12 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf1_truck;
    cost_factor:                buycost_hf1_truck;
    articulated_part:           switch_hf1_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_flat;
    purchase_cargo_capacity:    purchase_capacity_h1_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf1;
    default:                    switch_spriteset_hf1_flat; 
    purchase:                   switch_purchase_hf1_flat; 
    }
}
}

//hf2 flatbed graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf2_flat, position_in_consist ) {
    0:  switch_cf_02;
        switch_trail_flat_6; //default
}

spriteset(spriteset_hf2_flat, "gfx/P/hf_flat_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf2_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf2_flat;
    1:  switch_fuel_icon;
}

//hf2 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf2_flat, extra_callback_info1) {
    1..3:  return item_hf2_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf2_flat, 1626) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_FLAT), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *             150;      
    running_cost_factor:               165;      
    speed:                          80 km/h; 
    power:                          (11/10)*  380 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (16 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf2_truck;
    cost_factor:                buycost_hf2_truck;
    articulated_part:           switch_hf2_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_flat;
    purchase_cargo_capacity:    purchase_capacity_h2_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf2;
    default:                    switch_spriteset_hf2_flat; 
    purchase:                   switch_purchase_hf2_flat;
    }
}
}

//hf3 flatbed graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf3_flat, position_in_consist ) {
    0:  switch_cf_03;
        switch_trail_flat_6; //default
}

spriteset(spriteset_hf3_flat, "gfx/P/hf_flat_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf3_flat;
    1:  switch_fuel_icon;
}

//hf3 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf3_flat, extra_callback_info1) {
    1..3:  return item_hf3_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf3_flat, 1627) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_FLAT), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *             170;      
    running_cost_factor:               225;      
    speed:                          100 km/h; 
    power:                          (11/10)*  560 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (19 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf3_truck;
    cost_factor:                buycost_hf3_truck;
    articulated_part:           switch_hf3_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_flat;
    purchase_cargo_capacity:    purchase_capacity_h3_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf3;
    default:                    switch_spriteset_hf3_flat; 
    purchase:                   switch_purchase_hf3_flat; 
    }
}
}

//hf4 flatbed graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf4_flat, position_in_consist ) {
    0:  switch_cf_04;
        switch_trail_flat_6; //default
}

spriteset(spriteset_hf4_flat, "gfx/P/hf_flat_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf4_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf4_flat;
    1:  switch_fuel_icon;
}

//hf4 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf4_flat, extra_callback_info1) {
    1..3:  return item_hf4_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf4_flat, 1628) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG2), string(STR_FLAT), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *             190;      
    running_cost_factor:               245;      
    speed:                          140 km/h; 
    power:                          (11/10)*  560 hp;   
    cargo_capacity:                 39;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (20.5 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf4_truck;
    cost_factor:                buycost_hf4_truck;
    articulated_part:           switch_hf4_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_flat;
    purchase_cargo_capacity:    purchase_capacity_h4_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf4;
    default:                    switch_spriteset_hf4_flat; 
    purchase:                   switch_purchase_hf4_flat;
    }
}
}

//ht1 flatbed graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht1_flat, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_flat_6; //default
}

spriteset(spriteset_ht1_flat, "gfx/P/ht_flat_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht1_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht1_flat;
    1:  switch_wire_icon;
}

//ht1 flatbed properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht1_flat, extra_callback_info1) {
    1..3:  return item_ht1_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht1_flat, 2625) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW1), string(STR_FLAT), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          (11/10)*    400;   
    cargo_capacity:                 22;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (10 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht1_truck;
    cost_factor:                buycost_ht1_truck;
    articulated_part:           switch_ht1_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_flat;
    purchase_cargo_capacity:    purchase_capacity_h1_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht1;
    default:                    switch_spriteset_ht1_flat; 
    purchase:                   switch_purchase_ht1_flat;
    }
}
}

//ht2 flatbed graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht2_flat, position_in_consist ) {
    0:  switch_ct_02;
        switch_trail_flat_6; //default
}

spriteset(spriteset_ht2_flat, "gfx/P/ht_flat_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht2_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht2_flat;
    1:  switch_wire_icon;
}

//ht2 flatbed properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht2_flat, extra_callback_info1) {
    1..3:  return item_ht2_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht2_flat, 2626) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_FLAT), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          (11/10)*    740;   
    cargo_capacity:                 30;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht2_truck;
    cost_factor:                buycost_ht2_truck;
    articulated_part:           switch_ht2_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_flat;
    purchase_cargo_capacity:    purchase_capacity_h2_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht2;
    default:                    switch_spriteset_ht2_flat; 
    purchase:                   switch_purchase_ht2_flat;
    }
}
}

//ht3 flatbed graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht3_flat, position_in_consist ) {
    0:  switch_ct_03;
        switch_trail_flat_6; //default
}

spriteset(spriteset_ht3_flat, "gfx/P/ht_flat_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht3_flat;
    1:  switch_wire_icon;
}

//ht3 flatbed properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht3_flat, extra_callback_info1) {
    1..3:  return item_ht3_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht3_flat, 2627) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_LC2), string(STR_FLAT), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht3_truck;
    cost_factor:                buycost_ht3_truck;
    articulated_part:           switch_ht3_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_flat;
    purchase_cargo_capacity:    purchase_capacity_h3_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht3;
    default:                    switch_spriteset_ht3_flat; 
    purchase:                   switch_purchase_ht3_flat;
    }
}
}

//ht4 flatbed graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht4_flat, position_in_consist ) {
    0:  switch_ct_04;
        switch_trail_flat_6; //default
}

spriteset(spriteset_ht4_flat, "gfx/P/ht_flat_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht4_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht4_flat;
    1:  switch_wire_icon;
}

//ht4 flatbed properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht4_flat, extra_callback_info1) {
    1..3:  return item_ht4_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht4_flat, 2628) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_KD2), string(STR_FLAT), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2200;   
    cargo_capacity:                 39;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (18 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht4_truck;
    cost_factor:                buycost_ht4_truck;
    articulated_part:           switch_ht4_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_flat;
    purchase_cargo_capacity:    purchase_capacity_h4_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht4;
    default:                    switch_spriteset_ht4_flat; 
    purchase:                   switch_purchase_ht4_flat;
    }
}
}

//hd3 flat graphics

//graphics definition

spriteset(spriteset_hd3_flat, "gfx/P/hd_flat_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd3_flat;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd3_flat, position_in_consist ) {
    0:  switch_cd_03;
        switch_trail_flat_6; //default
}

//hd3 flat properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd3_flat, extra_callback_info1) {
    1..3:  return item_hd3_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd3_flat, 3627) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_FLAT), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1200 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (20 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd3;
    running_cost_factor:        switch_e_cost_hd3;
    cost_factor:                buycost_hd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd3_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_flat;
    purchase_cargo_capacity:    purchase_capacity_h3_flat;
    default:                    switch_spriteset_hd3_flat; 
    purchase:                   switch_purchase_hd3_flat; 
    }
}
}

//hd4 flat graphics

//graphics definition

spriteset(spriteset_hd4_flat, "gfx/P/hd_flat_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd4_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd4_flat;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd4_flat, position_in_consist ) {
    0:  switch_cd_04;
        switch_trail_flat_6; //default
}

//hd4 flat properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd4_flat, extra_callback_info1) {
    1..3:  return item_hd4_flat; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd4_flat, 3628) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_FLAT), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED, CC_COVERED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD, ENSP, FMSP];
    cargo_disallow_refit:           [LVST, WOOL];
    default_cargo_type:             WOOD; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2100;   
    cargo_capacity:                 39;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (21.5 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd4;
    running_cost_factor:        switch_e_cost_hd4;
    cost_factor:                buycost_hd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd4_flat;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_flat;
    purchase_cargo_capacity:    purchase_capacity_h4_flat;
    default:                    switch_spriteset_hd4_flat; 
    purchase:                   switch_purchase_hd4_flat;
    }
}
}

//Tank

// Tank Trailer graphics

spriteset(spriteset_w_s_tank_truck_a, "gfx/W/w_s_f_tank_01.png") { //short tanker a
    tmpl_7()
}
spriteset(spriteset_w_s_tank_truck_b, "gfx/W/w_s_f_tank_02.png") { //short tanker b
    tmpl_7()
}
spriteset(spriteset_w_s_tank_truck_c, "gfx/W/w_s_f_tank_03.png") { //short tanker a
    tmpl_7()
}
spriteset(spriteset_w_s_tank_truck_d, "gfx/W/w_s_f_tank_04.png") { //short tanker b
    tmpl_7()
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_f_tank, random_bits ) {
        0..63: spriteset_w_s_tank_truck_a;
        64..127: spriteset_w_s_tank_truck_b;
        128..191: spriteset_w_s_tank_truck_c;
        192..255: spriteset_w_s_tank_truck_d;
        default: spriteset_w_s_tank_truck_b;          
}
//

switch(FEAT_ROADVEHS, SELF, switch_trail_tank_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_s_f_trail;
    1:  switch_w_s_f_tank;
}
/*
switch(FEAT_ROADVEHS, SELF, switch_trail_tank_6, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_m_f_trail;
    1:  switch_w_m_f_tank;
}
*/

spriteset(spriteset_s_tank_a, "gfx/S/s_tank_01.png") {
    tmpl_short()
}

spritegroup spritegroup_s_tank_a {
    loaded:  [spriteset_s_tank_a];
    loading: [spriteset_s_tank_a];
}


spriteset(spriteset_s_tank_b, "gfx/S/s_tank_02.png") {
    tmpl_short()
}

spritegroup spritegroup_s_tank_b {
    loaded:  [spriteset_s_tank_b];
    loading: [spriteset_s_tank_b];
}

spriteset(spriteset_s_tank_c, "gfx/S/s_tank_03.png") {
    tmpl_short()
}

spritegroup spritegroup_s_tank_c {
    loaded:  [spriteset_s_tank_c];
    loading: [spriteset_s_tank_c];
}


spriteset(spriteset_s_tank_d, "gfx/S/s_tank_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_tank_d {
    loaded:  [spriteset_s_tank_d];
    loading: [spriteset_s_tank_d];
}

spriteset(spriteset_m_tank_a, "gfx/M/m_tank_01.png") {
    tmpl_7()
}

spritegroup spritegroup_m_tank_a {
    loaded:  [spriteset_m_tank_a];
    loading: [spriteset_m_tank_a];
}


spriteset(spriteset_m_tank_b, "gfx/M/m_tank_02.png") {
    tmpl_7()
}

spritegroup spritegroup_m_tank_b {
    loaded:  [spriteset_m_tank_b];
    loading: [spriteset_m_tank_b];
}

spriteset(spriteset_m_tank_c, "gfx/M/m_tank_03.png") {
    tmpl_7()
}

spritegroup spritegroup_m_tank_c {
    loaded:  [spriteset_m_tank_c];
    loading: [spriteset_m_tank_c];
}


spriteset(spriteset_m_tank_d, "gfx/M/m_tank_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_tank_d {
    loaded:  [spriteset_m_tank_d];
    loading: [spriteset_m_tank_d];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_s_tank, random_bits ) {
        0..63: spritegroup_s_tank_a;
        64..127: spritegroup_s_tank_b;
        128..191: spritegroup_s_tank_c;
        192..255 : spritegroup_s_tank_d;
        default: spritegroup_s_tank_b;          
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_m_tank, random_bits ) {
        0..63: spritegroup_m_tank_a;
        64..127: spritegroup_m_tank_b;
        128..191: spritegroup_m_tank_c;
        192..255 : spritegroup_m_tank_d;
        default: spritegroup_m_tank_b;      
}

/*
spriteset(spriteset_sfc_tank, "gfx/P/so_tank_01.png") {
    tmpl_p()
}
spriteset(spriteset_sfd_tank, "gfx/P/so_tank_02.png") {
    tmpl_p()
}
*/

//sfb tanker graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfb_tank, position_in_consist ) {
    0:  switch_cf_0b;
        switch_spritegroup_s_tank; //default
}

spriteset(spriteset_sfb_tank, "gfx/P/so_tank_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfb_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfb_tank;
    1:  switch_fuel_icon;
}

//sfb tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfb_tank, extra_callback_info1) {
    1:  return item_sfb_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfb_tank, 1713) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BWB), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  6;
    cost_factor:                    100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfb_truck;
    cost_factor:                buycost_cfb_truck;
    articulated_part:           switch_sfb_tank;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_cb_flat;
    purchase_cargo_capacity:    purchase_capacity_cb_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfb;
    default:                    switch_spriteset_sfb_tank; 
    purchase:                   switch_purchase_sfb_tank;
    }
}
}

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfa_tank, position_in_consist ) {
    0:  switch_cf_0a;
        switch_spritegroup_s_tank; //default
}

spriteset(spriteset_sfa_tank, "gfx/P/so_tank_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfa_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfa_tank;
    1:  switch_fuel_icon;
}

//sfa tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfa_tank, extra_callback_info1) {
    1:  return item_sfa_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfa_tank, 1714) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BWA), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  8;
    cost_factor:                    110;      
    running_cost_factor:            105;      
    speed:                          45 km/h; 
    power:                          140 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cfa_truck;
    cost_factor:                buycost_cfa_truck;
    articulated_part:           switch_sfa_tank;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_ca_flat;
    purchase_cargo_capacity:    purchase_capacity_ca_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfa;
    default:                    switch_spriteset_sfa_tank;
    purchase:                   switch_purchase_sfa_tank; 
    }
}
}

//sf1 tanker graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sf1_tank, position_in_consist ) {
    0:  switch_cf_01;
        switch_spritegroup_s_tank; //default
}

spriteset(spriteset_sf1_tank, "gfx/P/sf_tank_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sf1_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sf1_tank;
    1:  switch_fuel_icon;
}

//sf1 tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf1_tank, extra_callback_info1) {
    1:  return item_sf1_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf1_tank, 1715) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TM1), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  8;
    cost_factor:                    130;      
    running_cost_factor:            135;      
    speed:                          60 km/h; 
    power:                          210 hp;   
    cargo_capacity:                 22;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cf1_truck;
    cost_factor:                buycost_cf1_truck;
    articulated_part:           switch_sf1_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_flat;
    purchase_cargo_capacity:    purchase_capacity_c1_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf1;
    default:                    switch_spriteset_sf1_tank; 
    purchase:                   switch_purchase_sf1_tank;
    }
}
}

//mf2 tanker graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf2_tank, position_in_consist ) {
    0:  switch_cf_02;
        switch_spritegroup_m_tank; //default
}

spriteset(spriteset_mf2_tank, "gfx/P/sf_tank_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf2_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf2_tank;
    1:  switch_fuel_icon;
}

//mf2 tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf2_tank, extra_callback_info1) {
    1:  return item_mf2_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf2_tank, 1716) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BW2), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  10;
    cost_factor:                    150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          380 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_cf2_truck;
    cost_factor:                buycost_cf2_truck;
    articulated_part:           switch_mf2_tank;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_flat;
    purchase_cargo_capacity:    purchase_capacity_c2_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf2;
    default:                    switch_spriteset_mf2_tank; 
    purchase:                   switch_purchase_mf2_tank;
    }
}
}

//mf3 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf3_tank, position_in_consist ) {
    0:  switch_cf_03;
        switch_spritegroup_m_tank; //default
}

spriteset(spriteset_mf3_tank, "gfx/P/sf_tank_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf3_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf3_tank;
    1:  switch_fuel_icon;
}

//mf3 tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf3_tank, extra_callback_info1) {
    1:  return item_mf3_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf3_tank, 1717) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_OG3), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  12;
    cost_factor:                    170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf3_truck;
    cost_factor:                buycost_cf3_truck;
    articulated_part:           switch_mf3_tank;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_flat;
    purchase_cargo_capacity:    purchase_capacity_c3_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf3;
    default:                    switch_spriteset_mf3_tank;
    purchase:                   switch_purchase_mf3_tank; 
    }
}
}

//mf4 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf4_tank, position_in_consist ) {
    0:  switch_cf_04;
        switch_spritegroup_m_tank; //default
}

spriteset(spriteset_mf4_tank, "gfx/P/sf_tank_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf4_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf4_tank;
    1:  switch_fuel_icon;
}

//mf4 tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf4_tank, extra_callback_info1) {
    1:  return item_mf4_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf4_tank, 1718) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_DN4), string(STR_TANK), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  14;
    cost_factor:                    190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          720;   
    cargo_capacity:                 42;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         19 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf4_truck;
    cost_factor:                buycost_cf4_truck;
    articulated_part:           switch_mf4_tank;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_flat;
    purchase_cargo_capacity:    purchase_capacity_c4_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf4;
    default:                    switch_spriteset_mf4_tank; 
    purchase:                   switch_purchase_mf4_tank;
    }
}
}

//st1 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_st1_tank, position_in_consist ) {
    0:  switch_ct_01;
        switch_spritegroup_s_tank; //default
}
spriteset(spriteset_st1_tank, "gfx/P/st_tank_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_st1_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st1_tank;
    1:  switch_wire_icon;
}
//st1 tanker properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st1_tank, extra_callback_info1) {
    1:  return item_st1_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st1_tank, 2715) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_LC1), string(STR_TANK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  8;
    cost_factor:                    118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          400;   
    cargo_capacity:                 22;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct1_truck;
    cost_factor:                buycost_ct1_truck;
    articulated_part:           switch_st1_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_flat;
    purchase_cargo_capacity:    purchase_capacity_c1_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct1;
    default:                    switch_spriteset_st1_tank;
    purchase:                   switch_purchase_st1_tank;
    }
}
}

//mt2 tanker graphics

//graphics definition


//mt2 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt2_tank, position_in_consist ) {
    0:  switch_ct_02;
        switch_spritegroup_m_tank; //default
}
spriteset(spriteset_mt2_tank, "gfx/P/st_tank_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt2_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt2_tank;
    1:  switch_wire_icon;
}
//mt2 tanker properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt2_tank, extra_callback_info1) {
    1:  return item_mt2_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt2_tank, 2716) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_BW2), string(STR_TANK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  10;
    cost_factor:                    130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          740;   
    cargo_capacity:                 30;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct2_truck;
    cost_factor:                buycost_ct2_truck;
    articulated_part:           switch_mt2_tank;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_flat;
    purchase_cargo_capacity:    purchase_capacity_c2_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct2;
    default:                    switch_spriteset_mt2_tank; 
    purchase:                   switch_purchase_mt2_tank;
    }
}
}

//mt3 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt3_tank, position_in_consist ) {
    0:  switch_ct_03;
        switch_spritegroup_m_tank; //default
}
spriteset(spriteset_mt3_tank, "gfx/P/st_tank_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt3_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt3_tank;
    1:  switch_wire_icon;
}
//mt3 tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt3_tank, extra_callback_info1) {
    1:  return item_mt3_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt3_tank, 2717) {
property {
    name:                           string(STR_CONCAT, string(STR_CTMOD_KD3), string(STR_TANK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  12;
    cost_factor:                    148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_ct3_truck;
    cost_factor:                buycost_ct3_truck;
    articulated_part:           switch_mt3_tank;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_flat;
    purchase_cargo_capacity:    purchase_capacity_c3_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct3;
    default:                    switch_spriteset_mt3_tank; 
    purchase:                   switch_purchase_mt3_tank;
    }
}
}

//mt4 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt4_tank, position_in_consist ) {
    0:  switch_ct_04;
        switch_spritegroup_m_tank; //default
}
spriteset(spriteset_mt4_tank, "gfx/P/st_tank_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt4_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt4_tank;
    1:  switch_wire_icon;
}

//mt4 tanker properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt4_tank, extra_callback_info1) {
    1:  return item_mt4_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt4_tank, 2718) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_DN4), string(STR_TANK), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  14;
    cost_factor:                    168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          2200;   
    cargo_capacity:                 39;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         19 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct4_truck;
    cost_factor:                buycost_ct4_truck;
    articulated_part:           switch_mt4_tank;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_flat;
    purchase_cargo_capacity:    purchase_capacity_c4_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct4;
    default:                    switch_spriteset_mt4_tank; 
    purchase:                   switch_purchase_mt4_tank;

    }
}
}

//md3 tank graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_md3_tank, position_in_consist ) {
    0:  switch_cd_03;
        switch_spritegroup_m_tank; //default
}

spriteset(spriteset_md3_tank, "gfx/P/sd_tank_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md3_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md3_tank;
    1:  switch_dual_icon;
}

//md3 tank properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md3_tank, extra_callback_info1) {
    1:  return item_md3_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md3_tank, 3717) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_DN3), string(STR_TANK), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  12;
    cost_factor:                    180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }

graphics {
    power:                      switch_boost_cd3;
    running_cost_factor:        switch_e_cost_cd3;
    cost_factor:                buycost_cd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md3_tank;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_flat;
    purchase_cargo_capacity:    purchase_capacity_c3_flat;
    default:                    switch_spriteset_md3_tank; 
    purchase:                   switch_purchase_md3_tank;
    }
}
}

//md4 tank graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_md4_tank, position_in_consist ) {
    0:  switch_cd_04;
        switch_spritegroup_m_tank; //default
}

spriteset(spriteset_md4_tank, "gfx/P/sd_tank_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md4_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md4_tank;
    1:  switch_dual_icon;
}

//md4 tank properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md4_tank, extra_callback_info1) {
    1:  return item_md4_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md4_tank, 3718) {
property {
    name:                           string(STR_CONCAT, string(STR_CDMOD_BW4), string(STR_TANK), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_; 
    loading_speed:                  14;
    cost_factor:                    200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          2100;   
    cargo_capacity:                 42;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         23 ton;
    }

graphics {
    power:                      switch_boost_cd4;
    running_cost_factor:        switch_e_cost_cd4;
    cost_factor:                buycost_cd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md4_tank;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_flat;
    purchase_cargo_capacity:    purchase_capacity_c4_flat;
    default:                    switch_spriteset_md4_tank;
    purchase:                   switch_purchase_md4_tank; 
    }
}
}

//hfb tanker graphics

//graphics definition

spriteset(spriteset_hfb_tank, "gfx/P/ho_tank_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfb_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfb_tank;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfb_tank, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_tank_4; //default
}

//hfb tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfb_tank, extra_callback_info1) {
    1..3:  return item_hfb_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfb_tank, 1723) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG1), string(STR_TANK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  6;
    cost_factor:                    (7/4) * 100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          (11/10)*  100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfb_truck;
    cost_factor:                buycost_hfb_truck;
    articulated_part:           switch_hfb_tank;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_hb_flat;
    purchase_cargo_capacity:    purchase_capacity_hb_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfb;
    default:                    switch_spriteset_hfb_tank; 
    purchase:                   switch_purchase_hfb_tank;
    }
}
}

//graphics definition

spriteset(spriteset_hfa_tank, "gfx/P/ho_tank_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfa_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfa_tank;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfa_tank, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_tank_4; //default
}

//hfa tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfa_tank, extra_callback_info1) {
    1..3:  return item_hfa_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfa_tank, 1724) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN1), string(STR_TANK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *     110;      
    running_cost_factor:            105;      
    speed:                          45 km/h; 
    power:                          (11/10)*    140 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hfa_truck;
    cost_factor:                buycost_hfa_truck;
    articulated_part:           switch_hfa_tank;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_ha_flat;
    purchase_cargo_capacity:    purchase_capacity_ha_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfa;
    default:                    switch_spriteset_hfa_tank; 
    purchase:                   switch_purchase_hfa_tank;
    }
}
}

//hf1 tanker graphics

//graphics definition

spriteset(spriteset_hf1_tank, "gfx/P/hf_tank_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf1_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf1_tank;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf1_tank, position_in_consist ) {
    0:  switch_cf_01;
        switch_spritegroup_s_tank; //default
}

//hf1 tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf1_tank, extra_callback_info1) {
    1..3:  return item_hf1_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf1_tank, 1725) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_TM1), string(STR_TANK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            135;      
    speed:                          60 km/h; 
    power:                          (11/10)*    210 hp;   
    cargo_capacity:                 22;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (11 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hf1_truck;
    cost_factor:                buycost_hf1_truck;
    articulated_part:           switch_hf1_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_flat;
    purchase_cargo_capacity:    purchase_capacity_h1_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf1;
    default:                    switch_spriteset_hf1_tank; 
    purchase:                   switch_purchase_hf1_tank;
    }
}
}

//hf2 tanker graphics

//graphics definition

spriteset(spriteset_hf2_tank, "gfx/P/hf_tank_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf2_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf2_tank;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf2_tank, position_in_consist ) {
    0:  switch_cf_02;
        switch_spritegroup_s_tank; //default
}

//hf2 tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf2_tank, extra_callback_info1) {
    1..3:  return item_hf2_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf2_tank, 1726) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_TANK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  10;
    cost_factor:                    (7/4) *     150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          (11/10)*    380 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_hf2_truck;
    cost_factor:                buycost_hf2_truck;
    articulated_part:           switch_hf2_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_flat;
    purchase_cargo_capacity:    purchase_capacity_h2_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf2;
    default:                    switch_spriteset_hf2_tank; 
    purchase:                   switch_purchase_hf2_tank;
    }
}
}

//hf3 tanker graphics

//graphics definition

spriteset(spriteset_hf3_tank, "gfx/P/hf_tank_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf3_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf3_tank;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf3_tank, position_in_consist ) {
    0:  switch_cf_03;
        switch_spritegroup_s_tank; //default
}


//hf3 tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf3_tank, extra_callback_info1) {
    1..3:  return item_hf3_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf3_tank, 1727) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_TANK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  12;
    cost_factor:                    (7/4) *     170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          (11/10)*    560 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (16 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf3_truck;
    cost_factor:                buycost_hf3_truck;
    articulated_part:           switch_hf3_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_flat;
    purchase_cargo_capacity:    purchase_capacity_h3_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf3;
    default:                    switch_spriteset_hf3_tank; 
    purchase:                   switch_purchase_hf3_tank;
    }
}
}

//hf4 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf4_tank, position_in_consist ) {
    0:  switch_cf_04;
        switch_spritegroup_s_tank; //default
}


//hf4 tanker properties

spriteset(spriteset_hf4_tank, "gfx/P/hf_tank_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf4_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf4_tank;
    1:  switch_fuel_icon;
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf4_tank, extra_callback_info1) {
    1..3:  return item_hf4_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf4_tank, 1728) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG2), string(STR_TANK), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  14;
    cost_factor:                    (7/4) *     190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          (11/10)*    720;   
    cargo_capacity:                 42;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (19 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf4_truck;
    cost_factor:                buycost_hf4_truck;
    articulated_part:           switch_hf4_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_flat;
    purchase_cargo_capacity:    purchase_capacity_h4_flat;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf4;
    default:                    switch_spriteset_hf4_tank; 
    purchase:                   switch_purchase_hf4_tank;
    }
}
}

//ht1 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht1_tank, position_in_consist ) {
    0:  switch_ct_01;
        switch_spritegroup_s_tank; //default
}

spriteset(spriteset_ht1_tank, "gfx/P/ht_tank_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht1_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht1_tank;
    1:  switch_wire_icon;
}

//ht1 tanker properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht1_tank, extra_callback_info1) {
    1..3:  return item_ht1_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht1_tank, 2725) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW1), string(STR_TANK), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  8;
    cost_factor:                    (7/4) *     118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          (11/10)*    400;   
    cargo_capacity:                 22;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (10 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht1_truck;
    cost_factor:                buycost_ht1_truck;
    articulated_part:           switch_ht1_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_flat;
    purchase_cargo_capacity:    purchase_capacity_h1_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht1;
    default:                    switch_spriteset_ht1_tank; 
    purchase:                   switch_purchase_ht1_tank;
    }
}
}

//ht2 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht2_tank, position_in_consist ) {
    0:  switch_ct_02;
        switch_spritegroup_s_tank; //default
}

spriteset(spriteset_ht2_tank, "gfx/P/ht_tank_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht2_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht2_tank;
    1:  switch_wire_icon;
}

//ht2 tanker properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht2_tank, extra_callback_info1) {
    1..3:  return item_ht2_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht2_tank, 2726) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_TANK), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  10;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          (11/10)*    740;   
    cargo_capacity:                 30;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht2_truck;
    cost_factor:                buycost_ht2_truck;
    articulated_part:           switch_ht2_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_flat;
    purchase_cargo_capacity:    purchase_capacity_h2_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht2;
    default:                    switch_spriteset_ht2_tank; 
    purchase:                   switch_purchase_ht2_tank; 
    }
}
}

//ht3 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht3_tank, position_in_consist ) {
    0:  switch_ct_03;
        switch_spritegroup_s_tank; //default
}

spriteset(spriteset_ht3_tank, "gfx/P/ht_tank_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht3_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht3_tank;
    1:  switch_wire_icon;
}

//ht3 tanker properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht3_tank, extra_callback_info1) {
    1..3:  return item_ht3_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht3_tank, 2727) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_LC2), string(STR_TANK), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  12;
    cost_factor:                    (7/4) *     148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_ht3_truck;
    cost_factor:                buycost_ht3_truck;
    articulated_part:           switch_ht3_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_flat;
    purchase_cargo_capacity:    purchase_capacity_h3_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht3;
    default:                    switch_spriteset_ht3_tank; 
    purchase:                   switch_purchase_ht3_tank;
    }
}
}

//ht4 tanker graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht4_tank, position_in_consist ) {
    0:  switch_ct_04;
        switch_spritegroup_s_tank; //default
}

spriteset(spriteset_ht4_tank, "gfx/P/ht_tank_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht4_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht4_tank;
    1:  switch_wire_icon;
}

//ht4 tanker properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht4_tank, extra_callback_info1) {
    1..3:  return item_ht4_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht4_tank, 2728) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_KD2), string(STR_TANK), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  14;
    cost_factor:                    (7/4) *     168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2200;   
    cargo_capacity:                 39;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (19 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht4_truck;
    cost_factor:                buycost_ht4_truck;
    articulated_part:           switch_ht4_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_flat;
    purchase_cargo_capacity:    purchase_capacity_h4_flat;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht4;
    default:                    switch_spriteset_ht4_tank; 
    purchase:                   switch_purchase_ht4_tank;
    }
}
}

//hd3 tank graphics

//graphics definition

spriteset(spriteset_hd3_tank, "gfx/P/hd_tank_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd3_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd3_tank;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd3_tank, position_in_consist ) {
    0:  switch_cd_03;
        switch_spritegroup_s_tank; //default
}

//hd3 tank properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd3_tank, extra_callback_info1) {
    1..3:  return item_hd3_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd3_tank, 3727) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_TANK), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  12;
    cost_factor:                    (7/4) *     180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1200 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (20 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd3;
    running_cost_factor:        switch_e_cost_hd3;
    cost_factor:                buycost_hd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd3_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_flat;
    purchase_cargo_capacity:    purchase_capacity_h3_flat;
    default:                    switch_spriteset_hd3_tank; 
    purchase:                   switch_purchase_hd3_tank;
    }
}
}

//hd4 tank graphics

//graphics definition

spriteset(spriteset_hd4_tank, "gfx/P/hd_tank_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd4_tank, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd4_tank;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd4_tank, position_in_consist ) {
    0:  switch_cd_04;
        switch_spritegroup_s_tank; //default
}

//hd4 tank properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd4_tank, extra_callback_info1) {
    1..3:  return item_hd4_tank; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd4_tank, 3728) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_TANK), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_LIQUID);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_BULK);
    cargo_allow_refit:              [FERT];
    default_cargo_type:             OIL_;  
    loading_speed:                  14;
    cost_factor:                    200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          2100;   
    cargo_capacity:                 42;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (23 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd4;
    running_cost_factor:        switch_e_cost_hd4;
    cost_factor:                buycost_hd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd4_tank;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_flat;
    purchase_cargo_capacity:    purchase_capacity_h4_flat;
    default:                    switch_spriteset_hd4_tank; 
    purchase:                   switch_purchase_hd4_tank;
    }
}
}

// covered Hoppers

// covered hopper Trailer graphics

// High Bulk Cargo(Hopper & Mineral trucks)
// brown high

spriteset(spriteset_w_s_c_brown_1, "gfx/W/w_s_c_brown_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_brown_2, "gfx/W/w_s_c_brown_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_brown_3, "gfx/W/w_s_c_brown_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_brown_4, "gfx/W/w_s_c_brown_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_brown { //short brown open cargo
    loaded:  [spriteset_w_s_c_brown_1, spriteset_w_s_c_brown_2, spriteset_w_s_c_brown_3, spriteset_w_s_c_brown_4];
    loading: [spriteset_w_s_c_brown_1, spriteset_w_s_c_brown_2, spriteset_w_s_c_brown_3, spriteset_w_s_c_brown_4];
}

spriteset(spriteset_w_m_c_brown_1, "gfx/W/w_m_c_brown_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_brown_2, "gfx/W/w_m_c_brown_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_brown_3, "gfx/W/w_m_c_brown_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_brown_4, "gfx/W/w_m_c_brown_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_brown { //medium brown open cargo
    loaded:  [spriteset_w_m_c_brown_1, spriteset_w_m_c_brown_2, spriteset_w_m_c_brown_3, spriteset_w_m_c_brown_4];
    loading: [spriteset_w_m_c_brown_1, spriteset_w_m_c_brown_2, spriteset_w_m_c_brown_3, spriteset_w_m_c_brown_4];
}

// coal high

spriteset(spriteset_w_s_c_coal_1, "gfx/W/w_s_c_coal_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_coal_2, "gfx/W/w_s_c_coal_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_coal_3, "gfx/W/w_s_c_coal_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_coal_4, "gfx/W/w_s_c_coal_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_coal { //short coal open cargo
    loaded:  [spriteset_w_s_c_coal_1, spriteset_w_s_c_coal_2, spriteset_w_s_c_coal_3, spriteset_w_s_c_coal_4];
    loading: [spriteset_w_s_c_coal_1, spriteset_w_s_c_coal_2, spriteset_w_s_c_coal_3, spriteset_w_s_c_coal_4];
}

spriteset(spriteset_w_m_c_coal_1, "gfx/W/w_m_c_coal_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_coal_2, "gfx/W/w_m_c_coal_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_coal_3, "gfx/W/w_m_c_coal_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_coal_4, "gfx/W/w_m_c_coal_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_coal { //medium coal open cargo
    loaded:  [spriteset_w_m_c_coal_1, spriteset_w_m_c_coal_2, spriteset_w_m_c_coal_3, spriteset_w_m_c_coal_4];
    loading: [spriteset_w_m_c_coal_1, spriteset_w_m_c_coal_2, spriteset_w_m_c_coal_3, spriteset_w_m_c_coal_4];
}


// grey high

spriteset(spriteset_w_s_c_grey_1, "gfx/W/w_s_c_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_grey_2, "gfx/W/w_s_c_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_grey_3, "gfx/W/w_s_c_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_grey_4, "gfx/W/w_s_c_grey_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_grey { //short grey open cargo
    loaded:  [spriteset_w_s_c_grey_1, spriteset_w_s_c_grey_2, spriteset_w_s_c_grey_3, spriteset_w_s_c_grey_4];
    loading: [spriteset_w_s_c_grey_1, spriteset_w_s_c_grey_2, spriteset_w_s_c_grey_3, spriteset_w_s_c_grey_4];
}

spriteset(spriteset_w_m_c_grey_1, "gfx/W/w_m_c_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_grey_2, "gfx/W/w_m_c_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_grey_3, "gfx/W/w_m_c_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_grey_4, "gfx/W/w_m_c_grey_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_grey { //medium grey open cargo
    loaded:  [spriteset_w_m_c_grey_1, spriteset_w_m_c_grey_2, spriteset_w_m_c_grey_3, spriteset_w_m_c_grey_4];
    loading: [spriteset_w_m_c_grey_1, spriteset_w_m_c_grey_2, spriteset_w_m_c_grey_3, spriteset_w_m_c_grey_4];
}

// ore high

spriteset(spriteset_w_s_c_ore_1, "gfx/W/w_s_c_ore_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_ore_2, "gfx/W/w_s_c_ore_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_ore_3, "gfx/W/w_s_c_ore_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_ore_4, "gfx/W/w_s_c_ore_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_ore { //short ore open cargo
    loaded:  [spriteset_w_s_c_ore_1, spriteset_w_s_c_ore_2, spriteset_w_s_c_ore_3, spriteset_w_s_c_ore_4];
    loading: [spriteset_w_s_c_ore_1, spriteset_w_s_c_ore_2, spriteset_w_s_c_ore_3, spriteset_w_s_c_ore_4];
}

spriteset(spriteset_w_m_c_ore_1, "gfx/W/w_m_c_ore_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_ore_2, "gfx/W/w_m_c_ore_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_ore_3, "gfx/W/w_m_c_ore_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_ore_4, "gfx/W/w_m_c_ore_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_ore { //medium ore open cargo
    loaded:  [spriteset_w_m_c_ore_1, spriteset_w_m_c_ore_2, spriteset_w_m_c_ore_3, spriteset_w_m_c_ore_4];
    loading: [spriteset_w_m_c_ore_1, spriteset_w_m_c_ore_2, spriteset_w_m_c_ore_3, spriteset_w_m_c_ore_4];
}

// sand high

spriteset(spriteset_w_s_c_sand_1, "gfx/W/w_s_c_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_sand_2, "gfx/W/w_s_c_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_sand_3, "gfx/W/w_s_c_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_sand_4, "gfx/W/w_s_c_sand_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_sand { //short sand open cargo
    loaded:  [spriteset_w_s_c_sand_1, spriteset_w_s_c_sand_2, spriteset_w_s_c_sand_3, spriteset_w_s_c_sand_4];
    loading: [spriteset_w_s_c_sand_1, spriteset_w_s_c_sand_2, spriteset_w_s_c_sand_3, spriteset_w_s_c_sand_4];
}

spriteset(spriteset_w_m_c_sand_1, "gfx/W/w_m_c_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_sand_2, "gfx/W/w_m_c_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_sand_3, "gfx/W/w_m_c_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_sand_4, "gfx/W/w_m_c_sand_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_sand { //medium sand open cargo
    loaded:  [spriteset_w_m_c_sand_1, spriteset_w_m_c_sand_2, spriteset_w_m_c_sand_3, spriteset_w_m_c_sand_4];
    loading: [spriteset_w_m_c_sand_1, spriteset_w_m_c_sand_2, spriteset_w_m_c_sand_3, spriteset_w_m_c_sand_4];
}

// scrap high

spriteset(spriteset_w_s_c_scrap_1, "gfx/W/w_s_c_scrap_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_scrap_2, "gfx/W/w_s_c_scrap_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_scrap_3, "gfx/W/w_s_c_scrap_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_scrap_4, "gfx/W/w_s_c_scrap_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_scrap { //short scrap open cargo
    loaded:  [spriteset_w_s_c_scrap_1, spriteset_w_s_c_scrap_2, spriteset_w_s_c_scrap_3, spriteset_w_s_c_scrap_4];
    loading: [spriteset_w_s_c_scrap_1, spriteset_w_s_c_scrap_2, spriteset_w_s_c_scrap_3, spriteset_w_s_c_scrap_4];
}

spriteset(spriteset_w_m_c_scrap_1, "gfx/W/w_m_c_scrap_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_scrap_2, "gfx/W/w_m_c_scrap_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_scrap_3, "gfx/W/w_m_c_scrap_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_scrap_4, "gfx/W/w_m_c_scrap_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_c_scrap { //medium scrap open cargo
    loaded:  [spriteset_w_m_c_scrap_1, spriteset_w_m_c_scrap_2, spriteset_w_m_c_scrap_3, spriteset_w_m_c_scrap_4];
    loading: [spriteset_w_m_c_scrap_1, spriteset_w_m_c_scrap_2, spriteset_w_m_c_scrap_3, spriteset_w_m_c_scrap_4];
}

// slag high

spriteset(spriteset_w_s_c_slag_med_1, "gfx/W/w_s_c_slag_med_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_slag_med_2, "gfx/W/w_s_c_slag_med_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_slag_med_3, "gfx/W/w_s_c_slag_med_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_slag_med_4, "gfx/W/w_s_c_slag_med_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_slag_hot_1, "gfx/W/w_s_c_slag_hot_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_slag_hot_2, "gfx/W/w_s_c_slag_hot_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_slag_hot_3, "gfx/W/w_s_c_slag_hot_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_c_slag_hot_4, "gfx/W/w_s_c_slag_hot_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_c_slag { //short slag bulk cargo
    loaded:  [spriteset_w_s_c_slag_med_1, spriteset_w_s_c_slag_med_2, spriteset_w_s_c_slag_med_3, spriteset_w_s_c_slag_med_4];
    loading: [spriteset_w_s_c_slag_med_1, spriteset_w_s_c_slag_med_2, spriteset_w_s_c_slag_med_3, spriteset_w_s_c_slag_med_4];
}

spriteset(spriteset_w_m_c_slag_med_1, "gfx/W/w_m_c_slag_med_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_slag_med_2, "gfx/W/w_m_c_slag_med_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_slag_med_3, "gfx/W/w_m_c_slag_med_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_slag_med_4, "gfx/W/w_m_c_slag_med_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_slag_hot_1, "gfx/W/w_m_c_slag_hot_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_slag_hot_2, "gfx/W/w_m_c_slag_hot_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_slag_hot_3, "gfx/W/w_m_c_slag_hot_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_c_slag_hot_4, "gfx/W/w_m_c_slag_hot_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_c_slag { //medium slag bulk cargo
    loaded:  [spriteset_w_m_c_slag_med_1, spriteset_w_m_c_slag_med_2, spriteset_w_m_c_slag_med_3, spriteset_w_m_c_slag_med_4];
    loading: [spriteset_w_m_c_slag_med_1, spriteset_w_m_c_slag_med_2, spriteset_w_m_c_slag_med_3, spriteset_w_m_c_slag_med_4];
}

// Bulk cargos

switch (FEAT_ROADVEHS, SELF, switch_w_s_c_bulk, cargo_type_in_veh ) {
        SCMT:       spritegroup_w_s_c_scrap;
        RCYC:       spritegroup_w_s_c_scrap;
    //  FRUT:       spritegroup_w_s_o_fruit;
        IORE:       spritegroup_w_s_c_ore;
        AORE:       spritegroup_w_s_c_ore;
        COAL:       spritegroup_w_s_c_coal;
        COKE:       spritegroup_w_s_c_coal;
        CORE:       spritegroup_w_s_c_ore;
        GRVL:       spritegroup_w_s_c_grey;
        SASH:       spritegroup_w_s_c_grey;
        LIME:       spritegroup_w_s_c_grey;
        PEAT:       spritegroup_w_s_c_brown;
        SAND:       spritegroup_w_s_c_sand;
        PHOS:       spritegroup_w_s_c_grey;
        SALT:       spritegroup_w_s_c_grey;
        SLAG:       spritegroup_w_s_c_slag;
        FERT:       spritegroup_w_s_c_grey;
        BEAN:       spritegroup_w_s_c_brown;
        CMNT:       spritegroup_w_s_c_grey;
        GRAI:       spritegroup_w_s_c_sand;
        MAIZ:       spritegroup_w_s_c_sand;
        PORE:       spritegroup_w_s_c_ore;
        PLAS:       spritegroup_w_s_c_grey;
        CBLK:       spritegroup_w_s_c_coal;
        default:    spritegroup_w_s_c_brown;        
}


switch (FEAT_ROADVEHS, SELF, switch_w_m_c_bulk, cargo_type_in_veh ) {
        SCMT:       spritegroup_w_m_c_scrap;
        RCYC:       spritegroup_w_m_c_scrap;
    //  FRUT:       spritegroup_w_m_o_fruit;
        IORE:       spritegroup_w_m_c_ore;
        AORE:       spritegroup_w_m_c_ore;
        COAL:       spritegroup_w_m_c_coal;
        COKE:       spritegroup_w_m_c_coal;
        CORE:       spritegroup_w_m_c_ore;
        GRVL:       spritegroup_w_m_c_grey;
        SASH:       spritegroup_w_m_c_grey;
        LIME:       spritegroup_w_m_c_grey;
        PEAT:       spritegroup_w_m_c_brown;
        SAND:       spritegroup_w_m_c_sand;
        PHOS:       spritegroup_w_m_c_grey;
        SALT:       spritegroup_w_m_c_grey;
        SLAG:       spritegroup_w_m_c_slag;
        FERT:       spritegroup_w_m_c_grey;
        BEAN:       spritegroup_w_m_c_brown;
        CMNT:       spritegroup_w_m_c_grey;
        GRAI:       spritegroup_w_m_c_sand;
        MAIZ:       spritegroup_w_m_c_sand;
        PORE:       spritegroup_w_m_c_ore;
        PLAS:       spritegroup_w_m_c_grey;
        CBLK:       spritegroup_w_m_c_coal;
        default:    spritegroup_w_m_c_brown;      
}

spriteset(spriteset_w_s_hopp_truck_a, "gfx/W/w_s_f_hopp_01.png") { //short covered hopper truck floor old
    tmpl_7()
}
spriteset(spriteset_w_s_hopp_truck_b, "gfx/W/w_s_f_hopp_03.png") { //short covered hopper truck floor new
    tmpl_7()
}
spriteset(spriteset_w_s_hopp_side_a, "gfx/W/w_s_t_hopp_01.png") { //short covered hopper truck side old tarp
    tmpl_7()
}
spriteset(spriteset_w_s_hopp_side_b, "gfx/W/w_s_t_hopp_02.png") { //short covered hopper truck side old
    tmpl_7()
}
spriteset(spriteset_w_s_hopp_side_c, "gfx/W/w_s_t_hopp_03.png") { //short covered hopper truck side new tarp
    tmpl_7()
}
spriteset(spriteset_w_s_hopp_side_d, "gfx/W/w_s_t_hopp_04.png") { //short covered hopper truck side new
    tmpl_7()
}

spritegroup spritegroup_w_s_hopp_a { //short covered hopper truck side old
    loaded:  [spriteset_w_s_hopp_side_a];
    loading: [spriteset_w_s_hopp_side_b];
}
spritegroup spritegroup_w_s_hopp_b { //short covered hopper truck side new
    loaded:  [spriteset_w_s_hopp_side_c];
    loading: [spriteset_w_s_hopp_side_d];
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_f_hopp_a, random_bits ) {
        0..171:     spriteset_w_s_hopp_truck_b;
        172..255:       spriteset_w_s_hopp_truck_a;
        default:        spriteset_w_s_hopp_truck_b;           
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_f_hopp, build_year ) {
        0..1939:        spriteset_w_s_hopp_truck_a;
        1940..1964:     switch_w_s_f_hopp_a;
        1965..5000000:  spriteset_w_s_hopp_truck_b;
        default:        spriteset_w_s_hopp_truck_b;            
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_t_hopp_a, random_bits ) {
        0..171:     spritegroup_w_s_hopp_b;
        172..255:       spritegroup_w_s_hopp_a;
        default:        spritegroup_w_s_hopp_b;           
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_t_hopp, build_year ) {
        0..1939:        spritegroup_w_s_hopp_a;
        1940..1964:     switch_w_s_t_hopp_a;
        1965..5000000:  spritegroup_w_s_hopp_b;
        default:        spritegroup_w_s_hopp_b;            
}

spriteset(spriteset_w_m_hopp_truck, "gfx/W/w_m_f_hopp_01.png") { //medium covered hopper truck floor
    tmpl_7()
}
spriteset(spriteset_w_m_hopp_side, "gfx/W/w_m_t_hopp_01.png") { //medium covered hopper truck side open
    tmpl_7()
}
spriteset(spriteset_w_m_tarp_side_a, "gfx/W/w_m_t_tarp_01.png") { //medium covered hopper truck side olive
    tmpl_7()
}
spriteset(spriteset_w_m_tarp_side_b, "gfx/W/w_m_t_tarp_02.png") { //medium covered hopper truck side grey
    tmpl_7()
}
spriteset(spriteset_w_m_tarp_side_c, "gfx/W/w_m_t_tarp_03.png") { //medium covered hopper truck side 1cc
    tmpl_7()
}
spriteset(spriteset_w_m_tarp_side_d, "gfx/W/w_m_t_tarp_04.png") { //medium covered hopper truck side 2cc
    tmpl_7()
}

spritegroup spritegroup_w_m_hopp_a { //medium covered hopper truck side olive
    loaded:  [spriteset_w_m_tarp_side_a];
    loading: [spriteset_w_m_hopp_side];
}
spritegroup spritegroup_w_m_hopp_b { //medium covered hopper truck side grey
    loaded:  [spriteset_w_m_tarp_side_b];
    loading: [spriteset_w_m_hopp_side];
}
spritegroup spritegroup_w_m_hopp_c { //medium covered hopper truck side 1cc
    loaded:  [spriteset_w_m_tarp_side_c];
    loading: [spriteset_w_m_hopp_side];
}
spritegroup spritegroup_w_m_hopp_d { //medium covered hopper truck side 2cc
    loaded:  [spriteset_w_m_tarp_side_d];
    loading: [spriteset_w_m_hopp_side];
}


switch (FEAT_ROADVEHS, SELF, switch_w_m_t_hopp_a, random_bits ) {
        0..171:         spritegroup_w_m_hopp_b;
        172..255:       spritegroup_w_m_hopp_a;
        default:        spritegroup_w_m_hopp_b;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_t_hopp_b, random_bits ) {
        0..171:         spritegroup_w_m_hopp_c;
        172..219:       spritegroup_w_m_hopp_d;
        220..255:       spritegroup_w_m_hopp_b;
        default:        spritegroup_w_m_hopp_b;           
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_t_hopp, build_year ) {
        0..1959:        spritegroup_w_m_hopp_a;
        1960..1974:     switch_w_m_t_hopp_a;
        1975..1994:     spritegroup_w_m_hopp_b;
        default:        switch_w_m_t_hopp_b;            
}

//

switch(FEAT_ROADVEHS, SELF, switch_trail_hopp_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_s_f_trail;
    1:  switch_w_s_f_hopp;
    2:  switch_w_s_c_bulk;
    3:  switch_w_s_t_hopp;
}
switch(FEAT_ROADVEHS, SELF, switch_trail_hopp_6, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_m_f_trail;
    1:  spriteset_w_m_hopp_truck;
    2:  switch_w_m_c_bulk;
    3:  switch_w_m_t_hopp;
}

/* ===currently unused
spriteset(spriteset_s_hopp_grey_1, "gfx/S/s_hopp_grey_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_grey_2, "gfx/S/s_hopp_grey_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_grey_3, "gfx/S/s_hopp_grey_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_grey_4, "gfx/S/s_hopp_grey_04.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_sand_1, "gfx/S/s_hopp_sand_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_sand_2, "gfx/S/s_hopp_sand_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_sand_3, "gfx/S/s_hopp_sand_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_sand_4, "gfx/S/s_hopp_sand_04.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_tarp_a, "gfx/S/s_hopp_tarp_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_tarp_b, "gfx/S/s_hopp_tarp_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_tarp_c, "gfx/S/s_hopp_tarp_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_hopp_tarp_d, "gfx/S/s_hopp_tarp_04.png") {
    tmpl_short()
}


spritegroup spritegroup_s_hopp_grey_a {
    loaded:  [spriteset_s_hopp_tarp_a];
    loading: [spriteset_s_hopp_grey_1, spriteset_s_hopp_grey_2, spriteset_s_hopp_grey_3, spriteset_s_hopp_grey_4];
}
spritegroup spritegroup_s_hopp_grey_b {
    loaded:  [spriteset_s_hopp_tarp_b];
    loading: [spriteset_s_hopp_grey_1, spriteset_s_hopp_grey_2, spriteset_s_hopp_grey_3, spriteset_s_hopp_grey_4];
}
spritegroup spritegroup_s_hopp_grey_c {
    loaded:  [spriteset_s_hopp_tarp_c];
    loading: [spriteset_s_hopp_grey_1, spriteset_s_hopp_grey_2, spriteset_s_hopp_grey_3, spriteset_s_hopp_grey_4];
}
spritegroup spritegroup_s_hopp_grey_d {
    loaded:  [spriteset_s_hopp_tarp_d];
    loading: [spriteset_s_hopp_grey_1, spriteset_s_hopp_grey_2, spriteset_s_hopp_grey_3, spriteset_s_hopp_grey_4];
}

spritegroup spritegroup_s_hopp_sand_a {
    loaded:  [spriteset_s_hopp_tarp_a];
    loading: [spriteset_s_hopp_sand_1, spriteset_s_hopp_sand_2, spriteset_s_hopp_sand_3, spriteset_s_hopp_sand_4];
}
spritegroup spritegroup_s_hopp_sand_b {
    loaded:  [spriteset_s_hopp_tarp_b];
    loading: [spriteset_s_hopp_sand_1, spriteset_s_hopp_sand_2, spriteset_s_hopp_sand_3, spriteset_s_hopp_sand_4];
}
spritegroup spritegroup_s_hopp_sand_c {
    loaded:  [spriteset_s_hopp_tarp_c];
    loading: [spriteset_s_hopp_sand_1, spriteset_s_hopp_sand_2, spriteset_s_hopp_sand_3, spriteset_s_hopp_sand_4];
}
spritegroup spritegroup_s_hopp_sand_d {
    loaded:  [spriteset_s_hopp_tarp_d];
    loading: [spriteset_s_hopp_sand_1, spriteset_s_hopp_sand_2, spriteset_s_hopp_sand_3, spriteset_s_hopp_sand_4];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_s_hopp_a, cargo_type_in_veh ) {
        FERT: spritegroup_s_hopp_grey_a;
        CHEM: spritegroup_s_hopp_grey_a;
        SASH: spritegroup_s_hopp_grey_a;
        BDMT: spritegroup_s_hopp_grey_a;
        default: spritegroup_s_hopp_sand_a; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_s_hopp_b, cargo_type_in_veh ) {
        FERT: spritegroup_s_hopp_grey_b;
        CHEM: spritegroup_s_hopp_grey_b;
        SASH: spritegroup_s_hopp_grey_b;
        BDMT: spritegroup_s_hopp_grey_b;
        default: spritegroup_s_hopp_sand_b; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_s_hopp_c, cargo_type_in_veh ) {
        FERT: spritegroup_s_hopp_grey_c;
        CHEM: spritegroup_s_hopp_grey_c;
        SASH: spritegroup_s_hopp_grey_c;
        BDMT: spritegroup_s_hopp_grey_c;
        default: spritegroup_s_hopp_sand_c; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_s_hopp_d, cargo_type_in_veh ) {
        FERT: spritegroup_s_hopp_grey_d;
        CHEM: spritegroup_s_hopp_grey_d;
        SASH: spritegroup_s_hopp_grey_d;
        BDMT: spritegroup_s_hopp_grey_d;
        default: spritegroup_s_hopp_sand_d; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_s_hopp, build_year ) {
        0..1940: switch_spritegroup_s_hopp_a;
        1941..1970: switch_spritegroup_s_hopp_b;
        1971..2000: switch_spritegroup_s_hopp_c;
        2000..5000000 : switch_spritegroup_s_hopp_d;
        default: switch_spritegroup_s_hopp_b;       
}
*/

spriteset(spriteset_m_hopp_grey_1, "gfx/M/m_hopp_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_grey_2, "gfx/M/m_hopp_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_grey_3, "gfx/M/m_hopp_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_grey_4, "gfx/M/m_hopp_grey_04.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_sand_1, "gfx/M/m_hopp_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_sand_2, "gfx/M/m_hopp_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_sand_3, "gfx/M/m_hopp_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_sand_4, "gfx/M/m_hopp_sand_04.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_tarp_a, "gfx/M/m_hopp_tarp_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_tarp_b, "gfx/M/m_hopp_tarp_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_tarp_c, "gfx/M/m_hopp_tarp_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_hopp_tarp_d, "gfx/M/m_hopp_tarp_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_hopp_grey_a {
    loaded:  [spriteset_m_hopp_tarp_a];
    loading: [spriteset_m_hopp_grey_1, spriteset_m_hopp_grey_2, spriteset_m_hopp_grey_3, spriteset_m_hopp_grey_4];
}
spritegroup spritegroup_m_hopp_grey_b {
    loaded:  [spriteset_m_hopp_tarp_b];
    loading: [spriteset_m_hopp_grey_1, spriteset_m_hopp_grey_2, spriteset_m_hopp_grey_3, spriteset_m_hopp_grey_4];
}
spritegroup spritegroup_m_hopp_grey_c {
    loaded:  [spriteset_m_hopp_tarp_c];
    loading: [spriteset_m_hopp_grey_1, spriteset_m_hopp_grey_2, spriteset_m_hopp_grey_3, spriteset_m_hopp_grey_4];
}
spritegroup spritegroup_m_hopp_grey_d {
    loaded:  [spriteset_m_hopp_tarp_d];
    loading: [spriteset_m_hopp_grey_1, spriteset_m_hopp_grey_2, spriteset_m_hopp_grey_3, spriteset_m_hopp_grey_4];
}

spritegroup spritegroup_m_hopp_sand_a {
    loaded:  [spriteset_m_hopp_tarp_a];
    loading: [spriteset_m_hopp_sand_1, spriteset_m_hopp_sand_2, spriteset_m_hopp_sand_3, spriteset_m_hopp_sand_4];
}
spritegroup spritegroup_m_hopp_sand_b {
    loaded:  [spriteset_m_hopp_tarp_b];
    loading: [spriteset_m_hopp_sand_1, spriteset_m_hopp_sand_2, spriteset_m_hopp_sand_3, spriteset_m_hopp_sand_4];
}
spritegroup spritegroup_m_hopp_sand_c {
    loaded:  [spriteset_m_hopp_tarp_c];
    loading: [spriteset_m_hopp_sand_1, spriteset_m_hopp_sand_2, spriteset_m_hopp_sand_3, spriteset_m_hopp_sand_4];
}
spritegroup spritegroup_m_hopp_sand_d {
    loaded:  [spriteset_m_hopp_tarp_d];
    loading: [spriteset_m_hopp_sand_1, spriteset_m_hopp_sand_2, spriteset_m_hopp_sand_3, spriteset_m_hopp_sand_4];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_m_hopp_a, cargo_type_in_veh ) {
        FERT: spritegroup_m_hopp_grey_a;
        CHEM: spritegroup_m_hopp_grey_a;
        SASH: spritegroup_m_hopp_grey_a;
        BDMT: spritegroup_m_hopp_grey_a;
        default: spritegroup_m_hopp_sand_a; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_m_hopp_b, cargo_type_in_veh ) {
        FERT: spritegroup_m_hopp_grey_b;
        CHEM: spritegroup_m_hopp_grey_b;
        SASH: spritegroup_m_hopp_grey_b;
        BDMT: spritegroup_m_hopp_grey_b;
        default: spritegroup_m_hopp_sand_b; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_m_hopp_c, cargo_type_in_veh ) {
        FERT: spritegroup_m_hopp_grey_c;
        CHEM: spritegroup_m_hopp_grey_c;
        SASH: spritegroup_m_hopp_grey_c;
        BDMT: spritegroup_m_hopp_grey_c;
        default: spritegroup_m_hopp_sand_c; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_m_hopp_d, cargo_type_in_veh ) {
        FERT: spritegroup_m_hopp_grey_d;
        CHEM: spritegroup_m_hopp_grey_d;
        SASH: spritegroup_m_hopp_grey_d;
        BDMT: spritegroup_m_hopp_grey_d;
        default: spritegroup_m_hopp_sand_d; // Default to brown     
}
switch (FEAT_ROADVEHS, SELF, switch_spritegroup_m_hopp, build_year ) {
        0..1940: switch_spritegroup_m_hopp_a;
        1941..1970: switch_spritegroup_m_hopp_b;
        1971..2000: switch_spritegroup_m_hopp_c;
        2000..5000000 : switch_spritegroup_m_hopp_d;
        default: switch_spritegroup_m_hopp_b;       
}


/*
spriteset(spriteset_sfc_hopp, "gfx/P/so_hopp_01.png") {
    tmpl_p()
}
spriteset(spriteset_sfd_hopp, "gfx/P/so_hopp_02.png") {
    tmpl_p()
}
*/

//sfb covered hopper graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfb_hopp, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_hopp_6; //default
}

spriteset(spriteset_sfb_hopp, "gfx/P/so_hopp_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfb_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfb_hopp;
    1:  switch_fuel_icon;
}

//sfb covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfb_hopp, extra_callback_info1) {
    1:  return item_sfb_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfb_hopp, 1813) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BWB), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  8;
    cost_factor:                    100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfb_truck;
    cost_factor:                buycost_cfb_truck;
    articulated_part:           switch_sfb_hopp;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_cb_box;
    purchase_cargo_capacity:    purchase_capacity_cb_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfb;
    default:                    switch_spriteset_sfb_hopp;
    purchase:                   switch_purchase_sfb_hopp; 
    }
}
}

//sfa covered hopper graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfa_hopp, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_hopp_6; //default
}

spriteset(spriteset_sfa_hopp, "gfx/P/so_hopp_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sfa_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfa_hopp;
    1:  switch_fuel_icon;
}
//sfa covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfa_hopp, extra_callback_info1) {
    1:  return item_sfa_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfa_hopp, 1814) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_OGA), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  10;
    cost_factor:                    110;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          140 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfa_truck;
    cost_factor:                buycost_cfa_truck;
    articulated_part:           switch_sfa_hopp;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_ca_box;
    purchase_cargo_capacity:    purchase_capacity_ca_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfa;
    default:                    switch_spriteset_sfa_hopp;
    purchase:                   switch_purchase_sfa_hopp; 
    }
}
}

//sf1 covered hopper graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sf1_hopp, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_hopp_6; //default
}

spriteset(spriteset_sf1_hopp, "gfx/P/sf_hopp_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sf1_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sf1_hopp;
    1:  switch_fuel_icon;
}
//sf1 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf1_hopp, extra_callback_info1) {
    1:  return item_sf1_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf1_hopp, 1815) {
property {
    name:                           string(STR_CONCAT, string(STR_CFMOD_TM1), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    130;      
    running_cost_factor:            125;      
    speed:                          65 km/h; 
    power:                          210 hp;   
    cargo_capacity:                 22;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf1_truck;
    cost_factor:                buycost_cf1_truck;
    articulated_part:           switch_sf1_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_box;
    purchase_cargo_capacity:    purchase_capacity_c1_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf1;
    default:                    switch_spriteset_sf1_hopp; 
    purchase:                   switch_purchase_sf1_hopp;
    }
}
}

//mf2 covered hopper graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf2_hopp, position_in_consist ) {
    0:  switch_cf_02;
        switch_spritegroup_m_hopp; //default
}

spriteset(spriteset_mf2_hopp, "gfx/P/sf_hopp_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf2_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf2_hopp;
    1:  switch_fuel_icon;
}

//mf2 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf2_hopp, extra_callback_info1) {
    1:  return item_mf2_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf2_hopp, 1816) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BW2), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          380 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf2_truck;
    cost_factor:                buycost_cf2_truck;
    articulated_part:           switch_mf2_hopp;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_box;
    purchase_cargo_capacity:    purchase_capacity_c2_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf2;
    default:                    switch_spriteset_mf2_hopp;
    purchase:                   switch_purchase_mf2_hopp; 
    }
}
}

//mf3 covered hopper graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf3_hopp, position_in_consist ) {
    0:  switch_cf_03;
        switch_spritegroup_m_hopp; //default
}

spriteset(spriteset_mf3_hopp, "gfx/P/sf_hopp_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf3_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf3_hopp;
    1:  switch_fuel_icon;
}
//mf3 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf3_hopp, extra_callback_info1) {
    1:  return item_mf3_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf3_hopp, 1817) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_DN3), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf3_truck;
    cost_factor:                buycost_cf3_truck;
    articulated_part:           switch_mf3_hopp;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf3;
    default:                    switch_spriteset_mf3_hopp; 
    purchase:                   switch_purchase_mf3_hopp;
    }
}
}

//mf4 covered hopper graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf4_hopp, position_in_consist ) {
    0:  switch_cf_04;
        switch_spritegroup_m_hopp; //default
}
spriteset(spriteset_mf4_hopp, "gfx/P/sf_hopp_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mf4_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf4_hopp;
    1:  switch_fuel_icon;
}

//mf4 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf4_hopp, extra_callback_info1) {
    1:  return item_mf4_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf4_hopp, 1818) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_OG4), string(STR_HOPP), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  14;
    cost_factor:                    190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         19 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf4_truck;
    cost_factor:                buycost_cf4_truck;
    articulated_part:           switch_mf4_hopp;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf4;
    default:                    switch_spriteset_mf4_hopp;
    purchase:                   switch_purchase_mf4_hopp; 
    }
}
}

//st1 covered hopper graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_st1_hopp, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_hopp_6; //default
}
spriteset(spriteset_st1_hopp, "gfx/P/st_hopp_01.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_st1_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st1_hopp;
    1:  switch_wire_icon;
}
//st1 covered hopper properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st1_hopp, extra_callback_info1) {
    1:  return item_st1_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}



if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st1_hopp, 2815) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_LC1), string(STR_HOPP), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);   
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          400;   
    cargo_capacity:                 22;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct1_truck;
    cost_factor:                buycost_ct1_truck;
    articulated_part:           switch_st1_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_box;
    purchase_cargo_capacity:    purchase_capacity_c1_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct1;
    default:                    switch_spriteset_st1_hopp;
    purchase:                   switch_purchase_st1_hopp;
    }
}
}

//mt2 covered hopper graphics

//graphics definition


//mt2 covered hopper graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt2_hopp, position_in_consist ) {
    0:  switch_ct_02;
        switch_spritegroup_m_hopp; //default
}
spriteset(spriteset_mt2_hopp, "gfx/P/st_hopp_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt2_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt2_hopp;
    1:  switch_wire_icon;
}
//mt2 covered hopper properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt2_hopp, extra_callback_info1) {
    1:  return item_mt2_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}



if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt2_hopp, 2816) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_BW2), string(STR_HOPP), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          740;   
    cargo_capacity:                 30;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct2_truck;
    cost_factor:                buycost_ct2_truck;
    articulated_part:           switch_mt2_hopp;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_box;
    purchase_cargo_capacity:    purchase_capacity_c2_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct2;
    default:                    switch_spriteset_mt2_hopp;
    purchase:                   switch_purchase_mt2_hopp;
    }
}
}

//mt3 covered hopper graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt3_hopp, position_in_consist ) {
    0:  switch_ct_03;
        switch_spritegroup_m_hopp; //default
}
spriteset(spriteset_mt3_hopp, "gfx/P/st_hopp_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt3_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt3_hopp;
    1:  switch_wire_icon;
}

//mt3 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt3_hopp, extra_callback_info1) {
    1:  return item_mt3_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt3_hopp, 2817) {
property {
    name:                           string(STR_CONCAT, string(STR_CTMOD_KD3), string(STR_HOPP), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct3_truck;
    cost_factor:                buycost_ct3_truck;
    articulated_part:           switch_mt3_hopp;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct3;
    default:                    switch_spriteset_mt3_hopp;
    purchase:                   switch_purchase_mt3_hopp; 
    }
}
}

//mt4 covered hopper graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt4_hopp, position_in_consist ) {
    0:  switch_ct_04;
        switch_spritegroup_m_hopp; //default
}
spriteset(spriteset_mt4_hopp, "gfx/P/st_hopp_04.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_mt4_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt4_hopp;
    1:  switch_wire_icon;
}

//mt4 covered hopper properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt4_hopp, extra_callback_info1) {
    1:  return item_mt4_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt4_hopp, 2818) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_DN4), string(STR_HOPP), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  14;
    cost_factor:                    168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          2200;   
    cargo_capacity:                 39;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct4_truck;
    cost_factor:                buycost_ct4_truck;
    articulated_part:           switch_mt4_hopp;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct4;
    default:                    switch_spriteset_mt4_hopp;
    purchase:                   switch_purchase_mt4_hopp;
    }
}
}

// md3 hopp graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_md3_hopp, position_in_consist ) {
    0:  switch_cd_03;
        switch_spritegroup_m_hopp; //default
}

spriteset(spriteset_md3_hopp, "gfx/P/sd_hopp_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md3_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md3_hopp;
    1:  switch_dual_icon;
}

//md3 hopp properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md3_hopp, extra_callback_info1) {
    1:  return item_md3_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md3_hopp, 3817) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_BW3), string(STR_HOPP), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }

graphics {
    power:                      switch_boost_cd3;
    running_cost_factor:        switch_e_cost_cd3;
    cost_factor:                buycost_cd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md3_hopp;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_box;
    purchase_cargo_capacity:    purchase_capacity_c3_box;
    default:                    switch_spriteset_md3_hopp; 
    purchase:                   switch_purchase_md3_hopp;
    }
}
}

//md4 hopp graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_md4_hopp, position_in_consist ) {
    0:  switch_cd_04;
        switch_spritegroup_m_hopp; //default
}

spriteset(spriteset_md4_hopp, "gfx/P/sd_hopp_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md4_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md4_hopp;
    1:  switch_dual_icon;
}

//md4 hopp properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md4_hopp, extra_callback_info1) {
    1:  return item_md4_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md4_hopp, 3818) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_DN4), string(STR_HOPP), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  14;
    cost_factor:                    200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          2100;   
    cargo_capacity:                 36;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }

graphics {
    power:                      switch_boost_cd4;
    running_cost_factor:        switch_e_cost_cd4;
    cost_factor:                buycost_cd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md4_hopp;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_box;
    purchase_cargo_capacity:    purchase_capacity_c4_box;
    default:                    switch_spriteset_md4_hopp; 
    purchase:                   switch_purchase_md4_hopp;
    }
}
}

//hfb covered hopper graphics

//graphics definition

spriteset(spriteset_hfb_hopp, "gfx/P/ho_hopp_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfb_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfb_hopp;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfb_hopp, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_hopp_4; //default
}

//hfb covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfb_hopp, extra_callback_info1) {
    1..3:  return item_hfb_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfb_hopp, 1823) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG1), string(STR_HOPP), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  8;
    cost_factor:                    (7/4) *     100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          (11/10)*    100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (8 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfb_truck;
    cost_factor:                buycost_hfb_truck;
    articulated_part:           switch_hfb_hopp;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_hb_box;
    purchase_cargo_capacity:    purchase_capacity_hb_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfb;
    default:                    switch_spriteset_hfb_hopp; 
    purchase:                   switch_purchase_hfb_hopp;
    }
}
}

//hfa covered hopper graphics

//graphics definition

spriteset(spriteset_hfa_hopp, "gfx/P/ho_hopp_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfa_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfa_hopp;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfa_hopp, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_hopp_4; //default
}

//hfa covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfa_hopp, extra_callback_info1) {
    1..3:  return item_hfa_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfa_hopp, 1824) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN1), string(STR_HOPP), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  10;
    cost_factor:                    (7/4) *     110;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          (11/10)*    140 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfa_truck;
    cost_factor:                buycost_hfa_truck;
    articulated_part:           switch_hfa_hopp;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_ha_box;
    purchase_cargo_capacity:    purchase_capacity_ha_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfa;
    default:                    switch_spriteset_hfa_hopp; 
    purchase:                   switch_purchase_hfa_hopp; 
    }
}
}

//hf1 covered hopper graphics

//graphics definition

spriteset(spriteset_hf1_hopp, "gfx/P/hf_hopp_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf1_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf1_hopp;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf1_hopp, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_hopp_6; //default
}
//hf1 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf1_hopp, extra_callback_info1) {
    1..3:  return item_hf1_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf1_hopp, 1825) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_TM1), string(STR_HOPP), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            125;      
    speed:                          65 km/h; 
    power:                          (11/10)*    210 hp;   
    cargo_capacity:                 22;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (11 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf1_truck;
    cost_factor:                buycost_hf1_truck;
    articulated_part:           switch_hf1_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_box;
    purchase_cargo_capacity:    purchase_capacity_h1_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf1;
    default:                    switch_spriteset_hf1_hopp; 
    purchase:                   switch_purchase_hf1_hopp;
    }
}
}

//hf2 covered hopper graphics

//graphics definition

spriteset(spriteset_hf2_hopp, "gfx/P/hf_hopp_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf2_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf2_hopp;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf2_hopp, position_in_consist ) {
    0:  switch_cf_02;
        switch_trail_hopp_6; //default
}

//hf2 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf2_hopp, extra_callback_info1) {
    1..3:  return item_hf2_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf2_hopp, 1826) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_HOPP), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          (11/10) *   380 hp;   
    cargo_capacity:                 26;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf2_truck;
    cost_factor:                buycost_hf2_truck;
    articulated_part:           switch_hf2_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_box;
    purchase_cargo_capacity:    purchase_capacity_h2_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf2;
    default:                    switch_spriteset_hf2_hopp; 
    purchase:                   switch_purchase_hf2_hopp;
    }
}
}

//hf3 covered hopper graphics

//graphics definition

spriteset(spriteset_hf3_hopp, "gfx/P/hf_hopp_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf3_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf3_hopp;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf3_hopp, position_in_consist ) {
    0:  switch_cf_03;
        switch_trail_hopp_6; //default
}

//hf3 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf3_hopp, extra_callback_info1) {
    1..3:  return item_hf3_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf3_hopp, 1827) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_HOPP), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          (11/10)*    560 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (16 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf3_truck;
    cost_factor:                buycost_hf3_truck;
    articulated_part:           switch_hf3_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf3;
    default:                    switch_spriteset_hf3_hopp; 
    purchase:                   switch_purchase_hf3_hopp;
    }
}
}

//hf4 covered hopper graphics

//graphics definition

spriteset(spriteset_hf4_hopp, "gfx/P/hf_hopp_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf4_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf4_hopp;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf4_hopp, position_in_consist ) {
    0:  switch_cf_04;
        switch_trail_hopp_6; //default
}

//hf4 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf4_hopp, extra_callback_info1) {
    1..3:  return item_hf4_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf4_hopp, 1828) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG2), string(STR_HOPP), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  14;
    cost_factor:                    (7/4) *     190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          (11/10)*    560 hp;   
    cargo_capacity:                 36;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (19 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf4_truck;
    cost_factor:                buycost_hf4_truck;
    articulated_part:           switch_hf4_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf4;
    default:                    switch_spriteset_hf4_hopp; 
    purchase:                   switch_purchase_hf4_hopp;
    }
}
}

//ht1 covered hopper graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht1_hopp, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_hopp_6; //default
}

spriteset(spriteset_ht1_hopp, "gfx/P/ht_hopp_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht1_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht1_hopp;
    1:  switch_wire_icon;
}

//ht1 covered hopper properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht1_hopp, extra_callback_info1) {
    1..3:  return item_ht1_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht1_hopp, 2825) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW1), string(STR_HOPP), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);   
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          (11/10)*    400;   
    cargo_capacity:                 22;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (9 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht1_truck;
    cost_factor:                buycost_ht1_truck;
    articulated_part:           switch_ht1_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_box;
    purchase_cargo_capacity:    purchase_capacity_h1_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht1;
    default:                    switch_spriteset_ht1_hopp; 
    purchase:                   switch_purchase_ht1_hopp;
    }
}
}

//ht2 covered hopper graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht2_hopp, position_in_consist ) {
    0:  switch_ct_02;
        switch_trail_hopp_6; //default
}

spriteset(spriteset_ht2_hopp, "gfx/P/ht_hopp_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht2_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht2_hopp;
    1:  switch_wire_icon;
}

//ht2 covered hopper properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht2_hopp, extra_callback_info1) {
    1..3:  return item_ht2_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht2_hopp, 2826) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_HOPP), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          (11/10)*    740;   
    cargo_capacity:                 30;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (12 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht2_truck;
    cost_factor:                buycost_ht2_truck;
    articulated_part:           switch_ht2_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_box;
    purchase_cargo_capacity:    purchase_capacity_h2_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht2;
    default:                    switch_spriteset_ht2_hopp; 
    purchase:                   switch_purchase_ht2_hopp;
    }
}
}

//ht3 covered hopper graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht3_hopp, position_in_consist ) {
    0:  switch_ct_03;
        switch_trail_hopp_6; //default
}

spriteset(spriteset_ht3_hopp, "gfx/P/ht_hopp_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht3_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht3_hopp;
    1:  switch_wire_icon;
}

//ht3 covered hopper properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht3_hopp, extra_callback_info1) {
    1..3:  return item_ht3_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht3_hopp, 2827) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_LC2), string(STR_HOPP), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht3_truck;
    cost_factor:                buycost_ht3_truck;
    articulated_part:           switch_ht3_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht3;
    default:                    switch_spriteset_ht3_hopp; 
    purchase:                   switch_purchase_ht3_hopp;
    }
}
}

//ht4 covered hopper graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht4_hopp, position_in_consist ) {
    0:  switch_ct_04;
        switch_trail_hopp_6; //default
}

spriteset(spriteset_ht4_hopp, "gfx/P/ht_hopp_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht4_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht4_hopp;
    1:  switch_wire_icon;
}

//ht4 covered hopper properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht4_hopp, extra_callback_info1) {
    1..3:  return item_ht4_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht4_hopp, 2828) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_KD2), string(STR_HOPP), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  14;
    cost_factor:                    (7/4) *     168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          (11/10)*  2200;   
    cargo_capacity:                 39;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht4_truck;
    cost_factor:                buycost_ht4_truck;
    articulated_part:           switch_ht4_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht4;
    default:                    switch_spriteset_ht4_hopp; 
    purchase:                   switch_purchase_ht4_hopp;
    }
}
}

// hd3 hopp graphics

spriteset(spriteset_hd3_hopp, "gfx/P/hd_hopp_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd3_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd3_hopp;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd3_hopp, position_in_consist ) {
    0:  switch_cd_03;
        switch_trail_hopp_6; //default
}


//hd3 hopp properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd3_hopp, extra_callback_info1) {
    1..3:  return item_hd3_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd3_hopp, 3827) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_HOPP), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1200 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (17 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd3;
    running_cost_factor:        switch_e_cost_hd3;
    cost_factor:                buycost_hd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd3_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_box;
    purchase_cargo_capacity:    purchase_capacity_h3_box;
    default:                    switch_spriteset_hd3_hopp; 
    purchase:                   switch_purchase_hd3_hopp;
    }
}
}

//hd4 hopp graphics

//graphics definition

spriteset(spriteset_hd4_hopp, "gfx/P/hd_hopp_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd4_hopp, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd4_hopp;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd4_hopp, position_in_consist ) {
    0:  switch_cd_04;
        switch_trail_hopp_6; //default
}

//hd4 hopp properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd4_hopp, extra_callback_info1) {
    1..3:  return item_hd4_hopp; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd4_hopp, 3828) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_HOPP), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_COVERED, CC_POWDERIZED, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_PIECE_GOODS, CC_OVERSIZED, CC_NON_POURABLE, CC_NEO_BULK);
    cargo_allow_refit:              [FERT, PLAS, CBLK];
    cargo_disallow_refit:           [COAL, SCMT, IORE, CORE, AORE, RCYC, COKE, GRVL, FRUT, SLAG, PORE];
    default_cargo_type:             GRAI; 
    loading_speed:                  14;
    cost_factor:                    (7/4) *     200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2100;   
    cargo_capacity:                 36;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (20 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd4;
    running_cost_factor:        switch_e_cost_hd4;
    cost_factor:                buycost_hd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd4_hopp;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_box;
    purchase_cargo_capacity:    purchase_capacity_h4_box;
    default:                    switch_spriteset_hd4_hopp; 
    purchase:                   switch_purchase_hd4_hopp;
    }
}
}


//MINE

// Mineral Trailer graphics


spriteset(spriteset_w_s_mine_truck_a, "gfx/W/w_s_f_mine_01.png") { //short mineral truck floor old
    tmpl_7()
}
spriteset(spriteset_w_s_mine_truck_b, "gfx/W/w_s_f_mine_04.png") { //short mineral truck floor new
    tmpl_7()
}
spriteset(spriteset_w_s_mine_side_a, "gfx/W/w_s_t_mine_01.png") { //short mineral truck side old
    tmpl_7()
}
spriteset(spriteset_w_s_mine_side_b, "gfx/W/w_s_t_mine_04.png") { //short mineral truck side new
    tmpl_7()
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_f_mine_a, random_bits ) {
        0..171:     spriteset_w_s_mine_truck_b;
        172..255:       spriteset_w_s_mine_truck_a;
        default:        spriteset_w_s_mine_truck_b;           
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_f_mine, build_year ) {
        0..1939:        spriteset_w_s_mine_truck_a;
        1940..1964:     switch_w_s_f_mine_a;
        1965..5000000:  spriteset_w_s_mine_truck_b;
        default:        spriteset_w_s_mine_truck_b;            
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_t_mine_a, random_bits ) {
        0..171:     spriteset_w_s_mine_truck_b;
        172..255:       spriteset_w_s_mine_truck_a;
        default:        spriteset_w_s_mine_truck_b;           
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_t_mine, build_year ) {
        0..1939:        spriteset_w_s_mine_side_a;
        1940..1964:     switch_w_s_t_mine_a;
        1965..5000000:  spriteset_w_s_mine_side_b;
        default:        spriteset_w_s_mine_side_b;            
}

spriteset(spriteset_w_m_mine_truck_a, "gfx/W/w_m_f_mine_01.png") { //medium mineral truck floor new
    tmpl_7()
}
spriteset(spriteset_w_m_mine_side_a, "gfx/W/w_m_t_mine_01.png") { //medium mineral truck side new
    tmpl_7()
}

//
switch(FEAT_ROADVEHS, SELF, switch_trail_mine_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_s_f_trail;
    1:  switch_w_s_f_mine;
    2:  switch_w_s_c_bulk;
    3:  switch_w_s_t_mine;
}
switch(FEAT_ROADVEHS, SELF, switch_trail_mine_6, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_w_m_f_trail;
    1:  spriteset_w_m_mine_truck_a;
    2:  switch_w_m_c_bulk;
    3:  spriteset_w_m_mine_side_a;
}

/*  currently unusedused
spriteset(spriteset_s_mine_grey_1, "gfx/S/s_mine_grey_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_grey_2, "gfx/S/s_mine_grey_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_grey_3, "gfx/S/s_mine_grey_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_grey_4, "gfx/S/s_mine_grey_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_mine_grey {
    loaded:  [spriteset_s_mine_grey_1, spriteset_s_mine_grey_2, spriteset_s_mine_grey_3, spriteset_s_mine_grey_4];
    loading: [spriteset_s_mine_grey_1, spriteset_s_mine_grey_2, spriteset_s_mine_grey_3, spriteset_s_mine_grey_4];
}

spriteset(spriteset_s_mine_coal_1, "gfx/S/s_mine_coal_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_coal_2, "gfx/S/s_mine_coal_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_coal_3, "gfx/S/s_mine_coal_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_coal_4, "gfx/S/s_mine_coal_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_mine_coal {
    loaded:  [spriteset_s_mine_coal_1, spriteset_s_mine_coal_2, spriteset_s_mine_coal_3, spriteset_s_mine_coal_4];
    loading: [spriteset_s_mine_coal_1, spriteset_s_mine_coal_2, spriteset_s_mine_coal_3, spriteset_s_mine_coal_4];
}

spriteset(spriteset_s_mine_ore_1, "gfx/S/s_mine_ore_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_ore_2, "gfx/S/s_mine_ore_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_ore_3, "gfx/S/s_mine_ore_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_ore_4, "gfx/S/s_mine_ore_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_mine_ore {
    loaded:  [spriteset_s_mine_ore_1, spriteset_s_mine_ore_2, spriteset_s_mine_ore_3, spriteset_s_mine_ore_4];
    loading: [spriteset_s_mine_ore_1, spriteset_s_mine_ore_2, spriteset_s_mine_ore_3, spriteset_s_mine_ore_4];
}

spriteset(spriteset_s_mine_scrap_1, "gfx/S/s_mine_scrap_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_scrap_2, "gfx/S/s_mine_scrap_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_scrap_3, "gfx/S/s_mine_scrap_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_scrap_4, "gfx/S/s_mine_scrap_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_mine_scrap {
    loaded:  [spriteset_s_mine_scrap_1, spriteset_s_mine_scrap_2, spriteset_s_mine_scrap_3, spriteset_s_mine_scrap_4];
    loading: [spriteset_s_mine_scrap_1, spriteset_s_mine_scrap_2, spriteset_s_mine_scrap_3, spriteset_s_mine_scrap_4];
}

spriteset(spriteset_s_mine_sand_1, "gfx/S/s_mine_sand_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_sand_2, "gfx/S/s_mine_sand_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_sand_3, "gfx/S/s_mine_sand_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_sand_4, "gfx/S/s_mine_sand_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_mine_sand {
    loaded:  [spriteset_s_mine_sand_1, spriteset_s_mine_sand_2, spriteset_s_mine_sand_3, spriteset_s_mine_sand_4];
    loading: [spriteset_s_mine_sand_1, spriteset_s_mine_sand_2, spriteset_s_mine_sand_3, spriteset_s_mine_sand_4];
}

spriteset(spriteset_s_mine_brown_1, "gfx/S/s_mine_brown_01.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_brown_2, "gfx/S/s_mine_brown_02.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_brown_3, "gfx/S/s_mine_brown_03.png") {
    tmpl_short()
}
spriteset(spriteset_s_mine_brown_4, "gfx/S/s_mine_brown_04.png") {
    tmpl_short()
}

spritegroup spritegroup_s_mine_brown {
    loaded:  [spriteset_s_mine_brown_1, spriteset_s_mine_brown_2, spriteset_s_mine_brown_3, spriteset_s_mine_brown_4];
    loading: [spriteset_s_mine_brown_1, spriteset_s_mine_brown_2, spriteset_s_mine_brown_3, spriteset_s_mine_brown_4];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_s_mine, cargo_type_in_veh ) {
        COAL: spritegroup_s_mine_coal;
        COKE: spritegroup_s_mine_coal;
        SCMT: spritegroup_s_mine_scrap;
        RCYC: spritegroup_s_mine_scrap;
        SAND: spritegroup_s_mine_sand;
        PHOS: spritegroup_s_mine_sand;
        GRVL: spritegroup_s_mine_grey;
        LIME: spritegroup_s_mine_grey;
        SASH: spritegroup_s_mine_grey;
        IORE: spritegroup_s_mine_ore;
        AORE: spritegroup_s_mine_ore;
        default: spritegroup_s_mine_brown; // Default to brown      
}
*/
spriteset(spriteset_m_mine_grey_1, "gfx/M/m_mine_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_grey_2, "gfx/M/m_mine_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_grey_3, "gfx/M/m_mine_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_grey_4, "gfx/M/m_mine_grey_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_mine_grey {
    loaded:  [spriteset_m_mine_grey_1, spriteset_m_mine_grey_2, spriteset_m_mine_grey_3, spriteset_m_mine_grey_4];
    loading: [spriteset_m_mine_grey_1, spriteset_m_mine_grey_2, spriteset_m_mine_grey_3, spriteset_m_mine_grey_4];
}

spriteset(spriteset_m_mine_coal_1, "gfx/M/m_mine_coal_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_coal_2, "gfx/M/m_mine_coal_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_coal_3, "gfx/M/m_mine_coal_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_coal_4, "gfx/M/m_mine_coal_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_mine_coal {
    loaded:  [spriteset_m_mine_coal_1, spriteset_m_mine_coal_2, spriteset_m_mine_coal_3, spriteset_m_mine_coal_4];
    loading: [spriteset_m_mine_coal_1, spriteset_m_mine_coal_2, spriteset_m_mine_coal_3, spriteset_m_mine_coal_4];
}

spriteset(spriteset_m_mine_ore_1, "gfx/M/m_mine_ore_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_ore_2, "gfx/M/m_mine_ore_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_ore_3, "gfx/M/m_mine_ore_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_ore_4, "gfx/M/m_mine_ore_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_mine_ore {
    loaded:  [spriteset_m_mine_ore_1, spriteset_m_mine_ore_2, spriteset_m_mine_ore_3, spriteset_m_mine_ore_4];
    loading: [spriteset_m_mine_ore_1, spriteset_m_mine_ore_2, spriteset_m_mine_ore_3, spriteset_m_mine_ore_4];
}

spriteset(spriteset_m_mine_scrap_1, "gfx/M/m_mine_scrap_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_scrap_2, "gfx/M/m_mine_scrap_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_scrap_3, "gfx/M/m_mine_scrap_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_scrap_4, "gfx/M/m_mine_scrap_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_mine_scrap {
    loaded:  [spriteset_m_mine_scrap_1, spriteset_m_mine_scrap_2, spriteset_m_mine_scrap_3, spriteset_m_mine_scrap_4];
    loading: [spriteset_m_mine_scrap_1, spriteset_m_mine_scrap_2, spriteset_m_mine_scrap_3, spriteset_m_mine_scrap_4];
}

spriteset(spriteset_m_mine_sand_1, "gfx/M/m_mine_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_sand_2, "gfx/M/m_mine_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_sand_3, "gfx/M/m_mine_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_sand_4, "gfx/M/m_mine_sand_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_mine_sand {
    loaded:  [spriteset_m_mine_sand_1, spriteset_m_mine_sand_2, spriteset_m_mine_sand_3, spriteset_m_mine_sand_4];
    loading: [spriteset_m_mine_sand_1, spriteset_m_mine_sand_2, spriteset_m_mine_sand_3, spriteset_m_mine_sand_4];
}

spriteset(spriteset_m_mine_brown_1, "gfx/M/m_mine_brown_01.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_brown_2, "gfx/M/m_mine_brown_02.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_brown_3, "gfx/M/m_mine_brown_03.png") {
    tmpl_7()
}
spriteset(spriteset_m_mine_brown_4, "gfx/M/m_mine_brown_04.png") {
    tmpl_7()
}

spritegroup spritegroup_m_mine_brown {
    loaded:  [spriteset_m_mine_brown_1, spriteset_m_mine_brown_2, spriteset_m_mine_brown_3, spriteset_m_mine_brown_4];
    loading: [spriteset_m_mine_brown_1, spriteset_m_mine_brown_2, spriteset_m_mine_brown_3, spriteset_m_mine_brown_4];
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_m_mine, cargo_type_in_veh ) {
        COAL: spritegroup_m_mine_coal;
        COKE: spritegroup_m_mine_coal;
        SCMT: spritegroup_m_mine_scrap;
        RCYC: spritegroup_m_mine_scrap;
        SAND: spritegroup_m_mine_sand;
        PHOS: spritegroup_m_mine_sand;
        GRVL: spritegroup_m_mine_grey;
        LIME: spritegroup_m_mine_grey;
        SASH: spritegroup_m_mine_grey;
        IORE: spritegroup_m_mine_ore;
        AORE: spritegroup_m_mine_ore;
        default: spritegroup_m_mine_brown; // Default to brown      
}


/*
spriteset(spriteset_sfc_mine, "gfx/P/so_mine_01.png") {
    tmpl_p()
}
spriteset(spriteset_sfd_mine, "gfx/P/so_mine_02.png") {
    tmpl_p()
}
*/

//Mineral Trailer capacity

switch (FEAT_ROADVEHS, SELF, switch_capacity_cb_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*18)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ca_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*23)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c1_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*31)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c2_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*39)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c3_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*42)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_c4_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*45)/2);
}

purchase_capacity_cb_mine = ((param_capacity*18)/4);

purchase_capacity_ca_mine = ((param_capacity*23)/4);

purchase_capacity_c1_mine = ((param_capacity*31)/4);

purchase_capacity_c2_mine = ((param_capacity*39)/4);

purchase_capacity_c3_mine = ((param_capacity*42)/4);

purchase_capacity_c4_mine = ((param_capacity*45)/4);


switch (FEAT_ROADVEHS, SELF, switch_capacity_hb_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*18)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ha_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*23)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h1_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*31)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h2_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*34)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h3_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*36)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_h4_mine, position_in_consist ) {
        0:  return 0;
        default: ((param_capacity*39)/2);
}

purchase_capacity_hb_mine = ((param_capacity*54)/8);

purchase_capacity_ha_mine = ((param_capacity*69)/8);

purchase_capacity_h1_mine = ((param_capacity*93)/8);

purchase_capacity_h2_mine = ((param_capacity*102)/8);

purchase_capacity_h3_mine = ((param_capacity*108)/8);

purchase_capacity_h4_mine = ((param_capacity*117)/8);


//sfb mineral graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfb_mine, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_mine_6; //default
}
spriteset(spriteset_sfb_mine, "gfx/P/so_mine_03.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_sfb_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfb_mine;
    1:  switch_fuel_icon;
}

//sfb mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfb_mine, extra_callback_info1) {
    1:  return item_sfb_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfb_mine, 1913) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_DNB), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  12;
    cost_factor:                    100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfb_truck;
    cost_factor:                buycost_cfb_truck;
    articulated_part:           switch_sfb_mine;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_cb_mine;
    purchase_cargo_capacity:    purchase_capacity_cb_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfb;
    default:                    switch_spriteset_sfb_mine;
    purchase:                   switch_purchase_sfb_mine; 
    }
}
}

//sfa mineral graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sfa_mine, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_mine_6; //default
}
spriteset(spriteset_sfa_mine, "gfx/P/so_mine_04.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_sfa_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sfa_mine;
    1:  switch_fuel_icon;
}

//sfa mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sfa_mine, extra_callback_info1) {
    1:  return item_sfa_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sfa_mine, 1914) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_BWA), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  14;
    cost_factor:                    110;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          140 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cfa_truck;
    cost_factor:                buycost_cfa_truck;
    articulated_part:           switch_sfa_mine;
    length:                     switch_length_o_trailer;
    cargo_capacity:             switch_capacity_ca_mine;
    purchase_cargo_capacity:    purchase_capacity_ca_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cfa;
    default:                    switch_spriteset_sfa_mine;
    purchase:                   switch_purchase_sfa_mine; 
    }
}
}

//sf1 mineral graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_sf1_mine, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_mine_6; //default
}

spriteset(spriteset_sf1_mine, "gfx/P/sf_mine_01.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_sf1_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sf1_mine;
    1:  switch_fuel_icon;
}

//sf1 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf1_mine, extra_callback_info1) {
    1:  return item_sf1_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf1_mine, 1915) {
property {
    name:                           string(STR_CONCAT, string(STR_CFMOD_TM1), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    130;      
    running_cost_factor:            125;      
    speed:                          65 km/h; 
    power:                          210 hp;   
    cargo_capacity:                 22;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf1_truck;
    cost_factor:                buycost_cf1_truck;
    articulated_part:           switch_sf1_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_mine;
    purchase_cargo_capacity:    purchase_capacity_c1_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf1;
    default:                    switch_spriteset_sf1_mine;
    purchase:                   switch_purchase_sf1_mine; 
    }
}
}

//mf2 mineral graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf2_mine, position_in_consist ) {
    0:  switch_cf_02;
        switch_spritegroup_m_mine; //default
}
spriteset(spriteset_mf2_mine, "gfx/P/sf_mine_02.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_mf2_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf2_mine;
    1:  switch_fuel_icon;
}

//mf2 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf2_mine, extra_callback_info1) {
    1:  return item_mf2_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf2_mine, 1916) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_TM2), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          380 hp;   
    cargo_capacity:                 39;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf2_truck;
    cost_factor:                buycost_cf2_truck;
    articulated_part:           switch_mf2_mine;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_mine;
    purchase_cargo_capacity:    purchase_capacity_c2_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf2;
    default:                    switch_spriteset_mf2_mine;
    purchase:                   switch_purchase_mf2_mine; 
    }
}
}

//mf3 mineral graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf3_mine, position_in_consist ) {
    0:  switch_cf_03;
        switch_spritegroup_m_mine; //default
}

spriteset(spriteset_mf3_mine, "gfx/P/sf_mine_03.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_mf3_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf3_mine;
    1:  switch_fuel_icon;
}

//mf3 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf3_mine, extra_callback_info1) {
    1:  return item_mf3_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf3_mine, 1917) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_DN3), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 42;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         22 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf3_truck;
    cost_factor:                buycost_cf3_truck;
    articulated_part:           switch_mf3_mine;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_mine;
    purchase_cargo_capacity:    purchase_capacity_c3_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf3;
    default:                    switch_spriteset_mf3_mine;
    purchase:                   switch_purchase_mf3_mine; 
    }
}
}

//mf4 mineral graphics

//graphics definition


switch (FEAT_ROADVEHS, SELF, switch_spriteset_mf4_mine, position_in_consist ) {
    0:  switch_cf_04;
        switch_spritegroup_m_mine; //default
}

spriteset(spriteset_mf4_mine, "gfx/P/sf_mine_04.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_mf4_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mf4_mine;
    1:  switch_fuel_icon;
}

//mf4 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mf4_mine, extra_callback_info1) {
    1:  return item_mf4_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_mf4_mine, 1918) {
property {

    name:                           string(STR_CONCAT, string(STR_CFMOD_OG4), string(STR_MINE), string(STR_P_F));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  18;
    cost_factor:                    190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          560 hp;   
    cargo_capacity:                 45;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         23 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_cf4_truck;
    cost_factor:                buycost_cf4_truck;
    articulated_part:           switch_mf4_mine;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_mine;
    purchase_cargo_capacity:    purchase_capacity_c4_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf4;
    default:                    switch_spriteset_mf4_mine;
    purchase:                   switch_purchase_mf4_mine; 
    }
}
}

//st1 mineral graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_st1_mine, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_mine_6; //default
}

spriteset(spriteset_st1_mine, "gfx/P/st_mine_01.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_st1_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st1_mine;
    1:  switch_wire_icon;
}

//st1 mineral properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st1_mine, extra_callback_info1) {
    1:  return item_st1_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st1_mine, 2915) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_KD1), string(STR_MINE), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          400;   
    cargo_capacity:                 31;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14.5 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct1_truck;
    cost_factor:                buycost_ct1_truck;
    articulated_part:           switch_st1_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_c1_mine;
    purchase_cargo_capacity:    purchase_capacity_c1_mine;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct1;
    default:                    switch_spriteset_st1_mine; 
    purchase:                   switch_purchase_st1_mine;
    }
}
}

//mt2 mineral graphics

//graphics definition


//mt2 mineral graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt2_mine, position_in_consist ) {
    0:  switch_ct_02;
        switch_spritegroup_m_mine; //default
}

spriteset(spriteset_mt2_mine, "gfx/P/st_mine_02.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_mt2_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt2_mine;
    1:  switch_wire_icon;
}

//mt2 mineral properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt2_mine, extra_callback_info1) {
    1:  return item_mt2_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt2_mine, 2916) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_DN2), string(STR_MINE), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          740;   
    cargo_capacity:                 30;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18 ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ct2_truck;
    cost_factor:                buycost_ct2_truck;
    articulated_part:           switch_mt2_mine;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c2_mine;
    purchase_cargo_capacity:    purchase_capacity_c2_mine;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct2;
    default:                    switch_spriteset_mt2_mine; 
    purchase:                   switch_purchase_mt2_mine;
    }
}
}

//mt3 mineral graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt3_mine, position_in_consist ) {
    0:  switch_ct_03;
        switch_spritegroup_m_mine; //default
}

spriteset(spriteset_mt3_mine, "gfx/P/st_mine_03.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_mt3_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt3_mine;
    1:  switch_wire_icon;
}

//mt3 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt3_mine, extra_callback_info1) {
    1:  return item_mt3_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt3_mine, 2917) {
property {
    name:                           string(STR_CONCAT, string(STR_CTMOD_LC3), string(STR_MINE), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         19.5 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ct3_truck;
    cost_factor:                buycost_ct3_truck;
    articulated_part:           switch_mt3_mine;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_mine;
    purchase_cargo_capacity:    purchase_capacity_c3_mine;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct3;
    default:                    switch_spriteset_mt3_mine; 
    purchase:                   switch_purchase_mt3_mine;
    }
}
}

//mt4 mineral graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_mt4_mine, position_in_consist ) {
    0:  switch_ct_04;
        switch_spritegroup_m_mine; //default
}
spriteset(spriteset_mt4_mine, "gfx/P/st_mine_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_mt4_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_mt4_mine;
    1:  switch_wire_icon;
}

//mt4 mineral properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mt4_mine, extra_callback_info1) {
    1:  return item_mt4_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_mt4_mine, 2918) {
property {

    name:                           string(STR_CONCAT, string(STR_CTMOD_BW4), string(STR_MINE), string(STR_P_T));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  18;
    cost_factor:                    168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          2200;   
    cargo_capacity:                 39;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         21 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_ct4_truck;
    cost_factor:                buycost_ct4_truck;
    articulated_part:           switch_mt4_mine;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_mine;
    purchase_cargo_capacity:    purchase_capacity_c4_mine;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ct4;
    default:                    switch_spriteset_mt4_mine; 
    purchase:                   switch_purchase_mt4_mine;
    }
}
}

//md3 mine graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_md3_mine, position_in_consist ) {
    0:  switch_cd_03;
        switch_spritegroup_m_mine; //default
}

spriteset(spriteset_md3_mine, "gfx/P/sd_mine_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_md3_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md3_mine;
    1:  switch_dual_icon;
}
//md3 mine properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md3_mine, extra_callback_info1) {
    1:  return item_md3_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md3_mine, 3917) {
property {
    name:                           string(STR_CONCAT, string(STR_CDMOD_OG3), string(STR_MINE), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 42;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         23 ton;
    }

graphics {
    power:                      switch_boost_cd3;
    running_cost_factor:        switch_e_cost_cd3;
    cost_factor:                buycost_cd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md3_mine;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c3_mine;
    purchase_cargo_capacity:    purchase_capacity_c3_mine;
    default:                    switch_spriteset_md3_mine; 
    purchase:                   switch_purchase_md3_mine;
    }
}
}

//md4 mine graphics

//graphics definition



switch (FEAT_ROADVEHS, SELF, switch_spriteset_md4_mine, position_in_consist ) {
    0:  switch_cd_04;
        switch_spritegroup_m_mine; //default
}

spriteset(spriteset_md4_mine, "gfx/P/sd_mine_04.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_md4_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_md4_mine;
    1:  switch_dual_icon;
}

//md4 mine properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_md4_mine, extra_callback_info1) {
    1:  return item_md4_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_md4_mine, 3918) {
property {

    name:                           string(STR_CONCAT, string(STR_CDMOD_DN4), string(STR_MINE), string(STR_P_D));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  18;
    cost_factor:                    200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          2100;   
    cargo_capacity:                 45;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         23 ton;
    }

graphics {
    power:                      switch_boost_cd4;
    running_cost_factor:        switch_e_cost_cd4;
    cost_factor:                buycost_cd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_md4_mine;
    length:                     switch_length_m_trailer;
    cargo_capacity:             switch_capacity_c4_mine;
    purchase_cargo_capacity:    purchase_capacity_c4_mine;
    purchase:                   switch_purchase_md4_mine; 
    default:                    switch_spriteset_md4_mine; 
    
    }
}
}

//hfb mineral graphics

//graphics definition

spriteset(spriteset_hfb_mine, "gfx/P/ho_mine_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfb_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfb_mine;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfb_mine, position_in_consist ) {
    0:  switch_cf_0b;
        switch_trail_mine_4; //default
}

//hfb mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfb_mine, extra_callback_info1) {
    1..3:  return item_hfb_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfb_mine, 1923) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG1), string(STR_MINE), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  12;
    cost_factor:                    (7/4) *     100;      
    running_cost_factor:            97;      
    speed:                          40 km/h; 
    power:                          (11/10)*    100 hp;   
    cargo_capacity:                 16;
    introduction_date:              date(1910,01,01); 
    model_life:                     35; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (11 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfb_truck;
    cost_factor:                buycost_hfb_truck;
    articulated_part:           switch_hfb_mine;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_hb_mine;
    purchase_cargo_capacity:    purchase_capacity_hb_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfb;
    default:                    switch_spriteset_hfb_mine; 
    purchase:                   switch_purchase_hfb_mine;
    }
}
}

//hfa mineral graphics

//graphics definition

spriteset(spriteset_hfa_mine, "gfx/P/ho_mine_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hfa_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hfa_mine;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hfa_mine, position_in_consist ) {
    0:  switch_cf_0a;
        switch_trail_mine_4; //default
}

//hfa mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hfa_mine, extra_callback_info1) {
    1..3:  return item_hfa_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hfa_mine, 1924) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN1), string(STR_MINE), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  14;
    cost_factor:                    (7/4) *     110;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          (11/10)*    140 hp;   
    cargo_capacity:                 20;
    introduction_date:              date(1929,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (12.5 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hfa_truck;
    cost_factor:                buycost_hfa_truck;
    articulated_part:           switch_hfa_mine;
    length:                     switch_length_w_trailer;
    cargo_capacity:             switch_capacity_ha_mine;
    purchase_cargo_capacity:    purchase_capacity_ha_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hfa;
    default:                    switch_spriteset_hfa_mine; 
    purchase:                   switch_purchase_hfa_mine;
    }
}
}

//hf1 mineral graphics

//graphics definition

spriteset(spriteset_hf1_mine, "gfx/P/hf_mine_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf1_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf1_mine;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf1_mine, position_in_consist ) {
    0:  switch_cf_01;
        switch_trail_mine_6; //default
}
//hf1 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf1_mine, extra_callback_info1) {
    1..3:  return item_hf1_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf1_mine, 1925) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_TM1), string(STR_MINE), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            125;      
    speed:                          65 km/h; 
    power:                          (11/10)*    210 hp;   
    cargo_capacity:                 22;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (16 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf1_truck;
    cost_factor:                buycost_hf1_truck;
    articulated_part:           switch_hf1_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_mine;
    purchase_cargo_capacity:    purchase_capacity_h1_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf1;
    default:                    switch_spriteset_hf1_mine; 
    purchase:                   switch_purchase_hf1_mine;
    }   
}
}

//hf2 mineral graphics

//graphics definition

spriteset(spriteset_hf2_mine, "gfx/P/hf_mine_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf2_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf2_mine;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf2_mine, position_in_consist ) {
    0:  switch_cf_02;
        switch_trail_mine_6; //default
}

//hf2 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf2_mine, extra_callback_info1) {
    1..3:  return item_hf2_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf2_mine, 1926) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_MINE), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    (7/4) *     150;      
    running_cost_factor:            165;      
    speed:                          80 km/h; 
    power:                          (11/10)*    380 hp;   
    cargo_capacity:                 39;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (20.5 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf2_truck;
    cost_factor:                buycost_hf2_truck;
    articulated_part:           switch_hf2_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_mine;
    purchase_cargo_capacity:    purchase_capacity_h2_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf2;
    default:                    switch_spriteset_hf2_mine; 
    purchase:                   switch_purchase_hf2_mine;
    }
}
}

//hf3 mineral graphics

//graphics definition

spriteset(spriteset_hf3_mine, "gfx/P/hf_mine_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf3_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf3_mine;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf3_mine, position_in_consist ) {
    0:  switch_cf_03;
        switch_trail_mine_6; //default
}

//hf3 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf3_mine, extra_callback_info1) {
    1..3:  return item_hf3_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf3_mine, 1927) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_MINE), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    (7/4) *     170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          (11/10)*    560 hp;   
    cargo_capacity:                 42;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (22 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf3_truck;
    cost_factor:                buycost_hf3_truck;
    articulated_part:           switch_hf3_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_mine;
    purchase_cargo_capacity:    purchase_capacity_h3_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf3;
    default:                    switch_spriteset_hf3_mine; 
    purchase:                   switch_purchase_hf3_mine;
    }
}
}

//hf4 mineral graphics

//graphics definition

spriteset(spriteset_hf4_mine, "gfx/P/hf_mine_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hf4_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hf4_mine;
    1:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hf4_mine, position_in_consist ) {
    0:  switch_cf_04;
        switch_trail_mine_6; //default
}

//hf4 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hf4_mine, extra_callback_info1) {
    1..3:  return item_hf4_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_ffrv ==1){
item(FEAT_ROADVEHS, item_hf4_mine, 1928) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_OG2), string(STR_MINE), string(STR_P_HF));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  18;
    cost_factor:                    (7/4) *     190;      
    running_cost_factor:            245;      
    speed:                          140 km/h; 
    power:                          (11/10)*    560 hp;   
    cargo_capacity:                 45;
    introduction_date:              date(2015,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (23 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_hf4_truck;
    cost_factor:                buycost_hf4_truck;
    articulated_part:           switch_hf4_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_mine;
    purchase_cargo_capacity:    purchase_capacity_h4_mine;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_hf4;
    default:                    switch_spriteset_hf4_mine; 
    purchase:                   switch_purchase_hf4_mine;
    }
}
}

//ht1 mineral graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht1_mine, position_in_consist ) {
    0:  switch_ct_01;
        switch_trail_mine_6; //default
}

spriteset(spriteset_ht1_mine, "gfx/P/ht_mine_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht1_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht1_mine;
    1:  switch_wire_icon;
}

//ht1 mineral properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht1_mine, extra_callback_info1) {
    1..3:  return item_ht1_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht1_mine, 2925) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_BW1), string(STR_MINE), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    (7/4) *     118;      
    running_cost_factor:            105;      
    speed:                          50 km/h; 
    power:                          (11/10)*    400;   
    cargo_capacity:                 31;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (14.5 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht1_truck;
    cost_factor:                buycost_ht1_truck;
    articulated_part:           switch_ht1_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h1_mine;
    purchase_cargo_capacity:    purchase_capacity_h1_mine;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht1;
    default:                    switch_spriteset_ht1_mine; 
    purchase:                   switch_purchase_ht1_mine; 
    }
}
}

//ht2 mineral graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht2_mine, position_in_consist ) {
    0:  switch_ct_02;
        switch_trail_mine_6; //default
}

spriteset(spriteset_ht2_mine, "gfx/P/ht_mine_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht2_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht2_mine;
    1:  switch_wire_icon;
}

//ht2 mineral properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht2_mine, extra_callback_info1) {
    1..3:  return item_ht2_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht2_mine, 2926) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_MINE), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    (7/4) *     130;      
    running_cost_factor:            145;      
    speed:                          80 km/h; 
    power:                          (11/10)*    740;   
    cargo_capacity:                 30;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (18 * 5 / 2) ton;  
    }

graphics {
    running_cost_factor:        switch_runcost_ht2_truck;
    cost_factor:                buycost_ht2_truck;
    articulated_part:           switch_ht2_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h2_mine;
    purchase_cargo_capacity:    purchase_capacity_h2_mine;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht2;
    default:                    switch_spriteset_ht2_mine; 
    purchase:                   switch_purchase_ht2_mine;
    }
}
}

//ht3 mineral graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht3_mine, position_in_consist ) {
    0:  switch_ct_03;
        switch_trail_mine_6; //default
}

spriteset(spriteset_ht3_mine, "gfx/P/ht_mine_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht3_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht3_mine;
    1:  switch_wire_icon;
}

//ht3 mineral properties

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht3_mine, extra_callback_info1) {
    1..3:  return item_ht3_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht3_mine, 2927) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_LC2), string(STR_MINE), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    (7/4) *     148;      
    running_cost_factor:            205;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1300 hp;   
    cargo_capacity:                 30;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (19.5 * 5 / 2) ton;
    }
graphics {
    running_cost_factor:        switch_runcost_ht3_truck;
    cost_factor:                buycost_ht3_truck;
    articulated_part:           switch_ht3_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_mine;
    purchase_cargo_capacity:    purchase_capacity_h3_mine;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht3;
    default:                    switch_spriteset_ht3_mine; 
    purchase:                   switch_purchase_ht3_mine; 
    }
}
}

//ht4 mineral graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ht4_mine, position_in_consist ) {
    0:  switch_ct_04;
        switch_trail_mine_6; //default
}

spriteset(spriteset_ht4_mine, "gfx/P/ht_mine_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_ht4_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ht4_mine;
    1:  switch_wire_icon;
}

//ht4 mineral properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ht4_mine, extra_callback_info1) {
    1..3:  return item_ht4_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_ht4_mine, 2928) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_KD2), string(STR_MINE), string(STR_P_HT));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  18;
    cost_factor:                    (7/4) * 168;      
    running_cost_factor:            165;      
    speed:                          140 km/h; 
    power:                          (11/10)*  2200;   
    cargo_capacity:                 39;
    introduction_date:              date(2020,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD;
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (21 * 5 / 2) ton;
    }

graphics {
    running_cost_factor:        switch_runcost_ht4_truck;
    cost_factor:                buycost_ht4_truck;
    articulated_part:           switch_ht4_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_mine;
    purchase_cargo_capacity:    purchase_capacity_h4_mine;
    visual_effect:              switch_truck_spark;
    power:                      switch_power_ht4;
    default:                    switch_spriteset_ht4_mine; 
    purchase:                   switch_purchase_ht4_mine;
    }
}
}

//hd3 mine graphics

//graphics definition

spriteset(spriteset_hd3_mine, "gfx/P/hd_mine_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd3_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd3_mine;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd3_mine, position_in_consist ) {
    0:  switch_cd_03;
        switch_trail_mine_6; //default
}

//hd3 mine properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd3_mine, extra_callback_info1) {
    1..3:  return item_hd3_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd3_mine, 3927) {
property {
    name:                           string(STR_CONCAT, string(STR_MFR_BW2), string(STR_MINE), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  16;
    cost_factor:                    (7/4) *     180;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          (11/10)*    1200 hp;   
    cargo_capacity:                 42;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (23 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd3;
    running_cost_factor:        switch_e_cost_hd3;
    cost_factor:                buycost_hd3_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd3_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h3_mine;
    purchase_cargo_capacity:    purchase_capacity_h3_mine;
    default:                    switch_spriteset_hd3_mine; 
    purchase:                   switch_purchase_hd3_mine;
    }
}
}

//hd4 mine graphics

//graphics definition

spriteset(spriteset_hd4_mine, "gfx/P/hd_mine_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_hd4_mine, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_hd4_mine;
    1:  switch_dual_icon;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_hd4_mine, position_in_consist ) {
    0:  switch_cd_04;
        switch_trail_mine_6; //default
}

//hd4 mine properties



//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_hd4_mine, extra_callback_info1) {
    1..3:  return item_hd4_mine; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_hrv ==1 && param_elrv ==1){
item(FEAT_ROADVEHS, item_hd4_mine, 3928) {
property {

    name:                           string(STR_CONCAT, string(STR_MFR_DN2), string(STR_MINE), string(STR_P_HD));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_LIQUID, CC_POWDERIZED, CC_PIECE_GOODS, CC_REFRIGERATED, CC_COVERED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [RCYC];
    cargo_disallow_refit:           [FRUT, BEAN, GRAI, MAIZ];
    default_cargo_type:             COAL; 
    loading_speed:                  18;
    cost_factor:                    (7/4) *     200;      
    running_cost_factor:            205;      
    speed:                          140 km/h; 
    power:                          (11/10)*    2100;   
    cargo_capacity:                 45;
    introduction_date:              date(2025,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         (23 * 5 / 2) ton;
    }

graphics {
    power:                      switch_boost_hd4;
    running_cost_factor:        switch_e_cost_hd4;
    cost_factor:                buycost_hd4_truck;
    visual_effect:              switch_spark_dx;
    articulated_part:           switch_hd4_mine;
    length:                     switch_length_s_trailer;
    cargo_capacity:             switch_capacity_h4_mine;
    purchase_cargo_capacity:    purchase_capacity_h4_mine;
    default:                    switch_spriteset_hd4_mine; 
    purchase:                   switch_purchase_hd4_mine;
    }
}
}



/* =============================================================================== */

// Road Trains

/* =============================================================================== */

// Moved to regular Semi Truck section

/* ===== Fossil Fuel Road train Trucks ===== */

/*
spriteset(spriteset_hfc_flat, "gfx/P/ho_flat_01.png") {
    tmpl_p()
}
spriteset(spriteset_hfd_flat, "gfx/P/ho_flat_02.png") {
    tmpl_p()
}
spriteset(spriteset_hfc_box, "gfx/P/ho_box_01.png") {
    tmpl_p()
}
spriteset(spriteset_hfd_box, "gfx/P/ho_box_02.png") {
    tmpl_p()
}
spriteset(spriteset_hfc_ref, "gfx/P/ho_ref_01.png") {
    tmpl_p()
}
spriteset(spriteset_hfd_ref, "gfx/P/ho_ref_02.png") {
    tmpl_p()
}
spriteset(spriteset_hfc_stock, "gfx/P/ho_stock_01.png") {
    tmpl_p()
}
spriteset(spriteset_hfd_stock, "gfx/P/ho_stock_02.png") {
    tmpl_p()
}
spriteset(spriteset_hfc_hopp, "gfx/P/ho_hopp_01.png") {
    tmpl_p()
}
spriteset(spriteset_hfd_hopp, "gfx/P/ho_hopp_02.png") {
    tmpl_p()
}
spriteset(spriteset_hfc_mine, "gfx/P/ho_mine_01.png") {
    tmpl_p()
}
spriteset(spriteset_hfd_mine, "gfx/P/ho_mine_02.png") {
    tmpl_p()
}
spriteset(spriteset_hfc_tank, "gfx/P/ho_tank_01.png") {
    tmpl_p()
}
spriteset(spriteset_hfd_tank, "gfx/P/ho_tank_02.png") {
    tmpl_p()
}
*/

// box

//REF

//Stock

//Flatbeds

//Tank

//MINE

// covered Hoppers

/* Trolley Road train Trucks */

// refridgerated trucks

// livestock trucks

// flatbed trucks

// tanker trucks

// covered hopper trucks

// mineral trucks

/* Dual Mode Road train Trucks */


/* =============================================================================== */
/* =============================================================================== */
/* =============================================================================== */

/* Buses */

//bus running costs


switch (FEAT_ROADVEHS, SELF, switch_powercost_fd_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*74)/2);
        default:        ((param_runcost*64)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_fc_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*91)/2);
        default:        ((param_runcost*79)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_fb_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*57)/2);
        default:        ((param_runcost*46)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_fa_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*67)/2);
        default:        ((param_runcost*52)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_f1_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*85)/2);
        default:        ((param_runcost*67)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_f2_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*115)/2);
        default:        ((param_runcost*87)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_f3_bus, current_speed < current_max_speed) {
        1:              ((param_runcost*158)/2);       
        default:        ((param_runcost*124)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_f4_bus, current_speed < current_max_speed) {
        1:              ((param_runcost*174)/2);
        default:        ((param_runcost*131)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_sfd_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*93)/2);
        default:        ((param_runcost*82)/2);
}

switch (FEAT_ROADVEHS, SELF, switch_powercost_sf2_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*142)/2);
        default:        ((param_runcost*112)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_sf3_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*187)/2);
        default:        ((param_runcost*152)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_sf4_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*206)/2);
        default:        ((param_runcost*161)/2);
}

switch (FEAT_ROADVEHS, SELF, switch_powercost_t1_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*72)/2);
        default:        ((param_runcost*60)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_t2_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*102)/2);
        default:        ((param_runcost*83)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_t3_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*144)/2);
        default:        ((param_runcost*123)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_t4_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*121)/2);
        default:        ((param_runcost*97)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_st2_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*129)/2);
        default:        ((param_runcost*109)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_st3_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*174)/2);
        default:        ((param_runcost*151)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_powercost_st4_bus, current_speed < current_max_speed ) {        
        1:              ((param_runcost*153)/2);
        default:        ((param_runcost*128)/2);
}

switch (FEAT_ROADVEHS, SELF, switch_runcost_fd_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_fd_bus;
        1:        ((param_runcost*59)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_fc_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_fc_bus;
        1:        ((param_runcost*73)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_fb_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_fb_bus;
        1:        ((param_runcost*34)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_fa_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_fa_bus;
        1:        ((param_runcost*37)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_f1_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_f1_bus;
        1:        ((param_runcost*49)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_f2_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_f2_bus;
        1:        ((param_runcost*58)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_f3_bus, vehicle_is_stopped) {
        0:              switch_powercost_f3_bus;       
        1:        ((param_runcost*91)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_f4_bus, vehicle_is_stopped) {
        0:              switch_powercost_f4_bus;
        1:        ((param_runcost*87)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_sfd_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_sfd_bus;
        1:        ((param_runcost*76)/2);
}

switch (FEAT_ROADVEHS, SELF, switch_runcost_sf2_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_sf2_bus;
        1:        ((param_runcost*82)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_sf3_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_sf3_bus;
        1:        ((param_runcost*117)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_sf4_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_sf4_bus;
        1:        ((param_runcost*116)/2);
}

switch (FEAT_ROADVEHS, SELF, switch_runcost_t1_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_t1_bus;
        1:        ((param_runcost*49)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_t2_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_t2_bus;
        1:        ((param_runcost*65)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_t3_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_t3_bus;
        1:        ((param_runcost*101)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_t4_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_t4_bus;
        1:        ((param_runcost*74)/2);
}

switch (FEAT_ROADVEHS, SELF, switch_runcost_st2_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_st2_bus;
        1:        ((param_runcost*89)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_st3_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_st3_bus;
        1:        ((param_runcost*127)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_st4_bus, vehicle_is_stopped ) {        
        0:              switch_powercost_st4_bus;
        1:        ((param_runcost*103)/2);
}


switch (FEAT_ROADVEHS, SELF, switch_runcost_d3_bus, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_t3_bus;
        default: return switch_runcost_f3_bus;
    }

switch (FEAT_ROADVEHS, SELF, switch_runcost_sd3_bus, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_st3_bus;
        default: return switch_runcost_sf3_bus;
    }

switch (FEAT_ROADVEHS, SELF, switch_runcost_d4_bus, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_t4_bus;
        default: return switch_runcost_f4_bus;
    }

switch (FEAT_ROADVEHS, SELF, switch_runcost_sd4_bus, (tile_powers_roadtype("ELRD"))) { // reduce running cost under wires
        1: return switch_runcost_st4_bus;
        default: return switch_runcost_sf4_bus;
    }

//bus capacities

switch (FEAT_ROADVEHS, SELF, switch_capacity_rd_bus, build_year ) {
        0..5000000: ((param_capacity*16)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_rc_bus, build_year ) {
        0..5000000: ((param_capacity*22)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_rb_bus, build_year ) {
        0..5000000: ((param_capacity*18)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_ra_bus, build_year ) {
        0..5000000: ((param_capacity*24)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r1_bus, build_year ) {
        0..5000000: ((param_capacity*30)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r2_bus, build_year ) {
        0..5000000: ((param_capacity*36)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r3_bus, build_year ) {
        0..5000000: ((param_capacity*42)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_r4_bus, build_year ) {
        0..5000000: ((param_capacity*48)/2);
}

switch (FEAT_ROADVEHS, SELF, switch_capacity_s2_bus, build_year ) {
        0..5000000: ((param_capacity*36)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_s3_bus, build_year ) {
        0..5000000: ((param_capacity*42)/2);
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_s4_bus, build_year ) {
        0..5000000: ((param_capacity*48)/2);
}


//Old bus bodies

spriteset(spriteset_o_bus_a, "gfx/R/o_bus_a_01.png") {
    tmpl_7()
}

spriteset(spriteset_o_bus_a_loading, "gfx/R/o_bus_a_01.png") {
    tmpl_7()
}

spritegroup spritegroup_o_bus_a {
    loaded:  [spriteset_o_bus_a];
    loading: [spriteset_o_bus_a_loading];
}


spriteset(spriteset_o_bus_b, "gfx/R/o_bus_a_02.png") {
    tmpl_7()
}

spriteset(spriteset_o_bus_b_loading, "gfx/R/o_bus_a_02.png") {
    tmpl_7()
}

spritegroup spritegroup_o_bus_b {
    loaded:  [spriteset_o_bus_b];
    loading: [spriteset_o_bus_b_loading];
}

spriteset(spriteset_o_bus_c, "gfx/R/o_bus_a_03.png") {
    tmpl_7()
}

spriteset(spriteset_o_bus_c_loading, "gfx/R/o_bus_a_03.png") {
    tmpl_7()
}

spritegroup spritegroup_o_bus_c {
    loaded:  [spriteset_o_bus_c];
    loading: [spriteset_o_bus_c_loading];
}

spriteset(spriteset_o_bus_d, "gfx/R/o_bus_a_04.png") {
    tmpl_7()
}

spriteset(spriteset_o_bus_d_loading, "gfx/R/o_bus_a_04.png") {
    tmpl_7()
}

spritegroup spritegroup_o_bus_d {
    loaded:  [spriteset_o_bus_d];
    loading: [spriteset_o_bus_d_loading];
}

switch (FEAT_ROADVEHS, SELF, switch_o_bus_a, random_bits ) {
        0..85: spritegroup_o_bus_a;
        86..171: spritegroup_o_bus_b;
        172..255: spritegroup_o_bus_c;
        default: spritegroup_o_bus_a;       
}
switch (FEAT_ROADVEHS, SELF, switch_o_bus_b, random_bits ) {
        0..69: spritegroup_o_bus_a;
        70..139: spritegroup_o_bus_b;
        140..209: spritegroup_o_bus_c;
        210..255: spritegroup_o_bus_d;
        default: spritegroup_o_bus_b;       
}
switch (FEAT_ROADVEHS, SELF, switch_o_bus_c, random_bits ) {
        0..31: spritegroup_o_bus_a;
        32..63: spritegroup_o_bus_b;
        64..95: spritegroup_o_bus_c;
        96..255: spritegroup_o_bus_d;
        default: spritegroup_o_bus_d;       
}
switch (FEAT_ROADVEHS, SELF, switch_o_bus, build_year ) {
        0..1899:        switch_o_bus_a;
        1900..1909:     switch_o_bus_b;
        1910..1924:     switch_o_bus_c;
        1925..5000000:  spritegroup_o_bus_d;
        default:        spritegroup_o_bus_a;        
}

/* Bus Purchase Menu Sprites */
spriteset(spriteset_p_o_bus_a, "gfx/P/p_o_bus_a_01.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_bus_b, "gfx/P/p_o_bus_a_02.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_bus_c, "gfx/P/p_o_bus_a_03.png") {
    tmpl_p()
}
spriteset(spriteset_p_o_bus_d, "gfx/P/p_o_bus_a_04.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, switch_p_o_bus, build_year ) {
        0..1879:        spriteset_p_o_bus_a;
        1880..1899:     spriteset_p_o_bus_b;
        1910..1924:     spriteset_p_o_bus_c;
        1910..5000000:  spriteset_p_o_bus_d;
        default:        spritegroup_o_bus_a;        
}





/* == Rigid Buses == */

//Rigid Diesel Buses

//Fd bus graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fd_bus_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_od_bus_cab;
    1:  switch_o_bus;
    }

switch(FEAT_ROADVEHS, SELF, switch_fd_bus_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_o_bus;
    1:  switch_od_bus_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fd_bus, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fd_bus_n;
    DIRECTION_NORTHEAST:    switch_fd_bus_n;
    DIRECTION_EAST:         switch_fd_bus_n;
    DIRECTION_SOUTHEAST:    switch_fd_bus_s;
    DIRECTION_SOUTH:        switch_fd_bus_s;
    DIRECTION_SOUTHWEST:    switch_fd_bus_s;
    DIRECTION_WEST:         switch_fd_bus_n;
    DIRECTION_NORTHWEST:    switch_fd_bus_n;
    }

spriteset(spriteset_p_fd_bus, "gfx/P/p_o_bus_cab_a_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_fd_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_p_o_bus;
    1:  spriteset_p_fd_bus;
    2:  switch_steam_icon;
}

//Fd bus properties

if (param_srv ==1){
item(FEAT_ROADVEHS, item_fd_bus, 1001) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_PK1), string(STR_SBUS_1));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  8;
    cost_factor:                    120;     
    running_cost_factor:            120;      
    speed:                          30 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1860,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_STEAM;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 1) {
    property {
    introduction_date:              date(1830,01,01); 
    model_life:                     70;
    }
}
if (param_fgei == 2) {
    property {
    introduction_date:              date(1800,01,01); 
    model_life:                     50;
    }
}
graphics {
    running_cost_factor:        switch_runcost_fd_bus;
    power:                      switch_power_fd;
    visual_effect:              switch_truck_smoke;
    cargo_capacity:             switch_capacity_rd_bus;
    purchase_cargo_capacity:    switch_capacity_rd_bus;
    purchase:                   switch_purchase_fd_bus;
    default:                    switch_fd_bus; 
    }
}
}

//Fc bus graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fc_bus_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_oc_bus_cab;
    1:  switch_o_bus;
    }

switch(FEAT_ROADVEHS, SELF, switch_fc_bus_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_o_bus;
    1:  switch_oc_bus_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fc_bus, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fc_bus_n;
    DIRECTION_NORTHEAST:    switch_fc_bus_n;
    DIRECTION_EAST:         switch_fc_bus_n;
    DIRECTION_SOUTHEAST:    switch_fc_bus_s;
    DIRECTION_SOUTH:        switch_fc_bus_s;
    DIRECTION_SOUTHWEST:    switch_fc_bus_s;
    DIRECTION_WEST:         switch_fc_bus_n;
    DIRECTION_NORTHWEST:    switch_fc_bus_n;
    }

spriteset(spriteset_p_fc_bus, "gfx/P/p_o_bus_cab_a_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_fc_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_p_o_bus;
    1:  spriteset_p_fc_bus;
    2:  switch_steam_icon;
}

//Fc bus properties

if (param_srv ==1){
item(FEAT_ROADVEHS, item_fc_bus, 1002) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_HP1), string(STR_SBUS_1));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  10;
    cost_factor:                    120;     
    running_cost_factor:            120;      
    speed:                          50 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1895,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_STEAM;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         15 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 2) {
    property {
    introduction_date:              date(1850,01,01); 
    model_life:                     90;
    }
}
graphics {
    running_cost_factor:        switch_runcost_fc_bus;
    power:                      switch_power_fc;
    visual_effect:              switch_truck_smoke;
    cargo_capacity:             switch_capacity_rc_bus;
    purchase_cargo_capacity:    switch_capacity_rc_bus;
    purchase:                   switch_purchase_fc_bus;
    default:                    switch_fc_bus; 
    }
}
}
//Fb bus graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fb_bus_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ob_bus_cab;
    1:  switch_o_bus;
    }

switch(FEAT_ROADVEHS, SELF, switch_fb_bus_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_o_bus;
    1:  switch_ob_bus_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fb_bus, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fb_bus_n;
    DIRECTION_NORTHEAST:    switch_fb_bus_n;
    DIRECTION_EAST:         switch_fb_bus_n;
    DIRECTION_SOUTHEAST:    switch_fb_bus_s;
    DIRECTION_SOUTH:        switch_fb_bus_s;
    DIRECTION_SOUTHWEST:    switch_fb_bus_s;
    DIRECTION_WEST:         switch_fb_bus_n;
    DIRECTION_NORTHWEST:    switch_fb_bus_n;
    }

spriteset(spriteset_p_fb_bus, "gfx/P/p_o_bus_cab_a_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_fb_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_p_o_bus;
    1:  spriteset_p_fb_bus;
    2:  switch_fuel_icon;
}

//Fb bus properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fb_bus, 1003) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_DN1), string(STR_FBUS_0));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  10;
    cost_factor:                    120;     
    running_cost_factor:            120;      
    speed:                          50 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1910,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_fb_bus;
    power:                      switch_power_fb;
    visual_effect:              switch_bus_exhaust;
    cargo_capacity:             switch_capacity_rb_bus;
    purchase_cargo_capacity:    switch_capacity_rb_bus;
    purchase:                   switch_purchase_fb_bus;
    default:                    switch_fb_bus; 
    }
}
}
//Fa bus graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_fa_bus_n, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_oa_bus_cab;
    1:  switch_o_bus;
    }

switch(FEAT_ROADVEHS, SELF, switch_fa_bus_s, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_o_bus;
    1:  switch_oa_bus_cab;
    }

switch (FEAT_ROADVEHS, SELF, switch_fa_bus, (direction)) { // chose stack order by direction
    DIRECTION_NORTH:        switch_fa_bus_n;
    DIRECTION_NORTHEAST:    switch_fa_bus_n;
    DIRECTION_EAST:         switch_fa_bus_n;
    DIRECTION_SOUTHEAST:    switch_fa_bus_s;
    DIRECTION_SOUTH:        switch_fa_bus_s;
    DIRECTION_SOUTHWEST:    switch_fa_bus_s;
    DIRECTION_WEST:         switch_fa_bus_n;
    DIRECTION_NORTHWEST:    switch_fa_bus_n;
    }

spriteset(spriteset_p_fa_bus, "gfx/P/p_o_bus_cab_a_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_fa_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_p_o_bus;
    1:  spriteset_p_fa_bus;
    2:  switch_fuel_icon;
}

//FA bus properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_fa_bus, 1004) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_BW1), string(STR_FBUS_0));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  10;
    cost_factor:                    120;     
    running_cost_factor:            120;      
    speed:                          50 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1930,01,01); 
    model_life:                     40; 
    vehicle_life:                   25; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_fa_bus;
    power:                      switch_power_fa;
    visual_effect:              switch_bus_exhaust;
    cargo_capacity:             switch_capacity_ra_bus;
    purchase_cargo_capacity:    switch_capacity_ra_bus;
    purchase:                   switch_purchase_fa_bus;
    default:                    switch_fa_bus; 
    }
}
}
//F1 bus graphics

//graphics definition

    spriteset(spriteset_b_greeb_1, "gfx/X/f_greeb_01.png") {
        tmpl_7()
    }
    spriteset(spriteset_b_greeb_2, "gfx/X/f_greeb_02.png") {
        tmpl_7()
    }           
    spriteset(spriteset_b_greeb_3, "gfx/X/f_greeb_03.png") {
        tmpl_7()
    }
    spriteset(spriteset_b_null, "gfx/X/f_greeb_04.png") {
        tmpl_7()
    }

switch (FEAT_ROADVEHS, SELF, switch_bus_greeble, random_bits ) {
        0..63:      spriteset_b_greeb_1;
        64..127:    spriteset_b_greeb_2;
        128..195:    spriteset_b_greeb_3;
        196..255:   spriteset_x_null;
        default:    spriteset_x_null;       
}

spriteset(spriteset_r1_door_r, "gfx/B/r_door_r_01.png") {
    tmpl_7()
}
spriteset(spriteset_r1_door_ro, "gfx/B/r_door_ro_01.png") {
    tmpl_7()
}
spritegroup spritegroup_r1_door_r {  // right side doors
    loaded:  [spriteset_r1_door_r];
    loading: [spriteset_r1_door_ro];
}

spriteset(spriteset_r1_door_l, "gfx/B/r_door_l_01.png") {
    tmpl_7()
}
spriteset(spriteset_r1_door_lo, "gfx/B/r_door_lo_01.png") {
    tmpl_7()
}
spritegroup spritegroup_r1_door_l {  // left side doors
    loaded:  [spriteset_r1_door_l];
    loading: [spriteset_r1_door_lo];
}

switch (FEAT_ROADVEHS, SELF, switch_r1_bus_door, (traffic_side)) { // choose door side
    TRAFFIC_SIDE_LEFT:      spritegroup_r1_door_l;
    default:                spritegroup_r1_door_r;
    }

spriteset(spriteset_r1_bus_a, "gfx/B/r_bus_a_01.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_r1_bus_a {
    loaded:  [spriteset_r1_bus_a];
    loading: [spriteset_r1_bus_a];
}

spriteset(spriteset_f1_bus_d, "gfx/B/f_bus_d_01.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_f1_bus_d {
    loaded:  [spriteset_f1_bus_d];
    loading: [spriteset_f1_bus_d];
}

spriteset(spriteset_r1_bus_i, "gfx/B/r_bus_i_01.png") {  // Rainbow stripe sprite
    tmpl_7()
}

spritegroup spritegroup_r1_bus_i {
    loaded:  [spriteset_r1_bus_i];
    loading: [spriteset_r1_bus_i];
}

spriteset(spriteset_r1_bus_h, "gfx/B/r_bus_h_01.png") {  // HNL stripe sprite
    tmpl_7()
}

spritegroup spritegroup_r1_bus_h {
    loaded:  [spriteset_r1_bus_h];
    loading: [spriteset_r1_bus_h];
}

switch (FEAT_ROADVEHS, SELF, switch_f1_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_f1_bus_d;
    1:                      spritegroup_r1_bus_a;
    default:                spritegroup_r1_bus_a;
    }

random_switch (FEAT_ROADVEHS, SELF, switch_r1_bus_h, TRIGGER_VEHICLE_SERVICE) { //random special sprite per service
    7: spritegroup_r1_bus_h;        //HNL livery
    1: spritegroup_r1_bus_i;        //Rainbow livery   
}

switch (FEAT_ROADVEHS, SELF, switch_f1_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r1_bus_h;
    COLOUR_ORANGE:          switch_r1_bus_h;
    default:                switch_f1_color;
    }

switch(FEAT_ROADVEHS, SELF, switch_f1_bus_door, [  // Stack door sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_f1_bus;
    1:  switch_r1_bus_door;
    }
spriteset(spriteset_p_f1_bus, "gfx/P/p_f_bus_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_f1_bus;
    1:  switch_fuel_icon;
}

//F1 bus properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f1_bus, 1005) {
property {
    name:                           string(STR_CONCAT_BUS, string(STR_MFR_OG1), string(STR_FBUS_1));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  10;
    cost_factor:                    120;     
    running_cost_factor:            120;      
    speed:                          60 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 32;
    introduction_date:              date(1945,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         9 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_f1_bus;
    power:                      switch_power_f1;
    visual_effect:              switch_bus_exhaust;
    cargo_capacity:             switch_capacity_r1_bus;
    purchase_cargo_capacity:    switch_capacity_r1_bus;
    purchase:                   switch_purchase_f1_bus;
    default:                    switch_f1_bus_door; 
    }
}
}

//F2 bus graphics

//graphics definition

spriteset(spriteset_r2_door_r, "gfx/B/r_door_r_02.png") {
    tmpl_7()
}
spriteset(spriteset_r2_door_ro, "gfx/B/r_door_ro_02.png") {
    tmpl_7()
}
spritegroup spritegroup_r2_door_r {  // right side doors
    loaded:  [spriteset_r2_door_r];
    loading: [spriteset_r2_door_ro];
}

spriteset(spriteset_r2_door_l, "gfx/B/r_door_l_02.png") {
    tmpl_7()
}
spriteset(spriteset_r2_door_lo, "gfx/B/r_door_lo_02.png") {
    tmpl_7()
}
spritegroup spritegroup_r2_door_l {  // left side doors
    loaded:  [spriteset_r2_door_l];
    loading: [spriteset_r2_door_lo];
}

switch (FEAT_ROADVEHS, SELF, switch_r2_bus_door, (traffic_side)) { // choose door side
    TRAFFIC_SIDE_LEFT:      spritegroup_r2_door_l;
    default:                spritegroup_r2_door_r;
    }

spriteset(spriteset_f2_bus_a, "gfx/B/r_bus_a_02.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_f2_bus_a {
    loaded:  [spriteset_f2_bus_a];
    loading: [spriteset_f2_bus_a];
}

spriteset(spriteset_f2_bus_d, "gfx/B/f_bus_d_02.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_f2_bus_d {
    loaded:  [spriteset_f2_bus_d];
    loading: [spriteset_f2_bus_d];
}

spriteset(spriteset_r2_bus_i, "gfx/B/r_bus_i_02.png") {  // Rainbow stripe sprite
    tmpl_7()
}

spritegroup spritegroup_r2_bus_i {
    loaded:  [spriteset_r2_bus_i];
    loading: [spriteset_r2_bus_i];
}

spriteset(spriteset_r2_bus_h, "gfx/B/r_bus_h_02.png") {  // HNL stripe sprite
    tmpl_7()
}

spritegroup spritegroup_r2_bus_h {
    loaded:  [spriteset_r2_bus_h];
    loading: [spriteset_r2_bus_h];
}

switch (FEAT_ROADVEHS, SELF, switch_f2_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_f2_bus_d;
    1:                      spritegroup_f2_bus_a;
    default:                spritegroup_f2_bus_a;
    }

random_switch (FEAT_ROADVEHS, SELF, switch_r2_bus_h, TRIGGER_VEHICLE_SERVICE) { //random special sprite per service
    7: spritegroup_r2_bus_h;        //HNL livery
    1: spritegroup_r2_bus_i;        //Rainbow livery   
}

switch (FEAT_ROADVEHS, SELF, switch_f2_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r2_bus_h;
    COLOUR_ORANGE:          switch_r2_bus_h;
    default:                switch_f2_color;
    }

switch(FEAT_ROADVEHS, SELF, switch_f2_bus_door, [  // Stack door sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_f2_bus;
    1:  switch_r2_bus_door;
    }

spriteset(spriteset_p_f2_bus, "gfx/P/p_f_bus_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_f2_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_f2_bus;
    1:  switch_fuel_icon;
}

//f2 bus properties
if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f2_bus, 1006) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_TM1), string(STR_FBUS_2));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);

    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  12;
    cost_factor:                    140;     
    running_cost_factor:            160;     
    speed:                          80 km/h; 
    power:                          350 hp;  
    cargo_capacity:                 35;
    introduction_date:              date(1957,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
   
    }
graphics {
    running_cost_factor:        switch_runcost_f2_bus;
    visual_effect:              switch_bus_exhaust;
    power:                      switch_power_f2;
    cargo_capacity:             switch_capacity_r2_bus;
    purchase_cargo_capacity:    switch_capacity_r2_bus;
    purchase:                   switch_purchase_f2_bus;
    default:                    switch_f2_bus_door; 
    }
}
}

//F3 bus graphics

//graphics definition



spriteset(spriteset_r3_door_r, "gfx/B/r_door_r_03.png") {
    tmpl_7()
}
spriteset(spriteset_r3_door_ro, "gfx/B/r_door_ro_03.png") {
    tmpl_7()
}
spritegroup spritegroup_r3_door_r {  // right side doors
    loaded:  [spriteset_r3_door_r];
    loading: [spriteset_r3_door_ro];
}

spriteset(spriteset_r3_door_l, "gfx/B/r_door_l_03.png") {
    tmpl_7()
}
spriteset(spriteset_r3_door_lo, "gfx/B/r_door_lo_03.png") {
    tmpl_7()
}
spritegroup spritegroup_r3_door_l {  // left side doors
    loaded:  [spriteset_r3_door_l];
    loading: [spriteset_r3_door_lo];
}

switch (FEAT_ROADVEHS, SELF, switch_r3_bus_door, (traffic_side)) { // choose door side
    TRAFFIC_SIDE_LEFT:      spritegroup_r3_door_l;
    default:                spritegroup_r3_door_r;
    }

spriteset(spriteset_f3_bus_a, "gfx/B/r_bus_a_03.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_f3_bus_a {
    loaded:  [spriteset_f3_bus_a];
    loading: [spriteset_f3_bus_a];
}

spriteset(spriteset_f3_bus_d, "gfx/B/f_bus_d_03.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_f3_bus_d {
    loaded:  [spriteset_f3_bus_d];
    loading: [spriteset_f3_bus_d];
}

spriteset(spriteset_r3_bus_i, "gfx/B/r_bus_i_03.png") {  // Rainbow stripe sprite
    tmpl_7()
}

spritegroup spritegroup_r3_bus_i {
    loaded:  [spriteset_r3_bus_i];
    loading: [spriteset_r3_bus_i];
}

spriteset(spriteset_r3_bus_h, "gfx/B/r_bus_h_03.png") {  // HNL stripe sprite
    tmpl_7()
}

spritegroup spritegroup_r3_bus_h {
    loaded:  [spriteset_r3_bus_h];
    loading: [spriteset_r3_bus_h];
}

switch (FEAT_ROADVEHS, SELF, switch_f3_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_f3_bus_d;
    1:                      spritegroup_f3_bus_a;
    default:                spritegroup_f3_bus_a;
    }

random_switch (FEAT_ROADVEHS, SELF, switch_r3_bus_h, TRIGGER_VEHICLE_SERVICE) { //random special sprite per service
    7: spritegroup_r3_bus_h;        //HNL livery
    1: spritegroup_r3_bus_i;        //Rainbow livery   
}

switch (FEAT_ROADVEHS, SELF, switch_f3_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r3_bus_h;
    COLOUR_ORANGE:          switch_r3_bus_h;
    default:                switch_f3_color;
    }

switch(FEAT_ROADVEHS, SELF, switch_f3_bus_door, [  // Stack door sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_f3_bus;
    1:  switch_r3_bus_door;
    }


spriteset(spriteset_p_f3_bus, "gfx/P/p_f_bus_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_f3_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_f3_bus;
    1:  switch_fuel_icon;
}

//f3 bus properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f3_bus, 1007) {
property {
    name:                           string(STR_CONCAT_BUS, string(STR_MFR_DN2), string(STR_FBUS_2));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  14;
    cost_factor:                    160;      
    running_cost_factor:            220;      
    speed:                          100 km/h; 
    power:                          500 hp;   
    cargo_capacity:                 42;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         11.5 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_f3_bus;
    visual_effect:              switch_bus_exhaust;
    power:                      switch_power_f3;
    cargo_capacity:             switch_capacity_r3_bus;
    purchase_cargo_capacity:    switch_capacity_r3_bus;
    purchase:                   switch_purchase_f3_bus;
    default:                    switch_f3_bus_door; 
    }
}
}

//F4 bus graphics

//graphics definition



spriteset(spriteset_r4_door_r, "gfx/B/r_door_r_04.png") {
    tmpl_7()
}
spriteset(spriteset_r4_door_ro, "gfx/B/r_door_ro_04.png") {
    tmpl_7()
}
spritegroup spritegroup_r4_door_r {  // right side doors
    loaded:  [spriteset_r4_door_r];
    loading: [spriteset_r4_door_ro];
}

spriteset(spriteset_r4_door_l, "gfx/B/r_door_l_04.png") {
    tmpl_7()
}
spriteset(spriteset_r4_door_lo, "gfx/B/r_door_lo_04.png") {
    tmpl_7()
}
spritegroup spritegroup_r4_door_l {  // left side doors
    loaded:  [spriteset_r4_door_l];
    loading: [spriteset_r4_door_lo];
}

switch (FEAT_ROADVEHS, SELF, switch_r4_bus_door, (traffic_side)) { // choose door side
    TRAFFIC_SIDE_LEFT:      spritegroup_r4_door_l;
    default:                spritegroup_r4_door_r;
    }

spriteset(spriteset_f4_bus_a, "gfx/B/r_bus_a_04.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_f4_bus_a {
    loaded:  [spriteset_f4_bus_a];
    loading: [spriteset_f4_bus_a];
}

spriteset(spriteset_f4_bus_d, "gfx/B/f_bus_d_04.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_f4_bus_d {
    loaded:  [spriteset_f4_bus_d];
    loading: [spriteset_f4_bus_d];
}

spriteset(spriteset_r4_bus_i, "gfx/B/r_bus_i_04.png") {  // Rainbow stripe sprite
    tmpl_7()
}

spritegroup spritegroup_r4_bus_i {
    loaded:  [spriteset_r4_bus_i];
    loading: [spriteset_r4_bus_i];
}

spriteset(spriteset_r4_bus_h, "gfx/B/r_bus_h_04.png") {  // HNL stripe sprite
    tmpl_7()
}

spritegroup spritegroup_r4_bus_h {
    loaded:  [spriteset_r4_bus_h];
    loading: [spriteset_r4_bus_h];
}

switch (FEAT_ROADVEHS, SELF, switch_f4_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_f4_bus_d;
    1:                      spritegroup_f4_bus_a;
    default:                spritegroup_f4_bus_a;
    }

random_switch (FEAT_ROADVEHS, SELF, switch_r4_bus_h, TRIGGER_VEHICLE_SERVICE) { //random special sprite per service
    7: spritegroup_r4_bus_h;        //HNL livery
    1: spritegroup_r4_bus_i;        //Rainbow livery   
}

switch (FEAT_ROADVEHS, SELF, switch_f4_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r4_bus_h;
    COLOUR_ORANGE:          switch_r4_bus_h;
    default:                switch_f4_color;
    }

switch(FEAT_ROADVEHS, SELF, switch_f4_bus_door, [  // Stack door sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_f4_bus;
    1:  switch_r4_bus_door;
    }

spriteset(spriteset_p_f4_bus, "gfx/P/p_f_bus_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_f4_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_f4_bus;
    1:  switch_fuel_icon;
}

//f4 bus properties

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_f4_bus, 1008) {
property {
    name:                       string(STR_CONCAT_BUS, string(STR_MFR_BW2), string(STR_FBUS_2));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              18;
    cost_factor:                180;
    running_cost_factor:        240;
    speed:                      120 km/h;
    power:                      660 hp;
    cargo_capacity:             44;
    introduction_date:          date(2015,01,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               40;
    reliability_decay:          14;
    road_type:                  ROAD;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH;
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_SPRITE_STACK, ROADVEH_FLAG_AUTOREFIT);
    refit_cost:                 0;
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     13.5 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_f4_bus;
    visual_effect:              switch_bus_exhaust;
    power:                      switch_power_f4;
    cargo_capacity:             switch_capacity_r4_bus;
    purchase_cargo_capacity:    switch_capacity_r4_bus;
    purchase:                   switch_purchase_f4_bus;
    default:                    switch_f4_bus_door;
    }
}
}

//Rigid Trolley Buses
//T1 bus graphics

//graphics definition
spriteset(spriteset_t1_bus_a, "gfx/B/r_bus_a_01.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_t1_bus_a {
    loaded:  [spriteset_t1_bus_a];
    loading: [spriteset_t1_bus_a];
}

spriteset(spriteset_t1_bus_d, "gfx/B/t_bus_d_01.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_t1_bus_d {
    loaded:  [spriteset_t1_bus_d];
    loading: [spriteset_t1_bus_d];
}
switch (FEAT_ROADVEHS, SELF, switch_t1_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_t1_bus_d;
    1:                      spritegroup_t1_bus_a;
    default:                spritegroup_t1_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_t1_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r1_bus_h;
    COLOUR_ORANGE:          switch_r1_bus_h;
    default:                switch_t1_color;
    }


spriteset(spriteset_t_bus_pole, "gfx/X/b_panto_01.png") {  // bus trolley pole sprite
    tmpl_7()
}
switch (FEAT_ROADVEHS, SELF, switch_bus_pole, (position_in_consist)) { // place trolley poles on lead vehicle
    0:                      spriteset_t_bus_pole;
    default:                switch_bus_greeble;   // put greeble if no trolley pole
    }

switch(FEAT_ROADVEHS, SELF, switch_t1_bus_door, [  // Stack door and pantograph sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_t1_bus;
    1:  switch_r1_bus_door;
    2:  switch_bus_pole;
    }

spriteset(spriteset_p_t1_bus, "gfx/P/p_t_bus_01.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_t1_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_t1_bus;
    1:  switch_wire_icon;

}

//T1 bus properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t1_bus, 2005) {
property {
 
    name:                           string(STR_CONCAT_BUS, string(STR_MFR_KD1), string(STR_TBUS_1));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  10;
    cost_factor:                    108;     
    running_cost_factor:            100;      
    speed:                          50 km/h; 
    power:                          350 hp;  
    cargo_capacity:                 30;
    introduction_date:              date(1935,01,01); 
    model_life:                     65; 
    vehicle_life:                   35; 
    reliability_decay:              10; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         7.5 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_t1_bus;
    visual_effect:              switch_bus_spark;
    power:                      switch_power_t1;
    cargo_capacity:             switch_capacity_r1_bus;
    purchase_cargo_capacity:    switch_capacity_r1_bus;
    purchase:                   switch_purchase_t1_bus;
    default:                    switch_t1_bus_door; 
    }
}
}

//T2 bus graphics

//graphics definition
spriteset(spriteset_t2_bus_a, "gfx/B/r_bus_a_02.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_t2_bus_a {
    loaded:  [spriteset_t2_bus_a];
    loading: [spriteset_t2_bus_a];
}

spriteset(spriteset_t2_bus_d, "gfx/B/t_bus_d_02.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_t2_bus_d {
    loaded:  [spriteset_t2_bus_d];
    loading: [spriteset_t2_bus_d];
}
switch (FEAT_ROADVEHS, SELF, switch_t2_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_t2_bus_d;
    1:                      spritegroup_t2_bus_a;
    default:                spritegroup_t2_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_t2_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r2_bus_h;
    COLOUR_ORANGE:          switch_r2_bus_h;
    default:                switch_t2_color;
    }

switch(FEAT_ROADVEHS, SELF, switch_t2_bus_door, [  // Stack door and pantograph sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_t2_bus;
    1:  switch_r2_bus_door;
    2:  switch_bus_pole;
    }

spriteset(spriteset_p_t2_bus, "gfx/P/p_t_bus_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_t2_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_t2_bus;
    1:  switch_wire_icon;
}
//t2 bus properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t2_bus, 2006) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_LC1), string(STR_TBUS_2));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  12;
    cost_factor:                    128;     
    running_cost_factor:            140;     
    speed:                          80 km/h; 
    power:                          690 hp;  
    cargo_capacity:                 35;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8.5 ton;
   
    }
graphics {
    running_cost_factor:        switch_runcost_t2_bus;
    visual_effect:              switch_bus_spark;
    power:                      switch_power_t2;
    cargo_capacity:             switch_capacity_r2_bus;
    purchase_cargo_capacity:    switch_capacity_r2_bus;
    purchase:                   switch_purchase_t2_bus;
    default:                    switch_t2_bus_door; 
    }
}
}

//T3 bus graphics

//graphics definition
spriteset(spriteset_t3_bus_a, "gfx/B/r_bus_a_03.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_t3_bus_a {
    loaded:  [spriteset_t3_bus_a];
    loading: [spriteset_t3_bus_a];
}

spriteset(spriteset_t3_bus_d, "gfx/B/t_bus_d_03.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_t3_bus_d {
    loaded:  [spriteset_t3_bus_d];
    loading: [spriteset_t3_bus_d];
}
switch (FEAT_ROADVEHS, SELF, switch_t3_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_t3_bus_d;
    1:                      spritegroup_t3_bus_a;
    default:                spritegroup_t3_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_t3_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r3_bus_h;
    COLOUR_ORANGE:          switch_r3_bus_h;
    default:                switch_t3_color;
    }

switch(FEAT_ROADVEHS, SELF, switch_t3_bus_door, [  // Stack door and pantograph sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_t3_bus;
    1:  switch_r3_bus_door;
    2:  switch_bus_pole;
    }

spriteset(spriteset_p_t3_bus, "gfx/P/p_t_bus_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_t3_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_t3_bus;
    1:  switch_wire_icon;
}

//t3 bus properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t3_bus, 2007) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_BW2), string(STR_TBUS_2));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  14;
    cost_factor:                    138;      
    running_cost_factor:            200;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 42;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_t3_bus;
    visual_effect:              switch_bus_spark;
    power:                      switch_power_t3;
    cargo_capacity:             switch_capacity_r3_bus;
    purchase_cargo_capacity:    switch_capacity_r3_bus;
    purchase:                   switch_purchase_t3_bus;
    default:                    switch_t3_bus_door; 
    }
}
}

//T4 bus graphics

//graphics definition
spriteset(spriteset_t4_bus_a, "gfx/B/r_bus_a_04.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_t4_bus_a {
    loaded:  [spriteset_t4_bus_a];
    loading: [spriteset_t4_bus_a];
}

spriteset(spriteset_t4_bus_d, "gfx/B/t_bus_d_04.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_t4_bus_d {
    loaded:  [spriteset_t4_bus_d];
    loading: [spriteset_t4_bus_d];
}
switch (FEAT_ROADVEHS, SELF, switch_t4_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_t4_bus_d;
    1:                      spritegroup_t4_bus_a;
    default:                spritegroup_t4_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_t4_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r4_bus_h;
    COLOUR_ORANGE:          switch_r4_bus_h;
    default:                switch_t4_color;
    }
switch(FEAT_ROADVEHS, SELF, switch_t4_bus_door, [  // Stack door and pantograph sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_t4_bus;
    1:  switch_r4_bus_door;
    2:  switch_bus_pole;
    }

spriteset(spriteset_p_t4_bus, "gfx/P/p_t_bus_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_t4_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_t4_bus;
    1:  switch_wire_icon;
}

//t4 bus properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_t4_bus, 2008) {
property {
    name:                       string(STR_CONCAT_BUS, string(STR_MFR_DN2), string(STR_TBUS_2));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              18;
    cost_factor:                158;
    running_cost_factor:        160;
    speed:                      140 km/h;
    power:                      2100 hp;
    cargo_capacity:             44;
    introduction_date:          date(2020,01,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               40;
    reliability_decay:          14;
    road_type:                  ELRD;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH;
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0;
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     12 ton;
    }
graphics {
    running_cost_factor:        switch_runcost_t4_bus;
    visual_effect:              switch_bus_spark;
    power:                      switch_power_t4;
    cargo_capacity:             switch_capacity_r4_bus;
    purchase_cargo_capacity:    switch_capacity_r4_bus;
    purchase:                   switch_purchase_t4_bus;
    default:                    switch_t4_bus_door;
    }
}
}

//Dual Mode Rigid Buses

//D3 bus graphics

//graphics definition
spriteset(spriteset_d3_bus_a, "gfx/B/r_bus_a_03.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_d3_bus_a {
    loaded:  [spriteset_d3_bus_a];
    loading: [spriteset_d3_bus_a];
}

spriteset(spriteset_d3_bus_d, "gfx/B/d_bus_d_03.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_d3_bus_d {
    loaded:  [spriteset_d3_bus_d];
    loading: [spriteset_d3_bus_d];
}
switch (FEAT_ROADVEHS, SELF, switch_d3_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_d3_bus_d;
    1:                      spritegroup_d3_bus_a;
    default:                spritegroup_d3_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_d3_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r3_bus_h;
    COLOUR_ORANGE:          switch_r3_bus_h;
    default:                switch_d3_color;
    }


switch(FEAT_ROADVEHS, SELF, switch_d3_bus_door, [  // Stack door and pantograph sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_d3_bus;
    1:  switch_r3_bus_door;
    2:  switch_d_panto;
    }

spriteset(spriteset_p_d3_bus, "gfx/P/p_d_bus_03.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_d3_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_d3_bus;
    1:  switch_dual_icon;
}

//d3 bus properties

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d3_bus, 3007) {
property {
        /* Properties common to all vehicle types */
    name:                           string(STR_CONCAT_BUS, string(STR_MFR_DN2), string(STR_DBUS_1));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);    
    loading_speed:                  14;
    cost_factor:                    138;      
    running_cost_factor:            200;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 40;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DISABLE;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         12 ton;
    }
graphics {
    power:                      switch_boost_d3;
    running_cost_factor:        switch_runcost_d3_bus;
    visual_effect:              switch_spark_dx;
    cargo_capacity:             switch_capacity_r3_bus;
    purchase_cargo_capacity:    switch_capacity_r3_bus;
    purchase:                   switch_purchase_d3_bus;
    default:                    switch_d3_bus_door;  
    }
}
}

//d4 bus graphics

//graphics definition
//D4 bus graphics

//graphics definition
spriteset(spriteset_d4_bus_a, "gfx/B/r_bus_a_04.png") {  // prototype sprite
    tmpl_7()
}

spritegroup spritegroup_d4_bus_a {
    loaded:  [spriteset_d4_bus_a];
    loading: [spriteset_d4_bus_a];
}

spriteset(spriteset_d4_bus_d, "gfx/B/d_bus_d_04.png") {  // color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_d4_bus_d {
    loaded:  [spriteset_d4_bus_d];
    loading: [spriteset_d4_bus_d];
}
switch (FEAT_ROADVEHS, SELF, switch_d4_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      spritegroup_d4_bus_d;
    1:                      spritegroup_d4_bus_a;
    default:                spritegroup_d4_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_d4_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_r4_bus_h;
    COLOUR_ORANGE:          switch_r4_bus_h;
    default:                switch_d4_color;
    }


switch(FEAT_ROADVEHS, SELF, switch_d4_bus_door, [  // Stack door and pantograph sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_d4_bus;
    1:  switch_r4_bus_door;
    2:  switch_d_panto;
    }
spriteset(spriteset_p_d4_bus, "gfx/P/p_d_bus_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_d4_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_d4_bus;
    1:  switch_dual_icon;
}

//d4 bus properties
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_d4_bus, 3008) {
property {
    name:                       string(STR_CONCAT_BUS, string(STR_MFR_DN2), string(STR_DBUS_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              18;
    cost_factor:                170;
    running_cost_factor:        160;
    speed:                      160 km/h;
    power:                      2100 hp;
    cargo_capacity:             42;
    introduction_date:          date(2025,01,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               40;
    reliability_decay:          14;
    road_type:                  ROAD;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_DISABLE;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH;
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0;
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     14 ton;
    }
graphics {
    power:                      switch_boost_d4;
    running_cost_factor:        switch_runcost_d4_bus;
    visual_effect:              switch_spark_d_bus;
    cargo_capacity:             switch_capacity_r4_bus;
    purchase_cargo_capacity:    switch_capacity_r4_bus;
    purchase:                   switch_purchase_d4_bus;
    default:                    switch_d4_bus; 
    }
}
}


/* === Articulated Buses === */

//length
switch (FEAT_ROADVEHS, SELF, switch_length_s_bus, position_in_consist) {
    0: return 7;
    return 6;
}

//capacity
switch (FEAT_ROADVEHS, SELF, capacity_s2_bus, position_in_consist ) {
    0: return switch_capacity_s2_bus;
    return switch_capacity_s2_bus; //default
}

switch (FEAT_ROADVEHS, SELF, capacity_s3_bus, position_in_consist ) {
    0: return switch_capacity_s3_bus;
    return switch_capacity_s3_bus; //default
}

switch (FEAT_ROADVEHS, SELF, capacity_s4_bus, position_in_consist ) {
    0: return switch_capacity_s4_bus;
    return switch_capacity_s4_bus; //default
}

//Diesel Buses
//sf2 bus graphics

//graphics definition

spriteset(spriteset_sr2_door_r, "gfx/B/sr_door_r_02.png") {
    tmpl_7()
}
spriteset(spriteset_sr2_door_ro, "gfx/B/sr_door_ro_02.png") {
    tmpl_7()
}
spritegroup spritegroup_sr2_door_r {  // right side doors
    loaded:  [spriteset_sr2_door_r];
    loading: [spriteset_sr2_door_ro];
}

spriteset(spriteset_sr2_door_l, "gfx/B/sr_door_l_02.png") {
    tmpl_7()
}
spriteset(spriteset_sr2_door_lo, "gfx/B/sr_door_lo_02.png") {
    tmpl_7()
}
spritegroup spritegroup_sr2_door_l {  // left side doors
    loaded:  [spriteset_sr2_door_l];
    loading: [spriteset_sr2_door_lo];
}

switch (FEAT_ROADVEHS, SELF, switch_sr2_bus_door, (traffic_side)) { // choose rear door side
    TRAFFIC_SIDE_LEFT:      spritegroup_sr2_door_l;
    default:                spritegroup_sr2_door_r;
    }

switch (FEAT_ROADVEHS, SELF, switch_position_s2_door, position_in_consist ) {
    0:          switch_r2_bus_door;     //front door sprite - reuses from rigid buses
    default:    switch_sr2_bus_door;    //rear door sprite
}

spriteset(spriteset_s2_bus_i, "gfx/B/s_bus_i_02.png") {  // Rainbow sprite front
    tmpl_7()
}

spritegroup spritegroup_s2_bus_i {
    loaded:  [spriteset_s2_bus_i];
    loading: [spriteset_s2_bus_i];
}

spriteset(spriteset_sr2_bus_i, "gfx/B/sr_bus_i_02.png") {  // Rainbow sprite rear
    tmpl_7()
}

spritegroup spritegroup_sr2_bus_i {
    loaded:  [spriteset_sr2_bus_i];
    loading: [spriteset_sr2_bus_i];
}

switch (FEAT_ROADVEHS, SELF, switch_position_s2_bus_i, position_in_consist ) {
    0:          spritegroup_s2_bus_i;  //front sprite
    default:    spritegroup_sr2_bus_i;  //rear sprite
}

spriteset(spriteset_s2_bus_h, "gfx/B/s_bus_h_02.png") {  // HNL sprite front
    tmpl_7()
}

spritegroup spritegroup_s2_bus_h {
    loaded:  [spriteset_s2_bus_h];
    loading: [spriteset_s2_bus_h];
}

spriteset(spriteset_sr2_bus_h, "gfx/B/sr_bus_h_02.png") {  // HNL sprite rear
    tmpl_7()
}

spritegroup spritegroup_sr2_bus_h {
    loaded:  [spriteset_sr2_bus_h];
    loading: [spriteset_sr2_bus_h];
}

switch (FEAT_ROADVEHS, SELF, switch_position_s2_bus_h, position_in_consist ) {
    0:          spritegroup_s2_bus_h;  //front sprite
    default:    spritegroup_sr2_bus_h;  //rear sprite
}

random_switch (FEAT_ROADVEHS, SELF, switch_s2_bus_h, TRIGGER_VEHICLE_SERVICE) { //random special sprite per service
    7: switch_position_s2_bus_h;        //HNL livery
    1: switch_position_s2_bus_i;        //Rainbow livery   
}

spriteset(spriteset_s2_bus_a, "gfx/B/s_bus_a_02.png") {  // front prototype sprite
    tmpl_7()
}

spritegroup spritegroup_s2_bus_a {
    loaded:  [spriteset_s2_bus_a];
    loading: [spriteset_s2_bus_a];
}

spriteset(spriteset_sr2_bus_a, "gfx/B/sr_bus_a_02.png") {  // rear prototype sprite
    tmpl_7()
}

spritegroup spritegroup_sr2_bus_a {
    loaded:  [spriteset_sr2_bus_a];
    loading: [spriteset_sr2_bus_a];
}

switch (FEAT_ROADVEHS, SELF, switch_position_s2_bus_a, position_in_consist ) {
    0:          spritegroup_s2_bus_a;  //front sprite
    default:    spritegroup_sr2_bus_a;  //rear sprite
}

spriteset(spriteset_sf2_bus_d, "gfx/B/sf_bus_d_02.png") {  // front color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_sf2_bus_d {
    loaded:  [spriteset_sf2_bus_d];
    loading: [spriteset_sf2_bus_d];
}

spriteset(spriteset_rf2_bus_d, "gfx/B/rf_bus_d_02.png") {  // rear color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_rf2_bus_d {
    loaded:  [spriteset_rf2_bus_d];
    loading: [spriteset_rf2_bus_d];
}

switch (FEAT_ROADVEHS, SELF, switch_position_sf2_bus_d, position_in_consist ) {
    0:          spritegroup_sf2_bus_d;  //front sprite
    default:    spritegroup_rf2_bus_d;  //rear sprite
}

switch (FEAT_ROADVEHS, SELF, switch_sf2_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      switch_position_sf2_bus_d;
    1:                      switch_position_s2_bus_a;
    default:                switch_position_s2_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_sf2_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_s2_bus_h;
    COLOUR_ORANGE:          switch_s2_bus_h;
    default:                switch_sf2_color;
    }
switch(FEAT_ROADVEHS, SELF, switch_sf2_bus_door, [  // Stack door and greeble sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_sf2_bus;
    1:  switch_position_s2_door;
    2:  switch_bus_greeble;
    }

spriteset(spriteset_p_sf2_bus, "gfx/P/sf_bus_02.png") {  // purchase sprite
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sf2_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), //composite purchase power icon
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_sf2_bus;
    1:  switch_fuel_icon;
}

//sf2 bus properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf2_arti_bus, extra_callback_info1) {
    1:  return item_sf2_bus; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf2_bus, 1016) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_DN2), string(STR_FBUS_3));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  12;
    cost_factor:                    150;     
    running_cost_factor:            165;     
    speed:                          80 km/h; 
    power:                          690 hp;  
    cargo_capacity:                 72;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_sf2_bus;
    articulated_part:           switch_sf2_arti_bus;
    length:                     switch_length_s_bus;
    cargo_capacity:             capacity_s2_bus;
    purchase_cargo_capacity:    capacity_s2_bus;
    visual_effect:              switch_bus_exhaust;
    power:                      switch_power_cf2;
    default:                    switch_sf2_bus_door; 
    purchase:                   switch_purchase_sf2_bus;
    }
}
}

//sf3 bus graphics

//graphics definition

spriteset(spriteset_sr3_door_r, "gfx/B/sr_door_r_03.png") {
    tmpl_7()
}
spriteset(spriteset_sr3_door_ro, "gfx/B/sr_door_ro_03.png") {
    tmpl_7()
}
spritegroup spritegroup_sr3_door_r {  // right side doors
    loaded:  [spriteset_sr3_door_r];
    loading: [spriteset_sr3_door_ro];
}

spriteset(spriteset_sr3_door_l, "gfx/B/sr_door_l_03.png") {
    tmpl_7()
}
spriteset(spriteset_sr3_door_lo, "gfx/B/sr_door_lo_03.png") {
    tmpl_7()
}
spritegroup spritegroup_sr3_door_l {  // left side doors
    loaded:  [spriteset_sr3_door_l];
    loading: [spriteset_sr3_door_lo];
}

switch (FEAT_ROADVEHS, SELF, switch_sr3_bus_door, (traffic_side)) { // choose rear door side
    TRAFFIC_SIDE_LEFT:      spritegroup_sr3_door_l;
    default:                spritegroup_sr3_door_r;
    }

switch (FEAT_ROADVEHS, SELF, switch_position_s3_door, position_in_consist ) {
    0:          switch_r3_bus_door;     //front door sprite - reuses from rigid buses
    default:    switch_sr3_bus_door;    //rear door sprite
}

spriteset(spriteset_s3_bus_i, "gfx/B/s_bus_i_03.png") {  // Rainbow sprite front
    tmpl_7()
}

spritegroup spritegroup_s3_bus_i {
    loaded:  [spriteset_s3_bus_i];
    loading: [spriteset_s3_bus_i];
}

spriteset(spriteset_sr3_bus_i, "gfx/B/sr_bus_i_03.png") {  // Rainbow sprite rear
    tmpl_7()
}

spritegroup spritegroup_sr3_bus_i {
    loaded:  [spriteset_sr3_bus_i];
    loading: [spriteset_sr3_bus_i];
}

switch (FEAT_ROADVEHS, SELF, switch_position_s3_bus_i, position_in_consist ) {
    0:          spritegroup_s3_bus_i;  //front sprite
    default:    spritegroup_sr3_bus_i;  //rear sprite
}

spriteset(spriteset_s3_bus_h, "gfx/B/s_bus_h_03.png") {  // HNL sprite front
    tmpl_7()
}

spritegroup spritegroup_s3_bus_h {
    loaded:  [spriteset_s3_bus_h];
    loading: [spriteset_s3_bus_h];
}

spriteset(spriteset_sr3_bus_h, "gfx/B/sr_bus_h_03.png") {  // HNL sprite rear
    tmpl_7()
}

spritegroup spritegroup_sr3_bus_h {
    loaded:  [spriteset_sr3_bus_h];
    loading: [spriteset_sr3_bus_h];
}

switch (FEAT_ROADVEHS, SELF, switch_position_s3_bus_h, position_in_consist ) {
    0:          spritegroup_s3_bus_h;  //front sprite
    default:    spritegroup_sr3_bus_h;  //rear sprite
}

random_switch (FEAT_ROADVEHS, SELF, switch_s3_bus_h, TRIGGER_VEHICLE_SERVICE) { //random special sprite per service
    7: switch_position_s3_bus_h;        //HNL livery
    1: switch_position_s3_bus_i;        //Rainbow livery   
}

spriteset(spriteset_s3_bus_a, "gfx/B/s_bus_a_03.png") {  // front prototype sprite
    tmpl_7()
}

spritegroup spritegroup_s3_bus_a {
    loaded:  [spriteset_s3_bus_a];
    loading: [spriteset_s3_bus_a];
}

spriteset(spriteset_sr3_bus_a, "gfx/B/sr_bus_a_03.png") {  // rear prototype sprite
    tmpl_7()
}

spritegroup spritegroup_sr3_bus_a {
    loaded:  [spriteset_sr3_bus_a];
    loading: [spriteset_sr3_bus_a];
}

switch (FEAT_ROADVEHS, SELF, switch_position_s3_bus_a, position_in_consist ) {
    0:          spritegroup_s3_bus_a;  //front sprite
    default:    spritegroup_sr3_bus_a;  //rear sprite
}

spriteset(spriteset_sf3_bus_d, "gfx/B/sf_bus_d_03.png") {  // front color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_sf3_bus_d {
    loaded:  [spriteset_sf3_bus_d];
    loading: [spriteset_sf3_bus_d];
}

spriteset(spriteset_rf3_bus_d, "gfx/B/rf_bus_d_03.png") {  // rear color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_rf3_bus_d {
    loaded:  [spriteset_rf3_bus_d];
    loading: [spriteset_rf3_bus_d];
}

switch (FEAT_ROADVEHS, SELF, switch_position_sf3_bus_d, position_in_consist ) {
    0:          spritegroup_sf3_bus_d;  //front sprite
    default:    spritegroup_rf3_bus_d;  //rear sprite
}

switch (FEAT_ROADVEHS, SELF, switch_sf3_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      switch_position_sf3_bus_d;
    1:                      switch_position_s3_bus_a;
    default:                switch_position_s3_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_sf3_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_s3_bus_h;
    COLOUR_ORANGE:          switch_s3_bus_h;
    default:                switch_sf3_color;
    }
switch(FEAT_ROADVEHS, SELF, switch_sf3_bus_door, [  // Stack door and greeble sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_sf3_bus;
    1:  switch_position_s3_door;
    2:  switch_bus_greeble;
    }

spriteset(spriteset_p_sf3_bus, "gfx/P/sf_bus_03.png") {  // purchase sprite
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sf3_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100), //composite purchase power icon
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_p_sf3_bus;
    1:  switch_fuel_icon;
}

//sf3 bus properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf3_arti_bus, extra_callback_info1) {
    1:  return item_sf3_bus; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf3_bus, 1017) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_TM2), string(STR_FBUS_3));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  14;
    cost_factor:                    170;      
    running_cost_factor:            225;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 80;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         21.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_sf3_bus;
    articulated_part:           switch_sf3_arti_bus;
    length:                     switch_length_s_bus;
    cargo_capacity:             capacity_s3_bus;
    purchase_cargo_capacity:    capacity_s3_bus;
    visual_effect:              switch_bus_exhaust;
    power:                      switch_power_cf3;
    default:                    switch_sf3_bus_door; 
    purchase:                   switch_purchase_sf3_bus;
    }
}
}

//sf4 bus graphics

//graphics definition

spriteset(spriteset_sr4_door_r, "gfx/B/sr_door_r_04.png") {
    tmpl_7()
}
spriteset(spriteset_sr4_door_ro, "gfx/B/sr_door_ro_04.png") {
    tmpl_7()
}
spritegroup spritegroup_sr4_door_r {  // right side doors
    loaded:  [spriteset_sr4_door_r];
    loading: [spriteset_sr4_door_ro];
}

spriteset(spriteset_sr4_door_l, "gfx/B/sr_door_l_04.png") {
    tmpl_7()
}
spriteset(spriteset_sr4_door_lo, "gfx/B/sr_door_lo_04.png") {
    tmpl_7()
}
spritegroup spritegroup_sr4_door_l {  // left side doors
    loaded:  [spriteset_sr4_door_l];
    loading: [spriteset_sr4_door_lo];
}

switch (FEAT_ROADVEHS, SELF, switch_sr4_bus_door, (traffic_side)) { // choose rear door side
    TRAFFIC_SIDE_LEFT:      spritegroup_sr4_door_l;
    default:                spritegroup_sr4_door_r;
    }

switch (FEAT_ROADVEHS, SELF, switch_position_s4_door, position_in_consist ) {
    0:          switch_r4_bus_door;     //front door sprite - reuses from rigid buses
    default:    switch_sr4_bus_door;    //rear door sprite
}

spriteset(spriteset_s4_bus_i, "gfx/B/s_bus_i_04.png") {  // Rainbow sprite front
    tmpl_7()
}

spritegroup spritegroup_s4_bus_i {
    loaded:  [spriteset_s4_bus_i];
    loading: [spriteset_s4_bus_i];
}

spriteset(spriteset_sr4_bus_i, "gfx/B/sr_bus_i_04.png") {  // Rainbow sprite rear
    tmpl_7()
}

spritegroup spritegroup_sr4_bus_i {
    loaded:  [spriteset_sr4_bus_i];
    loading: [spriteset_sr4_bus_i];
}

switch (FEAT_ROADVEHS, SELF, switch_position_s4_bus_i, position_in_consist ) {
    0:          spritegroup_s4_bus_i;  //front sprite
    default:    spritegroup_sr4_bus_i;  //rear sprite
}

spriteset(spriteset_s4_bus_h, "gfx/B/s_bus_h_04.png") {  // HNL sprite front
    tmpl_7()
}

spritegroup spritegroup_s4_bus_h {
    loaded:  [spriteset_s4_bus_h];
    loading: [spriteset_s4_bus_h];
}

spriteset(spriteset_sr4_bus_h, "gfx/B/sr_bus_h_04.png") {  // HNL sprite rear
    tmpl_7()
}

spritegroup spritegroup_sr4_bus_h {
    loaded:  [spriteset_sr4_bus_h];
    loading: [spriteset_sr4_bus_h];
}

switch (FEAT_ROADVEHS, SELF, switch_position_s4_bus_h, position_in_consist ) {
    0:          spritegroup_s4_bus_h;  //front sprite
    default:    spritegroup_sr4_bus_h;  //rear sprite
}

random_switch (FEAT_ROADVEHS, SELF, switch_s4_bus_h, TRIGGER_VEHICLE_SERVICE) { //random special sprite per service
    7: switch_position_s4_bus_h;        //HNL livery
    1: switch_position_s4_bus_i;        //Rainbow livery   
}

spriteset(spriteset_s4_bus_a, "gfx/B/s_bus_a_04.png") {  // front prototype sprite
    tmpl_7()
}

spritegroup spritegroup_s4_bus_a {
    loaded:  [spriteset_s4_bus_a];
    loading: [spriteset_s4_bus_a];
}

spriteset(spriteset_sr4_bus_a, "gfx/B/sr_bus_a_04.png") {  // rear prototype sprite
    tmpl_7()
}

spritegroup spritegroup_sr4_bus_a {
    loaded:  [spriteset_sr4_bus_a];
    loading: [spriteset_sr4_bus_a];
}

switch (FEAT_ROADVEHS, SELF, switch_position_s4_bus_a, position_in_consist ) {
    0:          spritegroup_s4_bus_a;  //front sprite
    default:    spritegroup_sr4_bus_a;  //rear sprite
}

spriteset(spriteset_sf4_bus_d, "gfx/B/sf_bus_d_04.png") {  // front color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_sf4_bus_d {
    loaded:  [spriteset_sf4_bus_d];
    loading: [spriteset_sf4_bus_d];
}

spriteset(spriteset_rf4_bus_d, "gfx/B/rf_bus_d_04.png") {  // rear color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_rf4_bus_d {
    loaded:  [spriteset_rf4_bus_d];
    loading: [spriteset_rf4_bus_d];
}

switch (FEAT_ROADVEHS, SELF, switch_position_sf4_bus_d, position_in_consist ) {
    0:          spritegroup_sf4_bus_d;  //front sprite
    default:    spritegroup_rf4_bus_d;  //rear sprite
}

switch (FEAT_ROADVEHS, SELF, switch_sf4_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      switch_position_sf4_bus_d;
    1:                      switch_position_s4_bus_a;
    default:                switch_position_s4_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_sf4_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_s4_bus_h;
    COLOUR_ORANGE:          switch_s4_bus_h;
    default:                switch_sf4_color;
    }
switch(FEAT_ROADVEHS, SELF, switch_sf4_bus_door, [  // Stack door and greeble sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_sf4_bus;
    1:  switch_position_s4_door;
    2:  switch_bus_greeble;
    }

spriteset(spriteset_sf4_bus, "gfx/P/sf_bus_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sf4_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sf4_bus;
    1:  switch_fuel_icon;
}

//sf4 bus properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sf4_arti_bus, extra_callback_info1) {
    1:  return item_sf4_bus; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_sf4_bus, 1018) {
property {
    name:                       string(STR_CONCAT_BUS, string(STR_MFR_BW2), string(STR_FBUS_3));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS); loading_speed:          18;
    cost_factor:                190;
    running_cost_factor:        245;
    speed:                      120 km/h;
    power:                      720 hp;
    cargo_capacity:             88;
    introduction_date:          date(2015,01,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               40;
    reliability_decay:          14;
    road_type:                  ROAD;
    visual_effect:              VISUAL_EFFECT_DIESEL;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     25.5 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_sf4_bus;
    articulated_part:           switch_sf4_arti_bus;
    length:                     switch_length_s_bus;
    cargo_capacity:             capacity_s4_bus;
    visual_effect:              switch_bus_exhaust;
    power:                      switch_power_cf4;
    purchase_cargo_capacity:    capacity_s4_bus;
    default:                    switch_sf4_bus_door; 
    purchase:                   switch_purchase_sf4_bus;
    }
}
}

//Trolley Buses
//st2 trolley bus graphics

//graphics definition

spriteset(spriteset_st2_bus_d, "gfx/B/st_bus_d_02.png") {  // front color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_st2_bus_d {
    loaded:  [spriteset_st2_bus_d];
    loading: [spriteset_st2_bus_d];
}

spriteset(spriteset_rt2_bus_d, "gfx/B/rt_bus_d_02.png") {  // rear color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_rt2_bus_d {
    loaded:  [spriteset_rt2_bus_d];
    loading: [spriteset_rt2_bus_d];
}

switch (FEAT_ROADVEHS, SELF, switch_position_st2_bus_d, position_in_consist ) {
    0:          spritegroup_st2_bus_d;  //front sprite
    default:    spritegroup_rt2_bus_d;  //rear sprite
}

switch (FEAT_ROADVEHS, SELF, switch_st2_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      switch_position_st2_bus_d;
    1:                      switch_position_s2_bus_a;
    default:                switch_position_s2_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_st2_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_s2_bus_h;
    COLOUR_ORANGE:          switch_s2_bus_h;
    default:                switch_st2_color;
    }
switch(FEAT_ROADVEHS, SELF, switch_st2_bus_door, [  // Stack door and trolley pole sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_st2_bus;
    1:  switch_position_s2_door;
    2:  switch_bus_pole;
    }

spriteset(spriteset_st2_bus, "gfx/P/st_bus_02.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_st2_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st2_bus;
    1:  switch_wire_icon;
}

//st2 trolley bus properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st2_arti_bus, extra_callback_info1) {
    1:  return item_st2_bus; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st2_bus, 2016) {
property {

    name:                           string(STR_CONCAT_BUS, string(STR_MFR_DN2), string(STR_TBUS_3));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  12;
    cost_factor:                    168;     
    running_cost_factor:            150;     
    speed:                          80 km/h; 
    power:                          690 hp;  
    cargo_capacity:                 72;
    introduction_date:              date(1960,01,01); 
    model_life:                     50; 
    vehicle_life:                   30; 
    reliability_decay:              12; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         17 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_st2_bus;
    articulated_part:           switch_st2_arti_bus;
    length:                     switch_length_s_bus;
    cargo_capacity:             capacity_s2_bus;
    visual_effect:              switch_bus_spark;
    power:                      switch_power_ct2;
    purchase_cargo_capacity:    capacity_s2_bus;
    default:                    switch_st2_bus_door; 
    purchase:                   switch_purchase_st2_bus;
    }
}
}

//st3 trolley bus graphics

//graphics definition

spriteset(spriteset_st3_bus_d, "gfx/B/st_bus_d_03.png") {  // front color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_st3_bus_d {
    loaded:  [spriteset_st3_bus_d];
    loading: [spriteset_st3_bus_d];
}

spriteset(spriteset_rt3_bus_d, "gfx/B/rt_bus_d_03.png") {  // rear color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_rt3_bus_d {
    loaded:  [spriteset_rt3_bus_d];
    loading: [spriteset_rt3_bus_d];
}

switch (FEAT_ROADVEHS, SELF, switch_position_st3_bus_d, position_in_consist ) {
    0:          spritegroup_st3_bus_d;  //front sprite
    default:    spritegroup_rt3_bus_d;  //rear sprite
}

switch (FEAT_ROADVEHS, SELF, switch_st3_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      switch_position_st3_bus_d;
    1:                      switch_position_s3_bus_a;
    default:                switch_position_s3_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_st3_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_s3_bus_h;
    COLOUR_ORANGE:          switch_s3_bus_h;
    default:                switch_st3_color;
    }
switch(FEAT_ROADVEHS, SELF, switch_st3_bus_door, [  // Stack door and trolley pole sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_st3_bus;
    1:  switch_position_s3_door;
    2:  switch_bus_pole;
    }

spriteset(spriteset_st3_bus, "gfx/P/st_bus_03.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_st3_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st3_bus;
    1:  switch_wire_icon;
}
//st3 trolley bus properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st3_arti_bus, extra_callback_info1) {
    1:  return item_st3_bus; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st3_bus, 2017) {
property {
    name:                           string(STR_CONCAT_BUS, string(STR_MFR_LC2), string(STR_TBUS_3));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  14;
    cost_factor:                    178;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 80;
    introduction_date:              date(1990,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ELRD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_st3_bus;
    articulated_part:           switch_st3_arti_bus;
    length:                     switch_length_s_bus;
    cargo_capacity:             capacity_s3_bus;
    visual_effect:              switch_bus_spark;
    power:                      switch_power_ct3;
    purchase_cargo_capacity:    capacity_s3_bus;
    default:                    switch_st3_bus_door; 
    purchase:                   switch_purchase_st3_bus;
    }
}
}

//st4 trolley bus graphics

//graphics definition
spriteset(spriteset_st4_bus_d, "gfx/B/st_bus_d_04.png") {  // front color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_st4_bus_d {
    loaded:  [spriteset_st4_bus_d];
    loading: [spriteset_st4_bus_d];
}

spriteset(spriteset_rt4_bus_d, "gfx/B/rt_bus_d_04.png") {  // rear color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_rt4_bus_d {
    loaded:  [spriteset_rt4_bus_d];
    loading: [spriteset_rt4_bus_d];
}

switch (FEAT_ROADVEHS, SELF, switch_position_st4_bus_d, position_in_consist ) {
    0:          spritegroup_st4_bus_d;  //front sprite
    default:    spritegroup_rt4_bus_d;  //rear sprite
}

switch (FEAT_ROADVEHS, SELF, switch_st4_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      switch_position_st4_bus_d;
    1:                      switch_position_s4_bus_a;
    default:                switch_position_s4_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_st4_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_s4_bus_h;
    COLOUR_ORANGE:          switch_s4_bus_h;
    default:                switch_st4_color;
    }
switch(FEAT_ROADVEHS, SELF, switch_st4_bus_door, [  // Stack door and trolley pole sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_st4_bus;
    1:  switch_position_s4_door;
    2:  switch_bus_pole;
    }

spriteset(spriteset_st4_bus, "gfx/P/st_bus_04.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_st4_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_st4_bus;
    1:  switch_wire_icon;

}

//st4 trolley bus properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_st4_arti_bus, extra_callback_info1) {
    1:  return item_st4_bus; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_st4_bus, 2018) {
property {
    name:                       string(STR_CONCAT_BUS, string(STR_MFR_BW2), string(STR_TBUS_3));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS); 
    loading_speed:              18;
    cost_factor:                198;
    running_cost_factor:        170;
    speed:                      140 km/h;
    power:                      2100 hp;
    cargo_capacity:             88;
    introduction_date:          date(2020,01,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               40;
    reliability_decay:          14;
    road_type:                  ELRD;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     17 ton;
    }

graphics {
    running_cost_factor:        switch_runcost_st4_bus;
    articulated_part:           switch_st4_arti_bus;
    length:                     switch_length_s_bus;
    cargo_capacity:             capacity_s4_bus;
    visual_effect:              switch_bus_spark;
    power:                      switch_power_ct4;
    purchase_cargo_capacity:    capacity_s4_bus;
    default:                    switch_st4_bus_door; 
    purchase:                   switch_purchase_st4_bus;
    }
}
}

// Dual Mode Buses


//sd3 dm bus graphics

//graphics definition
spriteset(spriteset_sd3_bus_d, "gfx/B/sd_bus_d_03.png") {  // front color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_sd3_bus_d {
    loaded:  [spriteset_sd3_bus_d];
    loading: [spriteset_sd3_bus_d];
}

spriteset(spriteset_rd3_bus_d, "gfx/B/rd_bus_d_03.png") {  // rear color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_rd3_bus_d {
    loaded:  [spriteset_rd3_bus_d];
    loading: [spriteset_rd3_bus_d];
}

switch (FEAT_ROADVEHS, SELF, switch_position_sd3_bus_d, position_in_consist ) {
    0:          spritegroup_sd3_bus_d;  //front sprite
    default:    spritegroup_rd3_bus_d;  //rear sprite
}

switch (FEAT_ROADVEHS, SELF, switch_sd3_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      switch_position_sd3_bus_d;
    1:                      switch_position_s3_bus_a;
    default:                switch_position_s3_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_sd3_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_s3_bus_h;
    COLOUR_ORANGE:          switch_s3_bus_h;
    default:                switch_sd3_color;
    }

switch (FEAT_ROADVEHS, SELF, switch_d_panto_position, position_in_consist ) { // pantograph on lead vehicle only
    0:          switch_d_panto;  //front sprite
    default:    switch_bus_greeble;  //rear sprite
}

switch(FEAT_ROADVEHS, SELF, switch_sd3_bus_door, [  // Stack door and pantograph sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_sd3_bus;
    1:  switch_position_s3_door;
    2:  switch_d_panto_position;
    }


spriteset(spriteset_sd3_bus, "gfx/P/sd_bus_03.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_sd3_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sd3_bus;
    1:  switch_dual_icon;

}

//sd3 dm bus properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sd3_arti_bus, extra_callback_info1) {
    1:  return item_sd3_bus; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_sd3_bus, 3017) {
property {
    name:                           string(STR_CONCAT_BUS, string(STR_MFR_BW2), string(STR_DBUS_2));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  14;
    cost_factor:                    190;      
    running_cost_factor:            210;      
    speed:                          100 km/h; 
    power:                          1200 hp;   
    cargo_capacity:                 80;
    introduction_date:              date(1995,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    sound_effect:                   SOUND_ELECTRIC_SPARK; 
    visual_effect:                  VISUAL_EFFECT_DISABLE;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         22 ton;
    }

graphics {
    power:                      switch_boost_cd3;
    running_cost_factor:        switch_runcost_sd3_bus;
    articulated_part:           switch_sd3_arti_bus;
    visual_effect:              switch_spark_d_bus;
    length:                     switch_length_s_bus;
    cargo_capacity:             capacity_s3_bus;
    purchase_cargo_capacity:    capacity_s3_bus;
    default:                    switch_sd3_bus_door; 
    purchase:                   switch_purchase_sd3_bus;
    }
}
}

//sd4 dmbus graphics

//graphics definition
spriteset(spriteset_sd4_bus_d, "gfx/B/sd_bus_d_03.png") {  // front color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_sd4_bus_d {
    loaded:  [spriteset_sd4_bus_d];
    loading: [spriteset_sd4_bus_d];
}

spriteset(spriteset_rd4_bus_d, "gfx/B/rd_bus_d_03.png") {  // rear color stripe sprite
    tmpl_7()
}

spritegroup spritegroup_rd4_bus_d {
    loaded:  [spriteset_rd4_bus_d];
    loading: [spriteset_rd4_bus_d];
}

switch (FEAT_ROADVEHS, SELF, switch_position_sd4_bus_d, position_in_consist ) {
    0:          spritegroup_sd4_bus_d;  //front sprite
    default:    spritegroup_rd4_bus_d;  //rear sprite
}

switch (FEAT_ROADVEHS, SELF, switch_sd4_color, (built_during_preview)) { // choose special bus sprite during preview
    0:                      switch_position_sd4_bus_d;
    1:                      switch_position_s4_bus_a;
    default:                switch_position_s4_bus_a;
    }
switch (FEAT_ROADVEHS, SELF, switch_sd4_bus, (company_colour1)) { // choose special bus sprite by CC
    COLOUR_YELLOW:          switch_s4_bus_h;
    COLOUR_ORANGE:          switch_s4_bus_h;
    default:                switch_sd4_color;
    }

switch(FEAT_ROADVEHS, SELF, switch_sd4_bus_door, [  // Stack door and pantograph sprites onto bus
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_sd4_bus;
    1:  switch_position_s4_door;
    2:  switch_d_panto_position;
    }


spriteset(spriteset_sd4_bus, "gfx/P/sd_bus_04.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_sd4_bus, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_sd4_bus;
    1:  switch_dual_icon;

}

//sd4 dmbus properties


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sd4_arti_bus, extra_callback_info1) {
    1:  return item_sd4_bus; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_elrv ==1){
item(FEAT_ROADVEHS, item_sd4_bus, 3018) {
property {
    name:                       string(STR_CONCAT_BUS, string(STR_MFR_OG2), string(STR_DBUS_2));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              18;
    cost_factor:                210;
    running_cost_factor:        170;
    speed:                      160 km/h;
    power:                      2100 hp;
    cargo_capacity:             88;
    introduction_date:          date(2025,01,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               40;
    reliability_decay:          14;
    road_type:                  ROAD;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_DISABLE;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     26 ton;
    }

graphics {
    power:                      switch_boost_cd4;
    running_cost_factor:        switch_runcost_sd4_bus;
    visual_effect:              switch_spark_d_bus;
    articulated_part:           switch_sd4_arti_bus;
    length:                     switch_length_s_bus;
    cargo_capacity:             capacity_s4_bus;
    purchase_cargo_capacity:    capacity_s4_bus;

    default:                    switch_sd4_bus_door; 
    purchase:                   switch_purchase_sd4_bus;
    }
}
}
/* ====== Light Vehicles ====== */

spriteset(spriteset_pickup, "gfx/B/pickup_01.png") {
    tmpl_3()
}

spriteset(spriteset_pickup_loaded, "gfx/B/pickup_box_02.png") {
    tmpl_3()
}
spritegroup spritegroup_pickup_box { //
    loaded:  [spriteset_b_null, spriteset_pickup_loaded];
    loading: [spriteset_b_null, spriteset_pickup_loaded];
}

spriteset(spriteset_pickup_rack, "gfx/B/pickup_rack.png") {
    tmpl_3()
}

spriteset(spriteset_surf_1_loaded, "gfx/B/surf_01.png") {
    tmpl_3()
}
spritegroup spritegroup_surf_1 { //
    loaded:  [spriteset_b_null, spriteset_surf_1_loaded];
    loading: [spriteset_b_null, spriteset_surf_1_loaded];
}

spriteset(spriteset_surf_2_loaded, "gfx/B/surf_02.png") {
    tmpl_3()
}
spritegroup spritegroup_surf_2 { //
    loaded:  [spriteset_b_null, spriteset_surf_2_loaded];
    loading: [spriteset_b_null, spriteset_surf_2_loaded];
}

 random_switch (FEAT_ROADVEHS, SELF, switch_color_surf, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize 2cc recoloring palette upon new load */
//  3: palette_2cc(COLOUR_WHITE, COLOUR_PINK);          
//  2: palette_2cc(COLOUR_WHITE, COLOUR_ORANGE);        
    3: palette_2cc(COLOUR_WHITE, COLOUR_CREAM); 
    4: palette_2cc(COLOUR_WHITE, COLOUR_LIGHT_BLUE);   
    4: palette_2cc(COLOUR_PINK, COLOUR_LIGHT_BLUE); 
    3: palette_2cc(COLOUR_PINK, COLOUR_CREAM);  
    3: palette_2cc(COLOUR_PINK, COLOUR_WHITE);
    2: palette_2cc(COLOUR_PINK, COLOUR_ORANGE); 
//  2: palette_2cc(COLOUR_ORANGE, COLOUR_WHITE); 
    2: palette_2cc(COLOUR_ORANGE, COLOUR_PINK); 
    2: palette_2cc(COLOUR_ORANGE, COLOUR_LIGHT_BLUE);
    3: palette_2cc(COLOUR_CREAM, COLOUR_DARK_BLUE);
    3: palette_2cc(COLOUR_CREAM, COLOUR_WHITE); 
    4: palette_2cc(COLOUR_CREAM, COLOUR_LIGHT_BLUE); 
//  2: palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_ORANGE);
    4: palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_WHITE); 
    4: palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_PINK);
    2: palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_LIGHT_BLUE); 
    4: palette_2cc(COLOUR_LIGHT_BLUE, COLOUR_CREAM);                
 }
 switch(FEAT_ROADVEHS, SELF, switch_surf_01, [  // recolor 1 surfboard based on value from random switch
    STORE_TEMP(switch_color_surf(), 0x100),
    ]) {
    default:  spritegroup_surf_1;
    }
 switch(FEAT_ROADVEHS, SELF, switch_surf_02, [  // recolor 2 surfboards based on value from random switch
    STORE_TEMP(switch_color_surf(), 0x100),
    ]) {
    default:  spritegroup_surf_2;
    }

random_switch (FEAT_ROADVEHS, SELF, switch_cargo_surf, TRIGGER_VEHICLE_NEW_LOAD) {
    /* randomize number of boards on new load */
    // independent: switch_color_surf; // decision independent from color switch
    2: switch_surf_02;          
    3: switch_surf_01;        
    1: spriteset_x_null;
 }

//Pick up Truck

//pickup graphics

//graphics definition

switch(FEAT_ROADVEHS, SELF, switch_pickup_truck_1, [
    STORE_TEMP( CB_FLAG_MORE_SPRITES | PALETTE_CC_WHITE, 0x100),
    ]) {
    default:  spriteset_pickup;
    }

switch(FEAT_ROADVEHS, SELF, switch_pickup_truck_2, [
    STORE_TEMP( CB_FLAG_MORE_SPRITES | PALETTE_CC_GREY, 0x100),
    ]) {
    default:  spriteset_pickup;
    }

switch(FEAT_ROADVEHS, SELF, switch_pickup_truck_3, [
    STORE_TEMP( CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),
    ]) {
    default:  spriteset_pickup;
    }

switch(FEAT_ROADVEHS, SELF, switch_pickup_truck_4, [
    STORE_TEMP( CB_FLAG_MORE_SPRITES | PALETTE_CC_RED, 0x100),
    ]) {
    default:  spriteset_pickup;
    }

switch(FEAT_ROADVEHS, SELF, switch_pickup_truck_5, [
    STORE_TEMP( CB_FLAG_MORE_SPRITES | PALETTE_CC_BLUE, 0x100),
    ]) {
    default:  spriteset_pickup;
    }

switch (FEAT_ROADVEHS, SELF, switch_pickup_truck, random_bits ) {
    0..63:          switch_pickup_truck_1;
    64..127:        switch_pickup_truck_2;
    128..191:       switch_pickup_truck_3;
    192..223:       switch_pickup_truck_4;
    223..255:       switch_pickup_truck_5;
    default:        switch_pickup_truck_3;
    }

switch(FEAT_ROADVEHS, SELF, switch_pickup_box_3, [
    STORE_TEMP(PALETTE_CC_RED, 0x100),
    ]) {
    default:  spritegroup_pickup_box;
    }
switch(FEAT_ROADVEHS, SELF, switch_pickup_box_2, [
    STORE_TEMP(PALETTE_CC_ORANGE, 0x100),
    ]) {
    default:  spritegroup_pickup_box;
    } 
switch(FEAT_ROADVEHS, SELF, switch_pickup_box_1, [
    STORE_TEMP(PALETTE_CC_GREEN, 0x100),
    ]) {
    default:  spritegroup_pickup_box;
    }        

switch (FEAT_ROADVEHS, SELF, switch_pickup_box, var[0xBF,0,0xFF]) {
    0..4:               switch_pickup_box_1;
    5..9:               switch_pickup_box_2;
    default:            switch_pickup_box_3;
    }

switch (FEAT_ROADVEHS, SELF, switch_pickup_cargo, grf_current_status("DE\80\00", "11\11\00") ) { // test for hnl bust stops
    0:          switch_pickup_box;  //box sprite
    1:          switch_cargo_surf; //surfboard racks in Honolulu
    default:    switch_pickup_box;  //box sprite
}

switch(FEAT_ROADVEHS, SELF, switch_pickup, [
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:      switch_pickup_truck;
    1:      switch_pickup_cargo;
    }  
switch(FEAT_ROADVEHS, SELF, switch_purchase_pickup, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_pickup_truck;
    1:  switch_fuel_icon;

}

//pickup properties

if (param_ltrv ==1){
item(FEAT_ROADVEHS, item_pickup) {
property {

    name:                           string(STR_PICKUP_1);
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    loading_speed:                  8;
    cost_factor:                    70;     
    running_cost_factor:            70;      
    speed:                          120 km/h; 
    power:                          180 hp;  
    cargo_capacity:                 4;
    introduction_date:              date(1950,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   20; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DISABLE;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         4 ton;
    length:                         3;
    }
graphics {
    purchase:                       switch_purchase_pickup;
    default:                        switch_pickup;
    
    }
}
}

//WRX

//WRX graphics

//graphics definition

spriteset(spriteset_impreza, "gfx/B/wrx_05.png") {
    tmpl_3()
}

spriteset(spriteset_wrx, "gfx/B/wrx_01.png") {
    tmpl_3()
}

switch (FEAT_ROADVEHS, SELF, switch_impreza_car, random_bits ) {
        30..255: spriteset_impreza;
        default: spriteset_wrx;       
}

switch (FEAT_ROADVEHS, SELF, switch_impreza_cargo, grf_current_status("DE\80\00", "11\10\00") ) { // test for hnl bust stops
    0:          spriteset_x_null;  //no sprite
    1:          switch_cargo_surf; //surfboard racks in Honolulu
    default:    spriteset_x_null;  //no sprite
}

switch(FEAT_ROADVEHS, SELF, switch_impreza, [  //stack roof rack cargo
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:      switch_impreza_car;
    1:      switch_impreza_cargo;
    }  




spriteset(spriteset_sti, "gfx/B/wrx_03.png") {
    tmpl_3()
}

spriteset(spriteset_555, "gfx/B/wrx_02.png") {
    tmpl_3()
}


switch(FEAT_ROADVEHS, SELF, wrx_555, [
    STORE_TEMP(PALETTE_CC_DARK_BLUE, 0x100),
    ]) {
    default:  spriteset_555;
    }    
switch(FEAT_ROADVEHS, SELF, wrx_STI, [
    STORE_TEMP(PALETTE_CC_DARK_BLUE, 0x100),
    ]) {
    default:  spriteset_sti;
    } 
switch(FEAT_ROADVEHS, SELF, wrx_blue, [
    STORE_TEMP(PALETTE_CC_DARK_BLUE, 0x100),
    ]) {
    default:  spriteset_wrx;
    } 
switch(FEAT_ROADVEHS, SELF, wrx_white, [
    STORE_TEMP(PALETTE_CC_WHITE, 0x100),
    ]) {
    default:  spriteset_wrx;
    }
switch(FEAT_ROADVEHS, SELF, wrx_grey, [
    STORE_TEMP(PALETTE_CC_GREY, 0x100),
    ]) {
    default:  spriteset_wrx;
    }
switch(FEAT_ROADVEHS, SELF, wrx_yellow, [
    STORE_TEMP(PALETTE_CC_YELLOW, 0x100),
    ]) {
    default:  spriteset_wrx;
    }
switch (FEAT_ROADVEHS, SELF, switch_wrx, random_bits ) {
        252..255: wrx_555;
        210..251: wrx_STI;
        180..209: wrx_blue;
        160..179: wrx_white;
        140..159: wrx_grey;
        130..139: wrx_yellow;
        default: switch_impreza;       
}

switch (FEAT_ROADVEHS, SELF, switch_wrx_555, random_bits ) {
        252..255: wrx_555;
        210..251: wrx_STI;
        130..209: switch_wrx;
        default: switch_impreza;       
}



switch(FEAT_ROADVEHS, SELF, switch_purchase_wrx, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_impreza;
    1:  switch_fuel_icon;

}


//wrx properties

switch (FEAT_ROADVEHS, SELF, switch_speed_wrx, random_bits ) {
        252..255:       110;
        210..251:       100;
        150..209:       90;
        default:        80;      
}
switch (FEAT_ROADVEHS, SELF, switch_runcost_wrx, random_bits ) {
        252..255:       100;
        200..251:       90;
        150..209:       80;
        default:        75;      
}
switch (FEAT_ROADVEHS, SELF, switch_power_wrx, random_bits ) {
        252..255:       30;
        200..251:       28;
        150..209:       23; 
        default:        15;      
}
switch (FEAT_ROADVEHS, SELF, switch_capacity_wrx, random_bits ) {
        252..255:       1;
        200..251:       3; 
        default:        4;      
}
/* switch (FEAT_ROADVEHS, SELF, switch_weight_wrx, random_bits ) {
        252..255:       (11/10);
        200..251:       (14/10); 
        default:        (3/2);      
}
*/



if (param_ltrv ==1){
item(FEAT_ROADVEHS, item_wrx) {
property {

    name:                           string(STR_WRX_1);
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  8;
    cost_factor:                    80;     
    running_cost_factor:            80;      
    speed:                          160 km/h; 
    power:                          155 hp;  
    cargo_capacity:                 4;
    introduction_date:              date(1992,01,01); 
    model_life:                     VEHICLE_NEVER_EXPIRES; 
    vehicle_life:                   20; 
    reliability_decay:              13; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DISABLE;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         1.5 ton;
    length:                         3;
    }
graphics {
    speed:                      switch_speed_wrx;
    running_cost_factor:        switch_runcost_wrx;
    power:                      switch_power_wrx;
    cargo_capacity:             switch_capacity_wrx;
//  weight:                     switch_weight_wrx; 
    purchase:                   switch_purchase_wrx;
    default:                    switch_wrx_555; 
    }
}
}


/*========================================*/
//car carriers

//templates

/* Sprite template for a 9/8 vehicle - normal */
template tmpl_9() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 0,      0,        8,    29,      -3,       -14]
    [ 16,     0,       24,    22,     -15,       -12]
    [ 48,     0,       36,    16,     -18,       -10]
    [ 96,     0,       24,    22,      -10,       -13]
    [ 128,    0,        8,    29,      -3,       -11]
    [ 144,    0,       24,    22,     -15,       -12]
    [ 176,    0,       36,    16,     -18,       -10]
    [ 224,    0,       24,    22,      -6,       -11]
}

/* Sprite template for a 9/8 vehicle - left turn 1 */
template tmpl_9l1() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 224,    0,       24,    22,      -6,       -11]
    [ 0,      0,        8,    29,      -3,       -14]
    [ 16,     0,       24,    22,     -15,       -12]
    [ 48,     0,       36,    16,     -18,       -10]
    [ 96,     0,       24,    22,      -6,       -11]
    [ 128,    0,        8,    29,      -3,       -11]
    [ 144,    0,       24,    22,     -15,       -12]
    [ 176,    0,       36,    16,     -18,       -10]

    
}

/* Sprite template for a 9/8 vehicle - left turn 2 */
template tmpl_9l2() {
    //left_x, upper_y, width, height, offset_x, offset_y
    [ 176,    0,       36,    16,     -18,       -10]
    [ 224,    0,       24,    22,      -6,       -11]
    [ 0,      0,        8,    29,      -3,       -14]
    [ 16,     0,       24,    22,     -15,       -12]
    [ 48,     0,       36,    16,     -18,       -10]
    [ 96,     0,       24,    22,      -6,       -11]
    [ 128,    0,        8,    29,      -3,       -11]
    [ 144,    0,       24,    22,     -15,       -12]
    
    
}

/* Sprite template for a 9/8 vehicle - right turn 1 */
template tmpl_9r1() {
    //left_x, upper_y, width, height, offset_x, offset_y
    
    [ 16,     0,       24,    22,     -15,       -12]
    [ 48,     0,       36,    16,     -18,       -10]
    [ 96,     0,       24,    22,      -6,       -11]
    [ 128,    0,        8,    29,      -3,       -11]
    [ 144,    0,       24,    22,     -15,       -12]
    [ 176,    0,       36,    16,     -18,       -10]
    [ 224,    0,       24,    22,      -6,       -11]
    [ 0,      0,        8,    29,      -3,       -14]
}

/* Sprite template for a 9/8 vehicle - right turn 2 */
template tmpl_9r2() {
    //left_x, upper_y, width, height, offset_x, offset_y
    
    [ 48,     0,       36,    16,     -18,       -10]
    [ 96,     0,       24,    22,      -6,       -11]
    [ 128,    0,        8,    29,      -3,       -11]
    [ 144,    0,       24,    22,     -15,       -12]
    [ 176,    0,       36,    16,     -18,       -10]
    [ 224,    0,       24,    22,      -6,       -11]
    [ 0,      0,        8,    29,      -3,       -14]
    [ 16,     0,       24,    22,     -15,       -12]
}

/*
// trailer and car sprites

// trailer lower deck
spriteset(spriteset_carrier_low_front, "gfx/L/t_l_f_car_02.png") { // low front straight
    tmpl_9()
}
spriteset(spriteset_carrier_low_mid_0, "gfx/L/t_l_f_car_03.png") { // low mid straight
    tmpl_9()
}
spriteset(spriteset_carrier_low_end_0, "gfx/L/t_l_f_car_04.png") { // low end straight
    tmpl_9()
}
spriteset(spriteset_carrier_low_mid_l1, "gfx/L/t_l_f_car_03.png") { // low mid l1
    tmpl_9l1()
}
spriteset(spriteset_carrier_low_end_l1, "gfx/L/t_l_f_car_04.png") { // low end l1
    tmpl_9l1()
}
spriteset(spriteset_carrier_low_end_l2, "gfx/L/t_l_f_car_04.png") { // low end l2
    tmpl_9l2()
}
spriteset(spriteset_carrier_low_mid_r1, "gfx/L/t_l_f_car_03.png") { // low mid r1
    tmpl_9r1()
}
spriteset(spriteset_carrier_low_end_r1, "gfx/L/t_l_f_car_04.png") { // low end r1
    tmpl_9r1()
}
spriteset(spriteset_carrier_low_end_r2, "gfx/L/t_l_f_car_04.png") { // low end r2
    tmpl_9r2()
}

// trailer top deck
spriteset(spriteset_carrier_top_front, "gfx/L/t_l_t_car_flat_02.png") { // top front straight
    tmpl_9()
}
spriteset(spriteset_carrier_top_mid_flat_0, "gfx/L/t_l_t_car_flat_03.png") { // top mid straight flat
    tmpl_9()
}
spriteset(spriteset_carrier_top_end_flat_0, "gfx/L/t_l_t_car_flat_04.png") { // top end straight flat
    tmpl_9()
}
spriteset(spriteset_carrier_top_mid_flat_l1, "gfx/L/t_l_t_car_flat_03.png") { // top mid l1 flat
    tmpl_9l1()
}
spriteset(spriteset_carrier_top_end_flat_l1, "gfx/L/t_l_t_car_flat_04.png") { // top end l1 flat
    tmpl_9l1()
}
spriteset(spriteset_carrier_top_end_flat_l2, "gfx/L/t_l_t_car_flat_04.png") { // top end l2 flat
    tmpl_9l2()
}
spriteset(spriteset_carrier_top_mid_flat_r1, "gfx/L/t_l_t_car_flat_03.png") { // top mid r1 flat
    tmpl_9r1()
}
spriteset(spriteset_carrier_top_end_flat_r1, "gfx/L/t_l_t_car_flat_04.png") { // top end r1 flat
    tmpl_9r1()
}
spriteset(spriteset_carrier_top_end_flat_r2, "gfx/L/t_l_t_car_flat_04.png") { // top end r2 flat
    tmpl_9r2()
}
spriteset(spriteset_carrier_top_mid_load_0, "gfx/L/t_l_t_car_load_03.png") { // top mid straight load
    tmpl_9()
}
spriteset(spriteset_carrier_top_end_load_0, "gfx/L/t_l_t_car_load_04.png") { // top end straight load
    tmpl_9()
}
spriteset(spriteset_carrier_top_mid_load_l1, "gfx/L/t_l_t_car_load_03.png") { // top mid l1 load
    tmpl_9l1()
}
spriteset(spriteset_carrier_top_end_load_l1, "gfx/L/t_l_t_car_load_04.png") { // top end l1 load
    tmpl_9l1()
}
spriteset(spriteset_carrier_top_end_load_l2, "gfx/L/t_l_t_car_load_04.png") { // top end l2 load
    tmpl_9l2()
}
spriteset(spriteset_carrier_top_mid_load_r1, "gfx/L/t_l_t_car_load_03.png") { // top mid r1 load
    tmpl_9r1()
}
spriteset(spriteset_carrier_top_end_load_r1, "gfx/L/t_l_t_car_load_04.png") { // top end r1 load
    tmpl_9r1()
}
spriteset(spriteset_carrier_top_end_load_r2, "gfx/L/t_l_t_car_load_04.png") { // top end r2 load
    tmpl_9r2()
}

// cars
spriteset(spriteset_sedan_top_a_0, "gfx/L/t_l_c_car_a_01.png") { // top sedan A straight
    tmpl_9()
}
spriteset(spriteset_sedan_low_a_0, "gfx/L/t_l_c_car_a_02.png") { // low sedan A straight
    tmpl_9()
}
spriteset(spriteset_truck_top_a_0, "gfx/L/t_l_c_car_a_03.png") { // top pickup A straight
    tmpl_9()
}
spriteset(spriteset_truck_low_a_0, "gfx/L/t_l_c_car_a_04.png") { // low pickup A straight
    tmpl_9()
}
spriteset(spriteset_sedan_top_a_l1, "gfx/L/t_l_c_car_a_01.png") { // top sedan A l1
    tmpl_9l1()
}
spriteset(spriteset_sedan_low_a_l1, "gfx/L/t_l_c_car_a_02.png") { // low sedan A l1
    tmpl_9l1()
}
spriteset(spriteset_truck_top_a_l1, "gfx/L/t_l_c_car_a_03.png") { // top pickup A l1
    tmpl_9l1()
}
spriteset(spriteset_truck_low_a_l1, "gfx/L/t_l_c_car_a_04.png") { // low pickup A l1
    tmpl_9l1()
}
spriteset(spriteset_sedan_top_a_l2, "gfx/L/t_l_c_car_a_01.png") { // top sedan A l2
    tmpl_9l2()
}
spriteset(spriteset_sedan_low_a_l2, "gfx/L/t_l_c_car_a_02.png") { // low sedan A l2
    tmpl_9l2()
}
spriteset(spriteset_truck_top_a_l2, "gfx/L/t_l_c_car_a_03.png") { // top pickup A l2
    tmpl_9l2()
}
spriteset(spriteset_truck_low_a_l2, "gfx/L/t_l_c_car_a_04.png") { // low pickup A l2
    tmpl_9l2()
}
spriteset(spriteset_sedan_top_a_r1, "gfx/L/t_l_c_car_a_01.png") { // top sedan A r1
    tmpl_9r1()
}
spriteset(spriteset_sedan_low_a_r1, "gfx/L/t_l_c_car_a_02.png") { // low sedan A r1
    tmpl_9r1()
}
spriteset(spriteset_truck_top_a_r1, "gfx/L/t_l_c_car_a_03.png") { // top pickup A r1
    tmpl_9r1()
}
spriteset(spriteset_truck_low_a_r1, "gfx/L/t_l_c_car_a_04.png") { // low pickup A r1
    tmpl_9r1()
}
spriteset(spriteset_sedan_top_a_r2, "gfx/L/t_l_c_car_a_01.png") { // top sedan A r2
    tmpl_9r2()
}
spriteset(spriteset_sedan_low_a_r2, "gfx/L/t_l_c_car_a_02.png") { // low sedan A r2
    tmpl_9r2()
}
spriteset(spriteset_truck_top_a_r2, "gfx/L/t_l_c_car_a_03.png") { // top pickup A r2
    tmpl_9r2()
}
spriteset(spriteset_truck_low_a_r2, "gfx/L/t_l_c_car_a_04.png") { // low pickup A r2
    tmpl_9r2()
}

switch (FEAT_ROADVEHS, SELF, sedan_low_0, current_year ){
    default:    spriteset_sedan_low_a_0;
}
switch (FEAT_ROADVEHS, SELF, sedan_low_l1, current_year ){
    default:    spriteset_sedan_low_a_l1;
}
switch (FEAT_ROADVEHS, SELF, sedan_low_l2, current_year ){
    default:    spriteset_sedan_low_a_l2;
}
switch (FEAT_ROADVEHS, SELF, sedan_low_r1, current_year ){
    default:    spriteset_sedan_low_a_r1;
}
switch (FEAT_ROADVEHS, SELF, sedan_low_r2, current_year ){
    default:    spriteset_sedan_low_a_r2;
}
switch (FEAT_ROADVEHS, SELF, sedan_top_0, current_year ){
    default:    spriteset_sedan_top_a_0;
}
switch (FEAT_ROADVEHS, SELF, sedan_top_l1, current_year ){
    default:    spriteset_sedan_top_a_l1;
}
switch (FEAT_ROADVEHS, SELF, sedan_top_l2, current_year ){
    default:    spriteset_sedan_top_a_l2;
}
switch (FEAT_ROADVEHS, SELF, sedan_top_r1, current_year ){
    default:    spriteset_sedan_top_a_r1;
}
switch (FEAT_ROADVEHS, SELF, sedan_top_r2, current_year ){
    default:    spriteset_sedan_top_a_r2;
}
switch (FEAT_ROADVEHS, SELF, truck_low_0, current_year ){
    default:    spriteset_truck_low_a_0;
}
switch (FEAT_ROADVEHS, SELF, truck_low_l1, current_year ){
    default:    spriteset_truck_low_a_l1;
}
switch (FEAT_ROADVEHS, SELF, truck_low_l2, current_year ){
    default:    spriteset_truck_low_a_l2;
}
switch (FEAT_ROADVEHS, SELF, truck_low_r1, current_year ){
    default:    spriteset_truck_low_a_r1;
}
switch (FEAT_ROADVEHS, SELF, truck_low_r2, current_year ){
    default:    spriteset_truck_low_a_r2;
}
switch (FEAT_ROADVEHS, SELF, truck_top_0, current_year ){
    default:    spriteset_truck_top_a_0;
}
switch (FEAT_ROADVEHS, SELF, truck_top_l1, current_year ){
    default:    spriteset_truck_top_a_l1;
}
switch (FEAT_ROADVEHS, SELF, truck_top_l2, current_year ){
    default:    spriteset_truck_top_a_l2;
}
switch (FEAT_ROADVEHS, SELF, truck_top_r1, current_year ){
    default:    spriteset_truck_top_a_r1;
}
switch (FEAT_ROADVEHS, SELF, truck_top_r2, current_year ){
    default:    spriteset_truck_top_a_r2;
}

//Trailer switches
switch (FEAT_ROADVEHS, SELF, carrier_low_end, other_veh_curv_info(-2) ){
    -2:         spriteset_carrier_low_end_l2;
    -1:         spriteset_carrier_low_end_l1;
    0:          spriteset_carrier_low_end_0;
    1:          spriteset_carrier_low_end_r1;
    2:          spriteset_carrier_low_end_r2;
    default:    spriteset_carrier_low_end_0;
}
switch (FEAT_ROADVEHS, SELF, carrier_low_mid, other_veh_curv_info(-1) ){
    -1:         spriteset_carrier_low_mid_l1;
    0:          spriteset_carrier_low_mid_0;
    1:          spriteset_carrier_low_mid_r1;
    default:    spriteset_carrier_low_mid_0;
}
switch (FEAT_ROADVEHS, SELF, carrier_top_end_flat, other_veh_curv_info(-2)){
    -2:         spriteset_carrier_top_end_flat_l2;
    -1:         spriteset_carrier_top_end_flat_l1;
    0:          spriteset_carrier_top_end_flat_0;
    1:          spriteset_carrier_top_end_flat_r1;
    2:          spriteset_carrier_top_end_flat_r2;
    default:    spriteset_carrier_top_end_flat_0;
}
switch (FEAT_ROADVEHS, SELF, carrier_top_mid_flat, other_veh_curv_info(-1)){
    -1:         spriteset_carrier_top_mid_flat_l1;
    0:          spriteset_carrier_top_mid_flat_0;
    1:          spriteset_carrier_top_mid_flat_r1;
    default:    spriteset_carrier_top_mid_flat_0;
}
switch (FEAT_ROADVEHS, SELF, carrier_top_end_load, other_veh_curv_info(-2)){
    -2:         spriteset_carrier_top_end_load_l2;
    -1:         spriteset_carrier_top_end_load_l1;
    0:          spriteset_carrier_top_end_load_0;
    1:          spriteset_carrier_top_end_load_r1;
    2:          spriteset_carrier_top_end_load_r2;
    default:    spriteset_carrier_top_end_load_0;
}
switch (FEAT_ROADVEHS, SELF, carrier_top_mid_load, other_veh_curv_info(-1)){
    -1:         spriteset_carrier_top_mid_load_l1;
    0:          spriteset_carrier_top_mid_load_0;
    1:          spriteset_carrier_top_mid_load_r1;
    default:    spriteset_carrier_top_mid_load_0;
}
switch (FEAT_ROADVEHS, PARENT, carrier_top_mid, (((cargo_count)/(cargo_capacity))*100) ){
    0..60:      carrier_top_mid_load;
    default:    carrier_top_mid_flat;
}
switch (FEAT_ROADVEHS, PARENT, carrier_top_end, (((cargo_count)/(cargo_capacity))*100) ){
    0..60:      carrier_top_end_load;
    default:    carrier_top_end_flat;
}
switch (FEAT_ROADVEHS, SELF, switch_carrier_low, position_in_consist_from_end ){
    0:          carrier_low_end;
    1:          carrier_low_mid;
    default:    spriteset_carrier_low_front;
}
switch (FEAT_ROADVEHS, SELF, switch_carrier_top, position_in_consist_from_end ){
    0:          carrier_top_end;
    1:          carrier_top_mid;
    default:    spriteset_carrier_top_front;
}

switch(FEAT_ROADVEHS, SELF, carrier_low, [
    STORE_TEMP( CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),
    ]) {
    default:  switch_carrier_low;
    }

switch(FEAT_ROADVEHS, SELF, carrier_top, [
    STORE_TEMP( CB_FLAG_MORE_SPRITES | PALETTE_USE_DEFAULT, 0x100),
    ]) {
    default:  switch_carrier_top;
    }    
switch (FEAT_ROADVEHS, SELF, sedan_low_end, var[0x62,0,0x0000000F, -2] ){
    -2:         sedan_low_l2;
    -1:         sedan_low_l1;
    0:          sedan_low_0;
    1:          sedan_low_r1;
    2:          sedan_low_r2;
    default:    sedan_low_0;
}
switch (FEAT_ROADVEHS, SELF, sedan_low_mid, var[0x62,0,0x0000000F, -1] ){
    -1:         sedan_low_l1;
    0:          sedan_low_0;
    1:          sedan_low_r1;
    default:    sedan_low_0;
}
switch (FEAT_ROADVEHS, SELF, sedan_top_end, var[0x62,0,0x0000000F, -2] ){
    -2:         sedan_top_l2;
    -1:         sedan_top_l1;
    0:          sedan_top_0;
    1:          sedan_top_r1;
    2:          sedan_top_r2;
    default:    sedan_top_0;
}
switch (FEAT_ROADVEHS, SELF, sedan_top_mid, var[0x62,0,0x0000000F, -1] ){
    -1:         sedan_top_l1;
    0:          sedan_top_0;
    1:          sedan_top_r1;
    default:    sedan_top_0;
}
switch (FEAT_ROADVEHS, SELF, sedan_low, position_in_consist_from_end ){
    0:          sedan_low_end;
    1:          sedan_low_mid;
    default:    sedan_low_0;
}
switch (FEAT_ROADVEHS, SELF, sedan_top, position_in_consist_from_end ){
    0:          sedan_top_end;
    1:          sedan_top_mid;
    default:    sedan_top_0;
}
switch (FEAT_ROADVEHS, SELF, truck_low_end, var[0x62,0,0x0000000F, -2] ){
    -2:         truck_low_l2;
    -1:         truck_low_l1;
    0:          truck_low_0;
    1:          truck_low_r1;
    2:          truck_low_r2;
    default:    truck_low_0;
}
switch (FEAT_ROADVEHS, SELF, truck_low_mid, var[0x62,0,0x0000000F, -1] ){
    -1:         truck_low_l1;
    0:          truck_low_0;
    1:          truck_low_r1;
    default:    truck_low_0;
}
switch (FEAT_ROADVEHS, SELF, truck_top_end, var[0x62,0,0x0000000F, -2] ){
    -2:         truck_top_l2;
    -1:         truck_top_l1;
    0:          truck_top_0;
    1:          truck_top_r1;
    2:          truck_top_r2;
    default:    truck_top_0;
}
switch (FEAT_ROADVEHS, SELF, truck_top_mid, var[0x62,0,0x0000000F, -1] ){
    -1:         truck_top_l1;
    0:          truck_top_0;
    1:          truck_top_r1;
    default:    truck_top_0;
}
switch (FEAT_ROADVEHS, SELF, truck_low, position_in_consist_from_end ){
    0:          truck_low_end;
    1:          truck_low_mid;
    default:    truck_low_0;
}
switch (FEAT_ROADVEHS, SELF, truck_top, position_in_consist_from_end ){
    0:          truck_top_end;
    1:          truck_top_mid;
    default:    truck_top_0;
}
random_switch (FEAT_ROADVEHS, SELF, car_top_load, bitmask(TRIGGER_VEHICLE_NEW_LOAD)){  //randomize car or truck sprite on new load
    3:  sedan_top;
    1:  truck_top;
}
random_switch (FEAT_ROADVEHS, SELF, car_low_load, bitmask(TRIGGER_VEHICLE_NEW_LOAD)){  //randomize car or truck sprite on new load
    independent: car_top_load;
    3:  sedan_low;
    1:  truck_low;
}
switch (FEAT_ROADVEHS, PARENT, car_top_front, (((cargo_count)/(cargo_capacity))*100) ){
    0..20:      spriteset_x_null;
    default:    car_top_load;
}
switch (FEAT_ROADVEHS, PARENT, car_top_mid, (((cargo_count)/(cargo_capacity))*100) ){
    0..40:      spriteset_x_null;
    default:    car_top_load;
}
switch (FEAT_ROADVEHS, PARENT, car_top_end, (((cargo_count)/(cargo_capacity))*100) ){
    0..60:      spriteset_x_null;
    default:    car_top_load;
}
switch (FEAT_ROADVEHS, PARENT, car_low_front, (((cargo_count)/(cargo_capacity))*100) ){
    0:          spriteset_x_null;
    default:    car_low_load;
}
switch (FEAT_ROADVEHS, PARENT, car_low_mid, (((cargo_count)/(cargo_capacity))*100) ){
    0..80:      spriteset_x_null;
    default:    car_low_load;
}
switch (FEAT_ROADVEHS, PARENT, car_low_end, (((cargo_count)/(cargo_capacity))*100) ){
    100:        car_low_load;
    default:    spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, car_top, position_in_consist_from_end ){
    0:          car_top_end;
    1:          car_top_mid;
    default:    car_top_front;
}
switch (FEAT_ROADVEHS, SELF, car_low, position_in_consist_from_end ){
    0:          car_low_end;
    1:          car_low_mid;
    default:    car_low_front;
}
switch(FEAT_ROADVEHS, SELF, car_top_dark_blue, [
    STORE_TEMP(PALETTE_CC_DARK_BLUE, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_pale_green, [
    STORE_TEMP(PALETTE_CC_PALE_GREEN, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_red, [
    STORE_TEMP(PALETTE_CC_RED, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_light_blue, [
    STORE_TEMP(PALETTE_CC_LIGHT_BLUE, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_green, [
    STORE_TEMP(PALETTE_CC_GREEN, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_dark_green, [
    STORE_TEMP(PALETTE_CC_DARK_GREEN, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_blue, [
    STORE_TEMP(PALETTE_CC_BLUE, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_purple, [
    STORE_TEMP(PALETTE_CC_PURPLE, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_orange, [
    STORE_TEMP(PALETTE_CC_ORANGE, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_brown, [
    STORE_TEMP(PALETTE_CC_BROWN, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_grey, [
    STORE_TEMP(PALETTE_CC_GREY, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_top_white, [
    STORE_TEMP(PALETTE_CC_WHITE, 0x100),
    ]) {
    default:   car_top;
    }
switch(FEAT_ROADVEHS, SELF, car_low_dark_blue, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_DARK_BLUE, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_pale_green, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_PALE_GREEN, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_red, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_RED, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_light_blue, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_LIGHT_BLUE, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_green, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_GREEN, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_dark_green, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_DARK_GREEN, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_blue, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_BLUE, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_purple, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_PURPLE, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_orange, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_ORANGE, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_brown, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_BROWN, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_grey, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_GREY, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, car_low_white, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_WHITE, 0x100),
    ]) {
    default:   car_low;
    }
switch(FEAT_ROADVEHS, SELF, truck_top_white, [
    STORE_TEMP(PALETTE_CC_WHITE, 0x100),
    ]) {
    default:  truck_top;
    }
switch(FEAT_ROADVEHS, SELF, truck_low_white, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_WHITE, 0x100),
    ]) {
    default:  truck_low;
    }
switch(FEAT_ROADVEHS, SELF, wrx_top_555, [
    STORE_TEMP(PALETTE_CC_DARK_BLUE, 0x100),
    ]) {
    default:  sedan_top;
    }
switch(FEAT_ROADVEHS, SELF, wrx_low_555, [
    STORE_TEMP(CB_FLAG_MORE_SPRITES | PALETTE_CC_DARK_BLUE, 0x100),
    ]) {
    default:  sedan_low;
    }

random_switch (FEAT_ROADVEHS, SELF, switch_car_top, bitmask(TRIGGER_VEHICLE_NEW_LOAD)){  //randomize car sprite on new load
    7:  car_top_dark_blue;
    4:  car_top_pale_green;
    5:  car_top_red;
    5:  car_top_light_blue;
    2:  car_top_green;
    5:  car_top_dark_green;
    4:  car_top_blue;
    1:  car_top_purple;
    3:  car_top_orange;
    4:  car_top_brown;
    12: car_top_grey;
    7:  car_top_white;
}
random_switch (FEAT_ROADVEHS, SELF, switch_car_low, bitmask(TRIGGER_VEHICLE_NEW_LOAD)){  //randomize car sprite on new load
 
    7:  car_low_dark_blue;
    4:  car_low_pale_green;
    5:  car_low_red;
    5:  car_low_light_blue;
    2:  car_low_green;
    5:  car_low_dark_green;
    4:  car_low_blue;
    1:  car_low_purple;
    3:  car_low_orange;
    4:  car_low_brown;
    12: car_low_grey;
    7:  car_low_white;
}

switch(FEAT_ROADVEHS, SELF, trail_car_truck, [
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:      carrier_low;
    1:      switch_car_low;
    2:      carrier_top;
    3:      switch_car_top;
    } 

switch(FEAT_ROADVEHS, SELF, trail_wrx, [
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:      carrier_low;
    1:      wrx_low_555;
    2:      carrier_top;
    3:      wrx_top_555;
    } 

switch(FEAT_ROADVEHS, SELF, trail_truck_truck, [
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:      carrier_low;
    1:      truck_low;
    2:      carrier_top;
    3:      truck_top;
    } 

random_switch (FEAT_ROADVEHS, SELF, trail_car, bitmask(TRIGGER_VEHICLE_NEW_LOAD)){  //randomize car sprite mix on new load
    7:  trail_car_truck;
    1:  trail_truck_truck;
}

switch (FEAT_ROADVEHS, PARENT, switch_trail_carrier, current_day_of_year) { // draw SWRT WRXs on some days
    296..299:       trail_wrx;
                    trail_car;
}

switch (FEAT_ROADVEHS, PARENT, switch_capacity_c3_carrier, position_in_consist) { // capacity in lead unit
    0:              ((param_capacity*32)/2);
                    return 0;
}

purchase_capacity_c3_carrier = ((param_capacity*32)/8);

//lf3 carrier graphics

//graphics definition

switch (FEAT_ROADVEHS, SELF, switch_spriteset_lf3_carrier, position_in_consist ) {
    0:  switch_cf_03;
        switch_trail_carrier; //default
}

*/

//lf3 carrier properties

/*
//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_lf3_carrier, extra_callback_info1) {
    1..3:   return item_lf3_carrier; 
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}


if (param_ffrv ==1){
item(FEAT_ROADVEHS, item_lf3_carrier) {
property {

    name:                           string(STR_PICKUP_1);
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    cargo_allow_refit:              [VEHI, ENSP];
    default_cargo_type:             VEHI; 
    loading_speed:                  12;
    cost_factor:                    70;     
    running_cost_factor:            70;      
    speed:                          100 km/h; 
    power:                          560 hp;  
    cargo_capacity:                 4;
    introduction_date:              date(1985,01,01); 
    model_life:                     40; 
    vehicle_life:                   40; 
    reliability_decay:              14; 
    road_type:                      ROAD; 
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         19 ton;
    }
graphics {
    
    running_cost_factor:        switch_runcost_cf3_truck;
    cost_factor:                buycost_cf3_truck;
    articulated_part:           switch_lf3_carrier;
    length:                     switch_length_l_trailer;
    cargo_capacity:             switch_capacity_c3_carrier;
    purchase_cargo_capacity:    purchase_capacity_c3_carrier;
    visual_effect:              switch_truck_exhaust;
    power:                      switch_power_cf3;
    default:                    switch_spriteset_lf3_carrier; 
    purchase:                   spriteset_mf3_flat;
    }
}
}
*/

/* ============================================================================ */
/* ============================================================================ */
/* ============================================================================ */

/* ====== TRAMS ====== */

/* === Tram Switches === */

// Tram running Cost

// Electric Tram running Cost

switch (FEAT_ROADVEHS, SELF, switch_e0_depotcost, current_year ) {
        0..1900:    20+((param_runcost*20)/2);
        1901..1940: 20+((param_runcost*24)/2);
        1941..1980: 20+((param_runcost*22)/2);
        1981..2020: 20+((param_runcost*20)/2);
        default:    20+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_e0_staffedcost, current_year ) {
        0..1900:    20+((param_runcost*30)/2);
        1901..1940: 20+((param_runcost*34)/2);
        1941..1980: 20+((param_runcost*32)/2);
        1981..2020: 20+((param_runcost*35)/2);
        default:    20+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_e0_powercost, current_year ) {
        0..1900:    30+((param_runcost*30)/2);
        1901..1940: 30+((param_runcost*34)/2);
        1941..1980: 30+((param_runcost*32)/2);
        1981..2020: 30+((param_runcost*35)/2);
        default:    30+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_e0_stopcost, vehicle_is_stopped  ) {
        0: switch_e0_powercost;
        1: switch_e0_staffedcost;
        default: switch_e0_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e0_runcost, vehicle_is_in_depot  ) {
        0: switch_e0_stopcost;
        1: switch_e0_depotcost;
        default: switch_e0_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e1_depotcost, current_year ) {
        0..1900:    23+((param_runcost*20)/2);
        1901..1940: 23+((param_runcost*24)/2);
        1941..1980: 23+((param_runcost*22)/2);
        1981..2020: 23+((param_runcost*20)/2);
        default:    23+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_e1_staffedcost, current_year ) {
        0..1900:    23+((param_runcost*30)/2);
        1901..1940: 23+((param_runcost*34)/2);
        1941..1980: 23+((param_runcost*32)/2);
        1981..2020: 23+((param_runcost*35)/2);
        default:    23+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_e1_powercost, current_year ) {
        0..1900:    38+((param_runcost*30)/2);
        1901..1940: 38+((param_runcost*34)/2);
        1941..1980: 38+((param_runcost*32)/2);
        1981..2020: 38+((param_runcost*35)/2);
        default:    38+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_e1_stopcost, vehicle_is_stopped  ) {
        0: switch_e1_powercost;
        1: switch_e1_staffedcost;
        default: switch_e1_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e1_runcost, vehicle_is_in_depot  ) {
        0: switch_e1_stopcost;
        1: switch_e1_depotcost;
        default: switch_e1_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e2_depotcost, current_year ) {
        0..1900:    28+((param_runcost*20)/2);
        1901..1940: 28+((param_runcost*24)/2);
        1941..1980: 28+((param_runcost*22)/2);
        1981..2020: 28+((param_runcost*20)/2);
        default:    28+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_e2_staffedcost, current_year ) {
        0..1900:    28+((param_runcost*30)/2);
        1901..1940: 28+((param_runcost*34)/2);
        1941..1980: 28+((param_runcost*32)/2);
        1981..2020: 28+((param_runcost*35)/2);
        default:    28+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_e2_powercost, current_year ) {
        0..1900:    46+((param_runcost*30)/2);
        1901..1940: 46+((param_runcost*34)/2);
        1941..1980: 46+((param_runcost*32)/2);
        1981..2020: 46+((param_runcost*35)/2);
        default:    46+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_e2_stopcost, vehicle_is_stopped  ) {
        0: switch_e2_powercost;
        1: switch_e2_staffedcost;
        default: switch_e2_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e2_runcost, vehicle_is_in_depot  ) {
        0: switch_e2_stopcost;
        1: switch_e2_depotcost;
        default: switch_e2_powercost;       
}
switch (FEAT_ROADVEHS, SELF, switch_e3_depotcost, current_year ) {
        0..1900:    34+((param_runcost*20)/2);
        1901..1940: 34+((param_runcost*24)/2);
        1941..1980: 34+((param_runcost*22)/2);
        1981..2020: 34+((param_runcost*20)/2);
        default:    34+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_e3_staffedcost, current_year ) {
        0..1900:    34+((param_runcost*30)/2);
        1901..1940: 34+((param_runcost*34)/2);
        1941..1980: 34+((param_runcost*32)/2);
        1981..2020: 34+((param_runcost*35)/2);
        default:    34+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_e3_powercost, current_year ) {
        0..1900:    52+((param_runcost*30)/2);
        1901..1940: 52+((param_runcost*34)/2);
        1941..1980: 52+((param_runcost*32)/2);
        1981..2020: 52+((param_runcost*35)/2);
        default:    52+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_e3_stopcost, vehicle_is_stopped  ) {
        0: switch_e3_powercost;
        1: switch_e3_staffedcost;
        default: switch_e3_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e3_runcost, vehicle_is_in_depot  ) {
        0: switch_e3_stopcost;
        1: switch_e3_depotcost;
        default: switch_e3_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e4_depotcost, current_year ) {
        0..1900:    42+((param_runcost*20)/2);
        1901..1940: 42+((param_runcost*24)/2);
        1941..1980: 42+((param_runcost*22)/2);
        1981..2020: 42+((param_runcost*20)/2);
        default:    42+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_e4_staffedcost, current_year ) {
        0..1900:    42+((param_runcost*30)/2);
        1901..1940: 42+((param_runcost*34)/2);
        1941..1980: 42+((param_runcost*32)/2);
        1981..2020: 42+((param_runcost*35)/2);
        default:    42+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_e4_powercost, current_year ) {
        0..1900:    62+((param_runcost*30)/2);
        1901..1940: 62+((param_runcost*34)/2);
        1941..1980: 62+((param_runcost*32)/2);
        1981..2020: 62+((param_runcost*35)/2);
        default:    62+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_e4_stopcost, vehicle_is_stopped  ) {
        0: switch_e4_powercost;
        1: switch_e4_staffedcost;
        default: switch_e4_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e4_runcost, vehicle_is_in_depot  ) {
        0: switch_e4_stopcost;
        1: switch_e4_depotcost;
        default: switch_e4_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e5_depotcost, current_year ) {
        0..1900:    48+((param_runcost*20)/2);
        1901..1940: 48+((param_runcost*24)/2);
        1941..1980: 48+((param_runcost*22)/2);
        1981..2020: 48+((param_runcost*20)/2);
        default:    48+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_e5_staffedcost, current_year ) {
        0..1900:    48+((param_runcost*30)/2);
        1901..1940: 48+((param_runcost*34)/2);
        1941..1980: 48+((param_runcost*32)/2);
        1981..2020: 48+((param_runcost*35)/2);
        default:    48+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_e5_powercost, current_year ) {
        0..1900:    71+((param_runcost*30)/2);
        1901..1940: 71+((param_runcost*34)/2);
        1941..1980: 71+((param_runcost*32)/2);
        1981..2020: 71+((param_runcost*35)/2);
        default:    71+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_e5_stopcost, vehicle_is_stopped  ) {
        0: switch_e5_powercost;
        1: switch_e5_staffedcost;
        default: switch_e5_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e5_runcost, vehicle_is_in_depot  ) {
        0: switch_e5_stopcost;
        1: switch_e5_depotcost;
        default: switch_e5_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e6_depotcost, current_year ) {
        0..1900:    61+((param_runcost*20)/2);
        1901..1940: 61+((param_runcost*24)/2);
        1941..1980: 61+((param_runcost*22)/2);
        1981..2020: 61+((param_runcost*20)/2);
        default:    61+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_e6_staffedcost, current_year ) {
        0..1900:    61+((param_runcost*30)/2);
        1901..1940: 61+((param_runcost*34)/2);
        1941..1980: 61+((param_runcost*32)/2);
        1981..2020: 61+((param_runcost*35)/2);
        default:    61+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_e6_powercost, current_year ) {
        0..1900:    82+((param_runcost*30)/2);
        1901..1940: 82+((param_runcost*34)/2);
        1941..1980: 82+((param_runcost*32)/2);
        1981..2020: 82+((param_runcost*35)/2);
        default:    82+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_e6_stopcost, vehicle_is_stopped  ) {
        0: switch_e6_powercost;
        1: switch_e6_staffedcost;
        default: switch_e6_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_e6_runcost, vehicle_is_in_depot  ) {
        0: switch_e6_stopcost;
        1: switch_e6_depotcost;
        default: switch_e6_powercost;       
}

// Electric Articulated Tram running Cost

switch (FEAT_ROADVEHS, SELF, switch_se0_depotcost, current_year ) {
        0..1900:    28+((param_runcost*20)/2);
        1901..1940: 28+((param_runcost*24)/2);
        1941..1980: 28+((param_runcost*22)/2);
        1981..2020: 28+((param_runcost*20)/2);
        default:    28+((param_runcost*18)/2);              
}

switch (FEAT_ROADVEHS, SELF, switch_se0_staffedcost, current_year ) {
        0..1900:    28+((param_runcost*30)/2);
        1901..1940: 28+((param_runcost*34)/2);
        1941..1980: 28+((param_runcost*32)/2);
        1981..2020: 28+((param_runcost*35)/2);
        default:    28+((param_runcost*33)/2);                      
}

switch (FEAT_ROADVEHS, SELF, switch_se0_powercost, current_year ) {
        0..1900:    48+((param_runcost*30)/2);
        1901..1940: 48+((param_runcost*34)/2);
        1941..1980: 48+((param_runcost*32)/2);
        1981..2020: 48+((param_runcost*35)/2);
        default:    48+((param_runcost*33)/2);          

}

switch (FEAT_ROADVEHS, SELF, switch_se0_stopcost, vehicle_is_stopped  ) {
        0: switch_se0_powercost;
        1: switch_se0_staffedcost;
        default: switch_se0_powercost;           
}

switch (FEAT_ROADVEHS, SELF, switch_se0_runcost, vehicle_is_in_depot  ) {
        0: switch_se0_stopcost;
        1: switch_se0_depotcost;
        default: switch_se0_powercost;           
}

switch (FEAT_ROADVEHS, SELF, switch_se1_depotcost, current_year ) {
        0..1900:    36+((param_runcost*20)/2);
        1901..1940: 36+((param_runcost*24)/2);
        1941..1980: 36+((param_runcost*22)/2);
        1981..2020: 36+((param_runcost*20)/2);
        default:    36+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_se1_staffedcost, current_year ) {
        0..1900:    36+((param_runcost*30)/2);
        1901..1940: 36+((param_runcost*34)/2);
        1941..1980: 36+((param_runcost*32)/2);
        1981..2020: 36+((param_runcost*35)/2);
        default:    36+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_se1_powercost, current_year ) {
        0..1900:    61+((param_runcost*30)/2);
        1901..1940: 61+((param_runcost*34)/2);
        1941..1980: 61+((param_runcost*32)/2);
        1981..2020: 61+((param_runcost*35)/2);
        default:    61+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_se1_stopcost, vehicle_is_stopped  ) {
        0: switch_se1_powercost;
        1: switch_se1_staffedcost;
        default: switch_se1_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_se1_runcost, vehicle_is_in_depot  ) {
        0: switch_se1_stopcost;
        1: switch_se1_depotcost;
        default: switch_se1_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_se2_depotcost, current_year ) {
        0..1900:    47+((param_runcost*20)/2);
        1901..1940: 47+((param_runcost*24)/2);
        1941..1980: 47+((param_runcost*22)/2);
        1981..2020: 47+((param_runcost*20)/2);
        default:    47+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_se2_staffedcost, current_year ) {
        0..1900:    47+((param_runcost*30)/2);
        1901..1940: 47+((param_runcost*34)/2);
        1941..1980: 47+((param_runcost*32)/2);
        1981..2020: 47+((param_runcost*35)/2);
        default:    47+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_se2_powercost, current_year ) {
        0..1900:    79+((param_runcost*30)/2);
        1901..1940: 79+((param_runcost*34)/2);
        1941..1980: 79+((param_runcost*32)/2);
        1981..2020: 79+((param_runcost*35)/2);
        default:    79+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_se2_stopcost, vehicle_is_stopped  ) {
        0: switch_se2_powercost;
        1: switch_se2_staffedcost;
        default: switch_se2_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_se2_runcost, vehicle_is_in_depot  ) {
        0: switch_se2_stopcost;
        1: switch_se2_depotcost;
        default: switch_se2_powercost;       
}
switch (FEAT_ROADVEHS, SELF, switch_se3_depotcost, current_year ) {
        0..1900:    55+((param_runcost*20)/2);
        1901..1940: 55+((param_runcost*24)/2);
        1941..1980: 55+((param_runcost*22)/2);
        1981..2020: 55+((param_runcost*20)/2);
        default:    55+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_se3_staffedcost, current_year ) {
        0..1900:    55+((param_runcost*30)/2);
        1901..1940: 55+((param_runcost*34)/2);
        1941..1980: 55+((param_runcost*32)/2);
        1981..2020: 55+((param_runcost*35)/2);
        default:    55+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_se3_powercost, current_year ) {
        0..1900:    89+((param_runcost*30)/2);
        1901..1940: 89+((param_runcost*34)/2);
        1941..1980: 89+((param_runcost*32)/2);
        1981..2020: 89+((param_runcost*35)/2);
        default:    89+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_se3_stopcost, vehicle_is_stopped  ) {
        0: switch_se3_powercost;
        1: switch_se3_staffedcost;
        default: switch_se3_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_se3_runcost, vehicle_is_in_depot  ) {
        0: switch_se3_stopcost;
        1: switch_se3_depotcost;
        default: switch_se3_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_se4_depotcost, current_year ) {
        0..1900:    60+((param_runcost*20)/2);
        1901..1940: 60+((param_runcost*24)/2);
        1941..1980: 60+((param_runcost*22)/2);
        1981..2020: 60+((param_runcost*20)/2);
        default:    60+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_se4_staffedcost, current_year ) {
        0..1900:    60+((param_runcost*30)/2);
        1901..1940: 60+((param_runcost*34)/2);
        1941..1980: 60+((param_runcost*32)/2);
        1981..2020: 60+((param_runcost*35)/2);
        default:    60+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_se4_powercost, current_year ) {
        0..1900:    89+((param_runcost*30)/2);
        1901..1940: 89+((param_runcost*34)/2);
        1941..1980: 89+((param_runcost*32)/2);
        1981..2020: 89+((param_runcost*35)/2);
        default:    89+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_se4_stopcost, vehicle_is_stopped  ) {
        0: switch_se4_powercost;
        1: switch_se4_staffedcost;
        default: switch_se4_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_se4_runcost, vehicle_is_in_depot  ) {
        0: switch_se4_stopcost;
        1: switch_se4_depotcost;
        default: switch_se4_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_se5_depotcost, current_year ) {
        0..1900:    95+((param_runcost*20)/2);
        1901..1940: 95+((param_runcost*24)/2);
        1941..1980: 95+((param_runcost*22)/2);
        1981..2020: 95+((param_runcost*20)/2);
        default:    95+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_se5_staffedcost, current_year ) {
        0..1900:    95+((param_runcost*30)/2);
        1901..1940: 95+((param_runcost*34)/2);
        1941..1980: 95+((param_runcost*32)/2);
        1981..2020: 95+((param_runcost*35)/2);
        default:    95+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_se5_powercost, current_year ) {
        0..1900:    125+((param_runcost*30)/2);
        1901..1940: 125+((param_runcost*34)/2);
        1941..1980: 125+((param_runcost*32)/2);
        1981..2020: 125+((param_runcost*35)/2);
        default:    125+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_se5_stopcost, vehicle_is_stopped  ) {
        0: switch_se5_powercost;
        1: switch_se5_staffedcost;
        default: switch_se5_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_se5_runcost, vehicle_is_in_depot  ) {
        0: switch_se5_stopcost;
        1: switch_se5_depotcost;
        default: switch_se5_powercost;       
}

// Electric LRV running Cost

switch (FEAT_ROADVEHS, SELF, switch_me2_depotcost, current_year ) {
        0..1900:    41+((param_runcost*20)/2);
        1901..1940: 41+((param_runcost*24)/2);
        1941..1980: 41+((param_runcost*22)/2);
        1981..2020: 41+((param_runcost*20)/2);
        default:    41+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_me2_staffedcost, current_year ) {
        0..1900:    41+((param_runcost*30)/2);
        1901..1940: 41+((param_runcost*34)/2);
        1941..1980: 41+((param_runcost*32)/2);
        1981..2020: 41+((param_runcost*35)/2);
        default:    41+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_me2_powercost, current_year ) {
        0..1900:    76+((param_runcost*30)/2);
        1901..1940: 76+((param_runcost*34)/2);
        1941..1980: 76+((param_runcost*32)/2);
        1981..2020: 76+((param_runcost*35)/2);
        default:    76+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_me2_stopcost, vehicle_is_stopped  ) {
        0: switch_me2_powercost;
        1: switch_me2_staffedcost;
        default: switch_me2_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_me2_runcost, vehicle_is_in_depot  ) {
        0: switch_me2_stopcost;
        1: switch_me2_depotcost;
        default: switch_me2_powercost;       
}
switch (FEAT_ROADVEHS, SELF, switch_me3_depotcost, current_year ) {
        0..1900:    70+((param_runcost*20)/2);
        1901..1940: 70+((param_runcost*24)/2);
        1941..1980: 70+((param_runcost*22)/2);
        1981..2020: 70+((param_runcost*20)/2);
        default:    70+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_me3_staffedcost, current_year ) {
        0..1900:    70+((param_runcost*30)/2);
        1901..1940: 70+((param_runcost*34)/2);
        1941..1980: 70+((param_runcost*32)/2);
        1981..2020: 70+((param_runcost*35)/2);
        default:    70+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_me3_powercost, current_year ) {
        0..1900:    120+((param_runcost*30)/2);
        1901..1940: 120+((param_runcost*34)/2);
        1941..1980: 120+((param_runcost*32)/2);
        1981..2020: 120+((param_runcost*35)/2);
        default:    120+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_me3_stopcost, vehicle_is_stopped  ) {
        0: switch_me3_powercost;
        1: switch_me3_staffedcost;
        default: switch_me3_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_me3_runcost, vehicle_is_in_depot  ) {
        0: switch_me3_stopcost;
        1: switch_me3_depotcost;
        default: switch_me3_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_me4_depotcost, current_year ) {
        0..1900:    88+((param_runcost*20)/2);
        1901..1940: 88+((param_runcost*24)/2);
        1941..1980: 88+((param_runcost*22)/2);
        1981..2020: 88+((param_runcost*20)/2);
        default:    88+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_me4_staffedcost, current_year ) {
        0..1900:    88+((param_runcost*30)/2);
        1901..1940: 88+((param_runcost*34)/2);
        1941..1980: 88+((param_runcost*32)/2);
        1981..2020: 88+((param_runcost*35)/2);
        default:    88+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_me4_powercost, current_year ) {
        0..1900:    133+((param_runcost*30)/2);
        1901..1940: 133+((param_runcost*34)/2);
        1941..1980: 133+((param_runcost*32)/2);
        1981..2020: 133+((param_runcost*35)/2);
        default:    133+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_me4_stopcost, vehicle_is_stopped  ) {
        0: switch_me4_powercost;
        1: switch_me4_staffedcost;
        default: switch_me4_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_me4_runcost, vehicle_is_in_depot  ) {
        0: switch_me4_stopcost;
        1: switch_me4_depotcost;
        default: switch_me4_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_me5_depotcost, current_year ) {
        0..1900:    153+((param_runcost*20)/2);
        1901..1940: 153+((param_runcost*24)/2);
        1941..1980: 153+((param_runcost*22)/2);
        1981..2020: 153+((param_runcost*20)/2);
        default:    153+((param_runcost*18)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_me5_staffedcost, current_year ) {
        0..1900:    153+((param_runcost*30)/2);
        1901..1940: 153+((param_runcost*34)/2);
        1941..1980: 153+((param_runcost*32)/2);
        1981..2020: 153+((param_runcost*35)/2);
        default:    153+((param_runcost*33)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_me5_powercost, current_year ) {
        0..1900:    193+((param_runcost*30)/2);
        1901..1940: 193+((param_runcost*34)/2);
        1941..1980: 193+((param_runcost*32)/2);
        1981..2020: 193+((param_runcost*35)/2);
        default:    193+((param_runcost*33)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_me5_stopcost, vehicle_is_stopped  ) {
        0: switch_me5_powercost;
        1: switch_me5_staffedcost;
        default: switch_me5_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_me5_runcost, vehicle_is_in_depot  ) {
        0: switch_me5_stopcost;
        1: switch_me5_depotcost;
        default: switch_me5_powercost;       
}

// Steam tram running Cost

switch (FEAT_ROADVEHS, SELF, switch_c0_depotcost, current_year ) {
        0..1900:    16+((param_runcost*20)/2);
        1901..1940: 16+((param_runcost*22)/2);
        1941..1980: 16+((param_runcost*25)/2);
        1981..2020: 16+((param_runcost*27)/2);
        default:    16+((param_runcost*29)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_c0_staffedcost, current_year ) {
        0..1900:    32+((param_runcost*30)/2);
        1901..1940: 32+((param_runcost*33)/2);
        1941..1980: 32+((param_runcost*37)/2);
        1981..2020: 32+((param_runcost*40)/2);
        default:    32+((param_runcost*42)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_c0_powercost, current_year ) {
        0..1900:    60+((param_runcost*30)/2);
        1901..1940: 60+((param_runcost*33)/2);
        1941..1980: 60+((param_runcost*37)/2);
        1981..2020: 60+((param_runcost*40)/2);
        default:    60+((param_runcost*42)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_c0_stopcost, vehicle_is_stopped  ) {
        0: switch_c0_powercost;
        1: switch_c0_staffedcost;
        default: switch_c0_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_c0_runcost, vehicle_is_in_depot  ) {
        0: switch_c0_stopcost;
        1: switch_c0_depotcost;
        default: switch_c0_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_c1_depotcost, current_year ) {
        0..1900:    20+((param_runcost*20)/2);
        1901..1940: 20+((param_runcost*22)/2);
        1941..1980: 20+((param_runcost*25)/2);
        1981..2020: 20+((param_runcost*27)/2);
        default:    20+((param_runcost*29)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_c1_staffedcost, current_year ) {
        0..1900:    40+((param_runcost*30)/2);
        1901..1940: 40+((param_runcost*33)/2);
        1941..1980: 40+((param_runcost*37)/2);
        1981..2020: 40+((param_runcost*40)/2);
        default:    40+((param_runcost*42)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_c1_powercost, current_year ) {
        0..1900:    76+((param_runcost*30)/2);
        1901..1940: 76+((param_runcost*33)/2);
        1941..1980: 76+((param_runcost*37)/2);
        1981..2020: 76+((param_runcost*40)/2);
        default:    76+((param_runcost*42)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_c1_stopcost, vehicle_is_stopped  ) {
        0: switch_c1_powercost;
        1: switch_c1_staffedcost;
        default: switch_c1_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_c1_runcost, vehicle_is_in_depot  ) {
        0: switch_c1_stopcost;
        1: switch_c1_depotcost;
        default: switch_c1_powercost;       
}

// Diesel tram running Cost

switch (FEAT_ROADVEHS, SELF, switch_c2_depotcost, current_year ) {
        0..1900:    24+((param_runcost*23)/2);
        1901..1940: 24+((param_runcost*25)/2);
        1941..1980: 24+((param_runcost*27)/2);
        1981..2020: 24+((param_runcost*26)/2);
        default:    24+((param_runcost*20)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_c2_staffedcost, current_year ) {
        0..1900:    24+((param_runcost*33)/2);
        1901..1940: 24+((param_runcost*35)/2);
        1941..1980: 24+((param_runcost*37)/2);
        1981..2020: 24+((param_runcost*36)/2);
        default:    24+((param_runcost*30)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_c2_powercost, current_year ) {
        0..1900:    111+((param_runcost*33)/2);
        1901..1940: 111+((param_runcost*35)/2);
        1941..1980: 111+((param_runcost*37)/2);
        1981..2020: 111+((param_runcost*38)/2);
        default:    111+((param_runcost*39)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_c2_stopcost, vehicle_is_stopped  ) {
        0: switch_c2_powercost;
        1: switch_c2_staffedcost;
        default: switch_c2_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_c2_runcost, vehicle_is_in_depot  ) {
        0: switch_c2_stopcost;
        1: switch_c2_depotcost;
        default: switch_c2_powercost;       
}
switch (FEAT_ROADVEHS, SELF, switch_c3_depotcost, current_year ) {
        0..1900:    25+((param_runcost*23)/2);
        1901..1940: 25+((param_runcost*25)/2);
        1941..1980: 25+((param_runcost*27)/2);
        1981..2020: 25+((param_runcost*26)/2);
        default:    25+((param_runcost*20)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_c3_staffedcost, current_year ) {
        0..1900:    25+((param_runcost*33)/2);
        1901..1940: 25+((param_runcost*35)/2);
        1941..1980: 25+((param_runcost*37)/2);
        1981..2020: 25+((param_runcost*36)/2);
        default:    25+((param_runcost*30)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_c3_powercost, current_year ) {
        0..1900:    75+((param_runcost*33)/2);
        1901..1940: 75+((param_runcost*35)/2);
        1941..1980: 75+((param_runcost*37)/2);
        1981..2020: 75+((param_runcost*38)/2);
        default:    75+((param_runcost*39)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_c3_stopcost, vehicle_is_stopped  ) {
        0: switch_c3_powercost;
        1: switch_c3_staffedcost;
        default: switch_c3_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_c3_runcost, vehicle_is_in_depot  ) {
        0: switch_c3_stopcost;
        1: switch_c3_depotcost;
        default: switch_c3_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_sc4_depotcost, current_year ) {
        0..1900:    41+((param_runcost*23)/2);
        1901..1940: 41+((param_runcost*25)/2);
        1941..1980: 41+((param_runcost*27)/2);
        1981..2020: 41+((param_runcost*26)/2);
        default:    41+((param_runcost*20)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_sc4_staffedcost, current_year ) {
        0..1900:    41+((param_runcost*33)/2);
        1901..1940: 41+((param_runcost*35)/2);
        1941..1980: 41+((param_runcost*37)/2);
        1981..2020: 41+((param_runcost*36)/2);
        default:    41+((param_runcost*30)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_sc4_powercost, current_year ) {
        0..1900:    111+((param_runcost*33)/2);
        1901..1940: 111+((param_runcost*35)/2);
        1941..1980: 111+((param_runcost*37)/2);
        1981..2020: 111+((param_runcost*38)/2);
        default:    111+((param_runcost*39)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_sc4_stopcost, vehicle_is_stopped  ) {
        0: switch_sc4_powercost;
        1: switch_sc4_staffedcost;
        default: switch_sc4_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_sc4_runcost, vehicle_is_in_depot  ) {
        0: switch_sc4_stopcost;
        1: switch_sc4_depotcost;
        default: switch_sc4_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_mc5_depotcost, current_year ) {
        0..1900:    52+((param_runcost*23)/2);
        1901..1940: 52+((param_runcost*25)/2);
        1941..1980: 52+((param_runcost*27)/2);
        1981..2020: 52+((param_runcost*26)/2);
        default:    52+((param_runcost*20)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_mc5_staffedcost, current_year ) {
        0..1900:    52+((param_runcost*33)/2);
        1901..1940: 52+((param_runcost*35)/2);
        1941..1980: 52+((param_runcost*37)/2);
        1981..2020: 52+((param_runcost*36)/2);
        default:    52+((param_runcost*30)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_mc5_powercost, current_year ) {
        0..1900:    132+((param_runcost*33)/2);
        1901..1940: 132+((param_runcost*35)/2);
        1941..1980: 132+((param_runcost*37)/2);
        1981..2020: 132+((param_runcost*38)/2);
        default:    132+((param_runcost*39)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_mc5_stopcost, vehicle_is_stopped  ) {
        0: switch_mc5_powercost;
        1: switch_mc5_staffedcost;
        default: switch_mc5_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_mc5_runcost, vehicle_is_in_depot  ) {
        0: switch_mc5_stopcost;
        1: switch_mc5_depotcost;
        default: switch_mc5_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_sc4x_depotcost, current_year ) {
        0..1900:    31+((param_runcost*23)/2);
        1901..1940: 31+((param_runcost*25)/2);
        1941..1980: 31+((param_runcost*27)/2);
        1981..2020: 31+((param_runcost*26)/2);
        default:    31+((param_runcost*20)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_sc4x_staffedcost, current_year ) {
        0..1900:    31+((param_runcost*33)/2);
        1901..1940: 31+((param_runcost*35)/2);
        1941..1980: 31+((param_runcost*37)/2);
        1981..2020: 31+((param_runcost*36)/2);
        default:    31+((param_runcost*30)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_sc4x_powercost, current_year ) {
        0..1900:    91+((param_runcost*33)/2);
        1901..1940: 91+((param_runcost*35)/2);
        1941..1980: 91+((param_runcost*37)/2);
        1981..2020: 91+((param_runcost*38)/2);
        default:    91+((param_runcost*39)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_sc4x_stopcost, vehicle_is_stopped  ) {
        0: switch_sc4x_powercost;
        1: switch_sc4x_staffedcost;
        default: switch_sc4x_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_sc4x_runcost, vehicle_is_in_depot  ) {
        0: switch_sc4x_stopcost;
        1: switch_sc4x_depotcost;
        default: switch_sc4x_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_mc5x_depotcost, current_year ) {
        0..1900:    42+((param_runcost*23)/2);
        1901..1940: 42+((param_runcost*25)/2);
        1941..1980: 42+((param_runcost*27)/2);
        1981..2020: 42+((param_runcost*26)/2);
        default:    42+((param_runcost*20)/2);      
}

switch (FEAT_ROADVEHS, SELF, switch_mc5x_staffedcost, current_year ) {
        0..1900:    42+((param_runcost*33)/2);
        1901..1940: 42+((param_runcost*35)/2);
        1941..1980: 42+((param_runcost*37)/2);
        1981..2020: 42+((param_runcost*36)/2);
        default:    42+((param_runcost*30)/2);          
}

switch (FEAT_ROADVEHS, SELF, switch_mc5x_powercost, current_year ) {
        0..1900:    112+((param_runcost*33)/2);
        1901..1940: 112+((param_runcost*35)/2);
        1941..1980: 112+((param_runcost*37)/2);
        1981..2020: 112+((param_runcost*38)/2);
        default:    112+((param_runcost*39)/2);      

}

switch (FEAT_ROADVEHS, SELF, switch_mc5x_stopcost, vehicle_is_stopped  ) {
        0: switch_mc5x_powercost;
        1: switch_mc5x_staffedcost;
        default: switch_mc5x_powercost;       
}

switch (FEAT_ROADVEHS, SELF, switch_me5x_runcost, vehicle_is_in_depot  ) {
        0: switch_mc5x_stopcost;
        1: switch_mc5x_depotcost;
        default: switch_mc5x_powercost;       
}

// Tram pantograph

    spriteset(spriteset_e_pole_4, "gfx/X/e_pole_01.png") {
        tmpl_7()
    }
    spriteset(spriteset_e_pole_5, "gfx/X/e_pole_02.png") {
        tmpl_7()
    }
    spriteset(spriteset_e_pole_6, "gfx/X/e_pole_03.png") {
        tmpl_7()
    }
    spriteset(spriteset_e_pole_7, "gfx/X/e_pole_04.png") {
        tmpl_7()
    }
    spriteset(spriteset_f_panto, "gfx/X/f_panto_01.png") {
        tmpl_7()
    }
    spriteset(spriteset_r_panto_3, "gfx/X/f_panto_02.png") {
        tmpl_7()
    }           
    spriteset(spriteset_x_panto, "gfx/X/f_panto_03.png") {
        tmpl_7()
    }
    spriteset(spriteset_e_pole_end, "gfx/X/f_panto_04.png") {
        tmpl_7()
    }
    spriteset(spriteset_r_panto_4, "gfx/X/r_panto_01.png") {
        tmpl_7()
    }
    spriteset(spriteset_r_panto_5, "gfx/X/r_panto_02.png") {
        tmpl_7()
    }           
    spriteset(spriteset_r_panto_6, "gfx/X/r_panto_03.png") {
        tmpl_7()
    }
    spriteset(spriteset_r_panto_7, "gfx/X/r_panto_04.png") {
        tmpl_7()
    }           
    spriteset(spriteset_x_greeb_1, "gfx/X/f_greeb_01.png") {
        tmpl_7()
    }
    spriteset(spriteset_x_greeb_2, "gfx/X/f_greeb_02.png") {
        tmpl_7()
    }           
    spriteset(spriteset_x_greeb_3, "gfx/X/f_greeb_03.png") {
        tmpl_7()
    }
    spriteset(spriteset_x_null, "gfx/X/f_greeb_04.png") {
        tmpl_7()
    }


switch (FEAT_ROADVEHS, SELF, switch_f_greeble, random_bits ) {
        0..63:      spriteset_x_greeb_1;
        64..127:    spriteset_x_greeb_2;
        128..195:    spriteset_x_greeb_3;
        196..255:   spriteset_x_null;
        default:    spriteset_x_null;       
}

switch (FEAT_ROADVEHS, SELF, switch_panto_side_3, random_bits ) {
        0..127: spriteset_f_panto;
        128..255: spriteset_r_panto_3;
        default: spriteset_f_panto;     
}

switch (FEAT_ROADVEHS, SELF, switch_e_panto_3, build_year ) {
        0..1988: spriteset_e_pole_4;
        1989..5000000: switch_panto_side_3;
        default: spriteset_e_pole_4;        
}

switch (FEAT_ROADVEHS, SELF, switch_panto_side_4, random_bits ) {
        0..127: spriteset_f_panto;
        128..255: spriteset_r_panto_4;
        default: spriteset_f_panto;     
}

switch (FEAT_ROADVEHS, SELF, switch_e_panto_4, build_year ) {
        0..1988: spriteset_e_pole_4;
        1989..5000000: switch_panto_side_4;
        default: spriteset_e_pole_4;        
}

switch (FEAT_ROADVEHS, SELF, switch_panto_side_5, random_bits ) {
        0..127: spriteset_f_panto;
        128..255: spriteset_r_panto_5;
        default: spriteset_f_panto;     
}

switch (FEAT_ROADVEHS, SELF, switch_e_panto_5, build_year ) {
        0..1988: spriteset_e_pole_5;
        1989..5000000: switch_panto_side_5;
        default: spriteset_e_pole_5;        
}

switch (FEAT_ROADVEHS, SELF, switch_panto_side_6, random_bits ) {
        0..127: spriteset_f_panto;
        128..255: spriteset_r_panto_6;
        default: spriteset_f_panto;     
}

switch (FEAT_ROADVEHS, SELF, switch_e_panto_6, build_year ) {
        0..1988: spriteset_e_pole_6;
        1989..5000000: switch_panto_side_4;
        default: spriteset_e_pole_6;        
}

switch (FEAT_ROADVEHS, SELF, switch_panto_side_7, random_bits ) {
        0..127: spriteset_f_panto;
        128..255: spriteset_r_panto_7;
        default: spriteset_f_panto;     
}

switch (FEAT_ROADVEHS, SELF, switch_e_panto_7, build_year ) {
        0..1988: spriteset_e_pole_7;
        1989..5000000: switch_panto_side_7;
        default: spriteset_e_pole_7;        
}

switch (FEAT_ROADVEHS, SELF, switch_pole_front, build_year ) {
        0..1988: spriteset_e_pole_end;
        1989..5000000: spriteset_x_greeb_2;
        default: spriteset_e_pole_end;      
}

switch (FEAT_ROADVEHS, SELF, switch_pole_rear, build_year ) {
        0..1988: spriteset_e_pole_5;
        1989..5000000: spriteset_x_greeb_2;
        default: spriteset_e_pole_5;        
}

switch (FEAT_ROADVEHS, SELF, switch_panto_center, build_year ) {
        0..1988: spriteset_x_greeb_1;
        1989..5000000: switch_panto_side_3;
        default: switch_panto_side_3;       
}

// Tram graphics by generation
//=========


// Tram Purchase Sprites

/* currently unused
spriteset(spriteset_tram_A1_b_p, "gfx/P/tram_A1_b.png") {
    tmpl_p()
}



spriteset(spriteset_tram_A2_b_p, "gfx/P/tram_A2_b.png") {
    tmpl_p()
}


spriteset(spriteset_tram_A4_b_p, "gfx/P/tram_A4_b.png") {
    tmpl_p()
}
*/

//Pantographs
    spriteset(spriteset_p_e_pole_4, "gfx/X/p_e_pole_01.png") {
        tmpl_p()
    }
    spriteset(spriteset_p_e_pole_5, "gfx/X/p_e_pole_02.png") {
        tmpl_p()
    }
    spriteset(spriteset_p_e_pole_6, "gfx/X/p_e_pole_03.png") {
        tmpl_p()
    }
    spriteset(spriteset_p_e_pole_7, "gfx/X/p_e_pole_04.png") {
        tmpl_p()
    }
    spriteset(spriteset_p_e_panto, "gfx/X/p_f_panto_01.png") {
        tmpl_p()
    }
           
    spriteset(spriteset_p_x_panto, "gfx/X/p_f_panto_03.png") {
        tmpl_p()
    }
/*
switch (FEAT_ROADVEHS, SELF, purchase_e_panto_3, build_year ) {
        0..1988: spriteset_p_e_pole_4;
        1989..5000000: spriteset_p_e_panto;
        default: spriteset_p_e_pole_4;        
}
*/
switch (FEAT_ROADVEHS, SELF, purchase_e_panto_4, build_year ) {
        0..1988: spriteset_p_e_pole_4;
        1989..5000000: spriteset_p_e_panto;
        default: spriteset_p_e_pole_4;        
}

switch (FEAT_ROADVEHS, SELF, purchase_e_panto_5, build_year ) {
        0..1988: spriteset_p_e_pole_5;
        1989..5000000: spriteset_p_e_panto;
        default: spriteset_p_e_pole_5;        
}

switch (FEAT_ROADVEHS, SELF, purchase_e_panto_6, build_year ) {
        0..1988: spriteset_p_e_pole_6;
        1989..5000000: spriteset_p_e_panto;
        default: spriteset_p_e_pole_6;        
}

switch (FEAT_ROADVEHS, SELF, purchase_e_panto_7, build_year ) {
        0..1988: spriteset_p_e_pole_7;
        1989..5000000: spriteset_p_e_panto;
        default: spriteset_p_e_pole_7;        
}

spriteset(spriteset_tram_pole_front_p, "gfx/P/t_panto_01.png") {
    tmpl_p()
}
spriteset(spriteset_tram_pole_both_p, "gfx/P/t_panto_02.png") {
    tmpl_p()
}
spriteset(spriteset_tram_panto_mid_p, "gfx/P/t_panto_03.png") {
    tmpl_p()
}
spriteset(spriteset_tram_panto_front_p, "gfx/P/t_panto_04.png") {
    tmpl_p()
}


switch (FEAT_ROADVEHS, SELF, switch_pole_front_p, build_year) {
    0..1988:        spriteset_tram_pole_front_p;
    default:        spriteset_tram_panto_front_p;
}

// 1st generation 'A' trams:

spriteset(spriteset_tram_a1_01, "gfx/tram/tram_A1_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a1_02, "gfx/tram/tram_A1_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a1_03, "gfx/tram/tram_A1_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a1_04, "gfx/tram/tram_A1_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a2_01, "gfx/tram/tram_A2_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a2_02, "gfx/tram/tram_A2_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a2_03, "gfx/tram/tram_A2_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a2_04, "gfx/tram/tram_A2_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a3_01, "gfx/tram/tram_A3_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a3_02, "gfx/tram/tram_A3_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a3_03, "gfx/tram/tram_A3_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a3_04, "gfx/tram/tram_A3_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a4_01, "gfx/tram/tram_A4_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a4_02, "gfx/tram/tram_A4_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a4_03, "gfx/tram/tram_A4_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_a4_04, "gfx/tram/tram_A4_04.png") {
    tmpl_7()
}
// e0 'A' tram graphics

switch (FEAT_ROADVEHS, SELF, style_tram_e0_old, random_bits ) {
    0..195:     spriteset_tram_a1_01;
    196..255:   spriteset_tram_a2_01;

}
switch (FEAT_ROADVEHS, SELF, style_tram_e0_new, random_bits ) {
    0..195:     spriteset_tram_a3_01;
    196..255:   spriteset_tram_a4_01;
}

switch (FEAT_ROADVEHS, SELF, style_tram_e0, build_year ) {
    0..1915:     style_tram_e0_old;
    default:   style_tram_e0_new;

}

switch(FEAT_ROADVEHS, SELF, switch_e0_front, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  style_tram_e0;
    1:  switch_e_panto_4;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_e0_tram, position_in_consist ) {
    0:  switch_e0_front;
         //default
}

spriteset(spriteset_tram_A1_a_p, "gfx/P/tram_A1_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_A1_c_p, "gfx/P/tram_A1_c.png") {
    tmpl_p()
}
spriteset(spriteset_tram_A1_d_p, "gfx/P/tram_A1_d.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_A1, build_year ) {
    0..1915:    spriteset_tram_A1_a_p;
    1916..1925: spriteset_tram_A1_c_p;
    default:    spriteset_tram_A1_d_p;

}

switch(FEAT_ROADVEHS, SELF, switch_purchase_e0_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_A1;
    1:  purchase_e_panto_4;
    2:  switch_wire_icon;
}


//e0 'A' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_e0_tram, position_in_consist) {
    0:  return 4;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_e0_tram, position_in_consist ) {
    0:  return ((param_capacity*40)/2);
        return ((param_capacity*40)/2); //default
}

/*
//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_e0_tram, extra_callback_info1) {
    0:  return item_e0_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
*/

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_e0_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_YR1), string(STR_ETRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              15;
    cost_factor:                65;
    running_cost_factor:        80;
    speed:                      50 km/h;
    power:                      90 hp;
    cargo_capacity:             30;
    introduction_date:          date(1890,07,01);
    model_life:                 40;
    vehicle_life:               40;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     10.5 ton;
    }
graphics {
    running_cost_factor:            switch_e0_runcost;
    purchase_running_cost_factor:   switch_e0_powercost;
    cargo_capacity:                 capacity_e0_tram;
    purchase_cargo_capacity:        ((param_capacity*40)/2);
    default:                        switch_spriteset_e0_tram;
    length:                         switch_length_e0_tram;
    purchase:                       switch_purchase_e0_tram;
    cost_factor:                    ((param_buycost*65)/4);
    }
}
}

// e1 'A' tram graphics

switch (FEAT_ROADVEHS, SELF, style_e1_A, random_bits) {
    0..15:      spriteset_tram_a1_04;
    16..223:    spriteset_tram_a3_04;
    224..251:   spriteset_tram_a4_04;   
    252..255:   spriteset_tram_a2_04;
}
switch (FEAT_ROADVEHS, SELF, style_e1_B, random_bits) {
    0..195:     spriteset_tram_a3_04;
    196..255:   spriteset_tram_a4_04;
}
switch (FEAT_ROADVEHS, SELF, style_e1_C, random_bits) {
    0..195:     spriteset_tram_a4_04;
    196..255:   spriteset_tram_a3_04;
}
switch (FEAT_ROADVEHS, SELF, style_e1_D, random_bits) {
    0..31:        spriteset_tram_a3_04;
    32..255:      spriteset_tram_a4_04;
}

switch (FEAT_ROADVEHS, SELF, switch_e1_style, build_year){  //style by build year
    0..1914:    style_e1_A;
    1915..1924: style_e1_B;
    1925..1934: style_e1_C;
    default:    style_e1_D;
}
switch(FEAT_ROADVEHS, SELF, switch_e1_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_e1_style;
    1:  switch_e_panto_5;
}

spriteset(spriteset_tram_A4_a_p, "gfx/P/tram_A4_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_A4_c_p, "gfx/P/tram_A4_c.png") {
    tmpl_p()
}
spriteset(spriteset_tram_A4_d_p, "gfx/P/tram_A4_d.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_A4, build_year ) {
    0..1912:    spriteset_tram_A4_a_p;
    1913..1924: spriteset_tram_A4_c_p;
    default:    spriteset_tram_A4_d_p;

}

switch(FEAT_ROADVEHS, SELF, switch_purchase_e1_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_A4;
    1:  purchase_e_panto_5;
    2:  switch_wire_icon;
}

//e1 'A' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_e1_tram, position_in_consist) {
    0:  return 5;
    1:  return 5;
        return 5;
}

switch (FEAT_ROADVEHS, SELF, capacity_e1_tram, position_in_consist ) {
    0:  return ((param_capacity*51)/2);
        return ((param_capacity*51)/2); //default
}

/*
//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_e1_tram, extra_callback_info1) {
    0:  return item_e1_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
*/

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_e1_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_LC1), string(STR_ETRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              15;
    cost_factor:                75;
    running_cost_factor:        80;
    speed:                      60 km/h;
    power:                      104 hp;
    cargo_capacity:             51;
    introduction_date:          date(1910,07,01);
    model_life:                 50;
    vehicle_life:               40;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     15 ton;
    }
graphics {
    running_cost_factor:            switch_e1_runcost;
    purchase_running_cost_factor:   switch_e1_powercost;
    cargo_capacity:                 capacity_e1_tram;
    purchase_cargo_capacity:        ((param_capacity*51)/2);
    default:                        switch_e1_stack;
    length:                         switch_length_e1_tram;
    purchase:                       switch_purchase_e1_tram;
    cost_factor:                    ((param_buycost*75)/4);
    }
}
}

// se0 'A' tram graphics

switch(FEAT_ROADVEHS, SELF, panto_se0_A_front, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_a1_03;
    1:  switch_e_panto_4;
}

switch (FEAT_ROADVEHS, SELF, position_se0_A, position_in_consist ) {
    0:  panto_se0_A_front;
        spriteset_tram_a1_02; //default
}

switch(FEAT_ROADVEHS, SELF, panto_se0_B_front, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_a2_03;
    1:  switch_e_panto_4;
}

switch (FEAT_ROADVEHS, SELF, position_se0_B, position_in_consist ) {
    0:  panto_se0_B_front;
        spriteset_tram_a2_02; //default
}

switch(FEAT_ROADVEHS, SELF, panto_se0_C_front, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_a3_03;
    1:  switch_e_panto_4;
}

switch (FEAT_ROADVEHS, SELF, position_se0_C, position_in_consist ) {
    0:  panto_se0_C_front;
        spriteset_tram_a1_02; //default
}
switch(FEAT_ROADVEHS, SELF, panto_se0_D_front, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_a4_03;
    1:  switch_e_panto_4;
}

switch (FEAT_ROADVEHS, SELF, position_se0_D, position_in_consist ) {
    0:  panto_se0_D_front;
        spriteset_tram_a2_02; //default
}

switch (FEAT_ROADVEHS, PARENT, style_se0_A, random_bits) {
    0..15:      position_se0_C;
    16..223:    position_se0_A;
    224..251:   position_se0_B;   
    252..255:   position_se0_D;
    default:    position_se0_A;
}
switch (FEAT_ROADVEHS, PARENT, style_se0_B, random_bits) {
    0..223:     position_se0_C;
    224..255:   position_se0_D;
    default:    position_se0_C;
}
switch (FEAT_ROADVEHS, PARENT, style_se0_C, random_bits) {
    0..195:     position_se0_C;
    196..255:   position_se0_D;
    default:    position_se0_C;
}
switch (FEAT_ROADVEHS, PARENT, style_se0_D, random_bits) {
    0..31:        position_se0_C;
    32..255:      position_se0_D;
    default:      position_se0_D;
}

switch (FEAT_ROADVEHS, SELF, switch_se0_style, build_year){  //style by build year
    0..1909:    style_se0_A;
    1910..1914: style_se0_B;
    1915..1929: style_se0_C;
    default:    style_se0_D;
}

spriteset(spriteset_tram_se0_p, "gfx/P/tram_se0.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_se0_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_se0_p;
    1:  switch_pole_front_p;
    2:  switch_wire_icon;
}


//se0 tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_se0_tram, position_in_consist) {
    0:  return 4;
    1:  return 3;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_se0_tram, position_in_consist ) {
    0:  return ((param_capacity*45)/2);
        return ((param_capacity*40)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_se0_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_se0_tram, extra_callback_info1) {
    0:  return item_se0_tram;
    1:  return item_se0_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

switch (FEAT_ROADVEHS, SELF, decay_se0_tram, (param_aging)) {
    0:  return 100;
    1: return 90;
    2: return 80;
    3:    return 70;
        return 100; //default
}

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_se0_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KD1), string(STR_ETRAM_3));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              10;
    cargo_age_period:           100;
    cost_factor:                122;
    running_cost_factor:        80;
    speed:                      60 km/h;
    power:                      98 hp;
    cargo_capacity:             85;
    introduction_date:          date(1900,07,01);
    model_life:                 60;
    vehicle_life:               70;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     20 ton;
    }
graphics {

    cargo_capacity:                 capacity_se0_tram;
    purchase_cargo_capacity:        ((param_capacity*85)/2)/2;
    default:                        switch_se0_style;
    length:                         switch_length_se0_tram;
    cargo_age_period:               decay_se0_tram;
    running_cost_factor:            switch_se0_runcost;
    purchase_running_cost_factor:   switch_se0_powercost;
    articulated_part:               switch_se0_tram;
    visual_effect:                  spark_se0_tram;
    purchase:                       switch_se0_purchase;
    cost_factor:                    ((param_buycost*122)/4);
    }
}
}

// c0 'A' tram graphics

switch (FEAT_ROADVEHS, SELF, style_tram_c0_old, random_bits ) {
    0..195:     spriteset_tram_a1_02;
    196..255:   spriteset_tram_a2_02;

}
switch (FEAT_ROADVEHS, SELF, style_tram_c0_new, random_bits ) {
    0..195:     spriteset_tram_a3_02;
    196..255:   spriteset_tram_a4_02;
}

switch (FEAT_ROADVEHS, SELF, style_tram_c0, build_year ) {
    0..1915:     spriteset_tram_a3_02;
    default:   spriteset_tram_a4_02;

}

spriteset(spriteset_tram_A2_a_p, "gfx/P/tram_A2_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_A2_c_p, "gfx/P/tram_A2_c.png") {
    tmpl_p()
}
spriteset(spriteset_tram_A2_d_p, "gfx/P/tram_A2_d.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_A2, build_year ) {
    0..1915:    spriteset_tram_A2_a_p;
    1916..1925: spriteset_tram_A2_c_p;    
    default:   spriteset_tram_A2_d_p;
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_c0_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_A2;
    1:  switch_steam_icon;
}

//c0 'A' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_c0_tram, position_in_consist) {
    0:  return 3;
    1:  return 3;
        return 3;
}

switch (FEAT_ROADVEHS, SELF, capacity_c0_tram, position_in_consist ) {
    0:  return ((param_capacity*25)/2);
        return ((param_capacity*25)/2); //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_c0_tram, extra_callback_info1) {
    0:  return item_c0_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_stv ==1){
item(FEAT_ROADVEHS, item_c0_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_AB1), string(STR_STRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              15;
    cost_factor:                78;
    running_cost_factor:        80;
    speed:                      55 km/h;
    power:                      100 hp;
    cargo_capacity:             20;
    introduction_date:          date(1870,07,01);
    model_life:                 60;
    vehicle_life:               30;
    reliability_decay:          14;
    tram_type:                  RAIL;
    sound_effect:               SOUND_STEAM;
    visual_effect:              VISUAL_EFFECT_STEAM;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     22 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 1) {
    property {
    introduction_date:              date(1840,01,01); 
    model_life:                     90;
    }
}
if (param_fgei == 2) {
    property {
    introduction_date:              date(1810,01,01); 
    model_life:                     50;
    }
}
graphics {
    running_cost_factor:                switch_c0_runcost;
    purchase_running_cost_factor:       switch_c0_powercost;
    cargo_capacity:                     capacity_c0_tram;
    purchase_cargo_capacity:            ((param_capacity*25)/2);
    default:                            style_tram_c0;
    length:                             switch_length_c0_tram;
    purchase:                           switch_purchase_c0_tram;
    cost_factor:                        ((param_buycost*78)/4);
    }
}
}

// c1 'A' tram graphics

switch (FEAT_ROADVEHS, SELF, style_c1_A, random_bits) {
    0..15:      spriteset_tram_a1_04;
    16..223:    spriteset_tram_a3_04;
    224..251:   spriteset_tram_a4_04;   
    252..255:   spriteset_tram_a2_04;
}
switch (FEAT_ROADVEHS, SELF, style_c1_B, random_bits) {
    0..195:     spriteset_tram_a3_04;
    196..255:   spriteset_tram_a4_04;
}
switch (FEAT_ROADVEHS, SELF, style_c1_C, random_bits) {
    0..195:     spriteset_tram_a4_04;
    196..255:   spriteset_tram_a3_04;
}
switch (FEAT_ROADVEHS, SELF, style_c1_D, random_bits) {
    0..31:        spriteset_tram_a3_04;
    32..255:      spriteset_tram_a4_04;
}

switch (FEAT_ROADVEHS, SELF, switch_c1_style, build_year){  //style by build year
    0..1914:    style_c1_A;
    1915..1924: style_c1_B;
    1925..1934: style_c1_C;
    default:    style_c1_D;
}


switch(FEAT_ROADVEHS, SELF, switch_purchase_c1_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_A4;
    1:  switch_steam_icon;
}

//c1 'A' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_c1_tram, position_in_consist) {
    0:  return 4;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_c1_tram, position_in_consist ) {
    0:  return ((param_capacity*42)/2);
        return ((param_capacity*42)/2); //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_c1_tram, extra_callback_info1) {
    0:  return item_c1_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_stv ==1){
item(FEAT_ROADVEHS, item_c1_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_PM1), string(STR_STRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              15;
    cost_factor:                100;
    running_cost_factor:        96;
    speed:                      65 km/h;
    power:                      120 hp;
    cargo_capacity:             34;
    introduction_date:          date(1905,07,01);
    model_life:                 40;
    vehicle_life:               40;
    reliability_decay:          14;
    tram_type:                  RAIL;
    sound_effect:               SOUND_STEAM;
    visual_effect:              VISUAL_EFFECT_STEAM;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     28 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 2) {
    property {
    introduction_date:              date(1855,01,01); 
    model_life:                     90;
    }
}
graphics {
    running_cost_factor:            switch_c1_runcost;
    purchase_running_cost_factor:   switch_c1_powercost;
    cargo_capacity:                 capacity_c1_tram;
    purchase_cargo_capacity:        ((param_capacity*42)/2);
    default:                        switch_c1_style;
    length:                         switch_length_c1_tram;
    purchase:                       switch_purchase_c1_tram;
    cost_factor:                    ((param_buycost*100)/4);
    }
}
}

// f0 'A' tram graphics



switch (FEAT_ROADVEHS, SELF, switch_spriteset_f0_tram, position_in_consist ) {
    0:  style_tram_e0;
         //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_f0_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_A1;
    1:  switch_cable_icon;
}

//f0 'A' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_f0_tram, position_in_consist) {
    0:  return 4;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_f0_tram, position_in_consist ) {
    0:  return ((param_capacity*25)/2);
        return ((param_capacity*25)/2); //default
}


if (param_func ==1){
item(FEAT_ROADVEHS, item_f0_tram) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_AB1), string(STR_FUNC_TRAM_1));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  15;
    cost_factor:                    55;
    running_cost_factor:            60;
    speed:                          50 km/h;
    power:                          200 hp;
    cargo_capacity:                 25;
    introduction_date:              date(1870,05,01);
    model_life:                     40;
    vehicle_life:                   60;
    reliability_decay:              14;
    tram_type:                      FUNC;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DISABLE;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         8.5 ton;
    tractive_effort_coefficient:    1;
    }
graphics {
    // running_cost_factor:            switch_e0_runcost;
    // purchase_running_cost_factor:   switch_e0_powercost;
    cargo_capacity:                 capacity_f0_tram;
    purchase_cargo_capacity:        ((param_capacity*25)/2);
    default:                        switch_spriteset_f0_tram;
    length:                         switch_length_e0_tram;
    purchase:                       switch_purchase_f0_tram;
    cost_factor:                    ((param_buycost*55)/4);
    }
}
}

// f1 'A' tram graphics

switch(FEAT_ROADVEHS, SELF, switch_purchase_f1_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_A4;
    1:  switch_cable_icon;
}

//f1 'A' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_f1_tram, position_in_consist) {
    0:  return 5;
    1:  return 5;
        return 5;
}

switch (FEAT_ROADVEHS, SELF, capacity_f1_tram, position_in_consist ) {
    0:  return ((param_capacity*40)/2);
        return ((param_capacity*40)/2); //default
}


if (param_func ==1){
item(FEAT_ROADVEHS, item_f1_tram) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_PK1), string(STR_FUNC_TRAM_1));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PASSENGERS);
    loading_speed:                  15;
    cost_factor:                    65;
    running_cost_factor:            70;
    speed:                          50 km/h;
    power:                          200 hp;
    cargo_capacity:                 40;
    introduction_date:              date(1895,05,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   80;
    reliability_decay:              14;
    tram_type:                      FUNC;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_DISABLE;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         10 ton;
    tractive_effort_coefficient:    1;
    }
graphics {
    // running_cost_factor:            switch_e0_runcost;
    // purchase_running_cost_factor:   switch_e0_powercost;
    cargo_capacity:                 capacity_f1_tram;
    purchase_cargo_capacity:        ((param_capacity*40)/2);
    default:                        switch_e1_style;
    length:                         switch_length_f1_tram;
    purchase:                       switch_purchase_f1_tram;
    cost_factor:                    ((param_buycost*65)/4);
    }
}
}

// 2nd generation 'B' trams

spriteset(spriteset_b1_tram_01, "gfx/tram/tram_B1_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_b1_tram_o_01, "gfx/tram/tram_B1_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_b1_tram_01 {
    loaded:  [spriteset_b1_tram_01];
    loading: [spriteset_b1_tram_o_01];
}

spriteset(spriteset_b1_tram_02, "gfx/tram/tram_B1_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_b1_tram_o_02, "gfx/tram/tram_B1_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_b1_tram_02 {
    loaded:  [spriteset_b1_tram_02];
    loading: [spriteset_b1_tram_o_02];
}

spriteset(spriteset_b1_tram_03, "gfx/tram/tram_B1_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_b1_tram_o_03, "gfx/tram/tram_B1_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_b1_tram_03 {
    loaded:  [spriteset_b1_tram_03];
    loading: [spriteset_b1_tram_o_03];
}

spriteset(spriteset_b1_tram_04, "gfx/tram/tram_B1_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_b1_tram_o_04, "gfx/tram/tram_B1_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_b1_tram_04 {
    loaded:  [spriteset_b1_tram_04];
    loading: [spriteset_b1_tram_o_04];
}

spriteset(spriteset_b2_tram_01, "gfx/tram/tram_B2_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_b2_tram_o_01, "gfx/tram/tram_B2_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_b2_tram_01 {
    loaded:  [spriteset_b2_tram_01];
    loading: [spriteset_b2_tram_o_01];
}

spriteset(spriteset_b2_tram_02, "gfx/tram/tram_B2_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_b2_tram_o_02, "gfx/tram/tram_B2_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_b2_tram_02 {
    loaded:  [spriteset_b2_tram_02];
    loading: [spriteset_b2_tram_o_02];
}

spriteset(spriteset_b2_tram_03, "gfx/tram/tram_B2_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_b2_tram_o_03, "gfx/tram/tram_B2_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_b2_tram_03 {
    loaded:  [spriteset_b2_tram_03];
    loading: [spriteset_b2_tram_o_03];
}

spriteset(spriteset_b2_tram_04, "gfx/tram/tram_B2_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_b2_tram_o_04, "gfx/tram/tram_B2_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_b2_tram_04 {
    loaded:  [spriteset_b2_tram_04];
    loading: [spriteset_b2_tram_o_04];
}

spriteset(spriteset_b3_tram_01, "gfx/tram/tram_B3_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_b3_tram_o_01, "gfx/tram/tram_B3_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_b3_tram_01 {
    loaded:  [spriteset_b3_tram_01];
    loading: [spriteset_b3_tram_o_01];
}

spriteset(spriteset_b3_tram_02, "gfx/tram/tram_B3_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_b3_tram_o_02, "gfx/tram/tram_B3_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_b3_tram_02 {
    loaded:  [spriteset_b3_tram_02];
    loading: [spriteset_b3_tram_o_02];
}

spriteset(spriteset_b3_tram_03, "gfx/tram/tram_B3_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_b3_tram_o_03, "gfx/tram/tram_B3_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_b3_tram_03 {
    loaded:  [spriteset_b3_tram_03];
    loading: [spriteset_b3_tram_o_03];
}
spriteset(spriteset_b3_tram_04, "gfx/tram/tram_B3_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_b3_tram_o_04, "gfx/tram/tram_B3_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_b3_tram_04 {
    loaded:  [spriteset_b3_tram_04];
    loading: [spriteset_b3_tram_o_04];
}
spriteset(spriteset_b4_tram_01, "gfx/tram/tram_B4_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_b4_tram_o_01, "gfx/tram/tram_B4_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_b4_tram_01 {
    loaded:  [spriteset_b4_tram_01];
    loading: [spriteset_b4_tram_o_01];
}
spriteset(spriteset_b4_tram_02, "gfx/tram/tram_B4_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_b4_tram_o_02, "gfx/tram/tram_B4_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_b4_parcel_02 {
    loaded:  [spriteset_b4_tram_02];
    loading: [spriteset_b4_tram_o_02];
}
spriteset(spriteset_b4_tram_03, "gfx/tram/tram_B4_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_b4_tram_o_03, "gfx/tram/tram_B4_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_b4_parcel_03 {
    loaded:  [spriteset_b4_tram_03];
    loading: [spriteset_b4_tram_o_03];
}
spriteset(spriteset_b4_tram_04, "gfx/tram/tram_B4_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_b4_tram_o_04, "gfx/tram/tram_B4_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_b4_parcel_04 {
    loaded:  [spriteset_b4_tram_04];
    loading: [spriteset_b4_tram_o_04];
}

spriteset(spriteset_b5_tram_01, "gfx/tram/tram_B5_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_b5_tram_o_01, "gfx/tram/tram_B5_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_b5_tram_01 {
    loaded:  [spriteset_b5_tram_01];
    loading: [spriteset_b5_tram_o_01];
}

spriteset(spriteset_b5_tram_02, "gfx/tram/tram_B5_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_b5_tram_o_02, "gfx/tram/tram_B5_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_b5_tram_02 {
    loaded:  [spriteset_b5_tram_02];
    loading: [spriteset_b5_tram_o_02];
}

spriteset(spriteset_b5_tram_03, "gfx/tram/tram_B5_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_b5_tram_o_03, "gfx/tram/tram_B5_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_b5_tram_03 {
    loaded:  [spriteset_b5_tram_03];
    loading: [spriteset_b5_tram_o_03];
}

spriteset(spriteset_b5_tram_04, "gfx/tram/tram_B5_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_b5_tram_o_04, "gfx/tram/tram_B5_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_b5_tram_04 {
    loaded:  [spriteset_b5_tram_04];
    loading: [spriteset_b5_tram_o_04];
}

// e2 'B' tram graphics

switch (FEAT_ROADVEHS, SELF, style_e2_A, random_bits) {
    0..239:        spritegroup_b1_tram_04;
    240..255:      spritegroup_b2_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_e2_B, random_bits) {
    0..65:        spritegroup_b1_tram_04;
    64..255:      spritegroup_b2_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_e2_C, random_bits) {
    0..239:        spritegroup_b2_tram_04;
    240..255:      spritegroup_b3_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_e2_D, random_bits) {
    0..65:        spritegroup_b2_tram_04;
    64..255:      spritegroup_b3_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_e2_E, random_bits) {
    0..239:        spritegroup_b3_tram_04;
    240..255:      spritegroup_b2_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_e2_F, random_bits) {
    0..65:        spritegroup_b3_tram_04;
    64..255:      spritegroup_b5_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_e2_G, random_bits) {
    0..239:        spritegroup_b5_tram_04;
    240..255:      spritegroup_b3_tram_04;
}

switch (FEAT_ROADVEHS, SELF, switch_e2_style, build_year){  //style by build year
    0..1924:    style_e2_A;
    1925..1934: style_e2_B;
    1935..1939: style_e2_C;
    1940..1944: style_e2_D;
    1945..1949: style_e2_E;
    1950..1955: style_e2_F;
    default:    style_e2_G;
}

switch(FEAT_ROADVEHS, SELF, switch_e2_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_e2_style;
    1:  switch_e_panto_6;
}

spriteset(spriteset_tram_B4_a_p, "gfx/P/tram_B4_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_B4_b_p, "gfx/P/tram_B4_b.png") {
    tmpl_p()
}
spriteset(spriteset_tram_B4_c_p, "gfx/P/tram_B4_c.png") {
    tmpl_p()
}
spriteset(spriteset_tram_B4_d_p, "gfx/P/tram_B4_d.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_B4, build_year){  //style by build year
    0..1924:    spriteset_tram_B4_a_p;
    1925..1934: spriteset_tram_B4_b_p;
    1935..1939: spriteset_tram_B4_b_p;
    1940..1944: spriteset_tram_B4_c_p;
    1945..1949: spriteset_tram_B4_c_p;
    1950..1955: spriteset_tram_B4_d_p;
    default:    spriteset_tram_B4_d_p;
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_e2_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_B4;
    1:  purchase_e_panto_6;
    2:  switch_wire_icon;
}

//e2 'B' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_e2_tram, position_in_consist) {
    0:  return 6;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_e2_tram, position_in_consist ) {
    0:  return ((param_capacity*62)/2);
        return ((param_capacity*62)/2); //default
}

/*
//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_e2_tram, extra_callback_info1) {
    0:  return item_e2_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
*/

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_e2_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KM1), string(STR_ETRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              17;
    cost_factor:                87;
    running_cost_factor:        80;
    speed:                      70 km/h;
    power:                      156 hp;
    cargo_capacity:             62;
    introduction_date:          date(1930,07,01);
    model_life:                 60;
    vehicle_life:               40;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     18 ton;
    }
graphics {
    running_cost_factor:            switch_e2_runcost;
    purchase_running_cost_factor:   switch_e2_powercost;
    cargo_capacity:                 capacity_e2_tram;
    purchase_cargo_capacity:        ((param_capacity*62)/2);
    default:                        switch_e2_stack;
    length:                         switch_length_e2_tram;
    purchase:                       switch_purchase_e2_tram;
    cost_factor:                    ((param_buycost*87)/4);
    }
}
}

// se1 'B' tram graphics

switch (FEAT_ROADVEHS, SELF, switch_panto_se1, position_in_consist ) {
    0:  switch_panto_side_4;
        spriteset_x_null; //default
}

switch (FEAT_ROADVEHS, SELF, position_se1_A, position_in_consist ) {
    0:  spritegroup_b1_tram_01;
        spritegroup_b1_tram_03; //default
}

switch (FEAT_ROADVEHS, SELF, position_se1_B, position_in_consist ) {
    0:  spritegroup_b2_tram_01;
        spritegroup_b2_tram_03; //default
}

switch (FEAT_ROADVEHS, SELF, position_se1_C, position_in_consist ) {
    0:  spritegroup_b3_tram_01;
        spritegroup_b3_tram_03; //default
}

switch (FEAT_ROADVEHS, SELF, position_se1_D, position_in_consist ) {
    0:  spritegroup_b5_tram_01;
        spritegroup_b5_tram_03; //default
}

switch (FEAT_ROADVEHS, PARENT, style_se1_A, random_bits) {
    0..239:        position_se1_A;
    240..255:      position_se1_B;
}
switch (FEAT_ROADVEHS, PARENT, style_se1_B, random_bits) {
    0..65:        position_se1_A;
    64..255:      position_se1_B;
}
switch (FEAT_ROADVEHS, PARENT, style_se1_C, random_bits) {
    0..239:        position_se1_B;
    240..255:      position_se1_C;
}
switch (FEAT_ROADVEHS, PARENT, style_se1_D, random_bits) {
    0..65:        position_se1_B;
    64..255:      position_se1_C;
}
switch (FEAT_ROADVEHS, PARENT, style_se1_E, random_bits) {
    0..239:        position_se1_C;
    240..255:      position_se1_B;
}
switch (FEAT_ROADVEHS, PARENT, style_se1_F, random_bits) {
    0..65:        position_se1_C;
    64..255:      position_se1_D;
}
switch (FEAT_ROADVEHS, PARENT, style_se1_G, random_bits) {
    0..239:        position_se1_D;
    240..255:      position_se1_C;
}

switch (FEAT_ROADVEHS, SELF, switch_se1_style, build_year){  //style by build year
    0..1924:    style_se1_A;
    1925..1934: style_se1_B;
    1935..1939: style_se1_C;
    1940..1944: style_se1_D;
    1945..1949: style_se1_E;
    1950..1955: style_se1_F;
    default:    style_se1_G;
}

switch(FEAT_ROADVEHS, SELF, switch_se1_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_se1_style;
    1:  switch_panto_se1;
}

spriteset(spriteset_tram_se1_p, "gfx/P/tram_se1.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_se1_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_se1_p;
    1:  switch_pole_front_p;
    2:  switch_wire_icon;
}

//se1 'B' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_se1_tram, position_in_consist) {
    0:  return 4;
    1:  return 5;
        return 5;
}

switch (FEAT_ROADVEHS, SELF, capacity_se1_tram, position_in_consist ) {
    0:  return ((param_capacity*50)/2);
        return ((param_capacity*60)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_se1_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_se1_tram, extra_callback_info1) {
    0:  return item_se1_tram;
    1:  return item_se1_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

switch (FEAT_ROADVEHS, SELF, decay_se1_tram, (param_aging)) {
    0:  return 120;
    1: return 110;
    2: return 100;
    3:    return 90;
        return 100; //default
} 

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_se1_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_YR1), string(STR_ETRAM_3));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              10;
    cargo_age_period:           120;
    cost_factor:                156;
    running_cost_factor:        80;
    speed:                      70 km/h;
    power:                      130 hp;
    cargo_capacity:             110;
    introduction_date:          date(1920,07,01);
    model_life:                 50;
    vehicle_life:               60;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     20 ton;
    }
graphics {

    cargo_capacity:                 capacity_se1_tram;
    purchase_cargo_capacity:        ((param_capacity*110)/2)/2;
    default:                        switch_se1_stack;
    length:                         switch_length_se1_tram;
    cargo_age_period:               decay_se1_tram;
    running_cost_factor:            switch_se1_runcost;
    purchase_running_cost_factor:   switch_se1_powercost;
    articulated_part:               switch_se1_tram;
    visual_effect:                  spark_se1_tram;
    purchase:                       switch_se1_purchase;
    cost_factor:                    ((param_buycost*156)/4);
    }
}
}

// c2 'B' tram graphics

switch (FEAT_ROADVEHS, SELF, style_c2_A, random_bits) {
    0..239:        spritegroup_b1_tram_04;
    240..255:      spritegroup_b2_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_c2_B, random_bits) {
    0..65:        spritegroup_b1_tram_04;
    64..255:      spritegroup_b2_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_c2_C, random_bits) {
    0..239:        spritegroup_b2_tram_04;
    240..255:      spritegroup_b3_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_c2_D, random_bits) {
    0..65:        spritegroup_b2_tram_04;
    64..255:      spritegroup_b3_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_c2_E, random_bits) {
    0..239:        spritegroup_b3_tram_04;
    240..255:      spritegroup_b2_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_c2_F, random_bits) {
    0..65:        spritegroup_b3_tram_04;
    64..255:      spritegroup_b5_tram_04;
}
switch (FEAT_ROADVEHS, SELF, style_c2_G, random_bits) {
    0..239:        spritegroup_b5_tram_04;
    240..255:      spritegroup_b3_tram_04;
}

switch (FEAT_ROADVEHS, SELF, switch_c2_style, build_year){  //style by build year
    0..1924:    style_c2_A;
    1925..1934: style_c2_B;
    1935..1939: style_c2_C;
    1940..1944: style_c2_D;
    1945..1949: style_c2_E;
    1950..1955: style_c2_F;
    default:    style_c2_G;
}

switch(FEAT_ROADVEHS, SELF, switch_c2_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_c2_style;
    1:  spriteset_x_greeb_1;
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_c2_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_B4;
    1:  switch_fuel_icon;
}

//c2 'B' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_c2_tram, position_in_consist) {
    0:  return 6;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_c2_tram, position_in_consist ) {
    0:  return ((param_capacity*55)/2);
        return ((param_capacity*55)/2); //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_c2_tram, extra_callback_info1) {
    0:  return item_c2_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_fftv ==1){
item(FEAT_ROADVEHS, item_c2_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KM1), string(STR_FTRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              17;
    cost_factor:                118;
    running_cost_factor:        80;
    speed:                      75 km/h;
    power:                      140 hp;
    cargo_capacity:             45;
    introduction_date:          date(1935,07,01);
    model_life:                 40;
    vehicle_life:               40;
    reliability_decay:          14;
    tram_type:                  RAIL;
    visual_effect:              VISUAL_EFFECT_DIESEL;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     20 ton;
    }
graphics {
    running_cost_factor:            switch_c2_runcost;
    purchase_running_cost_factor:   switch_c2_powercost;
    cargo_capacity:                 capacity_c2_tram;
    purchase_cargo_capacity:        ((param_capacity*55)/2);
    default:                        switch_c2_stack;
    length:                         switch_length_c2_tram;
    purchase:                       switch_purchase_c2_tram;
    cost_factor:                    ((param_buycost*118)/4);
    }
}
}

// e2 'B' parcel graphics

spriteset(spriteset_tram_c3_01, "gfx/tram/tram_C3_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c3_o_01, "gfx/tram/tram_C3_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_c3_parcel_01 {
    loaded:  [spriteset_tram_c3_01];
    loading: [spriteset_tram_c3_o_01];
}

spriteset(spriteset_tram_c3_02, "gfx/tram/tram_C3_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c3_o_02, "gfx/tram/tram_C3_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_c3_parcel_02 {
    loaded:  [spriteset_tram_c3_02];
    loading: [spriteset_tram_c3_o_02];
}

spriteset(spriteset_tram_c3_03, "gfx/tram/tram_C3_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c3_o_03, "gfx/tram/tram_C3_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_c3_parcel_03 {
    loaded:  [spriteset_tram_c3_03];
    loading: [spriteset_tram_c3_o_03];
}

spriteset(spriteset_tram_c3_04, "gfx/tram/tram_C3_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c3_o_04, "gfx/tram/tram_C3_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_c3_parcel_04 {
    loaded:  [spriteset_tram_c3_04];
    loading: [spriteset_tram_c3_o_04];
}

switch (FEAT_ROADVEHS, SELF, style_e2_parcel_A, random_bits) {
    0..239:        spritegroup_b4_parcel_02;
    240..255:      spritegroup_b4_parcel_03;
}
switch (FEAT_ROADVEHS, SELF, style_e2_parcel_B, random_bits) {
    0..65:        spritegroup_b4_parcel_02;
    64..255:      spritegroup_b4_parcel_03;
}
switch (FEAT_ROADVEHS, SELF, style_e2_parcel_C, random_bits) {
    0..239:        spritegroup_b4_parcel_03;
    240..255:      spritegroup_b4_parcel_04;
}
switch (FEAT_ROADVEHS, SELF, style_e2_parcel_D, random_bits) {
    0..127:        spritegroup_b4_parcel_03;
    128..255:      spritegroup_b4_parcel_04;
}
switch (FEAT_ROADVEHS, SELF, style_e2_parcel_E, random_bits) {
    0..239:        spritegroup_b4_parcel_04;
    240..255:      spritegroup_b4_parcel_03;
}
switch (FEAT_ROADVEHS, SELF, style_e2_parcel_F, random_bits) {
    0..65:        spritegroup_b4_parcel_04;
    64..255:      spritegroup_c3_parcel_02;
}
switch (FEAT_ROADVEHS, SELF, style_e2_parcel_G, random_bits) {
    0..239:        spritegroup_c3_parcel_02;
    240..255:      spritegroup_b4_parcel_04;
}

switch (FEAT_ROADVEHS, SELF, switch_e2_parcel_style, build_year){  //style by build year
    0..1924:    style_e2_parcel_A;
    1925..1934: style_e2_parcel_B;
    1935..1939: style_e2_parcel_C;
    1940..1944: style_e2_parcel_D;
    1945..1949: style_e2_parcel_E;
    1950..1959: style_e2_parcel_F;
    default:    style_e2_parcel_G;
}

switch(FEAT_ROADVEHS, SELF, switch_e2_par_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_e2_parcel_style;
    1:  switch_e_panto_6;
}

spriteset(spriteset_tram_B5_par_a_p, "gfx/P/tram_B5_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_B5_par_b_p, "gfx/P/tram_B5_b.png") {
    tmpl_p()
}
spriteset(spriteset_tram_B5_par_d_p, "gfx/P/tram_B5_d.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_B5, build_year){  //style by build year
    0..1924:    spriteset_tram_B5_par_a_p;
    1925..1934: spriteset_tram_B5_par_b_p;
    1935..1939: spriteset_tram_B5_par_b_p;
    1940..1944: spriteset_tram_B5_par_b_p;
    1945..1949: spriteset_tram_B5_par_d_p;
    1950..1959: spriteset_tram_B5_par_d_p;
    default:    spriteset_tram_B5_par_d_p;
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_e2_par_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_B5;
    1:  purchase_e_panto_6;
    2:  switch_wire_icon;
}

//e2 'B' mail properties

switch (FEAT_ROADVEHS, SELF, switch_length_e2_parcel, position_in_consist) {
    0:  return 6;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_e2_parcel, position_in_consist ) {
    0:  return ((param_capacity*42)/2);
        return ((param_capacity*42)/2); //default
}


if (param_eltv ==1){
item(FEAT_ROADVEHS, item_e2_parcel) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_YR1), string(STR_ETRAM_5));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:              17;
    cost_factor:                81;
    running_cost_factor:        80;
    speed:                      70 km/h;
    power:                      156 hp;
    cargo_capacity:             42;
    introduction_date:          date(1925,07,01);
    model_life:                 60;
    vehicle_life:               40;
    reliability_decay:          14;
    tram_type:                    ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     18 ton;
    }
graphics {
    running_cost_factor:            switch_e2_runcost;
    purchase_running_cost_factor:   switch_e2_powercost;
    cargo_capacity:                 ((param_capacity*42)/2);
    purchase_cargo_capacity:        ((param_capacity*42)/2);
    default:                        switch_e2_par_stack;
    length:                         switch_length_e2_parcel;
    purchase:                       switch_purchase_e2_par_tram;
    cost_factor:                    ((param_buycost*81)/4);

    }
}
}

// 3rd generation 'C' trams

spriteset(spriteset_tram_c1_01, "gfx/tram/tram_C1_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c1_o_01, "gfx/tram/tram_C1_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_c1_tram_01 {
    loaded:  [spriteset_tram_c1_01];
    loading: [spriteset_tram_c1_o_01];
}

spriteset(spriteset_tram_c1_02, "gfx/tram/tram_C1_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c1_o_02, "gfx/tram/tram_C1_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_c1_tram_02 {
    loaded:  [spriteset_tram_c1_02];
    loading: [spriteset_tram_c1_o_02];
}

spriteset(spriteset_tram_c1_03, "gfx/tram/tram_C1_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c1_o_03, "gfx/tram/tram_C1_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_c1_tram_03 {
    loaded:  [spriteset_tram_c1_03];
    loading: [spriteset_tram_c1_o_03];
}

spriteset(spriteset_tram_c1_04, "gfx/tram/tram_C1_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c1_o_04, "gfx/tram/tram_C1_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_c1_tram_04 {
    loaded:  [spriteset_tram_c1_04];
    loading: [spriteset_tram_c1_o_04];
}

spriteset(spriteset_tram_c2_01, "gfx/tram/tram_C2_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c2_o_01, "gfx/tram/tram_C2_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_c2_tram_01 {
    loaded:  [spriteset_tram_c2_01];
    loading: [spriteset_tram_c2_o_01];
}

spriteset(spriteset_tram_c2_02, "gfx/tram/tram_C2_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c2_o_02, "gfx/tram/tram_C2_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_c2_tram_02 {
    loaded:  [spriteset_tram_c2_02];
    loading: [spriteset_tram_c2_o_02];
}

spriteset(spriteset_tram_c2_03, "gfx/tram/tram_C2_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c2_o_03, "gfx/tram/tram_C2_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_c2_tram_03 {
    loaded:  [spriteset_tram_c2_03];
    loading: [spriteset_tram_c2_o_03];
}

spriteset(spriteset_tram_c2_04, "gfx/tram/tram_C2_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c2_o_04, "gfx/tram/tram_C2_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_c2_tram_04 {
    loaded:  [spriteset_tram_c2_04];
    loading: [spriteset_tram_c2_o_04];
}



spriteset(spriteset_tram_c4_01, "gfx/tram/tram_C4_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c4_o_01, "gfx/tram/tram_C4_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_c4_tram_01 {
    loaded:  [spriteset_tram_c4_01];
    loading: [spriteset_tram_c4_o_01];
}

spriteset(spriteset_tram_c4_02, "gfx/tram/tram_C4_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c4_o_02, "gfx/tram/tram_C4_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_c4_tram_02 {
    loaded:  [spriteset_tram_c4_02];
    loading: [spriteset_tram_c4_o_02];
}

spriteset(spriteset_tram_c4_03, "gfx/tram/tram_C4_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c4_o_03, "gfx/tram/tram_C4_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_c4_tram_03 {
    loaded:  [spriteset_tram_c4_03];
    loading: [spriteset_tram_c4_o_03];
}

spriteset(spriteset_tram_c4_04, "gfx/tram/tram_C4_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_c4_o_04, "gfx/tram/tram_C4_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_c4_tram_04 {
    loaded:  [spriteset_tram_c4_04];
    loading: [spriteset_tram_c4_o_04];
}


// e3 'C' tram graphics

switch (FEAT_ROADVEHS, SELF, switch_e3_style, random_bits){
    0..127:     spritegroup_c1_tram_02;
    128..255:   spritegroup_c2_tram_02;
}

switch(FEAT_ROADVEHS, SELF, switch_e3_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_e3_style;
    1:  switch_e_panto_6;
}

spriteset(spriteset_tram_C2_a_p, "gfx/P/tram_C2_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_C2_b_p, "gfx/P/tram_C2_b.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_C2, build_year){
    0..1964:     spriteset_tram_C2_a_p;
    default:   spriteset_tram_C2_b_p;
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_e3_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_C2;
    1:  purchase_e_panto_6;
    2:  switch_wire_icon;
}

//e3 'C' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_e3_tram, position_in_consist) {
    0:  return 6;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_e3_tram, position_in_consist ) {
    0:  return ((param_capacity*68)/2);
        return ((param_capacity*68)/2); //default
}

/*
//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_e3_tram, extra_callback_info1) {
    0:  return item_e3_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
*/

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_e3_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_YR1), string(STR_ETRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              17;
    cost_factor:                98;
    running_cost_factor:        80;
    speed:                      80 km/h;
    power:                      208 hp;
    cargo_capacity:             68;
    introduction_date:          date(1955,07,01);
    model_life:                 70;
    vehicle_life:               40;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     18 ton;
    }
graphics {
    running_cost_factor:            switch_e3_runcost;
    purchase_running_cost_factor:   switch_e3_powercost;
    cargo_capacity:                 capacity_e3_tram;
    purchase_cargo_capacity:        ((param_capacity*68)/2);
    default:                        switch_e3_stack;
    length:                         switch_length_e3_tram;
    purchase:                       switch_purchase_e3_tram;
    cost_factor:                    ((param_buycost*98)/4);
    }
}
}

// me2 'C' tram graphics

switch (FEAT_ROADVEHS, SELF, style_me2_A, position_in_consist ) {
    0:  spritegroup_c1_tram_01;
    1:  spritegroup_c1_tram_03;
        spritegroup_c1_tram_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_me2_B, position_in_consist ) {
    0:  spritegroup_c2_tram_01;
    1:  spritegroup_c2_tram_03;
        spritegroup_c2_tram_04; //default
}

switch (FEAT_ROADVEHS, PARENT, switch_me2_style, random_bits){
    0..127:     style_me2_A;
    128..255:   style_me2_B;
}

switch (FEAT_ROADVEHS, SELF, switch_me2_panto, position_in_consist ) {
    0:  switch_e_panto_4;
        spriteset_x_null; //default
}

switch(FEAT_ROADVEHS, SELF, switch_me2_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_me2_style;
    1:  switch_me2_panto;
}

spriteset(spriteset_tram_me2_p, "gfx/P/tram_me2.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_me2_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_me2_p;
    1:  switch_pole_front_p;
    2:  switch_wire_icon;
}

//me2 'C' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_me2_tram, position_in_consist) {
    0:  return 4;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_me2_tram, position_in_consist ) {
    0:  return ((param_capacity*40)/2);
    1:  return ((param_capacity*60)/2);
    2:  return ((param_capacity*60)/2);
        return ((param_capacity*40)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_me2_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
    2:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_me2_tram, extra_callback_info1) {
    0:  return item_me2_tram;
    1:  return item_me2_tram;
    2:  return item_me2_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

switch (FEAT_ROADVEHS, SELF, decay_me2_tram, (param_aging)) {
    0:  return 160;
    1: return 133;
    2: return 120;
    3:    return 107;
        return 160; //default
}

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_me2_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KM1), string(STR_ETRAM_3));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              15;
    cargo_age_period:           160;
    cost_factor:                152;
    running_cost_factor:        80;
    speed:                      75 km/h;
    power:                      195 hp;
    cargo_capacity:             160;
    introduction_date:          date(1940,07,01);
    model_life:                 30;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     50 ton;
    }
graphics {

    cargo_capacity:                 capacity_me2_tram;
    purchase_cargo_capacity:        (((param_capacity*160)/2)/3);
    default:                        switch_me2_stack;
    length:                         switch_length_me2_tram;
    cargo_age_period:               decay_me2_tram;
    running_cost_factor:            switch_me2_runcost;
    purchase_running_cost_factor:   switch_me2_powercost;
    articulated_part:               switch_me2_tram;
    visual_effect:                  spark_me2_tram;
    purchase:                       switch_me2_purchase;
    cost_factor:                    ((param_buycost*152)/4);
    }
}
}

// c3 'C' tram graphics

switch(FEAT_ROADVEHS, SELF, style_c3_A, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spritegroup_c4_tram_01;
    1:  spriteset_x_greeb_1;
}
switch(FEAT_ROADVEHS, SELF, style_c3_B, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spritegroup_c4_tram_02;
    1:  spriteset_x_greeb_2;
}
switch(FEAT_ROADVEHS, SELF, style_c3_C, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spritegroup_c4_tram_03;
    1:  spriteset_x_greeb_3;
}
switch(FEAT_ROADVEHS, SELF, style_c3_D, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spritegroup_c4_tram_04;
    1:  spriteset_x_null;
}

random_switch (FEAT_ROADVEHS, SELF, randup_c3_D, bitmask(TRIGGER_VEHICLE_SERVICE)){  //repaint to style C
    4:  style_c3_C;
}
switch (FEAT_ROADVEHS, SELF, testup_c3_D, current_year){
    0..1995:    style_c3_C;
    default:    randup_c3_D;
}
random_switch (FEAT_ROADVEHS, SELF, randdown_c3_D, bitmask(TRIGGER_VEHICLE_SERVICE)){
    dependent:  randup_c3_D;
    4:          style_c3_C;
}
switch (FEAT_ROADVEHS, SELF, testdown_c3_D, current_year){
    0..1995:    randdown_c3_D;
    default:    style_c3_D;
}
random_switch (FEAT_ROADVEHS, SELF, maybe_c3_D){
    dependent:  randup_c3_D;
    3:          testup_c3_D;
    1:          testdown_c3_D;
}

random_switch (FEAT_ROADVEHS, SELF, randup_c3_C, bitmask(TRIGGER_VEHICLE_SERVICE)){  //repaint to style C
    4:  style_c3_B;
}
switch (FEAT_ROADVEHS, SELF, testup_c3_C, current_year){
    0..1995:    style_c3_B;
    default:    randup_c3_C;
}
random_switch (FEAT_ROADVEHS, SELF, randdown_c3_C, bitmask(TRIGGER_VEHICLE_SERVICE)){
    dependent:  randup_c3_C;
    4:          style_c3_B;
}
switch (FEAT_ROADVEHS, SELF, testdown_c3_C, current_year){
    0..1995:    randdown_c3_C;
    default:    style_c3_C;
}
random_switch (FEAT_ROADVEHS, SELF, maybe_c3_C){
    dependent:  randup_c3_C;
    3:          testup_c3_C;
    1:          testdown_c3_C;
}

random_switch (FEAT_ROADVEHS, SELF, randup_c3_B, bitmask(TRIGGER_VEHICLE_SERVICE)){  //repaint to style B
    4:  style_c3_A;
}
switch (FEAT_ROADVEHS, SELF, testup_c3_B, current_year){
    0..1977:    style_c3_A;
    default:    randup_c3_B;
}
random_switch (FEAT_ROADVEHS, SELF, randdown_c3_B, bitmask(TRIGGER_VEHICLE_SERVICE)){
    dependent:  randup_c3_B;
    4:          style_c3_A;
}
switch (FEAT_ROADVEHS, SELF, testdown_c3_B, current_year){
    0..1977:    randdown_c3_B;
    default:    style_c3_B;
}
random_switch (FEAT_ROADVEHS, SELF, maybe_c3_B){
    dependent:  randup_c3_B;
    3:          testup_c3_B;
    1:          testdown_c3_B;
}


switch (FEAT_ROADVEHS, SELF, switch_c3_style, build_year){  //style by build year
    0..1995:    maybe_c3_B;
    1996..2014: maybe_c3_C;
    default:    maybe_c3_D;
}

spriteset(spriteset_tram_C4_a_p, "gfx/P/tram_C4_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_C4_b_p, "gfx/P/tram_C4_b.png") {
    tmpl_p()
}
spriteset(spriteset_tram_C4_c_p, "gfx/P/tram_C4_c.png") {
    tmpl_p()
}
spriteset(spriteset_tram_C4_d_p, "gfx/P/tram_C4_d.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_C4, build_year){  //style by build year
    0..1977:    spriteset_tram_C4_a_p;
    1978..1995: spriteset_tram_C4_b_p;
    1996..2014: spriteset_tram_C4_c_p;
    default:    spriteset_tram_C4_d_p;
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_c3_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_C4;
    1:  switch_fuel_icon;
}

//c3 'C' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_c3_tram, position_in_consist) {
    0:  return 6;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_c3_tram, position_in_consist ) {
    0:  return ((param_capacity*55)/2);
        return ((param_capacity*55)/2); //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_c3_tram, extra_callback_info1) {
    0:  return item_c3_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_fftv ==1){
item(FEAT_ROADVEHS, item_c3_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_YR1), string(STR_FTRAM_2));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              17;
    cost_factor:                127;
    running_cost_factor:        80;
    speed:                      90 km/h;
    power:                      180 hp;
    cargo_capacity:             50;
    introduction_date:          date(1960,07,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               40;
    reliability_decay:          14;
    tram_type:                  RAIL;
    visual_effect:              VISUAL_EFFECT_DIESEL;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     25 ton;
    }
graphics {
    running_cost_factor:            switch_c3_runcost;
    purchase_running_cost_factor:   switch_c3_powercost;
    cargo_capacity:                 capacity_c3_tram;
    purchase_cargo_capacity:        ((param_capacity*60)/2);
    default:                        switch_c3_style;
    length:                         switch_length_c3_tram;
    random_trigger:                 maybe_c3_B;
    purchase:                       switch_purchase_c3_tram;
    cost_factor:                    ((param_buycost*127)/4);
    }
}
}

// me2 'C' parcel graphics

switch (FEAT_ROADVEHS, SELF, style_me2_parcel, position_in_consist ) {
    0:  spritegroup_c3_parcel_01;
    1:  spritegroup_c3_parcel_03;
        spritegroup_c3_parcel_04; //default
}

switch(FEAT_ROADVEHS, SELF, switch_me2_parcel_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  style_me2_parcel;
    1:  switch_me2_panto;
}

spriteset(spriteset_tram_me2_par_p, "gfx/P/tram_me2_par.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_me2_par_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_me2_par_p;
    1:  switch_pole_front_p;
    2:  switch_wire_icon;
}

//me2 'C' parcel properties


switch (FEAT_ROADVEHS, SELF, capacity_me2_parcel, position_in_consist ) {
    0:  return ((param_capacity*20)/2);
    1:  return ((param_capacity*45)/2);
    2:  return ((param_capacity*45)/2);
        return ((param_capacity*40)/2); //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_me2_parcel, extra_callback_info1) {
    0:  return item_me2_parcel;
    1:  return item_me2_parcel;
    2:  return item_me2_parcel;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}


if (param_eltv ==1){
item(FEAT_ROADVEHS, item_me2_parcel) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KD1), string(STR_ETRAM_5));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:              15;
    cargo_age_period:           160;
    cost_factor:                143;
    running_cost_factor:        80;
    speed:                      75 km/h;
    power:                      195 hp;
    cargo_capacity:             110;
    introduction_date:          date(1950,07,01);
    model_life:                 30;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     50 ton;
    }
graphics {

    cargo_capacity:                 capacity_me2_parcel;
    purchase_cargo_capacity:        (((param_capacity*110)/2)/3);
    default:                        switch_me2_parcel_stack;
    length:                         switch_length_me2_tram;
    running_cost_factor:            switch_me2_runcost;
    purchase_running_cost_factor:   switch_me2_powercost;
    articulated_part:               switch_me2_parcel;
    visual_effect:                  spark_me2_tram;
    purchase:                       switch_me2_par_purchase;
    cost_factor:                    ((param_buycost*143)/4);
    }
}
}

// 4th generation 'D' trams

spriteset(spriteset_tram_d1_01, "gfx/tram/tram_D1_R_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d1_o_01, "gfx/tram/tram_D1_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_d1_tram_01 {
    loaded:  [spriteset_tram_d1_01];
    loading: [spriteset_tram_d1_o_01];
}

spriteset(spriteset_tram_d1_02, "gfx/tram/tram_D1_R_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d1_o_02, "gfx/tram/tram_D1_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_d1_tram_02 {
    loaded:  [spriteset_tram_d1_02];
    loading: [spriteset_tram_d1_o_02];
}

spriteset(spriteset_tram_d1_03, "gfx/tram/tram_D1_R_03.png") {
    tmpl_8()
}    
spriteset(spriteset_tram_d1_o_03, "gfx/tram/tram_D1_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d1_tram_03 {
    loaded:  [spriteset_tram_d1_03];
    loading: [spriteset_tram_d1_o_03];
}

spriteset(spriteset_tram_d1_04, "gfx/tram/tram_D1_R_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d1_o_04, "gfx/tram/tram_D1_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d1_tram_04 {
    loaded:  [spriteset_tram_d1_04];
    loading: [spriteset_tram_d1_o_04];
}

spriteset(spriteset_tram_d2_01, "gfx/tram/tram_D2_R_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d2_o_01, "gfx/tram/tram_D2_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_d2_tram_01 {
    loaded:  [spriteset_tram_d2_01];
    loading: [spriteset_tram_d2_o_01];
}

spriteset(spriteset_tram_d2_02, "gfx/tram/tram_D2_R_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d2_o_02, "gfx/tram/tram_D2_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_d2_tram_02 {
    loaded:  [spriteset_tram_d2_02];
    loading: [spriteset_tram_d2_o_02];
}

spriteset(spriteset_tram_d2_03, "gfx/tram/tram_D2_R_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d2_o_03, "gfx/tram/tram_D2_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d2_tram_03 {
    loaded:  [spriteset_tram_d2_03];
    loading: [spriteset_tram_d2_o_03];
}

spriteset(spriteset_tram_d2_04, "gfx/tram/tram_D2_R_04.png") {
    tmpl_8()
}

spriteset(spriteset_tram_d2_o_04, "gfx/tram/tram_D2_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d2_tram_04 {
    loaded:  [spriteset_tram_d2_04];
    loading: [spriteset_tram_d2_o_04];
}




spriteset(spriteset_tram_d3_03, "gfx/tram/tram_D3_R_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d3_o_03, "gfx/tram/tram_D3_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d3_tram_03 {
    loaded:  [spriteset_tram_d3_03];
    loading: [spriteset_tram_d3_o_03];
}

spriteset(spriteset_tram_d3_04, "gfx/tram/tram_D3_R_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d3_o_04, "gfx/tram/tram_D3_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d3_tram_04 {
    loaded:  [spriteset_tram_d3_04];
    loading: [spriteset_tram_d3_o_04];
}

spriteset(spriteset_tram_d4_01, "gfx/tram/tram_D4_R_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d4_o_01, "gfx/tram/tram_D4_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_d4_tram_01 {
    loaded:  [spriteset_tram_d4_01];
    loading: [spriteset_tram_d4_o_01];
}

spriteset(spriteset_tram_d4_02, "gfx/tram/tram_D4_R_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d4_o_02, "gfx/tram/tram_D4_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_d4_tram_02 {
    loaded:  [spriteset_tram_d4_02];
    loading: [spriteset_tram_d4_o_02];
}

spriteset(spriteset_tram_d4_03, "gfx/tram/tram_D4_R_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d4_o_03, "gfx/tram/tram_D4_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d4_tram_03 {
    loaded:  [spriteset_tram_d4_03];
    loading: [spriteset_tram_d4_o_03];
}

spriteset(spriteset_tram_d4_04, "gfx/tram/tram_D4_R_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d4_o_04, "gfx/tram/tram_D4_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d4_tram_04 {
    loaded:  [spriteset_tram_d4_04];
    loading: [spriteset_tram_d4_o_04];
}

spriteset(spriteset_tram_d5_01, "gfx/tram/tram_D5_R_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d5_o_01, "gfx/tram/tram_D5_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_d5_tram_01 {
    loaded:  [spriteset_tram_d5_01];
    loading: [spriteset_tram_d5_o_01];
}

spriteset(spriteset_tram_d5_02, "gfx/tram/tram_D5_R_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d5_o_02, "gfx/tram/tram_D5_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_d5_tram_02 {
    loaded:  [spriteset_tram_d5_02];
    loading: [spriteset_tram_d5_o_02];
}

spriteset(spriteset_tram_d5_03, "gfx/tram/tram_D5_R_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d5_o_03, "gfx/tram/tram_D5_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d5_tram_03 {
    loaded:  [spriteset_tram_d5_03];
    loading: [spriteset_tram_d5_o_03];
}

spriteset(spriteset_tram_d5_04, "gfx/tram/tram_D5_R_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d5_o_04, "gfx/tram/tram_D5_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d5_tram_04 {
    loaded:  [spriteset_tram_d5_04];
    loading: [spriteset_tram_d5_o_04];
}

spriteset(spriteset_tram_d1_x_03, "gfx/tram/tram_D1_XR_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d1_xo_03, "gfx/tram/tram_D1_XRO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d1_tram_x_03 {
    loaded:  [spriteset_tram_d1_x_03];
    loading: [spriteset_tram_d1_xo_03];
}

spriteset(spriteset_tram_d1_x_04, "gfx/tram/tram_D1_XR_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d1_xo_04, "gfx/tram/tram_D1_XRO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d1_tram_x_04 {
    loaded:  [spriteset_tram_d1_x_04];
    loading: [spriteset_tram_d1_xo_04];
}

spriteset(spriteset_tram_d2_x_03, "gfx/tram/tram_D2_XR_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d2_xo_03, "gfx/tram/tram_D2_XRO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d2_tram_x_03 {
    loaded:  [spriteset_tram_d2_x_03];
    loading: [spriteset_tram_d2_xo_03];
}

spriteset(spriteset_tram_d2_x_04, "gfx/tram/tram_D2_XR_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d2_xo_04, "gfx/tram/tram_D2_XRO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d2_tram_x_04 {
    loaded:  [spriteset_tram_d2_x_04];
    loading: [spriteset_tram_d2_xo_04];
}

spriteset(spriteset_tram_d3_x_03, "gfx/tram/tram_D3_XR_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d3_xo_03, "gfx/tram/tram_D3_XRO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d3_tram_x_03 {
    loaded:  [spriteset_tram_d3_x_03];
    loading: [spriteset_tram_d3_xo_03];
}

spriteset(spriteset_tram_d3_x_04, "gfx/tram/tram_D3_XR_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d3_xo_04, "gfx/tram/tram_D3_XRO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d3_tram_x_04 {
    loaded:  [spriteset_tram_d3_x_04];
    loading: [spriteset_tram_d3_xo_04];
}

spriteset(spriteset_tram_d4_x_03, "gfx/tram/tram_D4_XR_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d4_xo_03, "gfx/tram/tram_D4_XRO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d4_tram_x_03 {
    loaded:  [spriteset_tram_d4_x_03];
    loading: [spriteset_tram_d4_xo_03];
}

spriteset(spriteset_tram_d4_x_04, "gfx/tram/tram_D4_XR_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d4_xo_04, "gfx/tram/tram_D4_XRO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d4_tram_x_04 {
    loaded:  [spriteset_tram_d4_x_04];
    loading: [spriteset_tram_d4_xo_04];
}

spriteset(spriteset_tram_d5_x_03, "gfx/tram/tram_D5_XR_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d5_xo_03, "gfx/tram/tram_D5_XRO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_d5_tram_x_03 {
    loaded:  [spriteset_tram_d5_x_03];
    loading: [spriteset_tram_d5_xo_03];
}

spriteset(spriteset_tram_d5_x_04, "gfx/tram/tram_D5_XR_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d5_xo_04, "gfx/tram/tram_D5_XRO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_d5_tram_x_04 {
    loaded:  [spriteset_tram_d5_x_04];
    loading: [spriteset_tram_d5_xo_04];
}


// e4 'D' tram graphics

switch (FEAT_ROADVEHS, SELF, style_e4_A, build_year) {
    0..1980:        spritegroup_d1_tram_04;
    default:        spritegroup_d1_tram_x_04;
}
switch (FEAT_ROADVEHS, SELF, style_e4_B, build_year) {
    0..1980:        spritegroup_d2_tram_04;
    default:        spritegroup_d2_tram_x_04;
}
switch (FEAT_ROADVEHS, SELF, style_e4_C, build_year) {
    0..1980:        spritegroup_d2_tram_03;
    default:        spritegroup_d2_tram_x_03;
}
switch (FEAT_ROADVEHS, SELF, style_e4_D, build_year) {
    0..1980:        spritegroup_d4_tram_04;
    default:        spritegroup_d4_tram_x_04;
}
switch (FEAT_ROADVEHS, SELF, style_e4_E, build_year) {
    0..1980:        spritegroup_d1_tram_03;
    default:        spritegroup_d1_tram_x_03;
}
switch (FEAT_ROADVEHS, SELF, style_e4_F_A, build_year) {
    0..1980:        spritegroup_d3_tram_03;
    default:        spritegroup_d3_tram_x_03;
}
switch (FEAT_ROADVEHS, SELF, style_e4_F_B, build_year) {
    0..1980:        spritegroup_d3_tram_04;
    default:        spritegroup_d3_tram_x_04;
}
switch (FEAT_ROADVEHS, SELF, style_e4_F, random_bits) {
    0..127:        style_e4_F_A;
    128..255:      style_e4_F_B;
}
switch (FEAT_ROADVEHS, SELF, style_e4_G, build_year) {
    0..1980:        spritegroup_d4_tram_03;
    default:        spritegroup_d4_tram_x_03;
}

random_switch (FEAT_ROADVEHS, SELF, randup_e4_G, bitmask(TRIGGER_VEHICLE_SERVICE)){  //repaint to style G
    4:  style_e4_F;
}
switch (FEAT_ROADVEHS, SELF, testup_e4_G, current_year){
    0..2014:    style_e4_F;
    default:    randup_e4_G;
}
random_switch (FEAT_ROADVEHS, SELF, randdown_e4_G, bitmask(TRIGGER_VEHICLE_SERVICE)){
    dependent:  randup_e4_G;
    4:          style_e4_F;
}
switch (FEAT_ROADVEHS, SELF, testdown_e4_G, current_year){
    0..2014:    randdown_e4_G;
    default:    style_e4_G;
}
random_switch (FEAT_ROADVEHS, SELF, maybe_e4_G){
    dependent:  randup_e4_G;
    3:          testup_e4_G;
    1:          testdown_e4_G;
}

random_switch (FEAT_ROADVEHS, SELF, randup_e4_F, bitmask(TRIGGER_VEHICLE_SERVICE)){  //repaint to style F
    4:  style_e4_E;
}
switch (FEAT_ROADVEHS, SELF, testup_e4_F, current_year){
    0..2004:    style_e4_E;
    default:    randup_e4_F;
}
random_switch (FEAT_ROADVEHS, SELF, randdown_e4_F, bitmask(TRIGGER_VEHICLE_SERVICE)){
    dependent:  randup_e4_F;
    4:          style_e4_E;
}
switch (FEAT_ROADVEHS, SELF, testdown_e4_F, current_year){
    0..2004:    randdown_e4_F;
    default:    style_e4_F;
}
random_switch (FEAT_ROADVEHS, SELF, maybe_e4_F){
    dependent:  randup_e4_F;
    3:          testup_e4_F;
    1:          testdown_e4_F;
}

random_switch (FEAT_ROADVEHS, SELF, randup_e4_E, bitmask(TRIGGER_VEHICLE_SERVICE)){  //repaint to style E
    4:  style_e4_D;
}
switch (FEAT_ROADVEHS, SELF, testup_e4_E, current_year){
    0..1997:    style_e4_D;
    default:    randup_e4_E;
}
random_switch (FEAT_ROADVEHS, SELF, randdown_e4_E, bitmask(TRIGGER_VEHICLE_SERVICE)){
    dependent:  randup_e4_E;
    4:          style_e4_D;
}
switch (FEAT_ROADVEHS, SELF, testdown_e4_E, current_year){
    0..1997:    randdown_e4_E;
    default:    maybe_e4_F;
}
random_switch (FEAT_ROADVEHS, SELF, maybe_e4_E){
    dependent:  randup_e4_E;
    3:          testup_e4_E;
    1:          testdown_e4_E;
}

random_switch (FEAT_ROADVEHS, SELF, randup_e4_D, bitmask(TRIGGER_VEHICLE_SERVICE)){  //repaint to style D
    4:  style_e4_C;
}
switch (FEAT_ROADVEHS, SELF, testup_e4_D, current_year){
    0..1989:    style_e4_C;
    default:    randup_e4_D;
}
random_switch (FEAT_ROADVEHS, SELF, randdown_e4_D, bitmask(TRIGGER_VEHICLE_SERVICE)){
    dependent:  randup_e4_D;
    4:          style_e4_C;
}
switch (FEAT_ROADVEHS, SELF, testdown_e4_D, current_year){
    0..1989:    randdown_e4_D;
    default:     maybe_e4_E;
}
random_switch (FEAT_ROADVEHS, SELF, maybe_e4_D){
    dependent:  randup_e4_D;
    3:          testup_e4_D;
    1:          testdown_e4_D;
}

random_switch (FEAT_ROADVEHS, SELF, randup_e4_C, bitmask(TRIGGER_VEHICLE_SERVICE)){  //repaint to style C
    4:  style_e4_B;
}
switch (FEAT_ROADVEHS, SELF, testup_e4_C, current_year){
    0..1984:    style_e4_B;
    default:    randup_e4_C;
}
random_switch (FEAT_ROADVEHS, SELF, randdown_e4_C, bitmask(TRIGGER_VEHICLE_SERVICE)){
    dependent:  randup_e4_C;
    4:          style_e4_B;
}
switch (FEAT_ROADVEHS, SELF, testdown_e4_C, current_year){
    0..1984:    randdown_e4_C;
    default:    maybe_e4_D;
}
random_switch (FEAT_ROADVEHS, SELF, maybe_e4_C){
    dependent:  randup_e4_C;
    3:          testup_e4_C;
    1:          testdown_e4_C;
}


random_switch (FEAT_ROADVEHS, SELF, randup_e4_B, bitmask(TRIGGER_VEHICLE_SERVICE)){  //repaint to style B
    4:  style_e4_A;
}
switch (FEAT_ROADVEHS, SELF, testup_e4_B, current_year){
    0..1979:    style_e4_A;
    default:    randup_e4_B;
}
random_switch (FEAT_ROADVEHS, SELF, randdown_e4_B, bitmask(TRIGGER_VEHICLE_SERVICE)){
    dependent:  randup_e4_B;
    4:          style_e4_A;
}
switch (FEAT_ROADVEHS, SELF, testdown_e4_B, current_year){
    0..1979:    randdown_e4_B;
    default:    maybe_e4_C;
}
random_switch (FEAT_ROADVEHS, SELF, maybe_e4_B){
    dependent:  randup_e4_B;
    3:          testup_e4_B;
    1:          testdown_e4_B;
}


switch (FEAT_ROADVEHS, SELF, switch_e4_style, build_year){  //style by build year
    0..1979:    maybe_e4_B;
    1980..1984: maybe_e4_C;
    1980..1989: maybe_e4_D;
    1990..1997: maybe_e4_E;
    1998..2004: maybe_e4_F;
    2005..2014: maybe_e4_G;
    default:    style_e4_G;
}


switch (FEAT_ROADVEHS, SELF, switch_e4_proto, built_during_preview) {
    1:      spritegroup_d5_tram_04;
            switch_e4_style;
}

switch(FEAT_ROADVEHS, SELF, switch_e4_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_e4_proto;
    1:  switch_e_panto_7;
}

spriteset(spriteset_tram_D1_a_p, "gfx/P/tram_D1_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_D2_b_p, "gfx/P/tram_D2_b.png") {
    tmpl_p()
}
spriteset(spriteset_tram_D2_c_p, "gfx/P/tram_D2_c.png") {
    tmpl_p()
}
spriteset(spriteset_tram_D2_d_p, "gfx/P/tram_D2_d.png") {
    tmpl_p()
}
spriteset(spriteset_tram_D2_e_p, "gfx/P/tram_D2_e.png") {
    tmpl_p()
}
spriteset(spriteset_tram_D2_f_p, "gfx/P/tram_D2_f.png") {
    tmpl_p()
}
spriteset(spriteset_tram_D2_g_p, "gfx/P/tram_D2_g.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_D1, build_year){  //style by build year
    0..1979:    spriteset_tram_D1_a_p;
    1980..1984: spriteset_tram_D2_b_p;
    1980..1989: spriteset_tram_D2_c_p;
    1990..1997: spriteset_tram_D2_d_p;
    1998..2004: spriteset_tram_D2_e_p;
    2005..2014: spriteset_tram_D2_f_p;
    default:    spriteset_tram_D2_g_p;
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_e4_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_D1;
    1:  purchase_e_panto_7;
    2:  switch_wire_icon;
}


//e4 'D' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_e4_tram, position_in_consist) {
    0:  return 8;
    1:  return 8;
        return 8;
}

switch (FEAT_ROADVEHS, SELF, capacity_e4_tram, position_in_consist ) {
    0:  return ((param_capacity*70)/2);
        return ((param_capacity*70)/2); //default
}

/*
//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_e4_tram, extra_callback_info1) {
    0:  return item_e4_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
*/


if (param_eltv ==1){
item(FEAT_ROADVEHS, item_e4_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KD2), string(STR_ETRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              20;
    cargo_age_period:           200;
    cost_factor:                104;
    running_cost_factor:        80;
    speed:                      85 km/h;
    power:                      299 hp;
    cargo_capacity:             70;
    introduction_date:          date(1970,07,01);
    model_life:                 30;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     20 ton;
    }
graphics {
    running_cost_factor:            switch_e4_runcost;
    purchase_running_cost_factor:   switch_e4_powercost;
    cargo_capacity:                 capacity_e4_tram;
    purchase_cargo_capacity:        ((param_capacity*70)/2);
    default:                        switch_e4_stack;
    length:                         switch_length_e4_tram;
    random_trigger:                 maybe_e4_B;
    purchase:                       switch_purchase_e4_tram;
    cost_factor:                    ((param_buycost*104)/4);
    }
}
}

// se2 'D' tram graphics

switch (FEAT_ROADVEHS, SELF, style_se2_A, position_in_consist) {
    0:      spritegroup_d1_tram_01;
            spritegroup_d1_tram_02;
}
switch (FEAT_ROADVEHS, SELF, style_se2_B, position_in_consist) {
    0:      spritegroup_d2_tram_01;
            spritegroup_d2_tram_02;
}
switch (FEAT_ROADVEHS, SELF, style_se2_C, position_in_consist) {
    0:      spritegroup_d4_tram_01;
            spritegroup_d4_tram_02;
}
switch (FEAT_ROADVEHS, SELF, style_se2_X, position_in_consist) {
    0:      spritegroup_d5_tram_01;
            spritegroup_d5_tram_02;
}

switch (FEAT_ROADVEHS, PARENT, switch_se2_style,
  max((date_of_last_service - random_bits*3)/365 - 2, build_year)
){  //style by build year
    0..1979:    style_se2_A;
    1980..2009: style_se2_B;
    2010..2024: style_se2_C;
    default:    style_se2_C;
}


switch (FEAT_ROADVEHS, SELF, switch_se2_proto, built_during_preview) {
    1:      style_se2_X;
            switch_se2_style;
}

switch (FEAT_ROADVEHS, SELF, switch_se2_panto_side_front, position_in_consist) {
    0:      spriteset_f_panto;
            spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_se2_panto_side_rear, position_in_consist) {
    0:      spriteset_x_null;
            spriteset_r_panto_6;
}

switch (FEAT_ROADVEHS, PARENT, switch_se2_panto_side, random_bits ) {
    0..127:     switch_se2_panto_side_front;
    128..255:   switch_se2_panto_side_rear;
}

switch (FEAT_ROADVEHS, SELF, switch_se2_panto, build_year) {
    0..1989:     spriteset_x_null;
    default:     switch_se2_panto_side;
}

switch (FEAT_ROADVEHS, SELF, switch_se2_pole, position_in_consist) {
    0:      switch_pole_front;
            switch_pole_rear;
}


switch(FEAT_ROADVEHS, SELF, switch_se2_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_se2_proto;
    1:  switch_se2_pole;
    2:  switch_se2_panto;
}

switch (FEAT_ROADVEHS, PARENT, spriteset_tram_se2_p, build_year){  //style by build year
    0..1979:    spriteset_tram_se2_a_p;
    1980..2009: spriteset_tram_se2_b_p;
    2010..2024: spriteset_tram_se2_c_p;
    default:    spriteset_tram_se2_b_p;
}

spriteset(spriteset_tram_se2_a_p, "gfx/P/tram_se2_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_se2_b_p, "gfx/P/tram_se2_b.png") {
    tmpl_p()
}
spriteset(spriteset_tram_se2_c_p, "gfx/P/tram_se2_c.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, switch_panto_se2_p, build_year) {
    0..1988:        spriteset_tram_pole_both_p;
    default:        spriteset_tram_panto_front_p;
}

switch(FEAT_ROADVEHS, SELF, switch_se2_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_se2_p;
    1:  switch_panto_se2_p;
    2:  switch_wire_icon;
}


//se2 'D' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_se2_tram, position_in_consist) {
    0:  return 6;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_se2_tram, position_in_consist ) {
    0:  return ((param_capacity*70)/2);
        return ((param_capacity*70)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_se2_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_ELECTRIC; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_se2_tram, extra_callback_info1) {
    0:  return item_se2_tram;
    1:  return item_se2_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

switch (FEAT_ROADVEHS, SELF, decay_se2_tram, (param_aging)) {
    0:  return 160;
    1: return 133;
    2: return 120;
    3:    return 107;
        return 160; //default
} 

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_se2_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_LC2), string(STR_ETRAM_3));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              10;
    cargo_age_period:           160;
    cost_factor:                179;
    running_cost_factor:        80;
    speed:                      80 km/h;
    power:                      260 hp;
    cargo_capacity:             140;
    introduction_date:          date(1965,07,01);
    model_life:                 40;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     32 ton;
    }
graphics {

    cargo_capacity:                 capacity_se2_tram;
    purchase_cargo_capacity:        ((param_capacity*140)/2)/2;
    default:                        switch_se2_stack;
    length:                         switch_length_se2_tram;
    cargo_age_period:               decay_se2_tram;
    running_cost_factor:            switch_se2_runcost;
    purchase_running_cost_factor:   switch_se2_powercost;
    articulated_part:               switch_se2_tram;
    visual_effect:                  spark_se2_tram;
    purchase:                       switch_se2_purchase;
    cost_factor:                    ((param_buycost*179)/4);
    }
}
}

// se2 'D' parcel graphics

spriteset(spriteset_tram_d3_01, "gfx/tram/tram_D3_R_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d3_o_01, "gfx/tram/tram_D3_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_d3_parcel_01 {
    loaded:  [spriteset_tram_d3_01];
    loading: [spriteset_tram_d3_o_01];
}

spriteset(spriteset_tram_d3_02, "gfx/tram/tram_D3_R_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_d3_o_02, "gfx/tram/tram_D3_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_d3_parcel_02 {
    loaded:  [spriteset_tram_d3_02];
    loading: [spriteset_tram_d3_o_02];
}

switch (FEAT_ROADVEHS, SELF, style_se2_parcel, position_in_consist) {
    0:      spritegroup_d3_parcel_01;
            spritegroup_d3_parcel_02;
}

switch(FEAT_ROADVEHS, SELF, switch_se2_parcel_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  style_se2_parcel;
    1:  switch_se2_pole;
    2:  switch_se2_panto;
}

spriteset(spriteset_tram_se2_par_p, "gfx/P/tram_se2_par.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_se2_par_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_se2_par_p;
    1:  switch_panto_se2_p;
    2:  switch_wire_icon;
}

//se2 'D' parcel properties


switch (FEAT_ROADVEHS, SELF, capacity_se2_parcel, position_in_consist ) {
    0:  return ((param_capacity*40)/2);
        return ((param_capacity*40)/2); //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_se2_parcel, extra_callback_info1) {
    0:  return item_se2_parcel;
    1:  return item_se2_parcel;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_se2_parcel) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_LC2), string(STR_ETRAM_5));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:              15;
    cargo_age_period:           160;
    cost_factor:                167;
    running_cost_factor:        80;
    speed:                      80 km/h;
    power:                      260 hp;
    cargo_capacity:             80;
    introduction_date:          date(1970,07,01);
    model_life:                 40;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     32 ton;
    }
graphics {

    cargo_capacity:             capacity_se2_parcel;
    purchase_cargo_capacity:    ((param_capacity*80)/2)/2;
    default:                    switch_se2_parcel_stack;
    length:                     switch_length_se2_tram;
    running_cost_factor:            switch_se2_runcost;
    purchase_running_cost_factor:   switch_se2_powercost;
    articulated_part:           switch_se2_parcel;
    visual_effect:              spark_se2_tram;
    purchase:   switch_se2_par_purchase;
    cost_factor:           ((param_buycost*167)/4);
    }
}
}


// 5th generation 'E' trams

spriteset(spriteset_tram_e0_a_01, "gfx/tram/tram_E0_A_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e0_a_o_01, "gfx/tram/tram_E0_A_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_e0_a_tram_01 {
    loaded:  [spriteset_tram_e0_a_01];
    loading: [spriteset_tram_e0_a_o_01];
}

spriteset(spriteset_tram_e0_a_02, "gfx/tram/tram_E0_A_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e0_a_o_02, "gfx/tram/tram_E0_A_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_e0_a_tram_02 {
    loaded:  [spriteset_tram_e0_a_02];
    loading: [spriteset_tram_e0_a_o_02];
}

spriteset(spriteset_tram_e0_a_04, "gfx/tram/tram_E0_A_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e0_a_o_04, "gfx/tram/tram_E0_A_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_e0_a_tram_04 {
    loaded:  [spriteset_tram_e0_a_04];
    loading: [spriteset_tram_e0_a_o_04];
}

spriteset(spriteset_tram_e0_b_01, "gfx/tram/tram_E0_B_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e0_b_o_01, "gfx/tram/tram_E0_B_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_e0_b_tram_01 {
    loaded:  [spriteset_tram_e0_b_01];
    loading: [spriteset_tram_e0_b_o_01];
}

spriteset(spriteset_tram_e0_b_02, "gfx/tram/tram_E0_B_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e0_b_o_02, "gfx/tram/tram_E0_B_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_e0_b_tram_02 {
    loaded:  [spriteset_tram_e0_b_02];
    loading: [spriteset_tram_e0_b_o_02];
}

spriteset(spriteset_tram_e0_b_04, "gfx/tram/tram_E0_B_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e0_b_o_04, "gfx/tram/tram_E0_B_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_e0_b_tram_04 {
    loaded:  [spriteset_tram_e0_b_04];
    loading: [spriteset_tram_e0_b_o_04];
}

spriteset(spriteset_tram_e1_a_01, "gfx/tram/tram_E1_A_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e1_a_o_01, "gfx/tram/tram_E1_A_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_e1_a_tram_01 {
    loaded:  [spriteset_tram_e1_a_01];
    loading: [spriteset_tram_e1_a_o_01];
}

spriteset(spriteset_tram_e1_a_02, "gfx/tram/tram_E1_A_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e1_a_o_02, "gfx/tram/tram_E1_A_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_e1_a_tram_02 {
    loaded:  [spriteset_tram_e1_a_02];
    loading: [spriteset_tram_e1_a_o_02];
}

spriteset(spriteset_tram_e1_a_03, "gfx/tram/tram_E1_A_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e1_a_o_03, "gfx/tram/tram_E1_A_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_e1_a_tram_03 {
    loaded:  [spriteset_tram_e1_a_03];
    loading: [spriteset_tram_e1_a_o_03];
}

spriteset(spriteset_tram_e1_a_04, "gfx/tram/tram_E1_A_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e1_a_o_04, "gfx/tram/tram_E1_A_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_e1_a_tram_04 {
    loaded:  [spriteset_tram_e1_a_04];
    loading: [spriteset_tram_e1_a_o_04];
}

spriteset(spriteset_tram_e1_b_01, "gfx/tram/tram_E1_B_R_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e1_b_o_01, "gfx/tram/tram_E1_B_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_e1_b_tram_01 {
    loaded:  [spriteset_tram_e1_b_01];
    loading: [spriteset_tram_e1_b_o_01];
}

spriteset(spriteset_tram_e1_b_02, "gfx/tram/tram_E1_B_R_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e1_b_o_02, "gfx/tram/tram_E1_B_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_e1_b_tram_02 {
    loaded:  [spriteset_tram_e1_b_02];
    loading: [spriteset_tram_e1_b_o_02];
}

spriteset(spriteset_tram_e1_b_03, "gfx/tram/tram_E1_B_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e1_b_o_03, "gfx/tram/tram_E1_B_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_e1_b_tram_03 {
    loaded:  [spriteset_tram_e1_b_03];
    loading: [spriteset_tram_e1_b_o_03];
}

spriteset(spriteset_tram_e1_b_04, "gfx/tram/tram_E1_B_R_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e1_b_o_04, "gfx/tram/tram_E1_B_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_e1_b_tram_04 {
    loaded:  [spriteset_tram_e1_b_04];
    loading: [spriteset_tram_e1_b_o_04];
}
// e5 'E' tram graphics

spriteset(spriteset_tram_f0_a_04, "gfx/tram/tram_F0_C_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f0_a_o_04, "gfx/tram/tram_F0_R_04.png") {
    tmpl_7()
}
spritegroup spritegroup_f0_a_tram_04 {
    loaded:  [spriteset_tram_f0_a_04];
    loading: [spriteset_tram_f0_a_o_04];
}


switch (FEAT_ROADVEHS, SELF, switch_e5_style, build_year) {
    0..1993:        spritegroup_e0_a_tram_04;
    1994..2001:     spritegroup_e0_b_tram_04;
    2002..500000:   spritegroup_f0_a_tram_04;
                    spritegroup_e0_a_tram_04;
}

switch(FEAT_ROADVEHS, SELF, switch_e5_front, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_e5_style;
    1:  switch_e_panto_7;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_e5_tram, position_in_consist ) {
    0:  switch_e5_front;
         //default
}

spriteset(spriteset_tram_E1_a_p, "gfx/P/tram_E1_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_E1_b_p, "gfx/P/tram_E1_b.png") {
    tmpl_p()
}
spriteset(spriteset_tram_F0_a_p, "gfx/P/tram_F0_a.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_E1, build_year) {
    0..1993:        spriteset_tram_E1_a_p;
    1994..2001:     spriteset_tram_E1_b_p;
    2002..500000:   spriteset_tram_F0_a_p;
                    spriteset_tram_E1_a_p;
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_e5_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_E1;
    1:  purchase_e_panto_7;
    2:  switch_wire_icon;
}

//e5 'E' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_e5_tram, position_in_consist) {
    0:  return 7;
    1:  return 7;
        return 7;
}

switch (FEAT_ROADVEHS, SELF, capacity_e5_tram, position_in_consist ) {
    0:  return ((param_capacity*67)/2);
        return ((param_capacity*67)/2); //default
}

/*
//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_e5_tram, extra_callback_info1) {
    0:  return item_e5_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
*/

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_e5_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KM2), string(STR_ETRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              25;
    cargo_age_period:           240;
    cost_factor:                94;
    running_cost_factor:        80;
    speed:                      90 km/h;
    power:                      377 hp;
    cargo_capacity:             67;
    introduction_date:          date(1984,10,24);
    model_life:                 50;
    vehicle_life:               60;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     23 ton;
    }
graphics {
    running_cost_factor:            switch_e5_runcost;
    purchase_running_cost_factor:   switch_e5_powercost;
    cargo_capacity:                 capacity_e5_tram;
    purchase_cargo_capacity:        ((param_capacity*67)/2);
    default:                        switch_spriteset_e5_tram;
    length:                         switch_length_e5_tram;
    purchase:                       switch_purchase_e5_tram;
    cost_factor:                    ((param_buycost*94)/4);
    }
}
}

// se3 'E' tram graphics

switch (FEAT_ROADVEHS, SELF, style_se3_A, position_in_consist ) {
    0:  spritegroup_e1_a_tram_03;
    1:  spritegroup_e0_a_tram_01;
        spritegroup_e1_a_tram_04; 
}

switch (FEAT_ROADVEHS, SELF, style_se3_B, position_in_consist ) {
    0:  spritegroup_e1_b_tram_03;
    1:  spritegroup_e0_b_tram_01;
        spritegroup_e1_b_tram_04; 
}

switch (FEAT_ROADVEHS, SELF, switch_se3_style, build_year) {
    0..1993:        style_se3_A;
    default:        style_se3_B;
}

switch (FEAT_ROADVEHS, SELF, switch_se3_pole, position_in_consist ) {
    0:  switch_pole_front;
    1:  switch_panto_center;
        switch_pole_rear; 
}

switch(FEAT_ROADVEHS, SELF, switch_se3_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_se3_style;
    1:  switch_se3_pole;
}

spriteset(spriteset_tram_se3_a_p, "gfx/P/tram_se3_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_se3_b_p, "gfx/P/tram_se3_b.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, switch_tram_se3_p, build_year) {
    0..1993:        spriteset_tram_se3_a_p;
    default:        spriteset_tram_se3_b_p;
}
switch (FEAT_ROADVEHS, SELF, switch_panto_se3_p, build_year) {
    0..1988:        spriteset_tram_pole_both_p;
    default:        spriteset_tram_panto_mid_p;
}

switch(FEAT_ROADVEHS, SELF, switch_se3_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_tram_se3_p;
    1:  switch_panto_se3_p;
    2:  switch_wire_icon;
}

//se3 'E' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_se3_tram, position_in_consist) {
    0:  return 5;
    1:  return 2;
        return 5;
}

switch (FEAT_ROADVEHS, SELF, capacity_se3_tram, position_in_consist ) {
    0:  return ((param_capacity*70)/2);
    1:  return ((param_capacity*10)/2);
        return ((param_capacity*70)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_se3_tram_old, position_in_consist ) {
    0:  return VISUAL_EFFECT_DISABLE;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_ELECTRIC; //default
}

switch (FEAT_ROADVEHS, SELF, spark_se3_tram_new, position_in_consist ) {
    0:  return VISUAL_EFFECT_DISABLE;
    1:  return VISUAL_EFFECT_ELECTRIC;
        return VISUAL_EFFECT_DISABLE; //default
}

switch (FEAT_ROADVEHS, SELF, spark_se3_tram, build_year ) {
    0..1989:    spark_se3_tram_old;
                spark_se3_tram_new; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_se3_tram, extra_callback_info1) {
    0:  return item_se3_tram;
    1:  return item_se3_tram;
    2:  return item_se3_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

switch (FEAT_ROADVEHS, SELF, decay_se3_tram, (param_aging)) {
    0:  return 160;
    1: return 133;
    2: return 120;
    3:    return 107;
        return 160; //default
} 

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_se3_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KM2), string(STR_ETRAM_2));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              15;
    cargo_age_period:           160;
    cost_factor:                166;
    running_cost_factor:        80;
    speed:                      90 km/h;
    power:                      507 hp;
    cargo_capacity:             150;
    introduction_date:          date(1988,07,01);
    model_life:                 30;
    vehicle_life:               60;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     34 ton;
    }
graphics {

    cargo_capacity:                 capacity_se3_tram;
    purchase_cargo_capacity:        ((param_capacity*150)/2)/3;
    default:                        switch_se3_stack;
    length:                         switch_length_se3_tram;
    cargo_age_period:               decay_se3_tram;
    running_cost_factor:            switch_se3_runcost;
    purchase_running_cost_factor:   switch_se3_powercost;
    articulated_part:               switch_se3_tram;
    visual_effect:                  spark_se3_tram;
    purchase:                       switch_se3_purchase;
    cost_factor:                    ((param_buycost*166)/4);
    }
}
}

// me3 'E' tram graphics

switch (FEAT_ROADVEHS, SELF, style_me3_A, position_in_consist ) {
    0:  spritegroup_e1_a_tram_01;
    1:  spritegroup_e0_a_tram_02;
    2:  spritegroup_e0_a_tram_02;
        spritegroup_e1_a_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_me3_B, position_in_consist ) {
    0:  spritegroup_e1_b_tram_01;
    1:  spritegroup_e0_b_tram_02;
    2:  spritegroup_e0_b_tram_02;
        spritegroup_e1_b_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, switch_me3_style, build_year) {
    0..1993:    style_me3_A;
    default:    style_me3_B;
}

switch (FEAT_ROADVEHS, SELF, switch_me3_panto_1, position_in_consist ) {
    0:  switch_f_greeble;
    1:  switch_e_panto_4;
    2:  switch_f_greeble;
        switch_f_greeble; //default
}

switch (FEAT_ROADVEHS, SELF, switch_me3_panto_2, position_in_consist ) {
    0:  switch_f_greeble;
    1:  switch_f_greeble;
    2:  switch_e_panto_4;
        switch_f_greeble; //default
}

switch (FEAT_ROADVEHS, PARENT, switch_me3_panto, random_bits ) {
    0..127:     switch_me3_panto_1;
    128..255:   switch_me3_panto_2;

}
switch(FEAT_ROADVEHS, SELF, switch_me3_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_me3_style;
    1:  switch_me3_panto;
    
}

spriteset(spriteset_tram_me3_a_p, "gfx/P/tram_me3_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_me3_b_p, "gfx/P/tram_me3_b.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, switch_tram_me3_p, build_year) {
    0..1993:        spriteset_tram_me3_a_p;
    default:        spriteset_tram_me3_b_p;
}

switch(FEAT_ROADVEHS, SELF, switch_me3_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_tram_me3_p;
    1:  spriteset_tram_panto_mid_p;
    2:  switch_wire_icon;
}

//me3 'E' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_me3_tram, position_in_consist) {
    0:  return 4;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_me3_tram, position_in_consist ) {
    0:  return ((param_capacity*50)/2);
    1:  return ((param_capacity*50)/2);
    2:  return ((param_capacity*50)/2);
        return ((param_capacity*50)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_me3_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_DISABLE;
    1:  return VISUAL_EFFECT_DISABLE;
    2:  return VISUAL_EFFECT_ELECTRIC;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_me3_tram, extra_callback_info1) {
    0:  return item_me3_tram;
    1:  return item_me3_tram;
    2:  return item_me3_tram;
    3:  return item_me3_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

switch (FEAT_ROADVEHS, SELF, decay_me3_tram, (param_aging)) {
    0:  return 240;
    1: return 200;
    2: return 170;
    3:    return 140;
        return 240; //default
}

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_me3_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_LC2), string(STR_ETRAM_4));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              15;
    cargo_age_period:           240;
    cost_factor:                222;
    running_cost_factor:        80;
    speed:                      90 km/h;
    power:                      546 hp;
    cargo_capacity:             200;
    introduction_date:          date(1994,07,01);
    model_life:                 30;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     50 ton;
    }
graphics {

    cargo_capacity:                 capacity_me3_tram;
    purchase_cargo_capacity:        (((param_capacity*200)/2)/4);
    default:                        switch_me3_stack;
    length:                         switch_length_me3_tram;
    cargo_age_period:               decay_me3_tram;
    running_cost_factor:            switch_me3_runcost;
    purchase_running_cost_factor:   switch_me3_powercost;
    articulated_part:               switch_me3_tram;
    visual_effect:                  spark_me3_tram;
    purchase:                       switch_me3_purchase;
    cost_factor:                    ((param_buycost*222)/4);
    }
}
}

// e5 'E' parcel graphics

spriteset(spriteset_tram_e0_a_03, "gfx/tram/tram_E0_A_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e0_a_o_03, "gfx/tram/tram_E0_A_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_e0_a_parcel_03 {
    loaded:  [spriteset_tram_e0_a_03];
    loading: [spriteset_tram_e0_a_o_03];
}
spriteset(spriteset_tram_e0_b_03, "gfx/tram/tram_E0_B_R_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_e0_b_o_03, "gfx/tram/tram_E0_B_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_e0_b_parcel_03 {
    loaded:  [spriteset_tram_e0_b_03];
    loading: [spriteset_tram_e0_b_o_03];
}

switch (FEAT_ROADVEHS, SELF, switch_e5_parcel_style, build_year) {
    0..1993:        spritegroup_e0_a_parcel_03;
    1994..500000:   spritegroup_e0_b_parcel_03;
                    spritegroup_e0_a_parcel_03;
}

switch(FEAT_ROADVEHS, SELF, switch_e5_parcel_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_e5_parcel_style;
    1:  switch_e_panto_7;
}

spriteset(spriteset_tram_E0_par_a_p, "gfx/P/tram_E0_a.png") {
    tmpl_p()
}
spriteset(spriteset_tram_E0_par_b_p, "gfx/P/tram_E0_b.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, purchase_tram_E0, build_year) {
    0..1993:        spriteset_tram_E0_par_a_p;
    1994..500000:   spriteset_tram_E0_par_b_p;
                    spriteset_tram_E0_par_a_p;
}
switch(FEAT_ROADVEHS, SELF, switch_purchase_e5_par_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  purchase_tram_E0;
    1:  purchase_e_panto_7;
    2:  switch_wire_icon;
}

//e5 'E' parcel properties

switch (FEAT_ROADVEHS, SELF, switch_length_e5_parcel, position_in_consist) {
    0:  return 7;
    1:  return 7;
        return 7;
}

/*
switch (FEAT_ROADVEHS, SELF, capacity_e5_parcel, position_in_consist ) {
    0:  return ((param_capacity*60)/2);
        return ((param_capacity*60)/2); //default
}
*/
/*
//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_e5_parcel, extra_callback_info1) {
    0:  return item_e5_parcel;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
*/

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_e5_parcel) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KM2), string(STR_ETRAM_5));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:              25;
    cargo_age_period:           240;
    cost_factor:                88;
    running_cost_factor:        80;
    speed:                      90 km/h;
    power:                      377 hp;
    cargo_capacity:             60;
    introduction_date:          date(1984,10,24);
    model_life:                 50;
    vehicle_life:               60;
    reliability_decay:          14;
    tram_type:                    ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     23 ton;
    }
graphics {
    running_cost_factor:            switch_e5_runcost;
    purchase_running_cost_factor:   switch_e5_powercost;
    cargo_capacity:                 ((param_capacity*60)/2);
    purchase_cargo_capacity:        ((param_capacity*60)/2);
    default:                        switch_e5_parcel_stack;
    length:                         switch_length_e5_parcel;
    purchase:                       switch_purchase_e5_par_tram;
    cost_factor:                    ((param_buycost*88)/4);

    }
}
}

// 6th generation 'F' trams


spriteset(spriteset_tram_f1_a_01, "gfx/tram/tram_F1_A_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_a_o_01, "gfx/tram/tram_F1_A_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_a_tram_01 {
    loaded:  [spriteset_tram_f1_a_01];
    loading: [spriteset_tram_f1_a_o_01];
}

spriteset(spriteset_tram_f1_a_02, "gfx/tram/tram_F1_A_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_a_o_02, "gfx/tram/tram_F1_A_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_a_tram_02 {
    loaded:  [spriteset_tram_f1_a_02];
    loading: [spriteset_tram_f1_a_o_02];
}

spriteset(spriteset_tram_f1_a_03, "gfx/tram/tram_F1_A_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_a_o_03, "gfx/tram/tram_F1_A_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_a_tram_03 {
    loaded:  [spriteset_tram_f1_a_03];
    loading: [spriteset_tram_f1_a_o_03];
}

spriteset(spriteset_tram_f1_a_04, "gfx/tram/tram_F1_A_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_a_o_04, "gfx/tram/tram_F1_A_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_a_tram_04 {
    loaded:  [spriteset_tram_f1_a_04];
    loading: [spriteset_tram_f1_a_o_04];
}

spriteset(spriteset_tram_f1_b_01, "gfx/tram/tram_F1_B_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_b_o_01, "gfx/tram/tram_F1_B_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_b_tram_01 {
    loaded:  [spriteset_tram_f1_b_01];
    loading: [spriteset_tram_f1_b_o_01];
}

spriteset(spriteset_tram_f1_b_02, "gfx/tram/tram_F1_B_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_b_o_02, "gfx/tram/tram_F1_B_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_b_tram_02 {
    loaded:  [spriteset_tram_f1_b_02];
    loading: [spriteset_tram_f1_b_o_02];
}

spriteset(spriteset_tram_f1_b_03, "gfx/tram/tram_F1_B_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_b_o_03, "gfx/tram/tram_F1_B_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_b_tram_03 {
    loaded:  [spriteset_tram_f1_b_03];
    loading: [spriteset_tram_f1_b_o_03];
}

spriteset(spriteset_tram_f1_b_04, "gfx/tram/tram_F1_B_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_b_o_04, "gfx/tram/tram_F1_B_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_b_tram_04 {
    loaded:  [spriteset_tram_f1_b_04];
    loading: [spriteset_tram_f1_b_o_04];
}

spriteset(spriteset_tram_f1_c_01, "gfx/tram/tram_F1_C_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_c_o_01, "gfx/tram/tram_F1_C_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_c_tram_01 {
    loaded:  [spriteset_tram_f1_c_01];
    loading: [spriteset_tram_f1_c_o_01];
}

spriteset(spriteset_tram_f1_c_02, "gfx/tram/tram_F1_C_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_c_o_02, "gfx/tram/tram_F1_C_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_c_tram_02 {
    loaded:  [spriteset_tram_f1_c_02];
    loading: [spriteset_tram_f1_c_o_02];
}

spriteset(spriteset_tram_f1_c_03, "gfx/tram/tram_F1_C_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_c_o_03, "gfx/tram/tram_F1_C_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_c_tram_03 {
    loaded:  [spriteset_tram_f1_c_03];
    loading: [spriteset_tram_f1_c_o_03];
}

spriteset(spriteset_tram_f1_c_04, "gfx/tram/tram_F1_C_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_c_o_04, "gfx/tram/tram_F1_C_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_c_tram_04 {
    loaded:  [spriteset_tram_f1_c_04];
    loading: [spriteset_tram_f1_c_o_04];
}

spriteset(spriteset_tram_f1_d_01, "gfx/tram/tram_F1_D_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_d_o_01, "gfx/tram/tram_F1_D_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_d_tram_01 {
    loaded:  [spriteset_tram_f1_d_01];
    loading: [spriteset_tram_f1_d_o_01];
}

spriteset(spriteset_tram_f1_d_02, "gfx/tram/tram_F1_D_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_d_o_02, "gfx/tram/tram_F1_D_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_d_tram_02 {
    loaded:  [spriteset_tram_f1_d_02];
    loading: [spriteset_tram_f1_d_o_02];
}

spriteset(spriteset_tram_f1_d_03, "gfx/tram/tram_F1_D_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_d_o_03, "gfx/tram/tram_F1_D_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_d_tram_03 {
    loaded:  [spriteset_tram_f1_d_03];
    loading: [spriteset_tram_f1_d_o_03];
}

spriteset(spriteset_tram_f1_d_04, "gfx/tram/tram_F1_D_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f1_d_o_04, "gfx/tram/tram_F1_D_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_f1_d_tram_04 {
    loaded:  [spriteset_tram_f1_d_04];
    loading: [spriteset_tram_f1_d_o_04];
}

spriteset(spriteset_tram_f2_a_01, "gfx/tram/tram_F2_A_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_a_o_01, "gfx/tram/tram_F2_A_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_a_tram_01 {
    loaded:  [spriteset_tram_f2_a_01];
    loading: [spriteset_tram_f2_a_o_01];
}

spriteset(spriteset_tram_f2_a_02, "gfx/tram/tram_F2_A_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_a_o_02, "gfx/tram/tram_F2_A_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_a_tram_02 {
    loaded:  [spriteset_tram_f2_a_02];
    loading: [spriteset_tram_f2_a_o_02];
}

spriteset(spriteset_tram_f2_a_03, "gfx/tram/tram_F2_A_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_a_o_03, "gfx/tram/tram_F2_A_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_a_tram_03 {
    loaded:  [spriteset_tram_f2_a_03];
    loading: [spriteset_tram_f2_a_o_03];
}

spriteset(spriteset_tram_f2_b_01, "gfx/tram/tram_F2_B_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_b_o_01, "gfx/tram/tram_F2_B_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_b_tram_01 {
    loaded:  [spriteset_tram_f2_b_01];
    loading: [spriteset_tram_f2_b_o_01];
}

spriteset(spriteset_tram_f2_b_02, "gfx/tram/tram_F2_B_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_b_o_02, "gfx/tram/tram_F2_B_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_b_tram_02 {
    loaded:  [spriteset_tram_f2_b_02];
    loading: [spriteset_tram_f2_b_o_02];
}

spriteset(spriteset_tram_f2_b_03, "gfx/tram/tram_F2_B_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_b_o_03, "gfx/tram/tram_F2_B_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_b_tram_03 {
    loaded:  [spriteset_tram_f2_b_03];
    loading: [spriteset_tram_f2_b_o_03];
}



spriteset(spriteset_tram_f2_c_01, "gfx/tram/tram_F2_C_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_c_o_01, "gfx/tram/tram_F2_C_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_c_tram_01 {
    loaded:  [spriteset_tram_f2_c_01];
    loading: [spriteset_tram_f2_c_o_01];
}

spriteset(spriteset_tram_f2_c_02, "gfx/tram/tram_F2_C_02.png") {
    tmpl_7()
}

spriteset(spriteset_tram_f2_c_o_02, "gfx/tram/tram_F2_C_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_c_tram_02 {
    loaded:  [spriteset_tram_f2_c_02];
    loading: [spriteset_tram_f2_c_o_02];
}

spriteset(spriteset_tram_f2_c_03, "gfx/tram/tram_F2_C_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_c_o_03, "gfx/tram/tram_F2_C_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_c_tram_03 {
    loaded:  [spriteset_tram_f2_c_03];
    loading: [spriteset_tram_f2_c_o_03];
}

spriteset(spriteset_tram_f2_d_01, "gfx/tram/tram_F2_D_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_d_o_01, "gfx/tram/tram_F2_D_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_d_tram_01 {
    loaded:  [spriteset_tram_f2_d_01];
    loading: [spriteset_tram_f2_d_o_01];
}

spriteset(spriteset_tram_f2_d_02, "gfx/tram/tram_F2_D_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_d_o_02, "gfx/tram/tram_F2_D_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_d_tram_02 {
    loaded:  [spriteset_tram_f2_d_02];
    loading: [spriteset_tram_f2_d_o_02];
}

spriteset(spriteset_tram_f2_d_03, "gfx/tram/tram_F2_D_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_d_o_03, "gfx/tram/tram_F2_D_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_d_tram_03 {
    loaded:  [spriteset_tram_f2_d_03];
    loading: [spriteset_tram_f2_d_o_03];
}

// se4 'F' tram graphics


switch (FEAT_ROADVEHS, SELF, style_se4_A, position_in_consist ) {
    0:  spritegroup_f1_a_tram_01;
    1:  spritegroup_f2_a_tram_01;
        spritegroup_f1_a_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_se4_B, position_in_consist ) {
    0:  spritegroup_f1_b_tram_01;
    1:  spritegroup_f2_b_tram_01;
        spritegroup_f1_b_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_se4_C, position_in_consist ) {
    0:  spritegroup_f1_c_tram_01;
    1:  spritegroup_f2_c_tram_01;
        spritegroup_f1_c_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_se4_D, position_in_consist ) {
    0:  spritegroup_f1_d_tram_01;
    1:  spritegroup_f2_d_tram_01;
        spritegroup_f1_d_tram_02; //default
}
switch (FEAT_ROADVEHS, PARENT, style_se4_rand, random_bits) {
    0..83:      style_se4_C;
    84..167:    style_se4_B;
    168..241:   style_se4_D;
    242..255:   style_se4_A;
}

switch (FEAT_ROADVEHS, SELF, switch_se4_style, build_year){
    0..2009:    style_se4_C;
    2010..2014: style_se4_B;
    2015..2024: style_se4_D;
    default:    style_se4_rand;
}

switch (FEAT_ROADVEHS, SELF, switch_se4_proto, built_during_preview){
    1:  style_se4_A;
        switch_se4_style;
}
switch (FEAT_ROADVEHS, SELF, switch_se4_panto, position_in_consist ) {
    0:  switch_f_greeble;
    1:  switch_e_panto_4;
        switch_f_greeble; //default
}

switch(FEAT_ROADVEHS, SELF, switch_se4_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_se4_proto;
    1:  switch_se4_panto;
}

spriteset(spriteset_tram_se4_a_p, "gfx/P/tram_se4_a.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_se4_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_se4_a_p;
    1:  spriteset_tram_panto_mid_p;
    2:  switch_wire_icon;
}

//se4 'F' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_se4_tram, position_in_consist) {
    0:  return 4;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_se4_tram, position_in_consist ) {
    0:  return ((param_capacity*50)/2);
    1:  return ((param_capacity*60)/2);
        return ((param_capacity*50)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_se4_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_DISABLE;
    1:  return VISUAL_EFFECT_ELECTRIC;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_se4_tram, extra_callback_info1) {
    0:  return item_se4_tram;
    1:  return item_se4_tram;
    2:  return item_se4_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

switch (FEAT_ROADVEHS, SELF, decay_se4_tram, (param_aging)) {
    0:  return 220;
    1: return 200;
    2: return 170;
    3:    return 140;
        return 240; //default
}

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_se4_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KD2), string(STR_ETRAM_2));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              20;
    cargo_age_period:           220;
    cost_factor:                122;
    running_cost_factor:        80;
    speed:                      110 km/h;
    power:                      598 hp;
    cargo_capacity:             160;
    introduction_date:          date(2004,07,01);
    model_life:                 40;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     28.5 ton;
    }
graphics {

    cargo_capacity:                 capacity_se4_tram;
    purchase_cargo_capacity:        ((param_capacity*160)/2)/3;
    default:                        switch_se4_stack;
    length:                         switch_length_se4_tram;
    cargo_age_period:               decay_se4_tram;
    running_cost_factor:            switch_se4_runcost;
    purchase_running_cost_factor:   switch_se4_powercost;
    articulated_part:               switch_se4_tram;
    visual_effect:                  spark_se4_tram;
    purchase:                       switch_se4_purchase;
    cost_factor:                    ((param_buycost*122)/4);
    }
}
}

// me4 'F' tram graphics

switch (FEAT_ROADVEHS, SELF, style_me4_A, position_in_consist ) {
    0:  spritegroup_f1_a_tram_03;
    1:  spritegroup_f2_a_tram_03;
        spritegroup_f1_a_tram_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_me4_B, position_in_consist ) {
    0:  spritegroup_f1_b_tram_03;
    1:  spritegroup_f2_b_tram_03;
        spritegroup_f1_b_tram_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_me4_C, position_in_consist ) {
    0:  spritegroup_f1_c_tram_03;
    1:  spritegroup_f2_c_tram_03;
        spritegroup_f1_c_tram_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_me4_D, position_in_consist ) {
    0:  spritegroup_f1_d_tram_03;
    1:  spritegroup_f2_d_tram_03;
        spritegroup_f1_d_tram_04; //default
}
switch (FEAT_ROADVEHS, PARENT, style_me4_rand, random_bits) {
    0..83:      style_me4_C;
    84..167:    style_me4_B;
    168..241:   style_me4_D;
    242..255:   style_me4_A;
}

switch (FEAT_ROADVEHS, SELF, switch_me4_style, build_year){
    0..2011:    style_me4_C;
    2012..2014: style_me4_B;
    2015..2024: style_me4_D;
    default:    style_me4_rand;
}

switch (FEAT_ROADVEHS, SELF, switch_me4_proto, built_during_preview){
    1:  style_me4_A;
        switch_me4_style;
}
switch (FEAT_ROADVEHS, SELF, switch_me4_panto, position_in_consist ) {
    0:  switch_f_greeble;
    1:  switch_e_panto_4;
        switch_f_greeble; //default
}

switch(FEAT_ROADVEHS, SELF, switch_me4_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_me4_proto;
    1:  switch_me4_panto;
}

spriteset(spriteset_tram_me4_a_p, "gfx/P/tram_me4_a.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_me4_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_me4_a_p;
    1:  spriteset_tram_panto_front_p;
    2:  switch_wire_icon;
}

//me4 'F' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_me4_tram, position_in_consist) {
    0:  return 6;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_me4_tram, position_in_consist ) {
    0:  return ((param_capacity*75)/2);
    1:  return ((param_capacity*75)/2);
    2:  return ((param_capacity*75)/2);
        return ((param_capacity*75)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_me4_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_DISABLE;
    1:  return VISUAL_EFFECT_ELECTRIC;
    2:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_me4_tram, extra_callback_info1) {
    0:  return item_me4_tram;
    1:  return item_me4_tram;
    2:  return item_me4_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

switch (FEAT_ROADVEHS, SELF, decay_me4_tram, (param_aging)) {
    0:  return 240;
    1: return 200;
    2: return 170;
    3:    return 140;
        return 240; //default
} 

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_me4_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_YR2), string(STR_ETRAM_4));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              25;
    cargo_age_period:           240;
    cost_factor:                175;
    running_cost_factor:        80;
    speed:                      110 km/h;
    power:                      780 hp;
    cargo_capacity:             225;
    introduction_date:          date(2010,07,01);
    model_life:                 30;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     45 ton;
    }
graphics {

    cargo_capacity:                 capacity_me4_tram;
    purchase_cargo_capacity:        ((param_capacity*225)/2)/3;
    default:                        switch_me4_stack;
    length:                         switch_length_me4_tram;
    cargo_age_period:               decay_me4_tram;
    running_cost_factor:            switch_me4_runcost;
    purchase_running_cost_factor:   switch_me4_powercost;
    articulated_part:               switch_me4_tram;
    visual_effect:                  spark_me4_tram;
    purchase:                       switch_me4_purchase;
    cost_factor:                    ((param_buycost*175)/4);
    }
}
}

// sc4 'F' tram graphics

switch (FEAT_ROADVEHS, SELF, style_sc4_A, position_in_consist ) {
    0:  spritegroup_f1_a_tram_03;
    1:  spritegroup_f2_a_tram_02;
        spritegroup_f1_a_tram_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_sc4_B, position_in_consist ) {
    0:  spritegroup_f1_b_tram_03;
    1:  spritegroup_f2_b_tram_02;
        spritegroup_f1_b_tram_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_sc4_C, position_in_consist ) {
    0:  spritegroup_f1_c_tram_03;
    1:  spritegroup_f2_c_tram_02;
        spritegroup_f1_c_tram_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_sc4_D, position_in_consist ) {
    0:  spritegroup_f1_d_tram_03;
    1:  spritegroup_f2_d_tram_02;
        spritegroup_f1_d_tram_04; //default
}
switch (FEAT_ROADVEHS, PARENT, style_sc4_rand, random_bits) {
    0..83:      style_sc4_C;
    84..167:    style_sc4_B;
    168..241:   style_sc4_D;
    242..255:   style_sc4_A;
}

switch (FEAT_ROADVEHS, PARENT, switch_sc4_style, build_year){
    0..2009:    style_sc4_C;
    2010..2014: style_sc4_B;
    2015..2024: style_sc4_D;
    default:    style_sc4_rand;
}

switch (FEAT_ROADVEHS, SELF, switch_sc4_proto, built_during_preview){
    1:  style_sc4_A;
        switch_sc4_style;
}

switch(FEAT_ROADVEHS, SELF, switch_sc4_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_sc4_proto;
    1:  switch_f_greeble;
}


spriteset(spriteset_tram_sc4_a_p, "gfx/P/tram_sc4_a.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_sc4_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_sc4_a_p;
    1:  spriteset_x_null;
    2:  switch_fuel_icon;
}
//sc4 'F' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_sc4_tram, position_in_consist) {
    0:  return 6;
    1:  return 4;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_sc4_tram, position_in_consist ) {
    0:  return ((param_capacity*35)/2);
    1:  return ((param_capacity*25)/2);
        return ((param_capacity*35)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_sc4_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DIESEL; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sc4_tram, extra_callback_info1) {
    0:  return item_sc4_tram;
    1:  return item_sc4_tram;
    2:  return item_sc4_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

switch (FEAT_ROADVEHS, SELF, decay_sc4_tram, (param_aging)) {
    0:  return 210;
    1: return 200;
    2: return 190;
    3:    return 180;
        return 200; //default
}

if (param_fftv ==1){
item(FEAT_ROADVEHS, item_sc4_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_PM2), string(STR_FTRAM_3));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              20;
    cargo_age_period:           200;
    cost_factor:                177;
    running_cost_factor:        80;
    speed:                      110 km/h;
    power:                      550 hp;
    cargo_capacity:             95;
    introduction_date:          date(2000,07,01);
    model_life:                 40;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  RAIL;
    visual_effect:              VISUAL_EFFECT_DIESEL;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     35 ton;
    }
graphics {

    cargo_capacity:                 capacity_sc4_tram;
    purchase_cargo_capacity:        ((param_capacity*95)/2)/3;
    default:                        switch_sc4_stack;
    length:                         switch_length_sc4_tram;
    cargo_age_period:               decay_sc4_tram;
    running_cost_factor:            switch_sc4_runcost;
    purchase_running_cost_factor:   switch_sc4_powercost;
    articulated_part:               switch_sc4_tram;
    visual_effect:                  smoke_sc4_tram;
    purchase:                       switch_sc4_purchase;
    cost_factor:                    ((param_buycost*177)/4);
    }
}
}
// Parcel
spriteset(spriteset_tram_f2_a_04, "gfx/tram/tram_F2_A_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_a_o_04, "gfx/tram/tram_F2_A_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_a_parcel_04 {
    loaded:  [spriteset_tram_f2_a_04];
    loading: [spriteset_tram_f2_a_o_04];
}

spriteset(spriteset_tram_f2_b_04, "gfx/tram/tram_F2_B_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_b_o_04, "gfx/tram/tram_F2_B_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_b_parcel_04 {
    loaded:  [spriteset_tram_f2_b_04];
    loading: [spriteset_tram_f2_b_o_04];
}

spriteset(spriteset_tram_f2_c_04, "gfx/tram/tram_F2_C_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_c_o_04, "gfx/tram/tram_F2_C_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_c_parcel_04 {
    loaded:  [spriteset_tram_f2_c_04];
    loading: [spriteset_tram_f2_c_o_04];
}

spriteset(spriteset_tram_f2_d_04, "gfx/tram/tram_F2_D_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_f2_d_o_04, "gfx/tram/tram_F2_D_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_f2_d_parcel_04 {
    loaded:  [spriteset_tram_f2_d_04];
    loading: [spriteset_tram_f2_d_o_04];
}

spriteset(spriteset_tram_fc_a_01, "gfx/tram/tram_Fc_A_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_a_o_01, "gfx/tram/tram_Fc_A_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_a_parcel_01 {
    loaded:  [spriteset_tram_fc_a_01];
    loading: [spriteset_tram_fc_a_o_01];
}

spriteset(spriteset_tram_fc_a_02, "gfx/tram/tram_Fc_A_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_a_o_02, "gfx/tram/tram_Fc_A_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_a_parcel_02 {
    loaded:  [spriteset_tram_fc_a_02];
    loading: [spriteset_tram_fc_a_o_02];
}

spriteset(spriteset_tram_fc_a_03, "gfx/tram/tram_Fc_A_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_a_o_03, "gfx/tram/tram_Fc_A_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_a_parcel_03 {
    loaded:  [spriteset_tram_fc_a_03];
    loading: [spriteset_tram_fc_a_o_03];
}

spriteset(spriteset_tram_fc_a_04, "gfx/tram/tram_Fc_A_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_a_o_04, "gfx/tram/tram_Fc_A_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_a_parcel_04 {
    loaded:  [spriteset_tram_fc_a_04];
    loading: [spriteset_tram_fc_a_o_04];
}

spriteset(spriteset_tram_fc_b_01, "gfx/tram/tram_Fc_B_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_b_o_01, "gfx/tram/tram_Fc_B_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_b_parcel_01 {
    loaded:  [spriteset_tram_fc_b_01];
    loading: [spriteset_tram_fc_b_o_01];
}

spriteset(spriteset_tram_fc_b_02, "gfx/tram/tram_Fc_B_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_b_o_02, "gfx/tram/tram_Fc_B_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_b_parcel_02 {
    loaded:  [spriteset_tram_fc_b_02];
    loading: [spriteset_tram_fc_b_o_02];
}

spriteset(spriteset_tram_fc_b_03, "gfx/tram/tram_Fc_B_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_b_o_03, "gfx/tram/tram_Fc_B_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_b_parcel_03 {
    loaded:  [spriteset_tram_fc_b_03];
    loading: [spriteset_tram_fc_b_o_03];
}

spriteset(spriteset_tram_fc_b_04, "gfx/tram/tram_Fc_B_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_b_o_04, "gfx/tram/tram_Fc_B_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_b_parcel_04 {
    loaded:  [spriteset_tram_fc_b_04];
    loading: [spriteset_tram_fc_b_o_04];
}

spriteset(spriteset_tram_fc_c_01, "gfx/tram/tram_Fc_C_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_c_o_01, "gfx/tram/tram_Fc_C_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_c_parcel_01 {
    loaded:  [spriteset_tram_fc_c_01];
    loading: [spriteset_tram_fc_c_o_01];
}

spriteset(spriteset_tram_fc_c_02, "gfx/tram/tram_Fc_C_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_c_o_02, "gfx/tram/tram_Fc_C_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_c_parcel_02 {
    loaded:  [spriteset_tram_fc_c_02];
    loading: [spriteset_tram_fc_c_o_02];
}

spriteset(spriteset_tram_fc_c_03, "gfx/tram/tram_Fc_C_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_c_o_03, "gfx/tram/tram_Fc_C_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_c_parcel_03 {
    loaded:  [spriteset_tram_fc_c_03];
    loading: [spriteset_tram_fc_c_o_03];
}

spriteset(spriteset_tram_fc_c_04, "gfx/tram/tram_Fc_C_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_c_o_04, "gfx/tram/tram_Fc_C_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_c_parcel_04 {
    loaded:  [spriteset_tram_fc_c_04];
    loading: [spriteset_tram_fc_c_o_04];
}

spriteset(spriteset_tram_fc_d_01, "gfx/tram/tram_Fc_D_01.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_d_o_01, "gfx/tram/tram_Fc_D_RO_01.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_d_parcel_01 {
    loaded:  [spriteset_tram_fc_d_01];
    loading: [spriteset_tram_fc_d_o_01];
}

spriteset(spriteset_tram_fc_d_02, "gfx/tram/tram_Fc_D_02.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_d_o_02, "gfx/tram/tram_Fc_D_RO_02.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_d_parcel_02 {
    loaded:  [spriteset_tram_fc_d_02];
    loading: [spriteset_tram_fc_d_o_02];
}

spriteset(spriteset_tram_fc_d_03, "gfx/tram/tram_Fc_D_03.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_d_o_03, "gfx/tram/tram_Fc_D_RO_03.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_d_parcel_03 {
    loaded:  [spriteset_tram_fc_d_03];
    loading: [spriteset_tram_fc_d_o_03];
}

spriteset(spriteset_tram_fc_d_04, "gfx/tram/tram_Fc_D_04.png") {
    tmpl_7()
}
spriteset(spriteset_tram_fc_d_o_04, "gfx/tram/tram_Fc_D_RO_04.png") {
    tmpl_7()
}
spritegroup spritegroup_fc_d_parcel_04 {
    loaded:  [spriteset_tram_fc_d_04];
    loading: [spriteset_tram_fc_d_o_04];
}
// me4 'F' parcel graphics

switch (FEAT_ROADVEHS, SELF, style_me4_parcel_A, position_in_consist ) {
    0:  spritegroup_fc_a_parcel_01;
    1:  spritegroup_f2_a_parcel_04;
        spritegroup_fc_a_parcel_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_me4_parcel_B, position_in_consist ) {
    0:  spritegroup_fc_b_parcel_01;
    1:  spritegroup_f2_b_parcel_04;
        spritegroup_fc_b_parcel_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_me4_parcel_C, position_in_consist ) {
    0:  spritegroup_fc_c_parcel_01;
    1:  spritegroup_f2_c_parcel_04;
        spritegroup_fc_c_parcel_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_me4_parcel_D, position_in_consist ) {
    0:  spritegroup_fc_d_parcel_01;
    1:  spritegroup_f2_d_parcel_04;
        spritegroup_fc_d_parcel_02; //default
}
switch (FEAT_ROADVEHS, PARENT, style_me4_parcel_rand, random_bits) {
    0..83:      style_me4_parcel_C;
    84..167:    style_me4_parcel_B;
    168..241:   style_me4_parcel_D;
    242..255:   style_me4_parcel_A;
}

switch (FEAT_ROADVEHS, PARENT, switch_me4_parcel_style, build_year){
    0..2011:    style_me4_parcel_C;
    2012..2014: style_me4_parcel_B;
    2015..2024: style_me4_parcel_D;
    default:    style_me4_parcel_rand;
}

switch (FEAT_ROADVEHS, SELF, switch_me4_parcel_proto, built_during_preview){
    1:  style_me4_parcel_A;
        switch_me4_parcel_style;
}

switch(FEAT_ROADVEHS, SELF, switch_me4_parcel_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_me4_parcel_proto;
    1:  switch_me4_panto;
}

/*
spriteset(spriteset_tram_me4_par_a_p, "gfx/P/tram_me4_par_a.png") {
    tmpl_p()
}
*/
spriteset(spriteset_tram_me4_par_b_p, "gfx/P/tram_me4_par_b.png") {
    tmpl_p()
}
spriteset(spriteset_tram_me4_par_c_p, "gfx/P/tram_me4_par_c.png") {
    tmpl_p()
}
spriteset(spriteset_tram_me4_par_d_p, "gfx/P/tram_me4_par_d.png") {
    tmpl_p()
}
switch (FEAT_ROADVEHS, SELF, switch_me4_par_style_p, build_year){
    0..2011:    spriteset_tram_me4_par_c_p;
    2012..2014: spriteset_tram_me4_par_b_p;
    2015..2024: spriteset_tram_me4_par_d_p;
    default:    spriteset_tram_me4_par_b_p;
}


switch(FEAT_ROADVEHS, SELF, switch_me4_par_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_me4_par_style_p;
    1:  spriteset_tram_panto_mid_p;
    2:  switch_wire_icon;
}

//me4 'F' parcel properties

switch (FEAT_ROADVEHS, SELF, switch_length_me4_parcel, position_in_consist) {
    0:  return 4;
    1:  return 6;
    2:  return 6;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_me4_parcel, position_in_consist ) {
    0:  return ((param_capacity*45)/2);
    1:  return ((param_capacity*60)/2);
        return ((param_capacity*45)/2); //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_me4_parcel, extra_callback_info1) {
    0:  return item_me4_parcel;
    1:  return item_me4_parcel;
    2:  return item_me4_parcel;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_me4_parcel) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_YR2), string(STR_ETRAM_6));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:              25;
    cargo_age_period:           240;
    cost_factor:                164;
    running_cost_factor:        80;
    speed:                      110 km/h;
    power:                      780 hp;
    cargo_capacity:             150;
    introduction_date:          date(2015,07,01);
    model_life:                 30;
    vehicle_life:               50;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     45 ton;
    }
graphics {

    cargo_capacity:                 capacity_me4_parcel;
    purchase_cargo_capacity:        ((param_capacity*150)/2)/3;
    default:                        switch_me4_parcel_stack;
    length:                         switch_length_me4_parcel;
    running_cost_factor:            switch_me4_runcost;
    purchase_running_cost_factor:   switch_me4_powercost;
    articulated_part:               switch_me4_parcel;
    visual_effect:                  spark_me4_tram;
    purchase:                       switch_me4_par_purchase;
    cost_factor:                    ((param_buycost*164)/4);
    }
}
}

// sc4 'F' parcel graphics

switch (FEAT_ROADVEHS, SELF, style_sc4_parcel_A, position_in_consist ) {
    0:  spritegroup_fc_a_parcel_03;
    1:  spritegroup_f2_a_parcel_04;
        spritegroup_fc_a_parcel_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_sc4_parcel_B, position_in_consist ) {
    0:  spritegroup_fc_b_parcel_03;
    1:  spritegroup_f2_b_parcel_04;
        spritegroup_fc_b_parcel_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_sc4_parcel_C, position_in_consist ) {
    0:  spritegroup_fc_c_parcel_03;
    1:  spritegroup_f2_c_parcel_04;
        spritegroup_fc_c_parcel_04; //default
}
switch (FEAT_ROADVEHS, SELF, style_sc4_parcel_D, position_in_consist ) {
    0:  spritegroup_fc_d_parcel_03;
    1:  spritegroup_f2_d_parcel_04;
        spritegroup_fc_d_parcel_04; //default
}
switch (FEAT_ROADVEHS, PARENT, style_sc4_parcel_rand, random_bits) {
    0..83:      style_sc4_parcel_C;
    84..167:    style_sc4_parcel_B;
    168..241:   style_sc4_parcel_D;
    242..255:   style_sc4_parcel_A;
}

switch (FEAT_ROADVEHS, PARENT, switch_sc4_parcel_style, build_year){
    0..2009:    style_sc4_parcel_C;
    2010..2014: style_sc4_parcel_B;
    2015..2024: style_sc4_parcel_D;
    default:    style_sc4_parcel_rand;
}

switch (FEAT_ROADVEHS, SELF, switch_sc4_parcel_proto, built_during_preview){
    1:  style_sc4_parcel_A;
        switch_sc4_parcel_style;
}

switch(FEAT_ROADVEHS, SELF, switch_sc4_parcel_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_sc4_parcel_proto;
    1:  switch_f_greeble;
}

switch (FEAT_ROADVEHS, SELF, switch_sc4_par_style_p, build_year){
    0..2009:    spriteset_tram_sc4_par_c_p;
    2010..2014: spriteset_tram_sc4_par_b_p;
    default: spriteset_tram_sc4_par_d_p;
}

/*
spriteset(spriteset_tram_sc4_par_a_p, "gfx/P/tram_sc4_par_a.png") {
    tmpl_p()
}
*/
spriteset(spriteset_tram_sc4_par_b_p, "gfx/P/tram_sc4_par_b.png") {
    tmpl_p()
}
spriteset(spriteset_tram_sc4_par_c_p, "gfx/P/tram_sc4_par_c.png") {
    tmpl_p()
}
spriteset(spriteset_tram_sc4_par_d_p, "gfx/P/tram_sc4_par_d.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_sc4_par_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_sc4_par_style_p;
    1:  spriteset_x_null;
    2:  switch_fuel_icon;
}

//sc4 'F' parcel properties

switch (FEAT_ROADVEHS, SELF, switch_length_sc4_parcel, position_in_consist) {
    0:  return 6;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_sc4_parcel, position_in_consist ) {
    0:  return ((param_capacity*45)/2);
    1:  return ((param_capacity*50)/2);
        return ((param_capacity*45)/2); //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_sc4_parcel, extra_callback_info1) {
    0:  return item_sc4_parcel;
    1:  return item_sc4_parcel;
    2:  return item_sc4_parcel;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_fftv ==1){
item(FEAT_ROADVEHS, item_sc4_parcel) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_KM2), string(STR_FTRAM_5));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    166;
    running_cost_factor:            80;
    speed:                          110 km/h;
    power:                          550 hp;
    cargo_capacity:                 140;
    introduction_date:              date(2010,07,01);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         35 ton;
    }
graphics {

    cargo_capacity:                 capacity_sc4_parcel;
    purchase_cargo_capacity:        ((param_capacity*140)/2)/3;
    default:                        switch_sc4_parcel_stack;
    length:                         switch_length_sc4_parcel;
    cargo_age_period:               decay_sc4_tram;
    running_cost_factor:            switch_sc4_runcost;
    purchase_running_cost_factor:   switch_sc4_powercost;
    articulated_part:               switch_sc4_parcel;
    visual_effect:                  smoke_sc4_tram;
    purchase:                       switch_sc4_par_purchase;
    cost_factor:                    ((param_buycost*166)/4);
    }
}
}


// 7th generation 'G' Trams



spriteset(spriteset_tram_g1_a_01, "gfx/tram/tram_G1_A_R_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_a_o_01, "gfx/tram/tram_G1_A_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_a_tram_01 {
    loaded:  [spriteset_tram_g1_a_01];
    loading: [spriteset_tram_g1_a_o_01];
}

spriteset(spriteset_tram_g1_a_02, "gfx/tram/tram_G1_A_R_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_a_o_02, "gfx/tram/tram_G1_A_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_a_tram_02 {
    loaded:  [spriteset_tram_g1_a_02];
    loading: [spriteset_tram_g1_a_o_02];
}

spriteset(spriteset_tram_g1_a_03, "gfx/tram/tram_G1_A_R_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_a_o_03, "gfx/tram/tram_G1_A_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_a_tram_03 {
    loaded:  [spriteset_tram_g1_a_03];
    loading: [spriteset_tram_g1_a_o_03];
}


spriteset(spriteset_tram_g1_a_04, "gfx/tram/tram_G1_A_R_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_a_o_04, "gfx/tram/tram_G1_A_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_a_tram_04 {
    loaded:  [spriteset_tram_g1_a_04];
    loading: [spriteset_tram_g1_a_o_04];
}

spriteset(spriteset_tram_g1_b_01, "gfx/tram/tram_G1_B_R_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_b_o_01, "gfx/tram/tram_G1_B_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_b_tram_01 {
    loaded:  [spriteset_tram_g1_b_01];
    loading: [spriteset_tram_g1_b_o_01];
}

spriteset(spriteset_tram_g1_b_02, "gfx/tram/tram_G1_B_R_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_b_o_02, "gfx/tram/tram_G1_B_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_b_tram_02 {
    loaded:  [spriteset_tram_g1_b_02];
    loading: [spriteset_tram_g1_b_o_02];
}

spriteset(spriteset_tram_g1_b_03, "gfx/tram/tram_G1_B_R_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_b_o_03, "gfx/tram/tram_G1_B_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_b_tram_03 {
    loaded:  [spriteset_tram_g1_b_03];
    loading: [spriteset_tram_g1_b_o_03];
}

spriteset(spriteset_tram_g1_b_04, "gfx/tram/tram_G1_B_R_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_b_o_04, "gfx/tram/tram_G1_B_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_b_tram_04 {
    loaded:  [spriteset_tram_g1_b_04];
    loading: [spriteset_tram_g1_b_o_04];
}

spriteset(spriteset_tram_g1_c_01, "gfx/tram/tram_G1_C_R_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_c_o_01, "gfx/tram/tram_G1_C_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_c_tram_01 {
    loaded:  [spriteset_tram_g1_c_01];
    loading: [spriteset_tram_g1_c_o_01];
}

spriteset(spriteset_tram_g1_c_02, "gfx/tram/tram_G1_C_R_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_c_o_02, "gfx/tram/tram_G1_C_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_c_tram_02 {
    loaded:  [spriteset_tram_g1_c_02];
    loading: [spriteset_tram_g1_c_o_02];
}

spriteset(spriteset_tram_g1_c_03, "gfx/tram/tram_G1_C_R_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_c_o_03, "gfx/tram/tram_G1_C_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_c_tram_03 {
    loaded:  [spriteset_tram_g1_c_03];
    loading: [spriteset_tram_g1_c_o_03];
}

spriteset(spriteset_tram_g1_c_04, "gfx/tram/tram_G1_C_R_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_c_o_04, "gfx/tram/tram_G1_C_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_c_tram_04 {
    loaded:  [spriteset_tram_g1_c_04];
    loading: [spriteset_tram_g1_c_o_04];
}

spriteset(spriteset_tram_g1_d_01, "gfx/tram/tram_G1_D_R_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_d_o_01, "gfx/tram/tram_G1_D_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_d_tram_01 {
    loaded:  [spriteset_tram_g1_d_01];
    loading: [spriteset_tram_g1_d_o_01];
}

spriteset(spriteset_tram_g1_d_02, "gfx/tram/tram_G1_D_R_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_d_o_02, "gfx/tram/tram_G1_D_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_d_tram_02 {
    loaded:  [spriteset_tram_g1_d_02];
    loading: [spriteset_tram_g1_d_o_02];
}

spriteset(spriteset_tram_g1_d_03, "gfx/tram/tram_G1_D_R_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_d_o_03, "gfx/tram/tram_G1_D_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_d_tram_03 {
    loaded:  [spriteset_tram_g1_d_03];
    loading: [spriteset_tram_g1_d_o_03];
}

spriteset(spriteset_tram_g1_d_04, "gfx/tram/tram_G1_D_R_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g1_d_o_04, "gfx/tram/tram_G1_D_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_g1_d_tram_04 {
    loaded:  [spriteset_tram_g1_d_04];
    loading: [spriteset_tram_g1_d_o_04];
}
// e6 'G' tram graphics

spriteset(spriteset_tram_g0_01, "gfx/tram/tram_G0_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g0_o_01, "gfx/tram/tram_G0_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_g0_tram_01 {
    loaded:  [spriteset_tram_g0_01];
    loading: [spriteset_tram_g0_o_01];
}

spriteset(spriteset_tram_g0_02, "gfx/tram/tram_G0_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g0_o_02, "gfx/tram/tram_G0_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_g0_tram_02 {
    loaded:  [spriteset_tram_g0_02];
    loading: [spriteset_tram_g0_o_02];
}

spriteset(spriteset_tram_g0_03, "gfx/tram/tram_G0_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g0_o_03, "gfx/tram/tram_G0_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_g0_tram_03 {
    loaded:  [spriteset_tram_g0_03];
    loading: [spriteset_tram_g0_o_03];
}

spriteset(spriteset_tram_g0_04, "gfx/tram/tram_G0_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_g0_o_04, "gfx/tram/tram_G0_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_g0_tram_04 {
    loaded:  [spriteset_tram_g0_04];
    loading: [spriteset_tram_g0_o_04];
}

switch (FEAT_ROADVEHS, SELF, switch_e6_style, random_bits) {
    0..85:      spritegroup_g0_tram_02;
    86..170:    spritegroup_g0_tram_03;
    171..255:   spritegroup_g0_tram_04;
}


switch (FEAT_ROADVEHS, SELF, switch_e6_proto, built_during_preview) {
    1:  spritegroup_g0_tram_01;
        switch_e6_style;
}

switch(FEAT_ROADVEHS, SELF, switch_e6_front, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_e6_proto;
    1:  switch_e_panto_7;
}

switch (FEAT_ROADVEHS, SELF, switch_spriteset_e6_tram, position_in_consist ) {
    0:  switch_e6_front;
         //default
}

//  spriteset(spriteset_tram_G0_a_p, "gfx/P/tram_G0_a.png") {
//      tmpl_p()
//  }
spriteset(spriteset_tram_G0_b_p, "gfx/P/tram_G0_b.png") {
    tmpl_p()
}
//  spriteset(spriteset_tram_G0_c_p, "gfx/P/tram_G0_c.png") {
//      tmpl_p()
//  }
//  spriteset(spriteset_tram_G0_d_p, "gfx/P/tram_G0_d.png") {
//      tmpl_p()
//  }
switch(FEAT_ROADVEHS, SELF, switch_purchase_e6_tram, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_G0_b_p;
    1:  purchase_e_panto_7;
    2:  switch_wire_icon;
}

//e6 'G' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_e6_tram, position_in_consist) {
    0:  return 8;
    1:  return 8;
        return 8;
}

switch (FEAT_ROADVEHS, SELF, capacity_e6_tram, position_in_consist ) {
    0:  return ((param_capacity*75)/2);
        return ((param_capacity*75)/2); //default
}

/*
//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_e6_tram, extra_callback_info1) {
    0:  return item_e6_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}
*/

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_e6_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_LC2), string(STR_ETRAM_1));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              25;
    cargo_age_period:           240;
    cost_factor:                92;
    running_cost_factor:        80;
    speed:                      110 km/h;
    power:                      650 hp;
    cargo_capacity:             75;
    introduction_date:          date(2020,07,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               40;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     28 ton;
    }
graphics {
    running_cost_factor:            switch_e6_runcost;
    purchase_running_cost_factor:   switch_e6_powercost;
    cargo_capacity:                 capacity_e6_tram;
    purchase_cargo_capacity:        ((param_capacity*75)/2);
    default:                        switch_spriteset_e6_tram;
    length:                         switch_length_e6_tram;
    purchase:                       switch_purchase_e6_tram;
    cost_factor:                    ((param_buycost*92)/4);
    }
}
}

// Short Articulated TRAMS

// se5 'G' tram graphics

switch (FEAT_ROADVEHS, SELF, style_se5_A, position_in_consist ) {
    0:  spritegroup_g1_a_tram_01;
    1:  spritegroup_g1_a_tram_03;
        spritegroup_g1_a_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_se5_B, position_in_consist ) {
    0:  spritegroup_g1_b_tram_01;
    1:  spritegroup_g1_b_tram_03;
        spritegroup_g1_b_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_se5_C, position_in_consist ) {
    0:  spritegroup_g1_c_tram_01;
    1:  spritegroup_g1_c_tram_03;
        spritegroup_g1_c_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_se5_D, position_in_consist ) {
    0:  spritegroup_g1_d_tram_01;
    1:  spritegroup_g1_d_tram_03;
        spritegroup_g1_d_tram_02; //default
}
switch (FEAT_ROADVEHS, PARENT, switch_se5_style, random_bits) {
    0..83:      style_se5_C;
    84..167:    style_se5_B;
    168..241:   style_se5_D;
    242..255:   style_se5_A;
}

switch (FEAT_ROADVEHS, SELF, switch_se5_proto, built_during_preview) {
    1:  style_se5_A;
        switch_se5_style;
}

switch (FEAT_ROADVEHS, SELF, switch_se5_panto, position_in_consist ) {
    0:  spriteset_x_null;
    1:  switch_e_panto_4;
        spriteset_x_null; //default
}

switch(FEAT_ROADVEHS, SELF, switch_se5_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_se5_proto;
    1:  switch_se5_panto;
}
/*
spriteset(spriteset_tram_se5_a_p, "gfx/P/tram_se5_a.png") {
    tmpl_p()
}
*/
spriteset(spriteset_tram_se5_b_p, "gfx/P/tram_se5_b.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_se5_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_se5_b_p;
    1:  spriteset_tram_panto_mid_p;
    2:  switch_wire_icon;
}

//se5 'G' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_se5_tram, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 3;
}

switch (FEAT_ROADVEHS, SELF, capacity_se5_tram, position_in_consist ) {
    0:  return ((param_capacity*55)/2);
    1:  return ((param_capacity*60)/2);
        return ((param_capacity*55)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_se5_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_DISABLE;
    1:  return VISUAL_EFFECT_ELECTRIC;
        return VISUAL_EFFECT_DISABLE; //default
}

switch (FEAT_ROADVEHS, SELF, decay_se5_tram, (param_aging)) {
    0:  return 240;
    1: return 200;
    2: return 170;
    3:    return 140;
        return 240; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_se5_tram, extra_callback_info1) {
    0:  return item_se5_tram;
    1:  return item_se5_tram;
    2:  return item_se5_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_se5_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_YR2), string(STR_ETRAM_2));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              30;
    cargo_age_period:           260;
    cost_factor:                142;
    running_cost_factor:        80;
    speed:                      160 km/h;
    power:                      1300 hp;
    cargo_capacity:             170;
    introduction_date:          date(2030,07,01);
    model_life:                 50;
    vehicle_life:               60;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     40 ton;
    }
graphics {

    cargo_capacity:                 capacity_se5_tram;
    running_cost_factor:            switch_se5_runcost;
    purchase_running_cost_factor:   switch_se5_powercost;
    purchase_cargo_capacity:        (((param_capacity*170)/2)/3);
    default:                        switch_se5_stack;
    length:                         switch_length_se5_tram;
    cargo_age_period:               decay_se5_tram;
    articulated_part:               switch_se5_tram;
    visual_effect:                  spark_se5_tram;
    purchase:                       switch_se5_purchase;
    cost_factor:                    ((param_buycost*142)/4);
    }
}
}

// Long Articulated TRAMS

// me5 'G' tram graphics

switch (FEAT_ROADVEHS, SELF, style_me5_A, position_in_consist ) {
    0:  spritegroup_g1_a_tram_01;
    1:  spritegroup_g1_a_tram_04;
    2:  spritegroup_g1_a_tram_03;
    3:  spritegroup_g1_a_tram_04;
        spritegroup_g1_a_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_me5_B, position_in_consist ) {
    0:  spritegroup_g1_b_tram_01;
    1:  spritegroup_g1_b_tram_04;
    2:  spritegroup_g1_b_tram_03;
    3:  spritegroup_g1_b_tram_04;
        spritegroup_g1_b_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_me5_C, position_in_consist ) {
    0:  spritegroup_g1_c_tram_01;
    1:  spritegroup_g1_c_tram_04;
    2:  spritegroup_g1_c_tram_03;
    3:  spritegroup_g1_c_tram_04;
        spritegroup_g1_c_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_me5_D, position_in_consist ) {
    0:  spritegroup_g1_d_tram_01;
    1:  spritegroup_g1_d_tram_04;
    2:  spritegroup_g1_d_tram_03;
    3:  spritegroup_g1_d_tram_04;
        spritegroup_g1_d_tram_02; //default
}
switch (FEAT_ROADVEHS, PARENT, switch_me5_style, random_bits) {
    0..83:      style_me5_C;
    84..167:    style_me5_B;
    168..241:   style_me5_D;
    242..255:   style_me5_A;
}

switch (FEAT_ROADVEHS, SELF, switch_me5_proto, built_during_preview) {
    1:  style_me5_A;
        switch_me5_style;
}

switch (FEAT_ROADVEHS, SELF, switch_me5_panto, position_in_consist ) {
    0:  spriteset_x_null;
    1:  switch_f_greeble;
    2:  switch_e_panto_4;
    3:  switch_f_greeble;
        spriteset_x_null; //default
}

switch(FEAT_ROADVEHS, SELF, switch_me5_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_me5_proto;
    1:  switch_me5_panto;
}

spriteset(spriteset_tram_me5_a_p, "gfx/P/tram_me5_a.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_me5_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_me5_a_p;
    1:  spriteset_tram_panto_mid_p;
    2:  switch_wire_icon;
}

//me5 'G' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_me5_tram, position_in_consist) {
    0:  return 3;
    1:  return 6;
    2:  return 4;
    3:  return 6;
        return 3;
}

switch (FEAT_ROADVEHS, SELF, capacity_me5_tram, position_in_consist ) {
    0:  return ((param_capacity*40)/2);
    1:  return ((param_capacity*60)/2);
    2:  return ((param_capacity*60)/2);
    3:  return ((param_capacity*60)/2);
        return ((param_capacity*40)/2); //default
}

switch (FEAT_ROADVEHS, SELF, spark_me5_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_DISABLE;
    1:  return VISUAL_EFFECT_DISABLE;
    2:  return VISUAL_EFFECT_ELECTRIC;
    3:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

switch (FEAT_ROADVEHS, SELF, decay_me5_tram, (param_aging)) {
    0:  return 240;
    1: return 200;
    2: return 170;
    3:    return 140;
        return 240; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_me5_tram, extra_callback_info1) {
    0:  return item_me5_tram;
    1:  return item_me5_tram;
    2:  return item_me5_tram;
    3:  return item_me5_tram;
    4:  return item_me5_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_me5_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_KD2), string(STR_ETRAM_4));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              30;
    cargo_age_period:           260;
    cost_factor:                247;
    running_cost_factor:        80;
    speed:                      160 km/h;
    power:                      2080 hp;
    cargo_capacity:             200;
    introduction_date:          date(2040,07,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               60;
    reliability_decay:          14;
    tram_type:                  ELRL;
    sound_effect:               SOUND_ELECTRIC_SPARK;
    visual_effect:              VISUAL_EFFECT_ELECTRIC;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     40 ton;
    }
graphics {

    cargo_capacity:                 capacity_me5_tram;
    running_cost_factor:            switch_me5_runcost;
    purchase_running_cost_factor:   switch_me5_powercost;
    purchase_cargo_capacity:        ((param_capacity*260)/2)/5;
    default:                        switch_me5_stack;
    length:                         switch_length_me5_tram;
    cargo_age_period:               decay_me5_tram;
    articulated_part:               switch_me5_tram;
    visual_effect:                  spark_me5_tram;
    purchase:                       switch_me5_purchase;
    cost_factor:                    ((param_buycost*247)/4);

    }
}
}

// mc5 'G' tram graphics

switch (FEAT_ROADVEHS, SELF, style_mc5_A, position_in_consist ) {
    0:  spritegroup_g1_a_tram_01;
    1:  spritegroup_g1_a_tram_03;
    2:  spritegroup_g1_a_tram_04;
    3:  spritegroup_g1_a_tram_03;
        spritegroup_g1_a_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_mc5_B, position_in_consist ) {
    0:  spritegroup_g1_b_tram_01;
    1:  spritegroup_g1_b_tram_03;
    2:  spritegroup_g1_b_tram_04;
    3:  spritegroup_g1_b_tram_03;
        spritegroup_g1_b_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_mc5_C, position_in_consist ) {
    0:  spritegroup_g1_c_tram_01;
    1:  spritegroup_g1_c_tram_03;
    2:  spritegroup_g1_c_tram_04;
    3:  spritegroup_g1_c_tram_03;
        spritegroup_g1_c_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_mc5_D, position_in_consist ) {
    0:  spritegroup_g1_d_tram_01;
    1:  spritegroup_g1_d_tram_03;
    2:  spritegroup_g1_d_tram_04;
    3:  spritegroup_g1_d_tram_03;
        spritegroup_g1_d_tram_02; //default
}
switch (FEAT_ROADVEHS, PARENT, switch_mc5_style, random_bits) {
    0..83:      style_mc5_C;
    84..167:    style_mc5_B;
    168..241:   style_mc5_D;
    242..255:   style_mc5_A;
}

switch (FEAT_ROADVEHS, PARENT, switch_mc5_proto, built_during_preview) {
    1:  style_mc5_A;
        switch_mc5_style;
}

switch (FEAT_ROADVEHS, SELF, switch_mc5_panto, position_in_consist ) {
    0:  spriteset_x_null;
    1:  switch_f_greeble;
    2:  switch_f_greeble;
    3:  switch_f_greeble;
        spriteset_x_null; //default
}

switch(FEAT_ROADVEHS, SELF, switch_mc5_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_mc5_proto;
    1:  switch_mc5_panto;
}

spriteset(spriteset_tram_mc5_a_p, "gfx/P/tram_mc5_a.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_mc5_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_mc5_a_p;
    1:  spriteset_x_null;
    2:  switch_hybrid_icon;
}

//mc5 'G' tram properties

switch (FEAT_ROADVEHS, SELF, switch_length_mc5_tram, position_in_consist) {
    0:  return 3;
    1:  return 4;
    2:  return 6;
    3:  return 4;
        return 3;
}

switch (FEAT_ROADVEHS, SELF, capacity_mc5_tram, position_in_consist ) {
    0:  return ((param_capacity*10)/2);
    1:  return ((param_capacity*30)/2);
    2:  return ((param_capacity*50)/2);
    3:  return ((param_capacity*30)/2);
        return ((param_capacity*10)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_mc5_tram, position_in_consist ) {
    0:  return VISUAL_EFFECT_DISABLE;
    1:  return VISUAL_EFFECT_DIESEL;
    2:  return VISUAL_EFFECT_DISABLE;
    3:  return VISUAL_EFFECT_DIESEL;
        return VISUAL_EFFECT_DISABLE; //default
}

switch (FEAT_ROADVEHS, SELF, decay_mc5_tram, (param_aging)) {
    0:  return 250;
    1: return 240;
    2: return 220;
    3:    return 200;
        return 240; //default
} 

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mc5_tram, extra_callback_info1) {
    0:  return item_mc5_tram;
    1:  return item_mc5_tram;
    2:  return item_mc5_tram;
    3:  return item_mc5_tram;
    4:  return item_mc5_tram;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_fftv ==1){
item(FEAT_ROADVEHS, item_mc5_tram) {
property {
    name:                       string(STR_CONCAT_TRAM, string(STR_MFR_AB2), string(STR_FTRAM_4));
    climates_available:         bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:   bitmask(CC_PASSENGERS);
    loading_speed:              25;
    cargo_age_period:           240;
    cost_factor:                251;
    running_cost_factor:        80;
    speed:                      160 km/h;
    power:                      800 hp;
    cargo_capacity:             130;
    introduction_date:          date(2040,07,01);
    model_life:                 VEHICLE_NEVER_EXPIRES;
    vehicle_life:               60;
    reliability_decay:          14;
    tram_type:                  RAIL;
    visual_effect:              VISUAL_EFFECT_DIESEL;
    sprite_id:                  SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                 bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                 0; // Refitting is free
    running_cost_base:          RUNNING_COST_ROADVEH;
    weight:                     42 ton;
    }
graphics {

    cargo_capacity:                 capacity_mc5_tram;
    running_cost_factor:            switch_mc5_runcost;
    purchase_running_cost_factor:   switch_mc5_powercost;
    purchase_cargo_capacity:        ((param_capacity*130)/2)/5;
    default:                        switch_mc5_stack;
    length:                         switch_length_mc5_tram;
    cargo_age_period:               decay_mc5_tram;
    articulated_part:               switch_mc5_tram;
    visual_effect:                  smoke_mc5_tram;
    purchase:                       switch_mc5_purchase;
    cost_factor:                    ((param_buycost*251)/4);

    }
}
}


// Parcel Trams

// me5 'G' parcel graphics

spriteset(spriteset_tram_gc_a_01, "gfx/tram/tram_GC_A_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_gc_a_o_01, "gfx/tram/tram_GC_A_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_gc_a_parcel_01 {
    loaded:  [spriteset_tram_gc_a_01];
    loading: [spriteset_tram_gc_a_o_01];
}
spriteset(spriteset_tram_gc_a_02, "gfx/tram/tram_GC_A_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_gc_a_o_02, "gfx/tram/tram_GC_A_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_gc_a_parcel_02 {
    loaded:  [spriteset_tram_gc_a_02];
    loading: [spriteset_tram_gc_a_o_02];
}
spriteset(spriteset_tram_gc_a_03, "gfx/tram/tram_GC_A_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_gc_a_o_03, "gfx/tram/tram_GC_A_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_gc_a_parcel_03 {
    loaded:  [spriteset_tram_gc_a_03];
    loading: [spriteset_tram_gc_a_o_03];
}
switch (FEAT_ROADVEHS, SELF, style_me5_parcel_A, position_in_consist ) {
    0:  spritegroup_g1_a_tram_01;
    1:  spritegroup_gc_a_parcel_01;
    2:  spritegroup_gc_a_parcel_02;
    3:  spritegroup_gc_a_parcel_03;
        spritegroup_g1_a_tram_02; //default
}
spriteset(spriteset_tram_gc_b_01, "gfx/tram/tram_GC_B_01.png") {
    tmpl_8()
}
spriteset(spriteset_tram_gc_b_o_01, "gfx/tram/tram_GC_B_RO_01.png") {
    tmpl_8()
}
spritegroup spritegroup_gc_b_parcel_01 {
    loaded:  [spriteset_tram_gc_b_01];
    loading: [spriteset_tram_gc_a_o_01];
}

spriteset(spriteset_tram_gc_b_02, "gfx/tram/tram_GC_B_02.png") {
    tmpl_8()
}
spriteset(spriteset_tram_gc_b_o_02, "gfx/tram/tram_GC_B_RO_02.png") {
    tmpl_8()
}
spritegroup spritegroup_gc_b_parcel_02 {
    loaded:  [spriteset_tram_gc_b_02];
    loading: [spriteset_tram_gc_b_o_02];
}
spriteset(spriteset_tram_gc_b_03, "gfx/tram/tram_GC_B_03.png") {
    tmpl_8()
}
spriteset(spriteset_tram_gc_b_o_03, "gfx/tram/tram_GC_B_RO_03.png") {
    tmpl_8()
}
spritegroup spritegroup_gc_b_parcel_03 {
    loaded:  [spriteset_tram_gc_b_03];
    loading: [spriteset_tram_gc_b_o_03];
}
switch (FEAT_ROADVEHS, SELF, style_me5_parcel_B, position_in_consist ) {
    0:  spritegroup_g1_b_tram_01;
    1:  spritegroup_gc_b_parcel_01;
    2:  spritegroup_gc_b_parcel_02;
    3:  spritegroup_gc_b_parcel_03;
        spritegroup_g1_b_tram_02; //default
}

spriteset(spriteset_tram_gc_c_01, "gfx/tram/tram_GC_A_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_gc_c_o_01, "gfx/tram/tram_GC_A_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_gc_c_parcel_01 {
    loaded:  [spriteset_tram_gc_c_01];
    loading: [spriteset_tram_gc_c_o_01];
}
switch (FEAT_ROADVEHS, SELF, style_me5_parcel_C, position_in_consist ) {
    0:  spritegroup_g1_c_tram_01;
    1:  spritegroup_gc_c_parcel_01;
    2:  spritegroup_gc_c_parcel_01;
    3:  spritegroup_gc_c_parcel_01;
        spritegroup_g1_c_tram_02; //default
}

spriteset(spriteset_tram_gc_d_01, "gfx/tram/tram_GC_B_04.png") {
    tmpl_8()
}
spriteset(spriteset_tram_gc_d_o_01, "gfx/tram/tram_GC_B_RO_04.png") {
    tmpl_8()
}
spritegroup spritegroup_gc_d_parcel_01 {
    loaded:  [spriteset_tram_gc_d_01];
    loading: [spriteset_tram_gc_d_o_01];
}
switch (FEAT_ROADVEHS, SELF, style_me5_parcel_D, position_in_consist ) {
    0:  spritegroup_g1_d_tram_01;
    1:  spritegroup_gc_d_parcel_01;
    2:  spritegroup_gc_d_parcel_01;
    3:  spritegroup_gc_d_parcel_01;
        spritegroup_g1_d_tram_02; //default
}
switch (FEAT_ROADVEHS, PARENT, switch_me5_parcel_style, random_bits) {
    0..83:      style_me5_parcel_C;
    84..167:    style_me5_parcel_B;
    168..241:   style_me5_parcel_D;
    242..255:   style_me5_parcel_A;
}

switch(FEAT_ROADVEHS, SELF, switch_me5_stack_parcel, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_me5_parcel_style;
    1:  switch_me5_panto;
}

/*
spriteset(spriteset_tram_me5_par_a_p, "gfx/P/tram_me5_par_a.png") {
    tmpl_p()
}

spriteset(spriteset_tram_me5_par_c_p, "gfx/P/tram_me5_par_c.png") {
    tmpl_p()
}
*/
spriteset(spriteset_tram_me5_par_b_p, "gfx/P/tram_me5_par_b.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_me5_par_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_me5_par_b_p;
    1:  spriteset_tram_panto_mid_p;
    2:  switch_wire_icon;
}

//me5 'G' parcel properties

switch (FEAT_ROADVEHS, SELF, switch_length_me5_parcel, position_in_consist) {
    0:  return 3;
    1:  return 6;
    2:  return 6;
    3:  return 6;
        return 3;
}

switch (FEAT_ROADVEHS, SELF, capacity_me5_parcel, position_in_consist ) {
    0:  return ((param_capacity*10)/2);
    1:  return ((param_capacity*65)/2);
    2:  return ((param_capacity*65)/2);
    3:  return ((param_capacity*65)/2);
        return ((param_capacity*10)/2); //default
}


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_me5_parcel, extra_callback_info1) {
    0:  return item_me5_parcel;
    1:  return item_me5_parcel;
    2:  return item_me5_parcel;
    3:  return item_me5_parcel;
    4:  return item_me5_parcel;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_eltv ==1){
item(FEAT_ROADVEHS, item_me5_parcel) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_YR2), string(STR_ETRAM_6));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  30;
    cargo_age_period:               260;
    cost_factor:                    231;
    running_cost_factor:            80;
    speed:                          140 km/h;
    power:                          2080 hp;
    cargo_capacity:                 215;
    introduction_date:              date(2045,07,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   60;
    reliability_decay:              14;
    tram_type:                      ELRL;
    sound_effect:                   SOUND_ELECTRIC_SPARK;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         40 ton;
    }
graphics {

    cargo_capacity:                 capacity_me5_parcel;
    running_cost_factor:            switch_me5_runcost;
    purchase_running_cost_factor:   switch_me5_powercost;
    purchase_cargo_capacity:        ((param_capacity*215)/2)/5;
    default:                        switch_me5_stack_parcel;
    length:                         switch_length_me5_parcel;
    articulated_part:               switch_me5_parcel;
    visual_effect:                  spark_me5_tram;
    purchase:                       switch_me5_par_purchase;
    cost_factor:                    ((param_buycost*231)/4);
    }
}
}

// Fossil Fuel Trams

// mc5 'G' parcel graphics

switch (FEAT_ROADVEHS, SELF, style_mc5_parcel_A, position_in_consist ) {
    0:  spritegroup_g1_a_tram_01;
    1:  spritegroup_gc_a_parcel_01;
    2:  spritegroup_gc_a_parcel_02;
    3:  spritegroup_gc_a_parcel_03;
        spritegroup_g1_a_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_mc5_parcel_B, position_in_consist ) {
    0:  spritegroup_g1_b_tram_01;
    1:  spritegroup_gc_b_parcel_01;
    2:  spritegroup_gc_b_parcel_02;
    3:  spritegroup_gc_b_parcel_03;
        spritegroup_g1_b_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_mc5_parcel_C, position_in_consist ) {
    0:  spritegroup_g1_c_tram_01;
    1:  spritegroup_gc_c_parcel_01;
    2:  spritegroup_gc_c_parcel_01;
    3:  spritegroup_gc_c_parcel_01;
        spritegroup_g1_c_tram_02; //default
}
switch (FEAT_ROADVEHS, SELF, style_mc5_parcel_D, position_in_consist ) {
    0:  spritegroup_g1_d_tram_01;
    1:  spritegroup_gc_d_parcel_01;
    2:  spritegroup_gc_d_parcel_01;
    3:  spritegroup_gc_d_parcel_01;
        spritegroup_g1_d_tram_02; //default
}
switch (FEAT_ROADVEHS, PARENT, switch_mc5_parcel_style, random_bits) {
    0..83:      style_mc5_parcel_C;
    84..167:    style_mc5_parcel_B;
    168..241:   style_mc5_parcel_D;
    242..255:   style_mc5_parcel_A;
}

switch (FEAT_ROADVEHS, SELF, switch_mc5_parcel_proto, built_during_preview) {
    1:  style_mc5_parcel_A;
        switch_mc5_parcel_style;
}

switch(FEAT_ROADVEHS, SELF, switch_mc5_parcel_stack, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 1 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_mc5_parcel_proto;
    1:  switch_mc5_panto;
}

spriteset(spriteset_tram_mc5_par_d_p, "gfx/P/tram_mc5_par_d.png") {
    tmpl_p()
}
switch(FEAT_ROADVEHS, SELF, switch_mc5_par_purchase, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_tram_mc5_par_d_p;
    1:  spriteset_x_null;
    2:  switch_hybrid_icon;
}

//mc5 'G' parcel properties

switch (FEAT_ROADVEHS, SELF, switch_length_mc5_parcel, position_in_consist) {
    0:  return 3;
    1:  return 6;
    2:  return 6;
    3:  return 6;
        return 3;
}

switch (FEAT_ROADVEHS, SELF, capacity_mc5_parcel, position_in_consist ) {
    0:  return ((param_capacity*10)/2);
    1:  return ((param_capacity*50)/2);
    2:  return ((param_capacity*60)/2);
    3:  return ((param_capacity*50)/2);
        return ((param_capacity*10)/2); //default
}


//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_mc5_parcel, extra_callback_info1) {
    0:  return item_mc5_parcel;
    1:  return item_mc5_parcel;
    2:  return item_mc5_parcel;
    3:  return item_mc5_parcel;
    4:  return item_mc5_parcel;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_fftv ==1){
item(FEAT_ROADVEHS, item_mc5_parcel) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_PM2), string(STR_FTRAM_6));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_ARMOURED, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID);
    cargo_allow_refit:              [BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  25;
    cargo_age_period:               240;
    cost_factor:                    235;
    running_cost_factor:            100;
    speed:                          140 km/h;
    power:                          800 hp;
    cargo_capacity:                 180;
    introduction_date:              date(2020,07,01);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   60;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         42 ton;
    }
graphics {

    cargo_capacity:                 capacity_mc5_parcel;
    running_cost_factor:            switch_mc5_runcost;
    purchase_running_cost_factor:   switch_mc5_powercost;
    purchase_cargo_capacity:        ((param_capacity*180)/2)/5;
    default:                        switch_mc5_parcel_stack;
    length:                         switch_length_mc5_parcel;
    articulated_part:               switch_mc5_parcel;
    visual_effect:                  smoke_mc5_tram;
    purchase:                       switch_mc5_par_purchase;
    cost_factor:                    ((param_buycost*235)/4);

    }
}
}



/* ====================================== */
/* ========== Industral Trams =========== */
/* ====================================== */




// tramway locomotive graphics

// assorted component graphics

spriteset(spriteset_ie1_light_a, "gfx/motor/motor_extra_01.png") {
    tmpl_8()
}
spriteset(spriteset_ie1_light_b, "gfx/motor/motor_extra_02.png") {
    tmpl_8()
}
spriteset(spriteset_i_skirt_yellow_3, "gfx/motor/motor_extra_03.png") {
    tmpl_8()
}
spriteset(spriteset_i_skirt_yellow_4, "gfx/motor/motor_extra_04.png") {
    tmpl_8()
}
spriteset(spriteset_i_buffer_3, "gfx/motor/motor_frame_01.png") {
    tmpl_8()
}
spriteset(spriteset_i_wheel_4, "gfx/W/w_frame_02.png") {
    tmpl_7()
}
spriteset(spriteset_i_frame_4, "gfx/W/w_frame_03.png") {
    tmpl_7()
}
spriteset(spriteset_i_frame_6, "gfx/W/w_frame_04.png") {
    tmpl_7()
}
spriteset(spriteset_i_rail_red_a_3, "gfx/motor/motor_rail_3_01.png") {
    tmpl_8()
}
spriteset(spriteset_i_rail_red_b_3, "gfx/motor/motor_rail_3_02.png") {
    tmpl_8()
}
spriteset(spriteset_i_rail_yellow_a_3, "gfx/motor/motor_rail_3_03.png") {
    tmpl_8()
}
spriteset(spriteset_i_rail_yellow_b_3, "gfx/motor/motor_rail_3_04.png") {
    tmpl_8()
}
spriteset(spriteset_i_rail_red_4, "gfx/motor/motor_rail_4_01.png") {
    tmpl_8()
}
spriteset(spriteset_i_rail_white_4, "gfx/motor/motor_rail_4_02.png") {
    tmpl_8()
}
spriteset(spriteset_i_rail_yellow_4, "gfx/motor/motor_rail_4_03.png") {
    tmpl_8()
}
spriteset(spriteset_i_rail_2cc_4, "gfx/motor/motor_rail_4_04.png") {
    tmpl_8()
}

switch (FEAT_ROADVEHS, SELF, i_wagon_frame, build_year ) {
    0..1955:        spriteset_i_wheel_4;
    1945..5000000:  spriteset_i_frame_4;
}
switch (FEAT_ROADVEHS, SELF, motor_rail_3_01, build_year ) {
    0..1944:        spriteset_x_null;
    1945..5000000:  spriteset_i_rail_red_a_3;
}
switch (FEAT_ROADVEHS, SELF, motor_rail_3_02, build_year ) {
    0..1944:        spriteset_x_null;
    1945..5000000:  spriteset_i_rail_red_b_3;
}
switch (FEAT_ROADVEHS, SELF, motor_rail_3_03, build_year ) {
    0..1944:        spriteset_x_null;
    1945..5000000:  spriteset_i_rail_yellow_a_3;
}
switch (FEAT_ROADVEHS, SELF, motor_rail_3_04, build_year ) {
    0..1944:        spriteset_x_null;
    1945..5000000:  spriteset_i_rail_yellow_b_3;
}

switch (FEAT_ROADVEHS, SELF, switch_skirt_3_transition_a, random_bits ) {
    0..63:          spriteset_i_skirt_yellow_3;
    64..255:        spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_skirt_3_transition_b, random_bits ) {
    0..127:         spriteset_i_skirt_yellow_3;
    128..255:       spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_skirt_3_transition_c, random_bits ) {
    0..195:         spriteset_i_skirt_yellow_3;
    196..255:       spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_motor_skirt_3, build_year ) {
    0..1959:        spriteset_x_null;
    1960..1964:     switch_skirt_3_transition_a;
    1965..1974:     switch_skirt_3_transition_b;
    1975..5000000:  switch_skirt_3_transition_c;
}
/*
switch (FEAT_ROADVEHS, SELF, switch_skirt_4_transition_a, random_bits ) {
    0..63:          spriteset_i_skirt_yellow_4;
    64..255:        spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_skirt_4_transition_b, random_bits ) {
    0..127:         spriteset_i_skirt_yellow_4;
    128..255:       spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_skirt_4_transition_c, random_bits ) {
    0..195:         spriteset_i_skirt_yellow_4;
    196..255:       spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_motor_skirt_4, build_year ) {
    0..1959:        spriteset_x_null;
    1960..1964:     switch_skirt_4_transition_a;
    1965..1974:     switch_skirt_4_transition_b;
    1975..5000000:  switch_skirt_4_transition_c;
}
*/
switch (FEAT_ROADVEHS, SELF, switch_i_rail_4, random_bits ) {
    0..59:          spriteset_i_rail_red_4;
    60..119:        spriteset_i_rail_white_4;
    120..179:       spriteset_i_rail_yellow_4;
    180..239:       spriteset_i_rail_2cc_4;
    240..255:       spriteset_x_null;
}

switch (FEAT_ROADVEHS, SELF, switch_i_buffer_transition_a, random_bits ) {
    0..63:         spriteset_x_null;
    64..255:       spriteset_i_buffer_3;
}
switch (FEAT_ROADVEHS, SELF, switch_i_buffer_transition_b, random_bits ) {
    0..127:         spriteset_x_null;
    128..255:       spriteset_i_buffer_3;
}
switch (FEAT_ROADVEHS, SELF, switch_i_buffer_transition_c, random_bits ) {
    0..63:         spriteset_i_buffer_3;
    64..255:      spriteset_x_null;
}
switch (FEAT_ROADVEHS, SELF, switch_i_motor_buffer_3, build_year ) {
    0..1910:        spriteset_x_null;
    1911..1924:     switch_i_buffer_transition_a;
    1925..1934:     spriteset_i_buffer_3;
    1935..1944:     switch_i_buffer_transition_b;
    1945..1955:     switch_i_buffer_transition_c;
    1955..5000000:  spriteset_x_null;
}

// steam tramway locomotive graphics

spriteset(spriteset_is0_motor_a, "gfx/tram/tram_A1_02.png") {
    tmpl_7()
}

spritegroup spritegroup_is0_motor_a {
    loaded:  [spriteset_is0_motor_a];
    loading: [spriteset_is0_motor_a];
}

spriteset(spriteset_is0_motor_b, "gfx/tram/tram_A2_02.png") {
    tmpl_7()
}

spritegroup spritegroup_is0_motor_b {
    loaded:  [spriteset_is0_motor_b];
    loading: [spriteset_is0_motor_b];
}

spriteset(spriteset_is0_motor_p, "gfx/P/is_tram_01.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_is0_motor, build_year ) {
    0..1880:        spritegroup_is0_motor_a;
    1881..5000000:  spritegroup_is0_motor_b;
        spritegroup_is0_motor_a; //default
}

// Steam Dummy graphics

spriteset(spriteset_is1_motor_a, "gfx/tram/tram_A3_02.png") {
    tmpl_7()
}

spritegroup spritegroup_is1_motor_a {
    loaded:  [spriteset_is1_motor_a];
    loading: [spriteset_is1_motor_a];
}

spriteset(spriteset_is1_motor_b, "gfx/tram/tram_A4_02.png") {
    tmpl_7()
}

spritegroup spritegroup_is1_motor_b {
    loaded:  [spriteset_is1_motor_b];
    loading: [spriteset_is1_motor_b];
}

spriteset(spriteset_is1_motor_p, "gfx/P/is_tram_02.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_is1_motor, build_year ) {
    0..1900:        spritegroup_is1_motor_a;
    1901..5000000:  spritegroup_is1_motor_b;
        spritegroup_is0_motor_a; //default
}

// Electric tramway motor 1 graphics

spriteset(spriteset_ie1_motor_a, "gfx/motor/motor_ie1_01.png") {
    tmpl_8()
}

spritegroup spritegroup_ie1_motor_a {
    loaded:  [spriteset_ie1_motor_a];
    loading: [spriteset_ie1_motor_a];
}

spriteset(spriteset_ie1_motor_b, "gfx/motor/motor_ie1_02.png") {
    tmpl_8()
}

spritegroup spritegroup_ie1_motor_b {
    loaded:  [spriteset_ie1_motor_b];
    loading: [spriteset_ie1_motor_b];
}

spriteset(spriteset_ie1_motor_p, "gfx/P/ie_tram_01.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_ie1_motor_light, random_bits ) {
    0..127:         spriteset_ie1_light_a;
    128..255:       spriteset_ie1_light_b;
}
switch (FEAT_ROADVEHS, SELF, switch_ie1_motor_style, random_bits ) {
    0..127:         spritegroup_ie1_motor_a;
    128..255:       spritegroup_ie1_motor_b;
}

switch(FEAT_ROADVEHS, SELF, switch_ie1_motor, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ie1_motor_style;
    1:  switch_i_motor_buffer_3;
    2:  switch_ie1_motor_light;
    3:  switch_e_panto_3;
}

// Electric tramway motor 2 graphics

spriteset(spriteset_ie2_motor_a, "gfx/tram/tram_B4_R_01.png") {
    tmpl_7()
}

spriteset(spriteset_ie2_motor_p, "gfx/P/ie_tram_02.png") {
    tmpl_p()
}

spritegroup spritegroup_ie2_motor_a {
    loaded:  [spriteset_ie2_motor_a];
    loading: [spriteset_ie2_motor_a];
}

switch(FEAT_ROADVEHS, SELF, switch_ie2_motor, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spritegroup_ie2_motor_a;
    1:  switch_motor_skirt_3;
    2:  switch_e_panto_3;
    }

// Electric tramway motor 3 graphics

spriteset(spriteset_ie3_motor_a, "gfx/motor/motor_ie1_03.png") {
    tmpl_8()
}

spriteset(spriteset_ie3_motor_b, "gfx/motor/motor_ie1_04.png") {
    tmpl_8()
}

spriteset(spriteset_ie3_motor_p, "gfx/P/ie_tram_04.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_ie3_motor_a, random_bits ) {
    0..195:         spriteset_ie3_motor_b;
    196..255:       spriteset_ie3_motor_a;
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_ie3_motor_b, random_bits ) {
    0..127:         spriteset_ie3_motor_b;
    128..255:       spriteset_ie3_motor_a;
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_ie3_motor_c, random_bits ) {
    0..63:         spriteset_ie3_motor_b;
    64..255:       spriteset_ie3_motor_a;
}

switch (FEAT_ROADVEHS, SELF, switch_ie3_style, build_year ) {
    0..1990:        switch_spritegroup_ie3_motor_a;
    1991..2010:     switch_spritegroup_ie3_motor_b;
    2011..5000000:  switch_spritegroup_ie3_motor_c; 
}

switch(FEAT_ROADVEHS, SELF, switch_ie3_motor, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ie3_style;
    1:  switch_motor_skirt_3;
    2:  switch_i_rail_4;
    3:  switch_e_panto_3;
    }

// Diesel tramway motor 1 graphics

spriteset(spriteset_ic1_motor_a, "gfx/motor/motor_ic1_01.png") {
    tmpl_8()
}

spriteset(spriteset_ic1_motor_b, "gfx/motor/motor_ic1_02.png") {
    tmpl_8()
}

spriteset(spriteset_ic1_motor_c, "gfx/motor/motor_ic1_03.png") {
    tmpl_8()
}

spriteset(spriteset_ic1_motor_d, "gfx/motor/motor_ic1_04.png") {
    tmpl_8()
}

spriteset(spriteset_ic1_motor_p, "gfx/P/ic_tram_02.png") {
    tmpl_p()
}

switch(FEAT_ROADVEHS, SELF, switch_ic1_motor_stack_a, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic1_motor_a;
    1:  switch_motor_skirt_3;
    2:  switch_i_motor_buffer_3;
    3:  motor_rail_3_01;
    }
switch(FEAT_ROADVEHS, SELF, switch_ic1_motor_stack_b, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic1_motor_b;
    1:  switch_motor_skirt_3;
    2:  switch_i_motor_buffer_3;
    3:  motor_rail_3_02;
    }
switch(FEAT_ROADVEHS, SELF, switch_ic1_motor_stack_c, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic1_motor_c;
    1:  switch_motor_skirt_3;
    2:  switch_i_motor_buffer_3;
    3:  motor_rail_3_03;
    }
switch(FEAT_ROADVEHS, SELF, switch_ic1_motor_stack_d, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic1_motor_d;
    1:  switch_motor_skirt_3;
    2:  switch_i_motor_buffer_3;
    3:  motor_rail_3_04;
    }

switch (FEAT_ROADVEHS, SELF, switch_ic1_motor_style_a, random_bits ) {
    0..127:         switch_ic1_motor_stack_a;
    128..255:       switch_ic1_motor_stack_b;
}

switch (FEAT_ROADVEHS, SELF, switch_ic1_motor_style_b, random_bits ) {
    0..127:         switch_ic1_motor_stack_c;
    128..255:       switch_ic1_motor_stack_d;
}
switch (FEAT_ROADVEHS, SELF, switch_ic1_motor_style, random_bits ) {
    0..63:          switch_ic1_motor_style_a;
    64..195:        switch_ic1_motor_style_b;
    196..255:       switch_ic1_motor_style_a;
}
switch (FEAT_ROADVEHS, SELF, switch_ic1_motor, build_year ) {
    0..1939:        switch_ic1_motor_style_a;
    1940..1950:     switch_ic1_motor_style;
    1951..5000000:  switch_ic1_motor_style_b;
}

// Diesel tramway motor 2 graphics

spriteset(spriteset_ic2_motor_a, "gfx/motor/motor_ic2_01.png") {
    tmpl_8()
}

spriteset(spriteset_ic2_motor_b, "gfx/motor/motor_ic2_02.png") {
    tmpl_8()
}

spriteset(spriteset_ic2_motor_c, "gfx/motor/motor_ic2_03.png") {
    tmpl_8()
}

spriteset(spriteset_ic2_motor_d, "gfx/motor/motor_ic2_04.png") {
    tmpl_8()
}

spriteset(spriteset_ic2_motor_p, "gfx/P/ic_tram_03.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_ic2_motor_a, random_bits ) {
    0..127:         spriteset_ic2_motor_a;
    128..255:       spriteset_ic2_motor_b;
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_ic2_motor_c, random_bits ) {
    0..127:         spriteset_ic2_motor_c;
    128..255:       spriteset_ic2_motor_d;
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_ic2_motor_b, random_bits ) {
    0..127:         switch_spritegroup_ic2_motor_a;
    64..195:        switch_spritegroup_ic2_motor_c;
    196..255:       switch_spritegroup_ic2_motor_a;
}

switch (FEAT_ROADVEHS, SELF, switch_ic2_motor_style, build_year ) {
    0..1965:        switch_spritegroup_ic2_motor_a;
    1966..1975:     switch_spritegroup_ic2_motor_b;
    1976..5000000:  switch_spritegroup_ic2_motor_c;
}

switch(FEAT_ROADVEHS, SELF, switch_ic2_motor, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ic2_motor_style;
    1:  switch_motor_skirt_3;
    2:  switch_i_motor_buffer_3;
    }

// Diesel tramway motor 3 graphics

spriteset(spriteset_ic3_motor_a, "gfx/motor/motor_ic3_01.png") {
    tmpl_8()
}

spriteset(spriteset_ic3_motor_b, "gfx/motor/motor_ic3_02.png") {
    tmpl_8()
}

spriteset(spriteset_ic3_motor_c, "gfx/motor/motor_ic3_03.png") {
    tmpl_8()
}

spriteset(spriteset_ic3_motor_d, "gfx/motor/motor_ic3_04.png") {
    tmpl_8()
}

spriteset(spriteset_ic3_motor_p, "gfx/P/ic_tram_04.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_ic3_motor_a, random_bits ) {
    0..127:         spriteset_ic3_motor_a;
    128..255:       spriteset_ic3_motor_b;
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_ic3_motor_c, random_bits ) {
    0..124:         spriteset_ic3_motor_c;
    125..130:       switch_spritegroup_ic3_motor_a;
    131..255:       spriteset_ic3_motor_d;
}

switch (FEAT_ROADVEHS, SELF, switch_spritegroup_ic3_motor_b, random_bits ) {
    0..127:         switch_spritegroup_ic3_motor_a;
    64..195:        switch_spritegroup_ic3_motor_c;
    196..255:       switch_spritegroup_ic3_motor_a;
}

switch (FEAT_ROADVEHS, SELF, switch_ic3_motor_style, build_year ) {
    0..2010:        switch_spritegroup_ic3_motor_a;
    2011..2020:     switch_spritegroup_ic3_motor_b;
    2020..5000000:  switch_spritegroup_ic3_motor_c;
}

switch(FEAT_ROADVEHS, SELF, switch_ic3_motor, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  switch_ic3_motor_style;
    1:  switch_i_motor_buffer_3;
    2:  switch_i_rail_4;
    }

// Open Wagon graphics

//Bulk Cargo
// Low Bulk (open trucks)
// brown low

spriteset(spriteset_w_s_o_brown_1, "gfx/W/w_s_o_brown_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_brown_2, "gfx/W/w_s_o_brown_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_brown_3, "gfx/W/w_s_o_brown_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_brown_4, "gfx/W/w_s_o_brown_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_o_brown { //short brown open cargo
    loaded:  [spriteset_w_s_o_brown_1, spriteset_w_s_o_brown_2, spriteset_w_s_o_brown_3, spriteset_w_s_o_brown_4];
    loading: [spriteset_w_s_o_brown_1, spriteset_w_s_o_brown_2, spriteset_w_s_o_brown_3, spriteset_w_s_o_brown_4];
}

spriteset(spriteset_w_m_o_brown_1, "gfx/W/w_m_o_brown_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_brown_2, "gfx/W/w_m_o_brown_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_brown_3, "gfx/W/w_m_o_brown_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_brown_4, "gfx/W/w_m_o_brown_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_o_brown { //medium brown open cargo
    loaded:  [spriteset_w_m_o_brown_1, spriteset_w_m_o_brown_2, spriteset_w_m_o_brown_3, spriteset_w_m_o_brown_4];
    loading: [spriteset_w_m_o_brown_1, spriteset_w_m_o_brown_2, spriteset_w_m_o_brown_3, spriteset_w_m_o_brown_4];
}

// coal low

spriteset(spriteset_w_s_o_coal_1, "gfx/W/w_s_o_coal_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_coal_2, "gfx/W/w_s_o_coal_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_coal_3, "gfx/W/w_s_o_coal_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_coal_4, "gfx/W/w_s_o_coal_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_o_coal { //short coal open cargo
    loaded:  [spriteset_w_s_o_coal_1, spriteset_w_s_o_coal_2, spriteset_w_s_o_coal_3, spriteset_w_s_o_coal_4];
    loading: [spriteset_w_s_o_coal_1, spriteset_w_s_o_coal_2, spriteset_w_s_o_coal_3, spriteset_w_s_o_coal_4];
}

spriteset(spriteset_w_m_o_coal_1, "gfx/W/w_m_o_coal_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_coal_2, "gfx/W/w_m_o_coal_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_coal_3, "gfx/W/w_m_o_coal_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_coal_4, "gfx/W/w_m_o_coal_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_o_coal { //medium coal open cargo
    loaded:  [spriteset_w_m_o_coal_1, spriteset_w_m_o_coal_2, spriteset_w_m_o_coal_3, spriteset_w_m_o_coal_4];
    loading: [spriteset_w_m_o_coal_1, spriteset_w_m_o_coal_2, spriteset_w_m_o_coal_3, spriteset_w_m_o_coal_4];
}

// fruit low

spriteset(spriteset_w_s_o_fruit_1, "gfx/W/w_s_o_fruit_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_fruit_2, "gfx/W/w_s_o_fruit_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_fruit_3, "gfx/W/w_s_o_fruit_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_fruit_4, "gfx/W/w_s_o_fruit_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_o_fruit { //short fruit open cargo
    loaded:  [spriteset_w_s_o_fruit_1, spriteset_w_s_o_fruit_2, spriteset_w_s_o_fruit_3, spriteset_w_s_o_fruit_4];
    loading: [spriteset_w_s_o_fruit_1, spriteset_w_s_o_fruit_2, spriteset_w_s_o_fruit_3, spriteset_w_s_o_fruit_4];
}

spriteset(spriteset_w_m_o_fruit_1, "gfx/W/w_m_o_fruit_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_fruit_2, "gfx/W/w_m_o_fruit_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_fruit_3, "gfx/W/w_m_o_fruit_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_fruit_4, "gfx/W/w_m_o_fruit_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_o_fruit { //medium fruit open cargo
    loaded:  [spriteset_w_m_o_fruit_1, spriteset_w_m_o_fruit_2, spriteset_w_m_o_fruit_3, spriteset_w_m_o_fruit_4];
    loading: [spriteset_w_m_o_fruit_1, spriteset_w_m_o_fruit_2, spriteset_w_m_o_fruit_3, spriteset_w_m_o_fruit_4];
}

// grey low

spriteset(spriteset_w_s_o_grey_1, "gfx/W/w_s_o_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_grey_2, "gfx/W/w_s_o_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_grey_3, "gfx/W/w_s_o_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_grey_4, "gfx/W/w_s_o_grey_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_o_grey { //short grey open cargo
    loaded:  [spriteset_w_s_o_grey_1, spriteset_w_s_o_grey_2, spriteset_w_s_o_grey_3, spriteset_w_s_o_grey_4];
    loading: [spriteset_w_s_o_grey_1, spriteset_w_s_o_grey_2, spriteset_w_s_o_grey_3, spriteset_w_s_o_grey_4];
}

spriteset(spriteset_w_m_o_grey_1, "gfx/W/w_m_o_grey_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_grey_2, "gfx/W/w_m_o_grey_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_grey_3, "gfx/W/w_m_o_grey_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_grey_4, "gfx/W/w_m_o_grey_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_o_grey { //medium grey open cargo
    loaded:  [spriteset_w_m_o_grey_1, spriteset_w_m_o_grey_2, spriteset_w_m_o_grey_3, spriteset_w_m_o_grey_4];
    loading: [spriteset_w_m_o_grey_1, spriteset_w_m_o_grey_2, spriteset_w_m_o_grey_3, spriteset_w_m_o_grey_4];
}

// ore low

spriteset(spriteset_w_s_o_ore_1, "gfx/W/w_s_o_ore_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_ore_2, "gfx/W/w_s_o_ore_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_ore_3, "gfx/W/w_s_o_ore_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_ore_4, "gfx/W/w_s_o_ore_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_o_ore { //short ore open cargo
    loaded:  [spriteset_w_s_o_ore_1, spriteset_w_s_o_ore_2, spriteset_w_s_o_ore_3, spriteset_w_s_o_ore_4];
    loading: [spriteset_w_s_o_ore_1, spriteset_w_s_o_ore_2, spriteset_w_s_o_ore_3, spriteset_w_s_o_ore_4];
}

spriteset(spriteset_w_m_o_ore_1, "gfx/W/w_m_o_ore_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_ore_2, "gfx/W/w_m_o_ore_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_ore_3, "gfx/W/w_m_o_ore_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_ore_4, "gfx/W/w_m_o_ore_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_o_ore { //medium ore open cargo
    loaded:  [spriteset_w_m_o_ore_1, spriteset_w_m_o_ore_2, spriteset_w_m_o_ore_3, spriteset_w_m_o_ore_4];
    loading: [spriteset_w_m_o_ore_1, spriteset_w_m_o_ore_2, spriteset_w_m_o_ore_3, spriteset_w_m_o_ore_4];
}

// sand low

spriteset(spriteset_w_s_o_sand_1, "gfx/W/w_s_o_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_sand_2, "gfx/W/w_s_o_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_sand_3, "gfx/W/w_s_o_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_sand_4, "gfx/W/w_s_o_sand_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_o_sand { //short sand open cargo
    loaded:  [spriteset_w_s_o_sand_1, spriteset_w_s_o_sand_2, spriteset_w_s_o_sand_3, spriteset_w_s_o_sand_4];
    loading: [spriteset_w_s_o_sand_1, spriteset_w_s_o_sand_2, spriteset_w_s_o_sand_3, spriteset_w_s_o_sand_4];
}

spriteset(spriteset_w_m_o_sand_1, "gfx/W/w_m_o_sand_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_sand_2, "gfx/W/w_m_o_sand_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_sand_3, "gfx/W/w_m_o_sand_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_sand_4, "gfx/W/w_m_o_sand_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_o_sand { //medium sand open cargo
    loaded:  [spriteset_w_m_o_sand_1, spriteset_w_m_o_sand_2, spriteset_w_m_o_sand_3, spriteset_w_m_o_sand_4];
    loading: [spriteset_w_m_o_sand_1, spriteset_w_m_o_sand_2, spriteset_w_m_o_sand_3, spriteset_w_m_o_sand_4];
}

// scrap low

spriteset(spriteset_w_s_o_scrap_1, "gfx/W/w_s_o_scrap_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_scrap_2, "gfx/W/w_s_o_scrap_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_scrap_3, "gfx/W/w_s_o_scrap_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_scrap_4, "gfx/W/w_s_o_scrap_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_o_scrap { //short scrap open cargo
    loaded:  [spriteset_w_s_o_scrap_1, spriteset_w_s_o_scrap_2, spriteset_w_s_o_scrap_3, spriteset_w_s_o_scrap_4];
    loading: [spriteset_w_s_o_scrap_1, spriteset_w_s_o_scrap_2, spriteset_w_s_o_scrap_3, spriteset_w_s_o_scrap_4];
}

spriteset(spriteset_w_m_o_scrap_1, "gfx/W/w_m_o_scrap_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_scrap_2, "gfx/W/w_m_o_scrap_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_scrap_3, "gfx/W/w_m_o_scrap_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_scrap_4, "gfx/W/w_m_o_scrap_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_o_scrap { //medium scrap open cargo
    loaded:  [spriteset_w_m_o_scrap_1, spriteset_w_m_o_scrap_2, spriteset_w_m_o_scrap_3, spriteset_w_m_o_scrap_4];
    loading: [spriteset_w_m_o_scrap_1, spriteset_w_m_o_scrap_2, spriteset_w_m_o_scrap_3, spriteset_w_m_o_scrap_4];
}

// slag low

spriteset(spriteset_w_s_o_slag_med_1, "gfx/W/w_s_o_slag_med_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_slag_med_2, "gfx/W/w_s_o_slag_med_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_slag_med_3, "gfx/W/w_s_o_slag_med_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_slag_med_4, "gfx/W/w_s_o_slag_med_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_slag_hot_1, "gfx/W/w_s_o_slag_hot_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_slag_hot_2, "gfx/W/w_s_o_slag_hot_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_slag_hot_3, "gfx/W/w_s_o_slag_hot_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_o_slag_hot_4, "gfx/W/w_s_o_slag_hot_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_o_slag { //short slag open cargo
    loaded:  [spriteset_w_s_o_slag_med_1, spriteset_w_s_o_slag_med_2, spriteset_w_s_o_slag_med_3, spriteset_w_s_o_slag_med_4];
    loading: [spriteset_w_s_o_slag_med_1, spriteset_w_s_o_slag_med_2, spriteset_w_s_o_slag_med_3, spriteset_w_s_o_slag_med_4];
}

spriteset(spriteset_w_m_o_slag_med_1, "gfx/W/w_m_o_slag_med_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_slag_med_2, "gfx/W/w_m_o_slag_med_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_slag_med_3, "gfx/W/w_m_o_slag_med_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_slag_med_4, "gfx/W/w_m_o_slag_med_04.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_slag_hot_1, "gfx/W/w_m_o_slag_hot_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_slag_hot_2, "gfx/W/w_m_o_slag_hot_02.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_slag_hot_3, "gfx/W/w_m_o_slag_hot_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_o_slag_hot_4, "gfx/W/w_m_o_slag_hot_04.png") {
    tmpl_7()
}

spritegroup spritegroup_w_m_o_slag { //medium slag open cargo
    loaded:  [spriteset_w_m_o_slag_med_1, spriteset_w_m_o_slag_med_2, spriteset_w_m_o_slag_med_3, spriteset_w_m_o_slag_med_4];
    loading: [spriteset_w_m_o_slag_med_1, spriteset_w_m_o_slag_med_2, spriteset_w_m_o_slag_med_3, spriteset_w_m_o_slag_med_4];
}

// Open trucks
switch (FEAT_ROADVEHS, SELF, switch_w_s_o_crate, random_bits ) {
    0..255:         spritegroup_w_s_o_crate_a;

}
switch (FEAT_ROADVEHS, SELF, switch_w_s_o_cupr, random_bits ) {
    0..255:         spritegroup_w_s_o_cupr_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_o_food, random_bits ) {
    0..255:         spritegroup_w_s_o_food_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_o_iron, random_bits ) {
    0..255:         spritegroup_w_s_o_iron_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_o_paper, random_bits ) {
    0..255:         spritegroup_w_s_o_paper_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_o_steel, random_bits ) {
    0..255:         spritegroup_w_s_o_steel_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_o_tfmr, random_bits ) {
    0..127:         spritegroup_w_s_o_tfmr_a;
    128..255:       spritegroup_w_s_o_tfmr_b;
}

    switch (FEAT_ROADVEHS, SELF, switch_w_s_open_drum_bulk, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for changing default cargo sprite by class
        bitmask(CC_LIQUID): spritegroup_w_s_c_drum;
        bitmask(CC_BULK): spritegroup_w_s_o_brown;
        default: switch_w_s_o_crate;
    }

switch (FEAT_ROADVEHS, SELF, switch_w_s_c_open, cargo_type_in_veh ) {
        PAPR:       switch_w_s_o_paper;
        STEL:       switch_w_s_o_steel;
        METL:       switch_w_s_o_steel;
        SCMT:       spritegroup_w_s_o_scrap;
        RCYC:       spritegroup_w_s_o_scrap;
        COPR:       switch_w_s_o_cupr;
        FOOD:       switch_w_s_o_food;
        FISH:       switch_w_s_o_food;
        FRUT:       spritegroup_w_s_o_fruit;
        IORE:       spritegroup_w_s_o_ore;
        AORE:       spritegroup_w_s_o_ore;
        COAL:       spritegroup_w_s_o_coal;
        COKE:       spritegroup_w_s_o_coal;
        CORE:       spritegroup_w_s_o_ore;
        LVST:       spritegroup_w_s_c_sheep;
        PETR:       spritegroup_w_s_c_drum;
        OIL_:       spritegroup_w_s_c_drum;
        GRVL:       spritegroup_w_s_o_grey;
        SASH:       spritegroup_w_s_o_grey;
        LIME:       spritegroup_w_s_o_grey;
        PEAT:       spritegroup_w_s_o_brown;
        SAND:       spritegroup_w_s_o_sand;
        PHOS:       spritegroup_w_s_o_grey;
        SALT:       spritegroup_w_s_o_grey;
        IRON:       switch_w_s_o_iron;
        POWR:       switch_w_s_o_tfmr;
        PIPE:       spritegroup_w_s_c_pipe;
        ZINC:       spritegroup_w_s_o_steel_a;
        SLAG:       spritegroup_w_s_o_slag;
        default:    switch_w_s_open_drum_bulk;        
}


    switch (FEAT_ROADVEHS, SELF, switch_w_m_open_drum_bulk, cargo_classes & bitmask(CC_LIQUID, CC_BULK)) { //switch for changing default cargo sprite by class
        bitmask(CC_LIQUID): spritegroup_w_m_c_drum;
        bitmask(CC_BULK): spritegroup_w_m_o_brown;
        default: switch_w_m_c_crate;
    }

switch (FEAT_ROADVEHS, SELF, switch_w_m_c_open, cargo_type_in_veh ) {
        PAPR:       switch_w_m_c_paper;
        STEL:       switch_w_m_c_steel;
        METL:       switch_w_m_c_steel;
        SCMT:       spritegroup_w_m_o_scrap;
        RCYC:       spritegroup_w_m_o_scrap;
        COPR:       switch_w_m_c_cupr;
        FOOD:       switch_w_m_c_food;
        FISH:       switch_w_m_c_food;
        FRUT:       spritegroup_w_m_o_fruit;
        IORE:       spritegroup_w_m_o_ore;
        AORE:       spritegroup_w_m_o_ore;
        COAL:       spritegroup_w_m_o_coal;
        COKE:       spritegroup_w_m_o_coal;
        CORE:       spritegroup_w_m_o_ore;
        LVST:       spritegroup_w_m_c_sheep;
        PETR:       spritegroup_w_m_c_drum;
        OIL_:       spritegroup_w_m_c_drum;
        GRVL:       spritegroup_w_m_o_grey;
        SASH:       spritegroup_w_m_o_grey;
        LIME:       spritegroup_w_m_o_grey;
        PEAT:       spritegroup_w_m_o_brown;
        SAND:       spritegroup_w_m_o_sand;
        PHOS:       spritegroup_w_m_o_grey;
        SALT:       spritegroup_w_m_o_grey;
        IRON:       switch_w_m_c_iron;
        POWR:       switch_w_m_c_tfmr;
        PIPE:       spritegroup_w_m_c_pipe;
        ZINC:       spritegroup_w_m_c_steel_b;
        SLAG:       spritegroup_w_m_o_slag;
        default:    switch_w_m_open_drum_bulk;        
}

spriteset(spriteset_w_s_open_truck_a, "gfx/W/w_s_f_open_01.png") { //short open truck floor 1cc
    tmpl_7()
}
spriteset(spriteset_w_s_open_truck_b, "gfx/W/w_s_f_open_02.png") { //short open truck floor 2cc
    tmpl_7()
}
spriteset(spriteset_w_s_open_truck_c, "gfx/W/w_s_f_open_03.png") { //short open truck floor brown
    tmpl_7()
}
spriteset(spriteset_w_s_open_truck_d, "gfx/W/w_s_f_open_04.png") { //short open truck floor grey
    tmpl_7()
}

spriteset(spriteset_w_m_open_truck_a, "gfx/W/w_m_f_open_01.png") { //medium open truck floor 1cc
    tmpl_7()
}
spriteset(spriteset_w_m_open_truck_b, "gfx/W/w_m_f_open_02.png") { //medium open truck floor 2cc
    tmpl_7()
}
spriteset(spriteset_w_m_open_truck_c, "gfx/W/w_m_f_open_03.png") { //medium open truck floor lt grey
    tmpl_7()
}
spriteset(spriteset_w_m_open_truck_d, "gfx/W/w_m_f_open_04.png") { //medium open truck floor grey
    tmpl_7()
}

spriteset(spriteset_w_s_open_side_a, "gfx/W/w_s_t_open_01.png") { //short open truck side 1cc
    tmpl_7()
}
spriteset(spriteset_w_s_open_side_b, "gfx/W/w_s_t_open_02.png") { //short open truck side 2cc
    tmpl_7()
}
spriteset(spriteset_w_s_open_side_c, "gfx/W/w_s_t_open_03.png") { //short open truck side brown
    tmpl_7()
}
spriteset(spriteset_w_s_open_side_d, "gfx/W/w_s_t_open_04.png") { //short open truck side grey
    tmpl_7()
}

spriteset(spriteset_w_m_open_side_a, "gfx/W/w_m_t_open_01.png") { //medium open truck side 1cc
    tmpl_7()
}
spriteset(spriteset_w_m_open_side_b, "gfx/W/w_m_t_open_02.png") { //medium open truck side 2cc
    tmpl_7()
}
spriteset(spriteset_w_m_open_side_c, "gfx/W/w_m_t_open_03.png") { //medium open truck side lt grey
    tmpl_7()
}
spriteset(spriteset_w_m_open_side_d, "gfx/W/w_m_t_open_04.png") { //medium open truck side grey
    tmpl_7()
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_f_open_a, random_bits ) {
    0..95:         spriteset_w_s_open_truck_a;
    96..191:       spriteset_w_s_open_truck_c;
    192..223:      spriteset_w_s_open_truck_b;
    223..255:      spriteset_w_s_open_truck_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_f_open_b, random_bits ) {
    0..95:         spriteset_w_s_open_truck_a;
    96..191:       spriteset_w_s_open_truck_b;
    192..255:      spriteset_w_s_open_truck_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_f_open, build_year ) {
    0..1960:         switch_w_s_f_open_a;
                     switch_w_s_f_open_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_t_open_a, random_bits ) {
    0..95:         spriteset_w_s_open_side_a;
    96..191:       spriteset_w_s_open_side_c;
    192..223:      spriteset_w_s_open_side_b;
    224..255:      spriteset_w_s_open_side_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_t_open_b, random_bits ) {
    0..95:         spriteset_w_s_open_side_a;
    96..191:       spriteset_w_s_open_side_b;
    192..255:      spriteset_w_s_open_side_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_t_open, build_year ) {
    0..1960:         switch_w_s_t_open_a;
                     switch_w_s_t_open_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_f_open, random_bits ) {
    0..63:         spriteset_w_m_open_truck_a;
    64..127:       spriteset_w_m_open_truck_c;
    128..191:      spriteset_w_m_open_truck_b;
    192..255:      spriteset_w_m_open_truck_d;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_t_open, random_bits ) {
    0..63:         spriteset_w_m_open_side_a;
    64..127:       spriteset_w_m_open_side_c;
    128..191:      spriteset_w_m_open_side_b;
    192..255:      spriteset_w_m_open_side_d;
}

switch(FEAT_ROADVEHS, SELF, switch_wagon_open_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  i_wagon_frame;
    1:  switch_w_s_f_open;
    2:  switch_w_s_c_open;
    3:  switch_w_s_t_open;
}

switch(FEAT_ROADVEHS, SELF, switch_wagon_open_6, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_i_frame_6;
    1:  switch_w_m_f_open;
    2:  switch_w_m_c_open;
    3:  switch_w_m_t_open;
}

spriteset(spriteset_i_open_1_p, "gfx/P/i_open_01.png") {
    tmpl_p()
}
spriteset(spriteset_i_open_2_p, "gfx/P/i_open_02.png") {
    tmpl_p()
}
spriteset(spriteset_i_open_3_p, "gfx/P/i_open_03.png") {
    tmpl_p()
}
spriteset(spriteset_i_open_4_p, "gfx/P/i_open_04.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_i_open_p, build_year ) {
        0..1955:        spriteset_i_open_1_p;
        default:        spriteset_i_open_2_p;        
}

// Box Wagon graphics

spriteset(spriteset_w_s_box_top_a, "gfx/W/w_s_t_box_01.png") { 
    tmpl_7()
}
spriteset(spriteset_w_s_box_load_a, "gfx/W/w_s_t_box_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_box_a { //short box top type a 1cc/2cc
    loaded:  [spriteset_w_s_box_top_a];
    loading: [spriteset_w_s_box_load_a];
}
spriteset(spriteset_w_s_box_top_b, "gfx/W/w_s_t_box_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_s_box_load_b, "gfx/W/w_s_t_box_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_s_box_b { //short box top type b 2cc/1cc
    loaded:  [spriteset_w_s_box_top_b];
    loading: [spriteset_w_s_box_load_b];
}
spriteset(spriteset_w_m_box_top_a, "gfx/W/w_m_t_box_01.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_box_load_a, "gfx/W/w_m_t_box_02.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_box_a { //medium box top type a 1cc/2cc
    loaded:  [spriteset_w_m_box_top_a];
    loading: [spriteset_w_m_box_load_a];
}
spriteset(spriteset_w_m_box_top_b, "gfx/W/w_m_t_box_03.png") {
    tmpl_7()
}
spriteset(spriteset_w_m_box_load_b, "gfx/W/w_m_t_box_04.png") {
    tmpl_7()
}
spritegroup spritegroup_w_m_box_b { //medium box top type b 2cc/1cc
    loaded:  [spriteset_w_m_box_top_b];
    loading: [spriteset_w_m_box_load_b];
}


switch (FEAT_ROADVEHS, SELF, switch_w_s_t_box_a, random_bits ) {
    0..127:         spritegroup_w_s_box_a;
    128..255:       spritegroup_w_s_box_b;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_t_box_b, build_year ) {
    0..1900:        spritegroup_w_s_box_a;
    1901..1950:     switch_w_s_t_box_a;
                    spritegroup_w_s_box_b;                    
}

switch (FEAT_ROADVEHS, SELF, switch_w_s_t_box_c, random_bits ) {
    0..127:         switch_w_s_t_box_b;
    128..255:       switch_w_s_t_curtain_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_s_t_box, build_year ) {
    0..1984:        switch_w_s_t_box_b;
    1985..1996:     switch_w_s_t_box_c;
                    switch_w_s_t_curtain_a;                    
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_t_box_a, random_bits ) {
    0..127:         spritegroup_w_m_box_a;
    128..255:       spritegroup_w_m_box_b;
}

switch (FEAT_ROADVEHS, SELF, switch_w_m_t_box_b, random_bits ) {
    0..127:         switch_w_m_t_box_a;
    128..255:       switch_w_m_t_curtain_a;
}
switch (FEAT_ROADVEHS, SELF, switch_w_m_t_box, build_year ) {
    0..1984:        switch_w_m_t_box_a;
    1985..1996:     switch_w_m_t_box_b;
                    switch_w_m_t_curtain_a;                    
}

switch(FEAT_ROADVEHS, SELF, switch_wagon_box_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  i_wagon_frame;
    1:  spriteset_w_s_box_floor_a;
    2:  switch_w_s_c_box;
    3:  switch_w_s_t_box;
}

switch(FEAT_ROADVEHS, SELF, switch_wagon_box_6, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_i_frame_6;
    1:  spriteset_w_m_box_floor_a;
    2:  switch_w_m_c_box;
    3:  switch_w_m_t_box;
}

spriteset(spriteset_i_box_1_p, "gfx/P/i_box_01.png") {
    tmpl_p()
}
spriteset(spriteset_i_box_2_p, "gfx/P/i_box_02.png") {
    tmpl_p()
}
spriteset(spriteset_i_box_3_p, "gfx/P/i_box_03.png") {
    tmpl_p()
}
spriteset(spriteset_i_box_4_p, "gfx/P/i_box_04.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_i_box_p, build_year ) {
        0..1955:        spriteset_i_box_1_p;
        default:        spriteset_i_box_2_p;        
}

// Flatbed Wagon graphics

switch(FEAT_ROADVEHS, SELF, switch_wagon_flat_4, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  i_wagon_frame;
    1:  switch_w_s_f_flat_stake;
    2:  switch_w_s_c_flat;
    3:  switch_w_s_t_flat_stake;
}

switch(FEAT_ROADVEHS, SELF, switch_wagon_flat_6, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 3 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_i_frame_4;
    1:  switch_w_m_f_flat_stake;
    2:  switch_w_m_c_flat;
    3:  switch_w_m_t_flat_stake;
}

spriteset(spriteset_i_flat_1_p, "gfx/P/i_flat_01.png") {
    tmpl_p()
}
spriteset(spriteset_i_flat_2_p, "gfx/P/i_flat_02.png") {
    tmpl_p()
}
spriteset(spriteset_i_flat_3_p, "gfx/P/i_flat_03.png") {
    tmpl_p()
}
spriteset(spriteset_i_flat_4_p, "gfx/P/i_flat_04.png") {
    tmpl_p()
}

switch (FEAT_ROADVEHS, SELF, switch_i_flat_p, build_year ) {
        0..1955:        spriteset_i_flat_1_p;
        default:        spriteset_i_flat_2_p;        
}

// is0 open graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_is0_open, position_in_consist ) {
    0:  switch_is0_motor;
    1:  switch_wagon_open_4;
        switch_wagon_open_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_is0_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_is0_motor_p;
    1:  switch_i_open_p;
    2:  switch_steam_icon;
}

//is0 open properties

switch (FEAT_ROADVEHS, SELF, switch_length_is0_open, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_is0_open, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_is0_open, position_in_consist ) {
    0:  return VISUAL_EFFECT_STEAM;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_is0_open, extra_callback_info1) {
    0:  return item_is0_open;
    1:  return item_is0_open;
    2:  return item_is0_open;
    3:  return item_is0_open;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_stv ==1){
item(FEAT_ROADVEHS, item_is0_open) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_PK_IS0), string(STR_O_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT];  
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    80;
    running_cost_factor:            80;
    speed:                          40 km/h;
    power:                          100 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1860,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_STEAM;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         24 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 1) {
    property {
    introduction_date:              date(1830,01,01); 
    model_life:                     70;
    }
}
if (param_fgei == 2) {
    property {
    introduction_date:              date(1800,01,01); 
    model_life:                     50;
    }
}
graphics {
    cargo_capacity:                 capacity_is0_open;
    purchase_cargo_capacity:        ((param_capacity*36)/2)/4;
    default:                        switch_spriteset_is0_open;
    length:                         switch_length_is0_open;
//  cargo_age_period:               decay_is0_open;
    running_cost_factor:            switch_c0_runcost;
    purchase_running_cost_factor:   switch_c0_powercost;
    articulated_part:               switch_is0_open;
    visual_effect:                  smoke_is0_open;
    purchase:                       switch_purchase_is0_open;
    cost_factor:                    ((param_buycost*80)/4);
    }
}
}

// is1 open graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_is1_open, position_in_consist ) {
    0:  switch_is1_motor;
    1:  switch_wagon_open_4;
        switch_wagon_open_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_is1_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_is1_motor_p;
    1:  switch_i_open_p;
    2:  switch_steam_icon;
}

//is1 open properties

switch (FEAT_ROADVEHS, SELF, switch_length_is1_open, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_is1_open, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_is1_open, position_in_consist ) {
    0:  return VISUAL_EFFECT_STEAM;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_is1_open, extra_callback_info1) {
    0:  return item_is1_open;
    1:  return item_is1_open;
    2:  return item_is1_open;
    3:  return item_is1_open;
    4:  return item_is1_open;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_stv ==1){
item(FEAT_ROADVEHS, item_is1_open) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_HP_IS1), string(STR_O_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    96;
    running_cost_factor:            96;
    speed:                          50 km/h;
    power:                          120 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1900,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_STEAM;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         30 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 2) {
    property {
    introduction_date:              date(1850,01,01); 
    model_life:                     90;
    }
}
graphics {
    cargo_capacity:                 capacity_is1_open;
    purchase_cargo_capacity:        ((param_capacity*48)/2)/5;
    default:                        switch_spriteset_is1_open;
    length:                         switch_length_is1_open;
//  cargo_age_period:               decay_is1_open;
    running_cost_factor:            switch_c1_runcost;
    purchase_running_cost_factor:   switch_c1_powercost;
    articulated_part:               switch_is1_open;
    visual_effect:                  smoke_is1_open;
    purchase:                       switch_purchase_is1_open;
    cost_factor:                    ((param_buycost*96)/4);
    }
}
}

// ic1 open graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ic1_open, position_in_consist ) {
    0:  switch_ic1_motor;
    1:  switch_wagon_open_4;
        switch_wagon_open_4; //default
}

//ic1 open properties

switch (FEAT_ROADVEHS, SELF, switch_length_ic1_open, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ic1_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic1_motor_p;
    1:  switch_i_open_p;
    2:  switch_fuel_icon;
}

switch (FEAT_ROADVEHS, SELF, capacity_ic1_open, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ic1_open, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ic1_open, extra_callback_info1) {
    0:  return item_ic1_open;
    1:  return item_ic1_open;
    2:  return item_ic1_open;
    3:  return item_ic1_open;
    4:  return item_ic1_open;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_fftv ==1){
item(FEAT_ROADVEHS, item_ic1_open) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_AB_IC1), string(STR_O_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    120;
    running_cost_factor:            120;
    speed:                          50 km/h;
    power:                          150 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1930,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }
graphics {

    cargo_capacity:                 capacity_ic1_open;
    purchase_cargo_capacity:        ((param_capacity*48)/2)/5;
    default:                        switch_spriteset_ic1_open;
    length:                         switch_length_ic1_open;
//  cargo_age_period:               decay_ic1_open;
    running_cost_factor:            switch_c2_runcost;
    purchase_running_cost_factor:   switch_c2_powercost;
    articulated_part:               switch_ic1_open;
    visual_effect:                  smoke_ic1_open;
    purchase:                       switch_purchase_ic1_open;
    cost_factor:                    ((param_buycost*120)/4);
    }
}
}

// ic2 open graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ic2_open, position_in_consist ) {
    0:  switch_ic2_motor;
    1:  switch_wagon_open_6;
        switch_wagon_open_6; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ic2_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic2_motor_p;
    1:  spriteset_i_open_3_p;
    2:  switch_fuel_icon;
}

//ic2 open properties

switch (FEAT_ROADVEHS, SELF, switch_length_ic2_open, position_in_consist) {
    0:  return 3;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_ic2_open, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*16)/2);
        return ((param_capacity*16)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ic2_open, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ic2_open, extra_callback_info1) {
    0:  return item_ic2_open;
    1:  return item_ic2_open;
    2:  return item_ic2_open;
    3:  return item_ic2_open;
    4:  return item_ic2_open;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_fftv ==1){
item(FEAT_ROADVEHS, item_ic2_open) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_PM_IC2), string(STR_O_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    140;
    running_cost_factor:            140;
    speed:                          60 km/h;
    power:                          300 hp;
    cargo_capacity:                 64;
    introduction_date:              date(1950,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }
graphics {

    cargo_capacity:                 capacity_ic2_open;
    purchase_cargo_capacity:        ((param_capacity*64)/2)/5;
    default:                        switch_spriteset_ic2_open;
    length:                         switch_length_ic2_open;
//  cargo_age_period:               decay_ic2_open;
    running_cost_factor:            switch_c3_runcost;
    purchase_running_cost_factor:   switch_c3_powercost;
    articulated_part:               switch_ic2_open;
    visual_effect:                  smoke_ic2_open;
    purchase:                       switch_purchase_ic2_open;
    cost_factor:                    ((param_buycost*140)/4);
    }
}
}

// ic3 open graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ic3_open, position_in_consist ) {
    0:  switch_ic3_motor;
    1:  switch_wagon_open_6;
        switch_wagon_open_6; //default
}

//ic3 open properties

switch (FEAT_ROADVEHS, SELF, switch_length_ic3_open, position_in_consist) {
    0:  return 4;
    1:  return 6;
        return 6;
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ic3_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic3_motor_p;
    1:  spriteset_i_open_4_p;
    2:  switch_hybrid_icon;
}

switch (FEAT_ROADVEHS, SELF, capacity_ic3_open, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*16)/2);
        return ((param_capacity*16)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ic3_open, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ic3_open, extra_callback_info1) {
    0:  return item_ic3_open;
    1:  return item_ic3_open;
    2:  return item_ic3_open;
    3:  return item_ic3_open;
    4:  return item_ic3_open;
    5:  return item_ic3_open;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_fftv ==1){
item(FEAT_ROADVEHS, item_ic3_open) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_AB_IC3), string(STR_O_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    160;
    running_cost_factor:            160;
    speed:                          65 km/h;
    power:                          500 hp;
    cargo_capacity:                 80;
    introduction_date:              date(2000,10,24);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         24 ton;
    }
graphics {

    cargo_capacity:                 capacity_ic3_open;
    purchase_cargo_capacity:        ((param_capacity*80)/2)/6;
    default:                        switch_spriteset_ic3_open;
    length:                         switch_length_ic3_open;
//  cargo_age_period:               decay_ic3_open;
    running_cost_factor:            switch_c3_runcost;
    purchase_running_cost_factor:   switch_c3_powercost;
    articulated_part:               switch_ic3_open;
    visual_effect:                  smoke_ic3_open;
    purchase:                       switch_purchase_ic3_open;
    cost_factor:                    ((param_buycost*160)/4);
    }
}
}

// ie1 open graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ie1_open, position_in_consist ) {
    0:  switch_ie1_motor;
    1:  switch_wagon_open_4;
        switch_wagon_open_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ie1_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ie1_motor_p;
    1:  switch_i_open_p;
    2:  switch_wire_icon;
}

//ie1 open properties

switch (FEAT_ROADVEHS, SELF, switch_length_ie1_open, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_ie1_open, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ie1_open, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ie1_open, extra_callback_info1) {
    0:  return item_ie1_open;
    1:  return item_ie1_open;
    2:  return item_ie1_open;
    3:  return item_ie1_open;
    4:  return item_ie1_open;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_eltv ==1){
item(FEAT_ROADVEHS, item_ie1_open) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_KM_IE1), string(STR_O_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    110;
    running_cost_factor:            110;
    speed:                          40 km/h;
    power:                          160 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1890,10,24);
    model_life:                     40;
    vehicle_life:                   55;
    reliability_decay:              14;
    tram_type:                      ELRL;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {

    cargo_capacity:                 capacity_ie1_open;
    purchase_cargo_capacity:        ((param_capacity*48)/2)/5;
    default:                        switch_spriteset_ie1_open;
    length:                         switch_length_ie1_open;
//  cargo_age_period:               decay_ie1_open;
    running_cost_factor:            switch_e1_runcost;
    purchase_running_cost_factor:   switch_e1_powercost;
    articulated_part:               switch_ie1_open;
    visual_effect:                  smoke_ie1_open;
    purchase:                       switch_purchase_ie1_open;
    cost_factor:                    ((param_buycost*110)/4);
    }
}
}

// ie2 open graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ie2_open, position_in_consist ) {
    0:  switch_ie2_motor;
    1:  switch_wagon_open_4;
        switch_wagon_open_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ie2_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ie2_motor_p;
    1:  switch_i_open_p;
    2:  switch_wire_icon;
}

//ie2 open properties

switch (FEAT_ROADVEHS, SELF, switch_length_ie2_open, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_ie2_open, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ie2_open, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ie2_open, extra_callback_info1) {
    0:  return item_ie2_open;
    1:  return item_ie2_open;
    2:  return item_ie2_open;
    3:  return item_ie2_open;
    4:  return item_ie2_open;
    5:  return item_ie2_open;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_eltv ==1){
item(FEAT_ROADVEHS, item_ie2_open) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_LC_IE2), string(STR_O_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    130;
    running_cost_factor:            130;
    speed:                          50 km/h;
    power:                          240 hp;
    cargo_capacity:                 60;
    introduction_date:              date(1920,10,24);
    model_life:                     40;
    vehicle_life:                   60;
    reliability_decay:              14;
    tram_type:                      ELRL;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18 ton;
    }
graphics {

    cargo_capacity:                 capacity_ie2_open;
    purchase_cargo_capacity:        ((param_capacity*60)/2)/6;
    default:                        switch_spriteset_ie2_open;
    length:                         switch_length_ie2_open;
//  cargo_age_period:               decay_ie2_open;
    running_cost_factor:            switch_e2_runcost;
    purchase_running_cost_factor:   switch_e2_powercost;
    articulated_part:               switch_ie2_open;
    visual_effect:                  smoke_ie2_open;
    purchase:                       switch_purchase_ie2_open;
    cost_factor:                    ((param_buycost*130)/4);
    }
}
}

// ie3 open graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ie3_open, position_in_consist ) {
    0:  switch_ie3_motor;
    1:  switch_wagon_open_6;
        switch_wagon_open_6; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ie3_open, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ie3_motor_p;
    1:  spriteset_i_open_4_p;
    2:  switch_wire_icon;
}

//ie3 open properties

switch (FEAT_ROADVEHS, SELF, switch_length_ie3_open, position_in_consist) {
    0:  return 4;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_ie3_open, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*16)/2);
        return ((param_capacity*16)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ie3_open, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ie3_open, extra_callback_info1) {
    0:  return item_ie3_open;
    1:  return item_ie3_open;
    2:  return item_ie3_open;
    3:  return item_ie3_open;
    4:  return item_ie3_open;
    5:  return item_ie3_open;
    6:  return item_ie3_open;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_eltv ==1){
item(FEAT_ROADVEHS, item_ie3_open) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_KD_IE3), string(STR_O_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_LIQUID, CC_BULK);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_REFRIGERATED, CC_ARMOURED, CC_OVERSIZED);
    cargo_allow_refit:              [LVST, FOOD, FISH, FRUT]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    170;
    running_cost_factor:            170;
    speed:                          70 km/h;
    power:                          600 hp;
    cargo_capacity:                 96;
    introduction_date:              date(1970,10,24);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    tram_type:                      ELRL;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }
graphics {

    cargo_capacity:                 capacity_ie3_open;
    purchase_cargo_capacity:        ((param_capacity*96)/2)/7;
    default:                        switch_spriteset_ie3_open;
    length:                         switch_length_ie3_open;
//  cargo_age_period:               decay_ie3_open;
    running_cost_factor:            switch_e2_runcost;
    purchase_running_cost_factor:   switch_e2_powercost;
    articulated_part:               switch_ie3_open;
    visual_effect:                  smoke_ie3_open;
    purchase:                       switch_purchase_ie3_open;
    cost_factor:                    ((param_buycost*170)/4);
    }
}
}

// is0 box graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_is0_box, position_in_consist ) {
    0:  switch_is0_motor;
    1:  switch_wagon_box_4;
        switch_wagon_box_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_is0_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_is0_motor_p;
    1:  switch_i_box_p;
    2:  switch_steam_icon;
}

//is0 box properties

switch (FEAT_ROADVEHS, SELF, switch_length_is0_box, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_is0_box, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_is0_box, position_in_consist ) {
    0:  return VISUAL_EFFECT_STEAM;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_is0_box, extra_callback_info1) {
    0:  return item_is0_box;
    1:  return item_is0_box;
    2:  return item_is0_box;
    3:  return item_is0_box;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_stv ==1){
item(FEAT_ROADVEHS, item_is0_box) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_PM_IS0), string(STR_B_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER];
    cargo_disallow_refit:           [LVST]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    80;
    running_cost_factor:            80;
    speed:                          40 km/h;
    power:                          100 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1860,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_STEAM;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         24 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 1) {
    property {
    introduction_date:              date(1830,01,01); 
    model_life:                     70;
    }
}
if (param_fgei == 2) {
    property {
    introduction_date:              date(1800,01,01); 
    model_life:                     50;
    }
}
graphics {
    cargo_capacity:                 capacity_is0_box;
    purchase_cargo_capacity:        ((param_capacity*36)/2)/4;
    default:                        switch_spriteset_is0_box;
    length:                         switch_length_is0_box;
//  cargo_age_period:               decay_is0_box;
    running_cost_factor:            switch_c0_runcost;
    purchase_running_cost_factor:   switch_c0_powercost;
    articulated_part:               switch_is0_box;
    visual_effect:                  smoke_is0_box;
    purchase:                       switch_purchase_is0_box;
    cost_factor:                    ((param_buycost*80)/4);
    }
}
}

// is1 box graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_is1_box, position_in_consist ) {
    0:  switch_is1_motor;
    1:  switch_wagon_box_4;
        switch_wagon_box_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_is1_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_is1_motor_p;
    1:  switch_i_box_p;
    2:  switch_steam_icon;
}

//is1 box properties

switch (FEAT_ROADVEHS, SELF, switch_length_is1_box, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_is1_box, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_is1_box, position_in_consist ) {
    0:  return VISUAL_EFFECT_STEAM;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_is1_box, extra_callback_info1) {
    0:  return item_is1_box;
    1:  return item_is1_box;
    2:  return item_is1_box;
    3:  return item_is1_box;
    4:  return item_is1_box;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_stv ==1){
item(FEAT_ROADVEHS, item_is1_box) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_PK_IS1), string(STR_B_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    96;
    running_cost_factor:            96;
    speed:                          50 km/h;
    power:                          120 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1900,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_STEAM;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         30 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 2) {
    property {
    introduction_date:              date(1850,01,01); 
    model_life:                     90;
    }
}
graphics {
    cargo_capacity:                 capacity_is1_box;
    purchase_cargo_capacity:        ((param_capacity*48)/2)/5;
    default:                        switch_spriteset_is1_box;
    length:                         switch_length_is1_box;
//  cargo_age_period:               decay_is1_box;
    running_cost_factor:            switch_c1_runcost;
    purchase_running_cost_factor:   switch_c1_powercost;
    articulated_part:               switch_is1_box;
    visual_effect:                  smoke_is1_box;
    purchase:                       switch_purchase_is1_box;
    cost_factor:                    ((param_buycost*96)/4);
    }
}
}

// ic1 box graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ic1_box, position_in_consist ) {
    0:  switch_ic1_motor;
    1:  switch_wagon_box_4;
        switch_wagon_box_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ic1_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic1_motor_p;
    1:  switch_i_box_p;
    2:  switch_fuel_icon;
}

//ic1 box properties

switch (FEAT_ROADVEHS, SELF, switch_length_ic1_box, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_ic1_box, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ic1_box, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ic1_box, extra_callback_info1) {
    0:  return item_ic1_box;
    1:  return item_ic1_box;
    2:  return item_ic1_box;
    3:  return item_ic1_box;
    4:  return item_ic1_box;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_fftv ==1){
item(FEAT_ROADVEHS, item_ic1_box) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_PM_IC1), string(STR_B_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    120;
    running_cost_factor:            120;
    speed:                          50 km/h;
    power:                          150 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1930,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }
graphics {

    cargo_capacity:                 capacity_ic1_box;
    purchase_cargo_capacity:        ((param_capacity*48)/2)/5;
    default:                        switch_spriteset_ic1_box;
    length:                         switch_length_ic1_box;
//  cargo_age_period:               decay_ic1_box;
    running_cost_factor:            switch_c2_runcost;
    purchase_running_cost_factor:   switch_c2_powercost;
    articulated_part:               switch_ic1_box;
    visual_effect:                  smoke_ic1_box;
    purchase:                       switch_purchase_ic1_box;
    cost_factor:                    ((param_buycost*120)/4);
    }
}
}

// ic2 box graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ic2_box, position_in_consist ) {
    0:  switch_ic2_motor;
    1:  switch_wagon_box_6;
        switch_wagon_box_6; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ic2_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic2_motor_p;
    1:  spriteset_i_box_3_p;
    2:  switch_fuel_icon;
}

//ic2 box properties

switch (FEAT_ROADVEHS, SELF, switch_length_ic2_box, position_in_consist) {
    0:  return 3;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_ic2_box, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*16)/2);
        return ((param_capacity*16)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ic2_box, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ic2_box, extra_callback_info1) {
    0:  return item_ic2_box;
    1:  return item_ic2_box;
    2:  return item_ic2_box;
    3:  return item_ic2_box;
    4:  return item_ic2_box;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_fftv ==1){
item(FEAT_ROADVEHS, item_ic2_box) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_KM_IC2), string(STR_B_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER];
    cargo_disallow_refit:           [LVST]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    140;
    running_cost_factor:            140;
    speed:                          60 km/h;
    power:                          300 hp;
    cargo_capacity:                 64;
    introduction_date:              date(1950,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }
graphics {

    cargo_capacity:                 capacity_ic2_box;
    purchase_cargo_capacity:        ((param_capacity*64)/2)/5;
    default:                        switch_spriteset_ic2_box;
    length:                         switch_length_ic2_box;
//  cargo_age_period:               decay_ic2_box;
    running_cost_factor:            switch_c3_runcost;
    purchase_running_cost_factor:   switch_c3_powercost;
    articulated_part:               switch_ic2_box;
    visual_effect:                  smoke_ic2_box;
    purchase:                       switch_purchase_ic2_box;
    cost_factor:                    ((param_buycost*140)/4);
    }
}
}

// ic3 box graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ic3_box, position_in_consist ) {
    0:  switch_ic3_motor;
    1:  switch_wagon_box_6;
        switch_wagon_box_6; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ic3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic3_motor_p;
    1:  spriteset_i_box_4_p;
    2:  switch_hybrid_icon;
}

//ic3 box properties

switch (FEAT_ROADVEHS, SELF, switch_length_ic3_box, position_in_consist) {
    0:  return 4;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_ic3_box, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*16)/2);
        return ((param_capacity*16)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ic3_box, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ic3_box, extra_callback_info1) {
    0:  return item_ic3_box;
    1:  return item_ic3_box;
    2:  return item_ic3_box;
    3:  return item_ic3_box;
    4:  return item_ic3_box;
    5:  return item_ic3_box;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_fftv ==1){
item(FEAT_ROADVEHS, item_ic3_box) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_YR_IC3), string(STR_B_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    160;
    running_cost_factor:            160;
    speed:                          65 km/h;
    power:                          500 hp;
    cargo_capacity:                 80;
    introduction_date:              date(2000,10,24);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         24 ton;
    }
graphics {

    cargo_capacity:                 capacity_ic3_box;
    purchase_cargo_capacity:        ((param_capacity*80)/2)/6;
    default:                        switch_spriteset_ic3_box;
    length:                         switch_length_ic3_box;
//  cargo_age_period:               decay_ic3_box;
    running_cost_factor:            switch_c3_runcost;
    purchase_running_cost_factor:   switch_c3_powercost;
    articulated_part:               switch_ic3_box;
    visual_effect:                  smoke_ic3_box;
    purchase:                       switch_purchase_ic3_box;
    cost_factor:                    ((param_buycost*160)/4);
    }
}
}

// ie1 box graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ie1_box, position_in_consist ) {
    0:  switch_ie1_motor;
    1:  switch_wagon_box_4;
        switch_wagon_box_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ie1_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ie1_motor_p;
    1:  switch_i_box_p;
    2:  switch_wire_icon;
}

//ie1 box properties

switch (FEAT_ROADVEHS, SELF, switch_length_ie1_box, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_ie1_box, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ie1_box, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ie1_box, extra_callback_info1) {
    0:  return item_ie1_box;
    1:  return item_ie1_box;
    2:  return item_ie1_box;
    3:  return item_ie1_box;
    4:  return item_ie1_box;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_eltv ==1){
item(FEAT_ROADVEHS, item_ie1_box) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_KD_IE1), string(STR_B_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER];
    cargo_disallow_refit:           [LVST]; 
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    110;
    running_cost_factor:            110;
    speed:                          40 km/h;
    power:                          160 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1890,10,24);
    model_life:                     40;
    vehicle_life:                   55;
    reliability_decay:              14;
    tram_type:                      ELRL;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {

    cargo_capacity:                 capacity_ie1_box;
    purchase_cargo_capacity:        ((param_capacity*48)/2)/5;
    default:                        switch_spriteset_ie1_box;
    length:                         switch_length_ie1_box;
//  cargo_age_period:               decay_ie1_box;
    running_cost_factor:            switch_e1_runcost;
    purchase_running_cost_factor:   switch_e1_powercost;
    articulated_part:               switch_ie1_box;
    visual_effect:                  smoke_ie1_box;
    purchase:                       switch_purchase_ie1_box;
    cost_factor:                    ((param_buycost*110)/4);
    }
}
}

// ie2 box graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ie2_box, position_in_consist ) {
    0:  switch_ie2_motor;
    1:  switch_wagon_box_4;
        switch_wagon_box_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ie2_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ie2_motor_p;
    1:  switch_i_box_p;
    2:  switch_wire_icon;
}

//ie2 box properties

switch (FEAT_ROADVEHS, SELF, switch_length_ie2_box, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_ie2_box, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ie2_box, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ie2_box, extra_callback_info1) {
    0:  return item_ie2_box;
    1:  return item_ie2_box;
    2:  return item_ie2_box;
    3:  return item_ie2_box;
    4:  return item_ie2_box;
    5:  return item_ie2_box;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_eltv ==1){
item(FEAT_ROADVEHS, item_ie2_box) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_YR_IE2), string(STR_B_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    130;
    running_cost_factor:            130;
    speed:                          50 km/h;
    power:                          240 hp;
    cargo_capacity:                 60;
    introduction_date:              date(1920,10,24);
    model_life:                     40;
    vehicle_life:                   60;
    reliability_decay:              14;
    tram_type:                      ELRL;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18 ton;
    }
graphics {

    cargo_capacity:                 capacity_ie2_box;
    purchase_cargo_capacity:        ((param_capacity*60)/2)/6;
    default:                        switch_spriteset_ie2_box;
    length:                         switch_length_ie2_box;
//  cargo_age_period:               decay_ie2_box;
    running_cost_factor:            switch_e2_runcost;
    purchase_running_cost_factor:   switch_e2_powercost;
    articulated_part:               switch_ie2_box;
    visual_effect:                  smoke_ie2_box;
    purchase:                       switch_purchase_ie2_box;
    cost_factor:                    ((param_buycost*130)/4);
    }
}
}

// ie3 box graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ie3_box, position_in_consist ) {
    0:  switch_ie3_motor;
    1:  switch_wagon_box_6;
        switch_wagon_box_6; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ie3_box, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ie3_motor_p;
    1:  spriteset_i_box_4_p;
    2:  switch_wire_icon;
}

//ie3 box properties

switch (FEAT_ROADVEHS, SELF, switch_length_ie3_box, position_in_consist) {
    0:  return 4;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_ie3_box, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*16)/2);
        return ((param_capacity*16)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ie3_box, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ie3_box, extra_callback_info1) {
    0:  return item_ie3_box;
    1:  return item_ie3_box;
    2:  return item_ie3_box;
    3:  return item_ie3_box;
    4:  return item_ie3_box;
    5:  return item_ie3_box;
    6:  return item_ie3_box;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_eltv ==1){
item(FEAT_ROADVEHS, item_ie3_box) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_KM_IE3), string(STR_B_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_PIECE_GOODS, CC_EXPRESS, CC_MAIL);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_BULK, CC_OVERSIZED, CC_LIQUID, CC_ARMOURED);
    cargo_allow_refit:              [MILK, FRUT, EOIL, BEER];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    170;
    running_cost_factor:            170;
    speed:                          70 km/h;
    power:                          600 hp;
    cargo_capacity:                 96;
    introduction_date:              date(1970,10,24);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    tram_type:                      ELRL;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }
graphics {

    cargo_capacity:                 capacity_ie3_box;
    purchase_cargo_capacity:        ((param_capacity*96)/2)/7;
    default:                        switch_spriteset_ie3_box;
    length:                         switch_length_ie3_box;
//  cargo_age_period:               decay_ie3_box;
    running_cost_factor:            switch_e2_runcost;
    purchase_running_cost_factor:   switch_e2_powercost;
    articulated_part:               switch_ie3_box;
    visual_effect:                  smoke_ie3_box;
    purchase:                       switch_purchase_ie3_box;
    cost_factor:                    ((param_buycost*170)/4);
    }
}
}

// is0 flat graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_is0_flat, position_in_consist ) {
    0:  switch_is0_motor;
    1:  switch_wagon_flat_4;
        switch_wagon_flat_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_is0_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_is0_motor_p;
    1:  switch_i_flat_p;
    2:  switch_steam_icon;
}

//is0 flat properties

switch (FEAT_ROADVEHS, SELF, switch_length_is0_flat, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_is0_flat, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_is0_flat, position_in_consist ) {
    0:  return VISUAL_EFFECT_STEAM;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_is0_flat, extra_callback_info1) {
    0:  return item_is0_flat;
    1:  return item_is0_flat;
    2:  return item_is0_flat;
    3:  return item_is0_flat;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_stv ==1){
item(FEAT_ROADVEHS, item_is0_flat) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_AB_IS0), string(STR_F_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    80;
    running_cost_factor:            80;
    speed:                          40 km/h;
    power:                          100 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1860,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_STEAM;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         24 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 1) {
    property {
    introduction_date:              date(1830,01,01); 
    model_life:                     70;
    }
}
if (param_fgei == 2) {
    property {
    introduction_date:              date(1800,01,01); 
    model_life:                     50;
    }
}
graphics {
    cargo_capacity:                 capacity_is0_flat;
    purchase_cargo_capacity:        ((param_capacity*36)/2)/4;
    default:                        switch_spriteset_is0_flat;
    length:                         switch_length_is0_flat;
//  cargo_age_period:               decay_is0_flat;
    running_cost_factor:            switch_c0_runcost;
    purchase_running_cost_factor:   switch_c0_powercost;
    articulated_part:               switch_is0_flat;
    visual_effect:                  smoke_is0_flat;
    purchase:                       switch_purchase_is0_flat;
    cost_factor:                    ((param_buycost*80)/4);
    }
}
}

// is1 flat graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_is1_flat, position_in_consist ) {
    0:  switch_is1_motor;
    1:  switch_wagon_flat_4;
        switch_wagon_flat_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_is1_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_is1_motor_p;
    1:  switch_i_flat_p;
    2:  switch_steam_icon;
}

//is1 flat properties

switch (FEAT_ROADVEHS, SELF, switch_length_is1_flat, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_is1_flat, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_is1_flat, position_in_consist ) {
    0:  return VISUAL_EFFECT_STEAM;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_is1_flat, extra_callback_info1) {
    0:  return item_is1_flat;
    1:  return item_is1_flat;
    2:  return item_is1_flat;
    3:  return item_is1_flat;
    4:  return item_is1_flat;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_stv ==1){
item(FEAT_ROADVEHS, item_is1_flat) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_PM_IS1), string(STR_F_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    96;
    running_cost_factor:            96;
    speed:                          50 km/h;
    power:                          120 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1900,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_STEAM;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         30 ton;
    }
// If Earlier First Gen Introduction Year is switched on, change intro date and model life.
if (param_fgei == 2) {
    property {
    introduction_date:              date(1850,01,01); 
    model_life:                     90;
    }
}
graphics {
    cargo_capacity:                 capacity_is1_flat;
    purchase_cargo_capacity:        ((param_capacity*48)/2)/5;
    default:                        switch_spriteset_is1_flat;
    length:                         switch_length_is1_flat;
//  cargo_age_period:               decay_is1_flat;
    running_cost_factor:            switch_c1_runcost;
    purchase_running_cost_factor:   switch_c1_powercost;
    articulated_part:               switch_is1_flat;
    visual_effect:                  smoke_is1_flat;
    purchase:                       switch_purchase_is1_flat;
    cost_factor:                    ((param_buycost*96)/4);
    }
}
}

// ic1 flat graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ic1_flat, position_in_consist ) {
    0:  switch_ic1_motor;
    1:  switch_wagon_flat_4;
        switch_wagon_flat_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ic1_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic1_motor_p;
    1:  switch_i_flat_p;
    2:  switch_fuel_icon;
}

//ic1 flat properties

switch (FEAT_ROADVEHS, SELF, switch_length_ic1_flat, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_ic1_flat, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ic1_flat, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ic1_flat, extra_callback_info1) {
    0:  return item_ic1_flat;
    1:  return item_ic1_flat;
    2:  return item_ic1_flat;
    3:  return item_ic1_flat;
    4:  return item_ic1_flat;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_fftv ==1){
item(FEAT_ROADVEHS, item_ic1_flat) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_YR_IC1), string(STR_F_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    120;
    running_cost_factor:            120;
    speed:                          50 km/h;
    power:                          150 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1930,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         16 ton;
    }
graphics {

    cargo_capacity:                 capacity_ic1_flat;
    purchase_cargo_capacity:        ((param_capacity*48)/2)/5;
    default:                        switch_spriteset_ic1_flat;
    length:                         switch_length_ic1_flat;
//  cargo_age_period:               decay_ic1_flat;
    running_cost_factor:            switch_c2_runcost;
    purchase_running_cost_factor:   switch_c2_powercost;
    articulated_part:               switch_ic1_flat;
    visual_effect:                  smoke_ic1_flat;
    purchase:                       switch_purchase_ic1_flat;
    cost_factor:                    ((param_buycost*120)/4);
    }
}
}

// ic2 flat graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ic2_flat, position_in_consist ) {
    0:  switch_ic2_motor;
    1:  switch_wagon_flat_6;
        switch_wagon_flat_6; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ic2_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic2_motor_p;
    1:  spriteset_i_flat_3_p;
    2:  switch_fuel_icon;
}

//ic2 flat properties

switch (FEAT_ROADVEHS, SELF, switch_length_ic2_flat, position_in_consist) {
    0:  return 3;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_ic2_flat, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*16)/2);
        return ((param_capacity*16)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ic2_flat, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ic2_flat, extra_callback_info1) {
    0:  return item_ic2_flat;
    1:  return item_ic2_flat;
    2:  return item_ic2_flat;
    3:  return item_ic2_flat;
    4:  return item_ic2_flat;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_fftv ==1){
item(FEAT_ROADVEHS, item_ic2_flat) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_AB_IC2), string(STR_F_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    140;
    running_cost_factor:            140;
    speed:                          60 km/h;
    power:                          300 hp;
    cargo_capacity:                 64;
    introduction_date:              date(1950,10,24);
    model_life:                     40;
    vehicle_life:                   50;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }
graphics {

    cargo_capacity:                 capacity_ic2_flat;
    purchase_cargo_capacity:        ((param_capacity*64)/2)/5;
    default:                        switch_spriteset_ic2_flat;
    length:                         switch_length_ic2_flat;
//  cargo_age_period:               decay_ic2_flat;
    running_cost_factor:            switch_c3_runcost;
    purchase_running_cost_factor:   switch_c3_powercost;
    articulated_part:               switch_ic2_flat;
    visual_effect:                  smoke_ic2_flat;
    purchase:                       switch_purchase_ic2_flat;
    cost_factor:                    ((param_buycost*140)/4);
    }
}
}

// ic3 flat graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ic3_flat, position_in_consist ) {
    0:  switch_ic3_motor;
    1:  switch_wagon_flat_6;
        switch_wagon_flat_6; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ic3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ic3_motor_p;
    1:  spriteset_i_flat_4_p;
    2:  switch_hybrid_icon;
}

//ic3 flat properties

switch (FEAT_ROADVEHS, SELF, switch_length_ic3_flat, position_in_consist) {
    0:  return 4;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_ic3_flat, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*16)/2);
        return ((param_capacity*16)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ic3_flat, position_in_consist ) {
    0:  return VISUAL_EFFECT_DIESEL;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ic3_flat, extra_callback_info1) {
    0:  return item_ic3_flat;
    1:  return item_ic3_flat;
    2:  return item_ic3_flat;
    3:  return item_ic3_flat;
    4:  return item_ic3_flat;
    5:  return item_ic3_flat;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_fftv ==1){
item(FEAT_ROADVEHS, item_ic3_flat) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_KM_IC3), string(STR_F_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    160;
    running_cost_factor:            160;
    speed:                          65 km/h;
    power:                          500 hp;
    cargo_capacity:                 80;
    introduction_date:              date(2000,10,24);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    tram_type:                      RAIL;
    visual_effect:                  VISUAL_EFFECT_DIESEL;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         24 ton;
    }
graphics {

    cargo_capacity:                 capacity_ic3_flat;
    purchase_cargo_capacity:        ((param_capacity*80)/2)/6;
    default:                        switch_spriteset_ic3_flat;
    length:                         switch_length_ic3_flat;
//  cargo_age_period:               decay_ic3_flat;
    running_cost_factor:            switch_c3_runcost;
    purchase_running_cost_factor:   switch_c3_powercost;
    articulated_part:               switch_ic3_flat;
    visual_effect:                  smoke_ic3_flat;
    purchase:                       switch_purchase_ic3_flat;
    cost_factor:                    ((param_buycost*160)/4);
    }
}
}

// ie1 flat graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ie1_flat, position_in_consist ) {
    0:  switch_ie1_motor;
    1:  switch_wagon_flat_4;
        switch_wagon_flat_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ie1_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ie1_motor_p;
    1:  switch_i_flat_p;
    2:  switch_wire_icon;
}

//ie1 flat properties

switch (FEAT_ROADVEHS, SELF, switch_length_ie1_flat, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_ie1_flat, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ie1_flat, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ie1_flat, extra_callback_info1) {
    0:  return item_ie1_flat;
    1:  return item_ie1_flat;
    2:  return item_ie1_flat;
    3:  return item_ie1_flat;
    4:  return item_ie1_flat;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_eltv ==1){
item(FEAT_ROADVEHS, item_ie1_flat) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_LC_IE1), string(STR_F_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    110;
    running_cost_factor:            110;
    speed:                          40 km/h;
    power:                          160 hp;
    cargo_capacity:                 48;
    introduction_date:              date(1890,10,24);
    model_life:                     40;
    vehicle_life:                   55;
    reliability_decay:              14;
    tram_type:                      ELRL;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         14 ton;
    }
graphics {

    cargo_capacity:                 capacity_ie1_flat;
    purchase_cargo_capacity:        ((param_capacity*48)/2)/5;
    default:                        switch_spriteset_ie1_flat;
    length:                         switch_length_ie1_flat;
//  cargo_age_period:               decay_ie1_flat;
    running_cost_factor:            switch_e1_runcost;
    purchase_running_cost_factor:   switch_e1_powercost;
    articulated_part:               switch_ie1_flat;
    visual_effect:                  smoke_ie1_flat;
    purchase:                       switch_purchase_ie1_flat;
    cost_factor:                    ((param_buycost*110)/4);
    }
}
}

// ie2 flat graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ie2_flat, position_in_consist ) {
    0:  switch_ie2_motor;
    1:  switch_wagon_flat_4;
        switch_wagon_flat_4; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ie2_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ie2_motor_p;
    1:  switch_i_flat_p;
    2:  switch_wire_icon;
}

//ie2 flat properties

switch (FEAT_ROADVEHS, SELF, switch_length_ie2_flat, position_in_consist) {
    0:  return 3;
    1:  return 4;
        return 4;
}

switch (FEAT_ROADVEHS, SELF, capacity_ie2_flat, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*12)/2);
        return ((param_capacity*12)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ie2_flat, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ie2_flat, extra_callback_info1) {
    0:  return item_ie2_flat;
    1:  return item_ie2_flat;
    2:  return item_ie2_flat;
    3:  return item_ie2_flat;
    4:  return item_ie2_flat;
    5:  return item_ie2_flat;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_eltv ==1){
item(FEAT_ROADVEHS, item_ie2_flat) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_KD_IE2), string(STR_F_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    130;
    running_cost_factor:            130;
    speed:                          50 km/h;
    power:                          240 hp;
    cargo_capacity:                 60;
    introduction_date:              date(1920,10,24);
    model_life:                     40;
    vehicle_life:                   60;
    reliability_decay:              14;
    tram_type:                      ELRL;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         18 ton;
    }
graphics {

    cargo_capacity:                 capacity_ie2_flat;
    purchase_cargo_capacity:        ((param_capacity*60)/2)/6;
    default:                        switch_spriteset_ie2_flat;
    length:                         switch_length_ie2_flat;
//  cargo_age_period:               decay_ie2_flat;
    running_cost_factor:            switch_e2_runcost;
    purchase_running_cost_factor:   switch_e2_powercost;
    articulated_part:               switch_ie2_flat;
    visual_effect:                  smoke_ie2_flat;
    purchase:                       switch_purchase_ie2_flat;
    cost_factor:                    ((param_buycost*110)/4);
    }
}
}

// ie3 flat graphics

switch (FEAT_ROADVEHS, SELF, switch_spriteset_ie3_flat, position_in_consist ) {
    0:  switch_ie3_motor;
    1:  switch_wagon_flat_6;
        switch_wagon_flat_6; //default
}

switch(FEAT_ROADVEHS, SELF, switch_purchase_ie3_flat, [
    STORE_TEMP((getbits(extra_callback_info1, 8, 8) < 2 ? CB_FLAG_MORE_SPRITES : 0) | PALETTE_USE_DEFAULT, 0x100),
    getbits(extra_callback_info1, 8, 8)
    ]) {
    0:  spriteset_ie3_motor_p;
    1:  spriteset_i_flat_4_p;
    2:  switch_wire_icon;
}

//ie3 flat properties

switch (FEAT_ROADVEHS, SELF, switch_length_ie3_flat, position_in_consist) {
    0:  return 4;
    1:  return 6;
        return 6;
}

switch (FEAT_ROADVEHS, SELF, capacity_ie3_flat, position_in_consist ) {
    0:  return 0;
    1:  return ((param_capacity*16)/2);
        return ((param_capacity*16)/2); //default
}

switch (FEAT_ROADVEHS, SELF, smoke_ie3_flat, position_in_consist ) {
    0:  return VISUAL_EFFECT_ELECTRIC;
    1:  return VISUAL_EFFECT_DISABLE;
        return VISUAL_EFFECT_DISABLE; //default
}

//set number of articulated parts
switch (FEAT_ROADVEHS, SELF, switch_ie3_flat, extra_callback_info1) {
    0:  return item_ie3_flat;
    1:  return item_ie3_flat;
    2:  return item_ie3_flat;
    3:  return item_ie3_flat;
    4:  return item_ie3_flat;
    5:  return item_ie3_flat;
    6:  return item_ie3_flat;
        return CB_RESULT_NO_MORE_ARTICULATED_PARTS; //stop adding vehicle parts
}

if (param_htv ==1 && param_eltv ==1){
item(FEAT_ROADVEHS, item_ie3_flat) {
property {
    name:                           string(STR_CONCAT_TRAM, string(STR_MFR_YR_IE3), string(STR_F_ITRAM));
    climates_available:             bitmask(CLIMATE_TEMPERATE, CLIMATE_ARCTIC, CLIMATE_TROPICAL);
    refittable_cargo_classes:       bitmask(CC_OVERSIZED, CC_PIECE_GOODS);
    non_refittable_cargo_classes:   bitmask(CC_PASSENGERS, CC_ARMOURED, CC_EXPRESS, CC_LIQUID, CC_BULK, CC_POWDERIZED, CC_REFRIGERATED);
    cargo_allow_refit:              [FRUT, WOOD, WDPR, BDMT, GOOD];
    cargo_disallow_refit:           [LVST];
    loading_speed:                  20;
    cargo_age_period:               200;
    cost_factor:                    170;
    running_cost_factor:            170;
    speed:                          70 km/h;
    power:                          600 hp;
    cargo_capacity:                 96;
    introduction_date:              date(1970,10,24);
    model_life:                     VEHICLE_NEVER_EXPIRES;
    vehicle_life:                   40;
    reliability_decay:              14;
    tram_type:                      ELRL;
    visual_effect:                  VISUAL_EFFECT_ELECTRIC;
    sprite_id:                      SPRITE_ID_NEW_ROADVEH; //enable new graphics
    misc_flags:                     bitmask(ROADVEH_FLAG_2CC, ROADVEH_FLAG_AUTOREFIT, ROADVEH_FLAG_TRAM, ROADVEH_FLAG_SPRITE_STACK);
    refit_cost:                     0; // Refitting is free
    running_cost_base:              RUNNING_COST_ROADVEH;
    weight:                         20 ton;
    }
graphics {

    cargo_capacity:                 capacity_ie3_flat;
    purchase_cargo_capacity:        ((param_capacity*96)/2)/7;
    default:                        switch_spriteset_ie3_flat;
    length:                         switch_length_ie3_flat;
//  cargo_age_period:               decay_ie3_flat;
    running_cost_factor:            switch_e2_runcost;
    purchase_running_cost_factor:   switch_e2_powercost;
    articulated_part:               switch_ie3_flat;
    visual_effect:                  smoke_ie3_flat;
    purchase:                       switch_purchase_ie3_flat;
    cost_factor:                    ((param_buycost*170)/4);
    }
}
}
